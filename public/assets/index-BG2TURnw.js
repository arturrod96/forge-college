var Yw=Object.defineProperty;var Xw=(t,e,s)=>e in t?Yw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Do=(t,e,s)=>Xw(t,typeof e!="symbol"?e+"":e,s);import{i as Zw,g as Qw,c as xs,r as p,j as n,V as fx,R as mx,A as px,C as gx,X as bs,T as xx,D as bx,P as ej,a as H,b as tj,d as yx,e as sj,f as rj,h as nj,u as je,F as Vr,k as fa,Z as vx,l as Es,m as Bf,n as oi,o as Ll,B as Pc,p as pn,q as ar,U as Rn,s as aj,t as Uf,v as ij,S as bh,w as cr,x as On,y as wx,z as dr,G as Ec,L as we,E as jx,O as po,H as yh,I as go,J as Ea,K as Nx,M as xo,N as vh,Q as kx,W as oj,Y as lj,_ as cj,$ as Sx,a0 as dj,a1 as _x,a2 as uj,a3 as Cx,a4 as Tx,a5 as Px,a6 as Ex,a7 as bo,a8 as Ax,a9 as Ac,aa as Lx,ab as Rx,ac as hj,ad as fj,ae as Ox,af as Mx,ag as Ix,ah as Lc,ai as mj,aj as pj,ak as Dx,al as Lt,am as gn,an as yo,ao as $x,ap as gj,aq as vo,ar as Fx,as as xj,at as zx,au as bj,av as Bx,aw as yj,ax as Ux,ay as Vx,az as vj,aA as wj,aB as Hx,aC as jj,aD as Nj,aE as Rl,aF as wh,aG as li,aH as wo,aI as Ti,aJ as Wx,aK as qx,aL as Kx,aM as kj,aN as Sj,aO as jh,aP as _j,aQ as tu,aR as Cj,aS as Tj,aT as Gx,aU as Jx,aV as Pj,aW as Ol,aX as Yx,aY as Ej,aZ as Rc,a_ as Aj,a$ as Ht,b0 as Lj,b1 as $e,b2 as Xe,b3 as Nn,b4 as Xx,b5 as Rj,b6 as Vf,b7 as Oj,b8 as Mj,b9 as Zx,ba as is,bb as hl,bc as Ij,bd as Dj,be as $j,bf as Fj,bg as Qx,bh as zj,bi as Bj,bj as Uj,bk as Pi,bl as Oc,bm as Vj,bn as eb,bo as Hj,bp as Hf,bq as tt,br as tb,bs as Wj,bt as qj,bu as Kj,bv as sb,bw as rb,bx as Nh,by as Gj,bz as Jj,bA as Yj,bB as nb,bC as Xj,bD as Zj,bE as su,bF as id,bG as Qj,bH as eN,bI as tN,bJ as sN,bK as ab,bL as rN,bM as ib,bN as nN,bO as ob,bP as lb,bQ as cb,bR as db,bS as ub,bT as aN,bU as Mn,bV as iN,bW as oN,bX as hb,bY as fb,bZ as mb,b_ as lN,b$ as Aa,c0 as La,c1 as Ra,c2 as Wt,c3 as ma,c4 as ft,c5 as Oa,c6 as kn,c7 as pa,c8 as ys,c9 as Ls,ca as xn,cb as ru,cc as Ei,cd as pb,ce as cN,cf as gb,cg as kh,ch as dN,ci as uN,cj as hN,ck as fN,cl as mN,cm as xb,cn as vs,co as Wf,cp as nu,cq as pN,cr as gN,cs as bb,ct as xN,cu as bN,cv as yN,cw as qf,cx as yb,cy as Ai,cz as Mc,cA as vN,cB as wN,cC as jN,cD as NN,cE as kN,cF as SN,cG as _N,cH as CN,cI as TN,cJ as PN,cK as EN,cL as AN,cM as LN,cN as RN,cO as ON,cP as MN,cQ as IN,cR as DN,cS as $N,cT as FN,cU as zN,cV as BN,cW as UN,cX as VN,cY as HN,cZ as WN,c_ as qN,c$ as KN,d0 as GN,d1 as vb,d2 as wb,d3 as ci,d4 as Kf,d5 as JN,d6 as YN,d7 as XN,d8 as Ee,d9 as ZN,da as QN,db as e1,dc as t1,dd as s1}from"./vendor-DupA2D9C.js";import"./ui-BA32w1ww.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();const ve=t=>typeof t=="string",Wa=()=>{let t,e;const s=new Promise((r,a)=>{t=r,e=a});return s.resolve=t,s.reject=e,s},Gf=t=>t==null?"":""+t,r1=(t,e,s)=>{t.forEach(r=>{e[r]&&(s[r]=e[r])})},n1=/###/g,Jf=t=>t&&t.indexOf("###")>-1?t.replace(n1,"."):t,Yf=t=>!t||ve(t),di=(t,e,s)=>{const r=ve(e)?e.split("."):e;let a=0;for(;a<r.length-1;){if(Yf(t))return{};const i=Jf(r[a]);!t[i]&&s&&(t[i]=new s),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++a}return Yf(t)?{}:{obj:t,k:Jf(r[a])}},Xf=(t,e,s)=>{const{obj:r,k:a}=di(t,e,Object);if(r!==void 0||e.length===1){r[a]=s;return}let i=e[e.length-1],o=e.slice(0,e.length-1),l=di(t,o,Object);for(;l.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),l=di(t,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=s},a1=(t,e,s,r)=>{const{obj:a,k:i}=di(t,e,Object);a[i]=a[i]||[],a[i].push(s)},Ml=(t,e)=>{const{obj:s,k:r}=di(t,e);if(s)return s[r]},i1=(t,e,s)=>{const r=Ml(t,s);return r!==void 0?r:Ml(e,s)},jb=(t,e,s)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ve(t[r])||t[r]instanceof String||ve(e[r])||e[r]instanceof String?s&&(t[r]=e[r]):jb(t[r],e[r],s):t[r]=e[r]);return t},Vn=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var o1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const l1=t=>ve(t)?t.replace(/[&<>"'\/]/g,e=>o1[e]):t;class c1{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const d1=[" ",",","?","!",";"],u1=new c1(20),h1=(t,e,s)=>{e=e||"",s=s||"";const r=d1.filter(o=>e.indexOf(o)<0&&s.indexOf(o)<0);if(r.length===0)return!0;const a=u1.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(s);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i},au=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(s);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,l="";for(let c=i;c<r.length;++c)if(c!==i&&(l+=s),l+=r[c],o=a[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}a=o}return a},Il=t=>t&&t.replace("_","-"),f1={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Dl{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,s)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=e||f1,this.options=s,this.debug=s.debug}log(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return this.forward(s,"log","",!0)}warn(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return this.forward(s,"warn","",!0)}error(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return this.forward(s,"error","")}deprecate(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,r,a){return a&&!this.debug?null:(ve(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new Dl(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Dl(this.logger,e)}}var Bs=new Dl;let Ic=class{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(s)||0;this.observers[r].set(s,a+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,c]=o;for(let d=0;d<c;d++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,c]=o;for(let d=0;d<c;d++)l.apply(l,[e,...r])})}};class Zf extends Ic{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,s],r&&(Array.isArray(r)?l.push(...r):ve(r)&&i?l.push(...r.split(i)):l.push(r)));const c=Ml(this.data,l);return!c&&!s&&!r&&e.indexOf(".")>-1&&(e=l[0],s=l[1],r=l.slice(2).join(".")),c||!o||!ve(r)?c:au(this.data&&this.data[e]&&this.data[e][s],r,i)}addResource(e,s,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,s];r&&(l=l.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(l=e.split("."),a=s,s=l[1]),this.addNamespaces(s),Xf(this.data,l,a),i.silent||this.emit("added",e,s,r,a)}addResources(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ve(r[i])||Array.isArray(r[i]))&&this.addResource(e,s,i,r[i],{silent:!0});a.silent||this.emit("added",e,s,r)}addResourceBundle(e,s,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,s];e.indexOf(".")>-1&&(l=e.split("."),a=r,r=s,s=l[1]),this.addNamespaces(s);let c=Ml(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?jb(c,r,i):c={...c,...r},Xf(this.data,l,c),o.silent||this.emit("added",e,s,r)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,s)}:this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(a=>s[a]&&Object.keys(s[a]).length>0)}toJSON(){return this.data}}var Nb={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,s,r,a))}),e}};const Qf={};class $l extends Ic{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),r1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Bs.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,s);return r&&r.res!==void 0}extractFromKey(e,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=s.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!h1(e,r,a);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:ve(i)?[i]:i};const d=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(a)}return{key:e,namespaces:ve(i)?[i]:i}}translate(e,s,r){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],s),c=l[l.length-1],d=s.lng||this.language,u=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(u){const S=s.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${S}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${S}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:o}const h=this.resolve(e,s);let f=h&&h.res;const m=h&&h.usedKey||o,x=h&&h.exactUsedKey||o,g=Object.prototype.toString.apply(f),b=["[object Number]","[object Function]","[object RegExp]"],y=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,N=!ve(f)&&typeof f!="boolean"&&typeof f!="number";if(w&&f&&N&&b.indexOf(g)<0&&!(ve(y)&&Array.isArray(f))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,f,{...s,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(h.res=S,h.usedParams=this.getUsedParamsDetails(s),h):S}if(i){const S=Array.isArray(f),k=S?[]:{},j=S?x:m;for(const v in f)if(Object.prototype.hasOwnProperty.call(f,v)){const _=`${j}${i}${v}`;k[v]=this.translate(_,{...s,joinArrays:!1,ns:l}),k[v]===_&&(k[v]=f[v])}f=k}}else if(w&&ve(y)&&Array.isArray(f))f=f.join(y),f&&(f=this.extendTranslation(f,e,s,r));else{let S=!1,k=!1;const j=s.count!==void 0&&!ve(s.count),v=$l.hasDefaultValue(s),_=j?this.pluralResolver.getSuffix(d,s.count,s):"",E=s.ordinal&&j?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",R=j&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),z=R&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${_}`]||s[`defaultValue${E}`]||s.defaultValue;!this.isValidLookup(f)&&v&&(S=!0,f=z),this.isValidLookup(f)||(k=!0,f=o);const L=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:f,U=v&&z!==f&&this.options.updateMissing;if(k||S||U){if(this.logger.log(U?"updateKey":"missingKey",d,c,o,U?z:f),i){const O=this.resolve(o,{...s,keySeparator:!1});O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let J=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let O=0;O<Y.length;O++)J.push(Y[O]);else this.options.saveMissingTo==="all"?J=this.languageUtils.toResolveHierarchy(s.lng||this.language):J.push(s.lng||this.language);const I=(O,D,W)=>{const C=v&&W!==f?W:L;this.options.missingKeyHandler?this.options.missingKeyHandler(O,c,D,C,U,s):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(O,c,D,C,U,s),this.emit("missingKey",O,c,D,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?J.forEach(O=>{const D=this.pluralResolver.getSuffixes(O,s);R&&s[`defaultValue${this.options.pluralSeparator}zero`]&&D.indexOf(`${this.options.pluralSeparator}zero`)<0&&D.push(`${this.options.pluralSeparator}zero`),D.forEach(W=>{I([O],o+W,s[`defaultValue${W}`]||z)})}):I(J,o,z))}f=this.extendTranslation(f,e,s,h,r),k&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${o}`),(k||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,S?f:void 0):f=this.options.parseMissingKeyHandler(f))}return a?(h.res=f,h.usedParams=this.getUsedParamsDetails(s),h):f}extendTranslation(e,s,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=ve(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let h=r.replace&&!ve(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||a.usedLng,r),d){const f=e.match(this.interpolator.nestingRegexp),m=f&&f.length;u<m&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=this.language||a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,m=new Array(f),x=0;x<f;x++)m[x]=arguments[x];return i&&i[0]===m[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${s[0]}`),null):o.translate(...m,s)},r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,c=ve(l)?[l]:l;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=Nb.handle(c,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,l;return ve(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,s),u=d.key;a=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=s.count!==void 0&&!ve(s.count),m=f&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),x=s.context!==void 0&&(ve(s.context)||typeof s.context=="number")&&s.context!=="",g=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);h.forEach(b=>{this.isValidLookup(r)||(l=b,!Qf[`${g[0]}-${b}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(Qf[`${g[0]}-${b}`]=!0,this.logger.warn(`key "${a}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(r))return;o=y;const w=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(w,u,y,b,s);else{let S;f&&(S=this.pluralResolver.getSuffix(y,s.count,s));const k=`${this.options.pluralSeparator}zero`,j=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(w.push(u+S),s.ordinal&&S.indexOf(j)===0&&w.push(u+S.replace(j,this.options.pluralSeparator)),m&&w.push(u+k)),x){const v=`${u}${this.options.contextSeparator}${s.context}`;w.push(v),f&&(w.push(v+S),s.ordinal&&S.indexOf(j)===0&&w.push(v+S.replace(j,this.options.pluralSeparator)),m&&w.push(v+k))}}let N;for(;N=w.pop();)this.isValidLookup(r)||(i=N,r=this.getResource(y,b,N,s))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,s,r,a):this.resourceStore.getResource(e,s,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ve(e.replace);let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of s)delete a[i]}return a}static hasDefaultValue(e){const s="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&s===r.substring(0,s.length)&&e[r]!==void 0)return!0;return!1}}const od=t=>t.charAt(0).toUpperCase()+t.slice(1);class em{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Bs.create("languageUtils")}getScriptPartFromCode(e){if(e=Il(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=Il(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(ve(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let a=Intl.getCanonicalLocales(e)[0];if(a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a)return a}catch{}const s=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),s.indexOf(r[1].toLowerCase())>-1&&(r[1]=od(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),s.indexOf(r[1].toLowerCase())>-1&&(r[1]=od(r[1].toLowerCase())),s.indexOf(r[2].toLowerCase())>-1&&(r[2]=od(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(r=>{if(s)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(s=a)}),!s&&this.options.supportedLngs&&e.forEach(r=>{if(s)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),ve(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let r=e[s];return r||(r=e[this.getScriptPartFromCode(s)]),r||(r=e[this.formatLanguageCode(s)]),r||(r=e[this.getLanguagePartFromCode(s)]),r||(r=e.default),r||[]}toResolveHierarchy(e,s){const r=this.getFallbackCodes(s||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ve(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let m1=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],p1={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const g1=["v1","v2","v3"],x1=["v4"],tm={zero:0,one:1,two:2,few:3,many:4,other:5},b1=()=>{const t={};return m1.forEach(e=>{e.lngs.forEach(s=>{t[s]={numbers:e.nr,plurals:p1[e.fc]}})}),t};class y1{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=s,this.logger=Bs.create("pluralResolver"),(!this.options.compatibilityJSON||x1.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=b1(),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Il(e==="dev"?"en":e),a=s.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:a})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,s)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,s);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${s}${a}`)}getSuffixes(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,s);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>tm[a]-tm[i]).map(a=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,s)):[]}getSuffix(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(s)}`:this.getSuffixRetroCompatible(a,s):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,s){const r=e.noAbs?e.plurals(s):e.plurals(Math.abs(s));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!g1.includes(this.options.compatibilityJSON)}}const sm=function(t,e,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=i1(t,e,s);return!i&&a&&ve(s)&&(i=au(t,s,r),i===void 0&&(i=au(e,s,r))),i},ld=t=>t.replace(/\$/g,"$$$$");class v1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Bs.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(s=>s),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:r,useRawValueToEscape:a,prefix:i,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:x,nestingSuffixEscaped:g,nestingOptionsSeparator:b,maxReplaces:y,alwaysFormat:w}=e.interpolation;this.escape=s!==void 0?s:l1,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Vn(i):o||"{{",this.suffix=l?Vn(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?Vn(f):m||Vn("$t("),this.nestingSuffix=x?Vn(x):g||Vn(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=y||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,r)=>s&&s.source===r?(s.lastIndex=0,s):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,s,r,a){let i,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=m=>{if(m.indexOf(this.formatSeparator)<0){const y=sm(s,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...a,...s,interpolationkey:m}):y}const x=m.split(this.formatSeparator),g=x.shift().trim(),b=x.join(this.formatSeparator).trim();return this.format(sm(s,c,g,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...a,...s,interpolationkey:g})};this.resetRegExp();const u=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,h=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>ld(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?ld(this.escape(m)):ld(m)}].forEach(m=>{for(l=0;i=m.regex.exec(e);){const x=i[1].trim();if(o=d(x),o===void 0)if(typeof u=="function"){const b=u(e,i,a);o=ve(b)?b:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!ve(o)&&!this.useRawValueToEscape&&(o=Gf(o));const g=m.safeValue(o);if(e=e.replace(i[0],g),h?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;const l=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,o);const m=f.match(/'/g),x=f.match(/"/g);(m&&m.length%2===0&&!x||x.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),d&&(o={...d,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${u}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!ve(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const u=a[1].split(this.formatSeparator).map(h=>h.trim());a[1]=u.shift(),c=u,d=!0}if(i=s(l.call(this,a[1].trim(),o),o),i&&a[0]===e&&!ve(i))return i;ve(i)||(i=Gf(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((u,h)=>this.format(u,h,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const w1=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?s.currency||(s.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?s.range||(s.range=a.trim()):a.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=l.trim();s[u]||(s[u]=d),d==="false"&&(s[u]=!1),d==="true"&&(s[u]=!0),isNaN(d)||(s[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:s}},Hn=t=>{const e={};return(s,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const o=r+JSON.stringify(i);let l=e[o];return l||(l=t(Il(r),a),e[o]=l),l(s)}};class j1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Bs.create("formatter"),this.options=e,this.formats={number:Hn((s,r)=>{const a=new Intl.NumberFormat(s,{...r});return i=>a.format(i)}),currency:Hn((s,r)=>{const a=new Intl.NumberFormat(s,{...r,style:"currency"});return i=>a.format(i)}),datetime:Hn((s,r)=>{const a=new Intl.DateTimeFormat(s,{...r});return i=>a.format(i)}),relativetime:Hn((s,r)=>{const a=new Intl.RelativeTimeFormat(s,{...r});return i=>a.format(i,r.range||"day")}),list:Hn((s,r)=>{const a=new Intl.ListFormat(s,{...r});return i=>a.format(i)})},this.init(e)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=s.interpolation.formatSeparator||","}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=Hn(s)}format(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:d,formatOptions:u}=w1(c);if(this.formats[d]){let h=l;try{const f=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},m=f.locale||f.lng||a.locale||a.lng||r;h=this.formats[d](l,m,{...u,...a,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${d}`);return l},e)}}const N1=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class k1 extends Ic{constructor(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=Bs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,s,r,a){const i={},o={},l={},c={};return e.forEach(d=>{let u=!0;s.forEach(h=>{const f=`${d}|${h}`;!r.reload&&this.store.hasResourceBundle(d,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,u=!1,o[f]===void 0&&(o[f]=!0),i[f]===void 0&&(i[f]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(l[d]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,s,r){const a=e.split("|"),i=a[0],o=a[1];s&&this.emit("failedLoading",i,o,s),!s&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{a1(c.loaded,[i],o),N1(c,e),s&&c.errors.push(s),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{l[d][h]===void 0&&(l[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const l=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,r,a+1,i*2,o)},i);return}o(d,u)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(e,s);d&&typeof d.then=="function"?d.then(u=>l(null,u)).catch(l):l(null,d)}catch(d){l(d)}return}return c(e,s,l)}prepareLoading(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ve(s)&&(s=[s]);const i=this.queueLoad(e,s,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,s,r){this.prepareLoading(e,s,{},r)}reload(e,s,r){this.prepareLoading(e,s,{reload:!0},r)}loadOne(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${s}loading namespace ${i} for language ${a} failed`,o),!o&&l&&this.logger.log(`${s}loaded namespace ${i} for language ${a}`,l),this.loaded(e,o,l)})}saveMissing(e,s,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(e,s,r,a,c):u=d(e,s,r,a),u&&typeof u.then=="function"?u.then(h=>l(null,h)).catch(l):l(null,u)}catch(u){l(u)}else d(e,s,r,a,l,c)}!e||!e[0]||this.store.addResource(e[0],s,r,a)}}}const rm=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ve(t[1])&&(e.defaultValue=t[1]),ve(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(r=>{e[r]=s[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),nm=t=>(ve(t.ns)&&(t.ns=[t.ns]),ve(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ve(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),$o=()=>{},S1=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class Li extends Ic{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=nm(e),this.services={},this.logger=Bs,this.modules={external:[]},S1(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(){var e=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof s=="function"&&(r=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(ve(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const a=rm();this.options={...a,...this.options,...nm(s)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Bs.init(i(this.modules.logger),this.options):Bs.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=j1);const h=new em(this.options);this.store=new Zf(this.options.resources,this.options);const f=this.services;f.logger=Bs,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new y1(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(f.formatter=i(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new v1(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new k1(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(m){for(var x=arguments.length,g=new Array(x>1?x-1:0),b=1;b<x;b++)g[b-1]=arguments[b];e.emit(m,...g)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new $l(this.services,this.options),this.translator.on("*",function(m){for(var x=arguments.length,g=new Array(x>1?x-1:0),b=1;b<x;b++)g[b-1]=arguments[b];e.emit(m,...g)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,r||(r=$o),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const c=Wa(),d=()=>{const u=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),r(h,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$o;const a=ve(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};a?o(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,s,r){const a=Wa();return typeof e=="function"&&(r=e,e=void 0),typeof s=="function"&&(r=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),r||(r=$o),this.services.backendConnector.reload(e,s,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Nb.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,s){var r=this;this.isLanguageChangingTo=e;const a=Wa();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),s&&s(c,function(){return r.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=ve(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,u=>{o(u,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),a}getFixedT(e,s,r){var a=this;const i=function(o,l){let c;if(typeof l!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),h=2;h<d;h++)u[h-2]=arguments[h];c=a.options.overloadTranslationOptionHandler([o,l].concat(u))}else c={...l};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const f=a.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(x=>`${c.keyPrefix}${f}${x}`):m=c.keyPrefix?`${c.keyPrefix}${f}${o}`:o,a.t(m,c)};return ve(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(s.precheck){const l=s.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,s){const r=Wa();return this.options.ns?(ve(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),s&&s(a)}),r):(s&&s(),Promise.resolve())}loadLanguages(e,s){const r=Wa();ve(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),s&&s(o)}),r):(s&&s(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new em(rm());return s.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new Li(e,s)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$o;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Li(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new Zf(this.store.data,a),i.services.resourceStore=i.store),i.translator=new $l(i.services,a),i.translator.on("*",function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];i.emit(l,...d)}),i.init(a,s),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _t=Li.createInstance();_t.createInstance=Li.createInstance;_t.createInstance;_t.dir;_t.init;_t.loadResources;_t.reloadResources;_t.use;_t.changeLanguage;_t.getFixedT;_t.t;_t.exists;_t.setDefaultNamespace;_t.hasLoadedNamespace;_t.loadNamespaces;_t.loadLanguages;const _1={buttons:{login:"Login",signIn:"Sign In",signUp:"Sign Up",cancel:"Cancel",delete:"Delete",save:"Save Changes",saving:"Saving...",loading:"Loading...",submit:"Submit",tryAgain:"Try Again",continue:"Continue",continueLearning:"Continue learning",send:"Send",edit:"Edit",create:"Create",update:"Update",close:"Close",next:"Next",previous:"Previous",testConnection:"Test Connection",testing:"Testing..."},labels:{email:"Email",password:"Password",confirmPassword:"Confirm Password",fullName:"Full Name",country:"Country",city:"City",languages:"Languages",language:"Language",user:"User"},placeholders:{email:"m@example.com",emailDemo:"demo@example.com",enterFullName:"Enter your full name",selectCountry:"Select your country",enterCity:"Enter your city",typeLanguage:"Type a language and press Enter"},countries:{brazil:"Brazil",unitedStates:"United States",canada:"Canada",unitedKingdom:"United Kingdom",germany:"Germany",france:"France",spain:"Spain",italy:"Italy",netherlands:"Netherlands",sweden:"Sweden",norway:"Norway",denmark:"Denmark",finland:"Finland",switzerland:"Switzerland",austria:"Austria",belgium:"Belgium",portugal:"Portugal",ireland:"Ireland",australia:"Australia",newZealand:"New Zealand",japan:"Japan",southKorea:"South Korea",singapore:"Singapore",india:"India",china:"China",mexico:"Mexico",argentina:"Argentina",chile:"Chile",colombia:"Colombia",peru:"Peru",uruguay:"Uruguay",paraguay:"Paraguay",venezuela:"Venezuela",ecuador:"Ecuador",bolivia:"Bolivia",guyana:"Guyana",suriname:"Suriname",frenchGuiana:"French Guiana"},errors:{required:"This field is required",invalidUrl:"Please enter a valid URL",networkError:"Network connection error. Please check your internet connection and try again.",unexpectedError:"An unexpected error occurred. Please try again."}},C1={forProfessionals:"For Professionals",forCompanies:"For Companies",forInvestors:"For Investors",dashboard:"Dashboard",education:"Education",formations:"Formations",learningPaths:"Learning Paths",courses:"Courses",paths:"Learning Path",admin:"Admin",scoreboard:"Scoreboard",achievements:"Achievements",ambassadors:"Ambassadors",communityProjects:"Community Projects",learn:"Learn",course:"Course",path:"Path",myProfile:"My Profile",page:"Page"},T1={title:"Learning Paths",subtitle:"Browse and explore all available learning paths",emptyNoMatch:"No learning paths match your filters",emptyNoData:"No learning paths available"},P1={title:"Courses",subtitle:"Browse and explore all available courses",modules_one:"{{count}} module",modules_other:"{{count}} modules",modulesLabel:"Modules:",moreModules:"+{{count}} more modules",startCourse:"Start Course",descriptionFallback:"Explore this course to enhance your skills",leaving:"Leaving...",leave:"Leave",onWaitlist:"On Waitlist",notifyMe:"Notify Me",joining:"Joining...",emptyNoData:"No courses available",emptyNoDataDescription:"Start exploring our courses soon!",emptyNoResults:"No courses found",emptyNoMatch:'No courses match "{{term}}"'},E1={title:"Formations",subtitle:"Comprehensive learning programs designed to advance your career",paths_one:"{{count}} path",paths_other:"{{count}} paths",learningPathsLabel:"Learning Paths:",morePaths:"+{{count}} more paths",viewFormation:"View Formation",startPath:"Start Path",emptyNoData:"No formations available",emptyNoDataDescription:"Comprehensive learning programs will be available soon. Check back later!",emptyNoResults:"No formations found",emptyNoMatch:'No formations match "{{term}}"',emptyNoFilters:"No formations match the selected filters"},A1={backToFormations:"Back to formations",loadError:"We could not load this formation.",descriptionFallback:"Explore the curated learning paths included in this formation.",learningPathsCount:"{{count}} learning paths",onWaitingList:"on waiting list",createdAgo:"Created {{date}}",publishedAgo:"Published {{date}}",addedToWaitlist:"You have been added to the waiting list for this formation",alreadyOnWaitlist:"You are already on the waiting list for this formation",mustLoginToJoinWaitlist:"You need to be logged in to join the waiting list",joinWaitlistFailed:"Failed to join waiting list",onWaitlist:"You are on the waiting list",joining:"Joining...",joinWaitlist:"Join the waiting list",signInToJoin:"Sign in to join",mustSignInToJoinWaitlist:"You must be signed in to join the waiting list.",notifyWhenOpen:"We will notify you as soon as this formation opens for enrollment.",pathsComingSoon:"Paths coming soon",includedPaths:"Included learning paths",pathsAddedSoon:"Learning paths will be added to this formation soon.",notYetPublished:"Not yet published",startLearning:"Start learning",viewPath:"View path"},L1={formations:"Search formations...",courses:"Search courses...",learningPaths:"Search learning paths..."},R1={title:"Filters",clearAll:"Clear all",status:"Status",progress:"Progress",sort:"Sort",sortBy:"Sort by:",statusOptions:{all:"All",available:"Available",coming_soon:"Coming Soon",draft:"Draft"},progressOptions:{not_started:"Not Started",in_progress:"Enrolled",completed:"Completed"},sortOptions:{recent:"Most Recent",alphabetical:"Alphabetical",path_order:"Path Order",course_order:"Course Order",module_order:"Module Order"}},O1={betaPromo:{message:"We are currently in beta, expect rapid updates "}},M1={login:{title:"Login",submit:"Login",ssoGoogle:"Continue with Google",ssoGithub:"Continue with GitHub",orContinueWith:"Or continue with",dontHaveAccount:"Don't have an account?",forgotPassword:"Forgot your password?",errors:{invalidCredentials:"Invalid email or password. Please check your credentials and try again.",emailNotConfirmed:"Please check your email and click the confirmation link before signing in.",tooManyAttempts:"Too many login attempts. Please wait a moment before trying again.",configError:"Authentication service configuration error. Using demo mode - try email: demo@example.com, password: demo123",authServiceError:"Authentication service error. The Supabase instance may be misconfigured.",cannotConnect:"Cannot connect to authentication service. Please check if Supabase is properly configured.",googleFailed:"Google sign-in failed. Please try again.",githubFailed:"GitHub sign-in failed. Please try again."}},signup:{title:"Create Account",submit:"Sign Up",alreadyHaveAccount:"Already have an account?",passwordMismatch:"Passwords do not match",success:"Check your email for the confirmation link!",notConfigured:"Authentication service not configured. Please contact the administrator."},forgotPassword:{title:"Forgot Password",submit:"Send Reset Link",rememberedPassword:"Remembered your password?"},updatePassword:{title:"Update Password",success:"Password updated successfully! Redirecting to login..."},logout:{button:"Log Out",signingOut:"Signing out..."}},I1={title:"My Profile",subtitle:"Manage your personal and professional information",unsavedChanges:"You have unsaved changes",loadingProfile:"Loading profile...",failedToLoad:"Failed to load profile",sections:{personal:"Personal Information",personalDesc:"Update your basic personal details and contact information",professional:"Professional Profile",professionalDesc:"Share your work experience, skills, and career information",learning:"Learning Progress",learningDesc:"Track your learning journey and achievements",career:"Career Preferences",careerDesc:"Set your job preferences and career goals"},fields:{yearsExperience:"Years of Experience in Technology",yearsExperiencePlaceholder:"0",positionCompany:"Position & Company",positionPlaceholder:"e.g., Senior Backend @ ACME",stacksDominated:"Stacks Dominated",stacksDesc:"Technologies you're proficient in",stacksPlaceholder:"e.g., Java, Python, Solidity, React",skillsToDevelop:"Skills to Develop",skillsDesc:"Areas you want to improve",skillsPlaceholder:"e.g., DeFi, Smart Contracts, Web3",linkedinUrl:"LinkedIn URL",linkedinPlaceholder:"https://linkedin.com/in/username",githubUrl:"GitHub URL",githubPlaceholder:"https://github.com/username",languagePreference:"Language Preference",selectLanguage:"Select your preferred language"},languageOptions:{enUS:"English (US)",ptBR:"Portuguese (BR)"},sidebar:{localeTitle:"App language",localeDescription:"Choose the language used in the interface.",localePlaceholder:"Select a language",anonymousUser:"Guest user"},errors:{fullNameRequired:"Full name is required",countryRequired:"Country is required",invalidLinkedin:"Please enter a valid LinkedIn URL",invalidGithub:"Please enter a valid GitHub URL"},messages:{emailNote:"Email can only be changed in your account settings",validationError:"Please fix the errors before saving.",updateSuccess:"Profile updated successfully!",updateError:"Failed to update profile. Please try again."},comingSoon:{title:"Coming Soon",learning:"Learning progress tracking will be available in the next update.",career:"Career preferences will be available in the next update."}},D1={myAccount:"My Account",profile:"Profile",admin:"Admin",connectWallet:"Connect Wallet"},$1={layout:{openMenu:"Open menu",loading:"Loading dashboard..."},sidebar:{localeTitle:"Language",localeDescription:"Choose how the interface is translated.",localePlaceholder:"Select language"},welcomeBack:"Welcome back",loading:"Loading...",notFound:"Not found",readMore:"Read more",readLess:"Read less",enrollToStart:"Enroll to start",enroll:"Enroll",enrolling:"Enrolling...",enrolled:"Enrolled",viewDetails:"View Details",mustLoginToEnroll:"You must be logged in to enroll",enrollSuccess:"Successfully enrolled!",enrollError:"Failed to enroll",loadError:"Failed to load",nothingToContinue:"Nothing to continue right now.",emptyTitle:"No paths yet",emptySubtitle:"Enroll in a path to get started",progressSuffix:"complete",home:{badge:"Welcome back",headlineSuffix:", ready to continue your journey?",exploreCta:"View all learning paths",viewAllFormations:"View all formations",formationsTooltip:"Formations are comprehensive learning programs that group multiple learning paths together, designed to advance your career in a specific field or technology.",learningPathTooltip:"Learning paths are structured sequences of courses that guide you through a specific topic or skill, from beginner to advanced levels.",coursesTooltip:"Courses are individual learning units that cover specific topics or skills. They are organized into modules and lessons, and can be part of learning paths or formations."},continueLearning:{title:"Pick up where you left off",subtitle:"You were studying:",ariaLabel:"Continue learning {{course}}",empty:{title:"No recent learning activity",description:"Enroll in a path or start a course to see your progress here."}},availablePaths:{enrolledBadge:"Enrolled",courses_one:"{{count}} course",courses_other:"{{count}} courses",viewPath:"View path",coursesLabel:"Courses:",moreCourses:"+{{count}} more courses"},learningHabits:{title:"Study habits",currentStreak:"Current streak",dayCount_one:"{{count}} day",dayCount_other:"{{count}} days",keepGoing:"Keep it going daily",weeklyGoal:"Weekly goal",weekProgress:"{{completed}}/{{goal}} lessons",completions_one:"{{count}} completion",completions_other:"{{count}} completions",loadError:"Failed to load learning habits"},userStats:{totalXp:"Total XP",completedLessons:"Completed lessons",activePaths:"Active paths",studyTime:"Study time",studyTimeValue:"{{minutes}} min",errors:{loadProgress:"Failed to load user progress",loadLessons:"Failed to load lessons"}},myLearningPaths:{emptyTitle:"You are not enrolled in any path yet.",emptySubtitle:"Explore available paths and enroll to get started.",progressLabel:"{{progress}}% complete"},pathOverview:{badge:"Path",notFound:"Learning path not found.",continue:"Continue",courses:"Courses"},errors:{notAuthenticated:"Not authenticated",failedToEnroll:"Failed to enroll"}},F1={selectToBegin:"Select a lesson to begin.",lessonInfo:"Lesson {{current}} of {{total}}  {{xp}} XP",unsupportedType:"Unsupported lesson type: {{type}}",types:{video:"Video",text:"Reading",quiz:"Quiz"},previousLesson:"Previous lesson",complete:"Complete",completed:"Completed",unmark:"Unmark",unmarked:"Progress unchecked",completeAndContinue:"Complete and Continue",markAsCompleted:"Mark as Completed",submitAnswer:"Submit Answer",loginToTrack:"You need to be logged in to track progress",progressSaveFailed:"Failed to save progress",lessonCompleted:"Lesson marked as completed!",completionError:"Error marking lesson as completed"},z1={layout:{kicker:"Admin",title:"Content Management",subtitle:"Create, organize, and publish learning experiences for the community.",nav:{overview:"Overview",paths:"Learning Paths",courses:"Courses",modules:"Modules",lessons:"Lessons",projects:"Projects"}},paths:{title:"Learning Paths",new:"New learning path",edit:"Edit learning path",delete:"Delete learning path",deleteConfirm:'This action cannot be undone. Deleting a path will remove all associated courses, modules, and lessons. Make sure you really want to remove "{{title}}".',created:"Learning path created",updated:"Learning path updated",deleted:"Learning path deleted",labels:{title:"Title",slug:"Slug",description:"Description",status:"Status",formation:"Formation",order:"Order within Formation",publishImmediately:"Publish immediately"},placeholders:{title:"e.g. Blockchain Fundamentals",slug:"blockchain-fundamentals",description:"Summarize the journey learners will experience.",formation:"Select a formation (optional)",order:"1"},descriptions:{publishImmediately:"The path is visible to all enrolled learners.",formation:"Choose which formation this path belongs to"},validation:{titleMin:"Title must have at least 3 characters",slugMin:"Slug must have at least 3 characters",slugFormat:"Slug must be lowercase with hyphens only"}},courses:{title:"Courses",new:"New course",edit:"Edit course",delete:"Delete course",deleteConfirm:'This action cannot be undone. Make sure you really want to remove "{{title}}".',created:"Course created",updated:"Course updated",deleted:"Course deleted"},modules:{title:"Modules",new:"New module",edit:"Edit module",delete:"Delete module",deleteConfirm:'This action cannot be undone. Make sure you really want to remove "{{title}}".',created:"Module created",updated:"Module updated",deleted:"Module deleted"},lessons:{title:"Lessons",new:"New lesson",edit:"Edit lesson",delete:"Delete lesson",deleteConfirm:'This action cannot be undone. Make sure you really want to remove "{{title}}".',created:"Lesson created",updated:"Lesson updated",deleted:"Lesson deleted"},projects:{title:"Projects",subtitle:"Link projects to modules to reinforce applied learning at the end of each module.",actions:{newProject:"New project"},filters:{modulePlaceholder:"Filter by module",allModules:"All modules"},loading:"Loading projects...",emptyState:"No projects found for the current filters.",unassignedModule:"Unassigned module",labels:{course:"Course: {{course}}",projectNumber:"Project #{{number}}",inactive:"Inactive",xpValue:"XP {{xp}}"},markdown:{loading:"Loading editor...",ariaLabel:"Markdown editor"},dialog:{editTitle:"Edit project",createTitle:"Create project",description:"Provide details and expectations for the module project."},form:{module:"Module",modulePlaceholder:"Select a module",title:"Title",titlePlaceholder:"Project title",description:"Project description",descriptionPlaceholder:"Describe the project goals, deliverables, and any resources students should consult. Supports HTML content.",descriptionHelp:"You can use HTML to format the content (headings, lists, links, etc.).",xpValue:"XP reward",xpValuePlaceholder:"Optional XP value",xpValueHelp:"Leave empty if this project does not grant XP.",activeLabel:"Project visibility",activeDescription:"Toggle to hide this project from students while editing."},validation:{moduleRequired:"Select a module",titleMin:"Title must have at least 3 characters",xpMin:"XP value must be zero or greater"},notifications:{loadError:"Failed to load projects",created:"Project created",updated:"Project updated",saveError:"Failed to save project",deleted:"Project deleted",deleteError:"Failed to delete project"},delete:{title:"Delete project",description:'This action cannot be undone. Make sure you really want to remove "{{title}}".',confirm:"Delete project"}}},B1={submit:"Submit Application",selectTimeline:"Select timeline",timelineImmediate:"Immediate (next 30 days)",timelineQuarter:"This quarter"},U1={accessibility:{close:"Close dialog"},messages:{success:"Thank you for your application! We'll be in touch soon."},fields:{name:"Full name",email:"Email address",company:"Company / organization",experienceLabel:"Current experience level",experiencePlaceholder:"Select your level",experienceOptions:{beginner:"Beginner (0-2 years)",intermediate:"Intermediate (2-5 years)",advanced:"Advanced (5+ years)"},portfolio:"Portfolio / LinkedIn URL",investmentAmountLabel:"Investment amount range",investmentAmountPlaceholder:"Select range",investmentAmountOptions:{"10k_50k":"$10k - $50k","50k_100k":"$50k - $100k","100k_500k":"$100k - $500k","500k_plus":"$500k+"},timelineLabel:"Investment timeline",timelineOptions:{year:"This year",exploring:"Just exploring"},message:"Message",messagePlaceholder:"Tell us more about your interest..."}},V1={title:"Scoreboard",subtitle:"Check out the rankings of students with the most XP",global:"Global",byPath:"By Path",rankingGlobal:"Global Ranking - All Paths",ranking:"Ranking - {{pathName}}",xp:"XP",lessons:"lessons",emptyNoPaths:"No paths available."},H1={title:"Ambassadors",subtitle:"Join our community of ambassadors and help spread knowledge",comingSoon:"Ambassadors program coming soon"},W1={title:"Achievements",subtitle:"Complete tasks and earn extra XP to climb the rankings",completed:"Completed",inProgress:"In Progress",xpEarned:"XP Earned",xpAvailable:"XP Available",xpReward:"XP Reward",progress:"Progress",all:"All",completedBadge:"Completed",locked:"Locked",overallProgress:"Overall Progress",completedOf:"of {{total}} achievements unlocked",emptyState:{title:"No Achievements Here Yet",descriptionAll:"Start your learning journey to unlock achievements and earn XP!",descriptionCategory:"Complete tasks in the {{category}} category to unlock achievements here."},sidebar:{overview:"Your Progress",nextSuggested:"Suggested Next",gettingStarted:"Getting Started",keepGoing:"Keep Going!",hoverTip:"Hover over any achievement to see detailed information here.",inProgressMessage:"You have {{count}} achievements in progress. Great momentum!",quickWinsTip:"Start with Profile category achievements for easy wins.",halfwayThere:"You're halfway there! Only {{remaining}} more to go.",allComplete:"Amazing! You've completed all achievements!"},categories:{community:"Community",profile:"Profile",learning:"Learning",social:"Social"},tasks:{telegramJoin:{title:"Join Telegram Group",description:"Join our community on Telegram and stay updated with all the news",action:"Join Telegram"},discordJoin:{title:"Join Discord",description:"Connect with other students and mentors on our Discord server",action:"Join Discord"},firstMessage:{title:"First Message",description:"Send your first message in any community channel"},emailVerify:{title:"Verify your Email",description:"Confirm your email address through the link sent",action:"Resend Email"},completeProfile:{title:"Complete your Profile",description:"Fill in all your professional profile information",action:"Go to Profile"},githubConnect:{title:"Connect your GitHub",description:"Link your GitHub account to your profile",action:"Connect GitHub"},linkedinConnect:{title:"Connect your LinkedIn",description:"Link your LinkedIn account to your profile",action:"Connect LinkedIn"},twitterFollow:{title:"Follow on Twitter",description:"Follow @Forge_College on Twitter to stay updated",action:"Follow on Twitter"},shareProgress:{title:"Share your Progress",description:"Share your learning journey on social media"},firstLesson:{title:"First Lesson",description:"Complete your first lesson in any path"},weekStreak:{title:"7-Day Streak",description:"Study for 7 consecutive days"},completePath:{title:"Complete a Path",description:"Finish all lessons in a learning path"},perfectQuiz:{title:"Perfect Quiz",description:"Score 100% on a quiz"}}},q1={testPage:{title:" Test Page - Forge College",description:"This is a static test page without external dependencies.",systemStatus:{title:"System status",react:" React running",typescript:" TypeScript running",build:" Build running",deploy:" Deployment running",ssr:" SSR running (timestamp: {{timestamp}})"},environment:{title:"Environment information (SSR)",serverTimestamp:"Server timestamp:",noJsMessage:"If you can read this text without JavaScript, SSR is OK."},clientTest:{title:"Client-side JavaScript test",instructions:"If JavaScript is working, you will see additional information below:",loading:"Loading client information...",button:"Test JavaScript"},alerts:{jsWorking:"JavaScript is working!"},footer:"If you are seeing this page, the issue is not infrastructure related.",js:{clientReady:" JavaScript running!",userAgent:"User agent:",url:"URL:",clientTimestamp:"Client timestamp:"}},ssrCanary:{title:"SSR Canary Test",status:"SSR CANARY OK: {{timestamp}}",instructions:"If you can see this text, SSR is working.",timestamp:"Timestamp: {{timestamp}}",renderMode:"This page renders static HTML on the server.",runtime:"Runtime: Node.js",dynamicMode:"Dynamic: force-dynamic"},staticBare:{title:"Static Bare SSR Test",status:"STATIC BARE SSR OK: {{timestamp}}",instructions:"If you can see this text, SSR is working.",timestamp:"Timestamp: {{timestamp}}",renderMode:"This page renders static HTML on the server."}},K1={errors:{loginRequired:"You need to be logged in to submit projects.",required:"Enter the GitHub repository URL.",invalidUrl:"Enter a valid URL.",githubOnly:"Please submit a GitHub repository link.",submitFailed:"Could not submit the project. Try again."},notifications:{fetchError:"Failed to load your project submissions.",submitError:"Failed to submit project.",submitted:"Project submitted! Great job applying your knowledge.",updated:"Project submission updated."},module:{title:"Module projects: {{module}}",subtitle:"Apply what you learned in this module by completing one of the projects below.",noProjects:"This module does not have projects yet.",communityLink:"See community submissions",projectOrder:"Project #{{order}}",xpValue:"XP {{xp}}",startProject:"Start project",updateSubmission:"Update submission",yourSubmission:"Your submission:",dialog:{title:"Project: {{project}}",subtitle:"Review the description and submit your GitHub repository link.",repositoryLabel:"GitHub repository URL",repositoryPlaceholder:"https://github.com/username/repository",repositoryHelp:"Share a public GitHub repository showcasing your implementation.",submitting:"Submitting...",submit:"Submit project"}},community:{loadError:"Failed to load community projects.",loading:"Loading community projects...",title:"Community Projects",subtitle:"Check what other students are building and get inspired.",empty:"No community submissions yet. Be the first to share your solution!",courseLabel:"Course: {{course}}",unknownCourse:"Unassigned course",projectCount:"Projects: {{count}}",projectOrder:"Project #{{order}}",xpValue:"XP {{xp}}",noSubmissions:"No submissions yet.",submissions:"Submissions: {{count}}",visitRepository:"View repository",submittedBy:"Submitted by {{user}}  {{date}}",anonymous:"Anonymous",dateUnknown:"Date unknown"}},G1={title:"Something went wrong",description:"An unexpected error occurred. Please reload the page.",reload:"Reload page",detailsTitle:"Error details (development)"},J1={common:_1,nav:C1,learningPaths:T1,courses:P1,formations:E1,formationDetail:A1,search:L1,filters:R1,layout:O1,auth:M1,profile:I1,profileDropdown:D1,dashboard:$1,lessons:F1,admin:z1,application:B1,applicationForm:U1,scoreboard:V1,ambassadors:H1,achievements:W1,diagnostics:q1,projects:K1,errorBoundary:G1},Y1={buttons:{login:"Entrar",signIn:"Entrar",signUp:"Cadastrar",cancel:"Cancelar",delete:"Excluir",save:"Salvar Alteraes",saving:"Salvando...",loading:"Carregando...",submit:"Enviar",tryAgain:"Tentar Novamente",continue:"Continuar",continueLearning:"Continuar aprendendo",send:"Enviar",edit:"Editar",create:"Criar",update:"Atualizar",close:"Fechar",next:"Prximo",previous:"Anterior",testConnection:"Testar Conexo",testing:"Testando..."},labels:{email:"E-mail",password:"Senha",confirmPassword:"Confirmar Senha",fullName:"Nome Completo",country:"Pas",city:"Cidade",languages:"Idiomas",language:"Idioma",user:"Usurio"},placeholders:{email:"m@exemplo.com",emailDemo:"demo@exemplo.com",enterFullName:"Digite seu nome completo",selectCountry:"Selecione seu pas",enterCity:"Digite sua cidade",typeLanguage:"Digite um idioma e pressione Enter"},countries:{brazil:"Brasil",unitedStates:"Estados Unidos",canada:"Canad",unitedKingdom:"Reino Unido",germany:"Alemanha",france:"Frana",spain:"Espanha",italy:"Itlia",netherlands:"Pases Baixos",sweden:"Sucia",norway:"Noruega",denmark:"Dinamarca",finland:"Finlndia",switzerland:"Sua",austria:"ustria",belgium:"Blgica",portugal:"Portugal",ireland:"Irlanda",australia:"Austrlia",newZealand:"Nova Zelndia",japan:"Japo",southKorea:"Coreia do Sul",singapore:"Singapura",india:"ndia",china:"China",mexico:"Mxico",argentina:"Argentina",chile:"Chile",colombia:"Colmbia",peru:"Peru",uruguay:"Uruguai",paraguay:"Paraguai",venezuela:"Venezuela",ecuador:"Equador",bolivia:"Bolvia",guyana:"Guiana",suriname:"Suriname",frenchGuiana:"Guiana Francesa"},errors:{required:"Este campo  obrigatrio",invalidUrl:"Por favor, insira uma URL vlida",networkError:"Erro de conexo de rede. Por favor, verifique sua conexo com a internet e tente novamente.",unexpectedError:"Ocorreu um erro inesperado. Por favor, tente novamente."}},X1={forProfessionals:"Para Profissionais",forCompanies:"Para Empresas",forInvestors:"Para Investidores",dashboard:"Painel",education:"Educao",formations:"Formaes",learningPaths:"Trilhas de Aprendizado",courses:"Cursos",paths:"Trilhas",admin:"Admin",scoreboard:"Placar",achievements:"Conquistas",ambassadors:"Embaixadores",communityProjects:"Projetos da Comunidade",learn:"Aprender",course:"Curso",path:"Trilha",myProfile:"Meu Perfil",page:"Pgina"},Z1={title:"Trilhas de Aprendizado",subtitle:"Navegue e explore todas as trilhas de aprendizado disponveis",emptyNoMatch:"Nenhuma trilha corresponde aos filtros",emptyNoData:"Nenhuma trilha disponvel"},Q1={title:"Cursos",subtitle:"Navegue e explore todos os cursos disponveis",modules_one:"{{count}} mdulo",modules_other:"{{count}} mdulos",modulesLabel:"Mdulos:",moreModules:"+{{count}} mdulos a mais",startCourse:"Iniciar curso",descriptionFallback:"Explore este curso para desenvolver suas habilidades",leaving:"Saindo...",leave:"Sair",onWaitlist:"Na lista de espera",notifyMe:"Avise-me",joining:"Entrando...",emptyNoData:"Nenhum curso disponvel",emptyNoDataDescription:"Em breve voc poder explorar nossos cursos!",emptyNoResults:"Nenhum curso encontrado",emptyNoMatch:'Nenhum curso corresponde a "{{term}}"'},ek={title:"Formaes",subtitle:"Programas de aprendizado completos para avanar na sua carreira",paths_one:"{{count}} trilha",paths_other:"{{count}} trilhas",learningPathsLabel:"Trilhas de Aprendizado:",morePaths:"+{{count}} trilhas a mais",viewFormation:"Ver formao",startPath:"Iniciar Trilha",emptyNoData:"Nenhuma formao disponvel",emptyNoDataDescription:"Programas de aprendizado estaro disponveis em breve. Volte depois!",emptyNoResults:"Nenhuma formao encontrada",emptyNoMatch:'Nenhuma formao corresponde a "{{term}}"',emptyNoFilters:"Nenhuma formao corresponde aos filtros selecionados"},tk={backToFormations:"Voltar s formaes",loadError:"No foi possvel carregar esta formao.",descriptionFallback:"Explore as trilhas de aprendizado includas nesta formao.",learningPathsCount:"{{count}} trilhas de aprendizado",onWaitingList:"na lista de espera",createdAgo:"Criado {{date}}",publishedAgo:"Publicado {{date}}",addedToWaitlist:"Voc foi adicionado  lista de espera desta formao",alreadyOnWaitlist:"Voc j est na lista de espera desta formao",mustLoginToJoinWaitlist:"Voc precisa estar logado para entrar na lista de espera",joinWaitlistFailed:"Falha ao entrar na lista de espera",onWaitlist:"Voc est na lista de espera",joining:"Entrando...",joinWaitlist:"Entrar na lista de espera",signInToJoin:"Entrar para participar",mustSignInToJoinWaitlist:"Voc precisa estar logado para entrar na lista de espera.",notifyWhenOpen:"Avisaremos quando esta formao abrir para inscries.",pathsComingSoon:"Trilhas em breve",includedPaths:"Trilhas includas",pathsAddedSoon:"As trilhas sero adicionadas a esta formao em breve.",notYetPublished:"Ainda no publicado",startLearning:"Iniciar aprendizagem",viewPath:"Ver trilha"},sk={formations:"Buscar formaes...",courses:"Buscar cursos...",learningPaths:"Buscar trilhas..."},rk={title:"Filtros",clearAll:"Limpar todos",status:"Status",progress:"Progresso",sort:"Ordenar",sortBy:"Ordenar por:",statusOptions:{all:"Todos",available:"Disponvel",coming_soon:"Em breve",draft:"Rascunho"},progressOptions:{not_started:"No iniciado",in_progress:"Inscrito",completed:"Concludo"},sortOptions:{recent:"Mais recente",alphabetical:"Alfabtico",path_order:"Ordem da trilha",course_order:"Ordem do curso",module_order:"Ordem do mdulo"}},nk={betaPromo:{message:"Estamos em beta, espere atualizaes rpidas "}},ak={login:{title:"Entrar",submit:"Entrar",ssoGoogle:"Continuar com Google",ssoGithub:"Continuar com GitHub",orContinueWith:"Ou continue com",dontHaveAccount:"No tem uma conta?",forgotPassword:"Esqueceu sua senha?",errors:{invalidCredentials:"E-mail ou senha invlidos. Por favor, verifique suas credenciais e tente novamente.",emailNotConfirmed:"Por favor, verifique seu e-mail e clique no link de confirmao antes de fazer login.",tooManyAttempts:"Muitas tentativas de login. Por favor, aguarde um momento antes de tentar novamente.",configError:"Erro de configurao do servio de autenticao. Usando modo demo - tente e-mail: demo@exemplo.com, senha: demo123",authServiceError:"Erro no servio de autenticao. A instncia do Supabase pode estar mal configurada.",cannotConnect:"No foi possvel conectar ao servio de autenticao. Por favor, verifique se o Supabase est configurado corretamente.",googleFailed:"Login com Google falhou. Por favor, tente novamente.",githubFailed:"Login com GitHub falhou. Por favor, tente novamente."}},signup:{title:"Criar Conta",submit:"Cadastrar",alreadyHaveAccount:"J tem uma conta?",passwordMismatch:"As senhas no coincidem",success:"Verifique seu e-mail para o link de confirmao!",notConfigured:"Servio de autenticao no configurado. Por favor, contate o administrador."},forgotPassword:{title:"Esqueci a Senha",submit:"Enviar Link de Redefinio",rememberedPassword:"Lembrou sua senha?"},updatePassword:{title:"Atualizar Senha",success:"Senha atualizada com sucesso! Redirecionando para o login..."},logout:{button:"Sair",signingOut:"Saindo..."}},ik={title:"Meu Perfil",subtitle:"Gerencie suas informaes pessoais e profissionais",unsavedChanges:"Voc tem alteraes no salvas",loadingProfile:"Carregando perfil...",failedToLoad:"Falha ao carregar perfil",sections:{personal:"Informaes Pessoais",personalDesc:"Atualize seus dados pessoais bsicos e informaes de contato",professional:"Perfil Profissional",professionalDesc:"Compartilhe sua experincia de trabalho, habilidades e informaes de carreira",learning:"Progresso de Aprendizado",learningDesc:"Acompanhe sua jornada de aprendizado e conquistas",career:"Preferncias de Carreira",careerDesc:"Defina suas preferncias de trabalho e objetivos de carreira"},fields:{yearsExperience:"Anos de Experincia em Tecnologia",positionCompany:"Cargo e Empresa",positionPlaceholder:"ex: Desenvolvedor Snior @ ACME",stacksDominated:"Stacks Dominadas",stacksDesc:"Tecnologias nas quais voc  proficiente",stacksPlaceholder:"ex: Java, Python, Solidity, React",skillsToDevelop:"Habilidades a Desenvolver",skillsDesc:"reas que voc quer melhorar",skillsPlaceholder:"ex: DeFi, Smart Contracts, Web3",linkedinUrl:"URL do LinkedIn",linkedinPlaceholder:"https://linkedin.com/in/usuario",githubUrl:"URL do GitHub",githubPlaceholder:"https://github.com/usuario",languagePreference:"Preferncia de Idioma",selectLanguage:"Selecione seu idioma preferido"},languageOptions:{enUS:"Ingls (EUA)",ptBR:"Portugus (Brasil)"},sidebar:{localeTitle:"Idioma do aplicativo",localeDescription:"Escolha o idioma usado na interface.",localePlaceholder:"Selecionar idioma",anonymousUser:"Usurio convidado"},errors:{fullNameRequired:"Nome completo  obrigatrio",countryRequired:"Pas  obrigatrio",invalidLinkedin:"Por favor, insira uma URL vlida do LinkedIn",invalidGithub:"Por favor, insira uma URL vlida do GitHub"},messages:{emailNote:"O e-mail s pode ser alterado nas configuraes da conta",validationError:"Por favor, corrija os erros antes de salvar.",updateSuccess:"Perfil atualizado com sucesso!",updateError:"Falha ao atualizar perfil. Por favor, tente novamente."},comingSoon:{title:"Em Breve",learning:"O acompanhamento do progresso de aprendizado estar disponvel na prxima atualizao.",career:"As preferncias de carreira estaro disponveis na prxima atualizao."}},ok={myAccount:"Minha Conta",profile:"Perfil",admin:"Admin",connectWallet:"Conectar Carteira"},lk={layout:{openMenu:"Abrir menu",loading:"Carregando painel..."},sidebar:{localeTitle:"Idioma",localeDescription:"Escolha como a interface  traduzida.",localePlaceholder:"Selecione o idioma"},welcomeBack:"Bem-vindo de volta",loading:"Carregando...",notFound:"No encontrado",readMore:"Ler mais",readLess:"Ler menos",enrollToStart:"Inscreva-se para comear",enroll:"Inscrever",enrolling:"Inscrevendo...",enrolled:"Inscrito",viewDetails:"Ver Detalhes",mustLoginToEnroll:"Voc deve estar logado para se inscrever",enrollSuccess:"Inscrito com sucesso!",enrollError:"Falha ao inscrever",loadError:"Falha ao carregar",nothingToContinue:"Nada para continuar agora.",emptyTitle:"Sem trilhas ainda",emptySubtitle:"Inscreva-se em uma trilha para comear",progressSuffix:"completo",home:{badge:"Bem-vindo de volta",headlineSuffix:", pronto para continuar sua jornada?",exploreCta:"Ver todas as trilhas",viewAllFormations:"Ver todas as formaes",formationsTooltip:"Formaes so programas de aprendizado abrangentes que agrupam mltiplas trilhas de aprendizado, projetadas para avanar sua carreira em um campo ou tecnologia especfica.",learningPathTooltip:"Trilhas de aprendizado so sequncias estruturadas de cursos que guiam voc atravs de um tpico ou habilidade especfica, do nvel iniciante ao avanado.",coursesTooltip:"Cursos so unidades de aprendizado individuais que cobrem tpicos ou habilidades especficas. Eles so organizados em mdulos e lies, e podem fazer parte de trilhas de aprendizado ou formaes."},continueLearning:{title:"Retome de onde parou",subtitle:"Voc estava estudando:",ariaLabel:"Continuar aprendendo {{course}}",empty:{title:"Nenhuma atividade recente",description:"Inscreva-se em uma trilha ou inicie um curso para ver seu progresso aqui."}},availablePaths:{enrolledBadge:"Inscrito",courses_one:"{{count}} curso",courses_other:"{{count}} cursos",viewPath:"Ver trilha",coursesLabel:"Cursos:",moreCourses:"+{{count}} cursos a mais"},learningHabits:{title:"Hbitos de estudo",currentStreak:"Sequncia atual",dayCount_one:"{{count}} dia",dayCount_other:"{{count}} dias",keepGoing:"Mantenha o ritmo diariamente",weeklyGoal:"Meta semanal",weekProgress:"{{completed}}/{{goal}} lies",completions_one:"{{count}} concluso",completions_other:"{{count}} concluses",loadError:"Falha ao carregar hbitos de aprendizado"},userStats:{totalXp:"XP total",completedLessons:"Lies concludas",activePaths:"Trilhas ativas",studyTime:"Tempo de estudo",studyTimeValue:"{{minutes}} min",errors:{loadProgress:"Falha ao carregar progresso do usurio",loadLessons:"Falha ao carregar lies"}},myLearningPaths:{emptyTitle:"Voc ainda no est inscrito em nenhuma trilha.",emptySubtitle:"Explore as trilhas disponveis e inscreva-se para comear.",progressLabel:"{{progress}}% concludo"},pathOverview:{badge:"Trilha",notFound:"Trilha de aprendizado no encontrada.",continue:"Continuar",courses:"Cursos"},errors:{notAuthenticated:"No autenticado",failedToEnroll:"Falha ao inscrever"}},ck={selectToBegin:"Selecione uma lio para comear.",lessonInfo:"Lio {{current}} de {{total}}  {{xp}} XP",unsupportedType:"Tipo de lio no suportado: {{type}}",types:{video:"Vdeo",text:"Leitura",quiz:"Quiz"},previousLesson:"Lio anterior",complete:"Completar",completed:"Concludo",unmark:"Desmarcar",unmarked:"Concluso desmarcada",completeAndContinue:"Completar e Continuar",markAsCompleted:"Marcar como Concludo",submitAnswer:"Enviar Resposta",loginToTrack:"Voc precisa estar logado para acompanhar o progresso",progressSaveFailed:"Falha ao salvar progresso",lessonCompleted:"Lio marcada como concluda!",completionError:"Erro ao marcar lio como concluda"},dk={layout:{kicker:"Admin",title:"Gesto de Contedo",subtitle:"Crie, organize e publique experincias de aprendizado para a comunidade.",nav:{overview:"Viso geral",paths:"Trilhas",courses:"Cursos",modules:"Mdulos",lessons:"Lies",projects:"Projetos"}},paths:{title:"Trilhas de Aprendizado",new:"Nova trilha de aprendizado",edit:"Editar trilha de aprendizado",delete:"Excluir trilha de aprendizado",deleteConfirm:'Esta ao no pode ser desfeita. Excluir uma trilha remover todos os cursos, mdulos e lies associados. Tem certeza de que deseja remover "{{title}}"?',created:"Trilha de aprendizado criada",updated:"Trilha de aprendizado atualizada",deleted:"Trilha de aprendizado excluda",labels:{title:"Ttulo",slug:"Slug",description:"Descrio",status:"Status",formation:"Formao",order:"Ordem dentro da Formao",publishImmediately:"Publicar imediatamente"},placeholders:{title:"ex: Fundamentos de Blockchain",slug:"blockchain-fundamentals",description:"Resuma a jornada que os alunos vivenciaro.",formation:"Selecione uma formao (opcional)",order:"1"},descriptions:{publishImmediately:"A trilha fica visvel para todos os alunos inscritos.",formation:"Escolha a formao  qual esta trilha pertence"},validation:{titleMin:"O ttulo deve ter pelo menos 3 caracteres",slugMin:"O slug deve ter pelo menos 3 caracteres",slugFormat:"O slug deve ser minsculo apenas com hfens"}},courses:{title:"Cursos",new:"Novo curso",edit:"Editar curso",delete:"Excluir curso",deleteConfirm:'Esta ao no pode ser desfeita. Tem certeza de que deseja remover "{{title}}"?',created:"Curso criado",updated:"Curso atualizado",deleted:"Curso excludo"},modules:{title:"Mdulos",new:"Novo mdulo",edit:"Editar mdulo",delete:"Excluir mdulo",deleteConfirm:'Esta ao no pode ser desfeita. Tem certeza de que deseja remover "{{title}}"?',created:"Mdulo criado",updated:"Mdulo atualizado",deleted:"Mdulo excludo"},lessons:{title:"Lies",new:"Nova lio",edit:"Editar lio",delete:"Excluir lio",deleteConfirm:'Esta ao no pode ser desfeita. Tem certeza de que deseja remover "{{title}}"?',created:"Lio criada",updated:"Lio atualizada",deleted:"Lio excluda"},projects:{title:"Projetos",subtitle:"Associe projetos aos mdulos para reforar o aprendizado aplicado ao final de cada mdulo.",actions:{newProject:"Novo projeto"},filters:{modulePlaceholder:"Filtrar por mdulo",allModules:"Todos os mdulos"},loading:"Carregando projetos...",emptyState:"Nenhum projeto encontrado para os filtros atuais.",unassignedModule:"Mdulo sem atribuio",labels:{course:"Curso: {{course}}",projectNumber:"Projeto #{{number}}",inactive:"Inativo",xpValue:"XP {{xp}}"},markdown:{loading:"Carregando editor...",ariaLabel:"Editor de Markdown"},dialog:{editTitle:"Editar projeto",createTitle:"Criar projeto",description:"Descreva expectativas e orientaes para o projeto do mdulo."},form:{module:"Mdulo",modulePlaceholder:"Selecione um mdulo",title:"Ttulo",titlePlaceholder:"Ttulo do projeto",description:"Descrio do projeto",descriptionPlaceholder:"Descreva objetivos, entregveis e recursos que os estudantes devem consultar. Suporta contedo HTML.",descriptionHelp:"Voc pode usar HTML para formatar o contedo (ttulos, listas, links, etc.).",xpValue:"Recompensa de XP",xpValuePlaceholder:"XP opcional",xpValueHelp:"Deixe em branco se este projeto no conceder XP.",activeLabel:"Visibilidade do projeto",activeDescription:"Use para ocultar o projeto dos alunos enquanto realiza ajustes."},validation:{moduleRequired:"Selecione um mdulo",titleMin:"O ttulo deve ter pelo menos 3 caracteres",xpMin:"O XP deve ser zero ou maior"},notifications:{loadError:"Falha ao carregar projetos",created:"Projeto criado",updated:"Projeto atualizado",saveError:"Falha ao salvar projeto",deleted:"Projeto excludo",deleteError:"Falha ao excluir projeto"},delete:{title:"Excluir projeto",description:'Esta ao no pode ser desfeita. Tem certeza de que deseja remover "{{title}}"?',confirm:"Excluir projeto"}}},uk={submit:"Enviar Inscrio",selectTimeline:"Selecionar prazo",timelineImmediate:"Imediato (prximos 30 dias)",timelineQuarter:"Este trimestre"},hk={accessibility:{close:"Fechar janela"},messages:{success:"Obrigado pela sua aplicao! Entraremos em contato em breve."},fields:{name:"Nome completo",email:"Endereo de e-mail",company:"Empresa / organizao",experienceLabel:"Nvel de experincia atual",experiencePlaceholder:"Selecione seu nvel",experienceOptions:{beginner:"Iniciante (0-2 anos)",intermediate:"Intermedirio (2-5 anos)",advanced:"Avanado (5+ anos)"},portfolio:"URL do portflio / LinkedIn",investmentAmountLabel:"Faixa de investimento",investmentAmountPlaceholder:"Selecione a faixa",investmentAmountOptions:{"10k_50k":"$10k - $50k","50k_100k":"$50k - $100k","100k_500k":"$100k - $500k","500k_plus":"$500k+"},timelineLabel:"Prazo de investimento",timelineOptions:{year:"Este ano",exploring:"Apenas explorando"},message:"Mensagem",messagePlaceholder:"Conte-nos mais sobre o seu interesse..."}},fk={title:"Placar",subtitle:"Confira os rankings dos estudantes com maior XP",global:"Global",byPath:"Por trilha",rankingGlobal:"Ranking Global - Todas as trilhas",ranking:"Ranking - {{pathName}}",xp:"XP",lessons:"lies",emptyNoPaths:"Nenhuma trilha disponvel."},mk={title:"Embaixadores",subtitle:"Junte-se  nossa comunidade de embaixadores e ajude a divulgar conhecimento",comingSoon:"Programa de embaixadores em breve"},pk={title:"Achievements",subtitle:"Complete tarefas e ganhe XP extra para subir no ranking",completed:"Concludos",inProgress:"Em Progresso",xpEarned:"XP Ganho",xpAvailable:"XP Disponvel",progress:"Progresso",all:"Todos",completedBadge:" Concludo",locked:" Bloqueado",categories:{community:"Comunidade",profile:"Perfil",learning:"Aprendizado",social:"Social"},tasks:{telegramJoin:{title:"Entre no Grupo Telegram",description:"Junte-se  nossa comunidade no Telegram e fique por dentro de todas as novidades",action:"Entrar no Telegram"},discordJoin:{title:"Entre no Discord",description:"Conecte-se com outros estudantes e mentores no nosso servidor Discord",action:"Entrar no Discord"},firstMessage:{title:"Primeira Mensagem",description:"Envie sua primeira mensagem em qualquer canal da comunidade"},emailVerify:{title:"Verifique seu Email",description:"Confirme seu endereo de email atravs do link enviado",action:"Reenviar Email"},completeProfile:{title:"Complete seu Perfil",description:"Preencha todas as informaes do seu perfil profissional",action:"Ir para Perfil"},githubConnect:{title:"Conecte seu GitHub",description:"Vincule sua conta do GitHub ao seu perfil",action:"Conectar GitHub"},linkedinConnect:{title:"Conecte seu LinkedIn",description:"Vincule sua conta do LinkedIn ao seu perfil",action:"Conectar LinkedIn"},twitterFollow:{title:"Siga no Twitter",description:"Siga @Forge_College no Twitter para ficar atualizado",action:"Seguir no Twitter"},shareProgress:{title:"Compartilhe seu Progresso",description:"Compartilhe sua jornada de aprendizado nas redes sociais"},firstLesson:{title:"Primeira Lio",description:"Complete sua primeira lio em qualquer path"},weekStreak:{title:"Sequncia de 7 Dias",description:"Estude por 7 dias consecutivos"},completePath:{title:"Complete um Path",description:"Finalize todas as lies de um learning path"},perfectQuiz:{title:"Quiz Perfeito",description:"Acerte 100% das questes em um quiz"}}},gk={testPage:{title:" Pgina de Teste - Forge College",description:"Esta  uma pgina de teste esttica sem dependncias externas.",systemStatus:{title:"Status do sistema",react:" React funcionando",typescript:" TypeScript funcionando",build:" Build funcionando",deploy:" Deploy funcionando",ssr:" SSR funcionando (timestamp: {{timestamp}})"},environment:{title:"Informaes do ambiente (SSR)",serverTimestamp:"Timestamp do servidor:",noJsMessage:"Se voc v este texto sem JavaScript, o SSR est OK."},clientTest:{title:"Teste de JavaScript (client-side)",instructions:"Se o JavaScript estiver funcionando, voc ver informaes adicionais abaixo:",loading:"Carregando informaes do cliente...",button:"Testar JavaScript"},alerts:{jsWorking:"JavaScript est funcionando!"},footer:"Se voc est vendo esta pgina, o problema no  de infraestrutura.",js:{clientReady:" JavaScript funcionando!",userAgent:"User agent:",url:"URL:",clientTimestamp:"Timestamp do cliente:"}},ssrCanary:{title:"Teste Canary de SSR",status:"SSR CANARY OK: {{timestamp}}",instructions:"Se voc v este texto, o SSR est funcionando.",timestamp:"Timestamp: {{timestamp}}",renderMode:"Esta pgina renderiza HTML esttico no servidor.",runtime:"Runtime: Node.js",dynamicMode:"Dinmico: force-dynamic"},staticBare:{title:"Teste Static Bare SSR",status:"STATIC BARE SSR OK: {{timestamp}}",instructions:"Se voc v este texto, o SSR est funcionando.",timestamp:"Timestamp: {{timestamp}}",renderMode:"Esta pgina renderiza HTML esttico no servidor."}},xk={errors:{loginRequired:"Voc precisa estar logado para enviar projetos.",required:"Informe a URL do repositrio no GitHub.",invalidUrl:"Insira uma URL vlida.",githubOnly:"Envie um link de repositrio do GitHub.",submitFailed:"No foi possvel enviar o projeto. Tente novamente."},notifications:{fetchError:"Falha ao carregar seus envios de projeto.",submitError:"Falha ao enviar projeto.",submitted:"Projeto enviado! Excelente aplicao do que voc aprendeu.",updated:"Envio do projeto atualizado."},module:{title:"Projetos do mdulo: {{module}}",subtitle:"Coloque em prtica o que aprendeu neste mdulo completando um dos projetos abaixo.",noProjects:"Este mdulo ainda no possui projetos.",communityLink:"Ver envios da comunidade",projectOrder:"Projeto #{{order}}",xpValue:"XP {{xp}}",startProject:"Iniciar projeto",updateSubmission:"Atualizar envio",yourSubmission:"Seu envio:",dialog:{title:"Projeto: {{project}}",subtitle:"Revise a descrio e envie o link do seu repositrio no GitHub.",repositoryLabel:"URL do repositrio no GitHub",repositoryPlaceholder:"https://github.com/usuario/repositorio",repositoryHelp:"Compartilhe um repositrio pblico no GitHub mostrando sua implementao.",submitting:"Enviando...",submit:"Enviar projeto"}},community:{loadError:"Falha ao carregar projetos da comunidade.",loading:"Carregando projetos da comunidade...",title:"Projetos da Comunidade",subtitle:"Veja o que outros estudantes esto construindo e inspire-se.",empty:"Ainda no h envios da comunidade. Seja o primeiro a compartilhar sua soluo!",courseLabel:"Curso: {{course}}",unknownCourse:"Curso no atribudo",projectCount:"Projetos: {{count}}",projectOrder:"Projeto #{{order}}",xpValue:"XP {{xp}}",noSubmissions:"Nenhum envio ainda.",submissions:"Envios: {{count}}",visitRepository:"Ver repositrio",submittedBy:"Enviado por {{user}}  {{date}}",anonymous:"Annimo",dateUnknown:"Data desconhecida"}},bk={title:"Algo deu errado",description:"Ocorreu um erro inesperado. Por favor, recarregue a pgina.",reload:"Recarregar pgina",detailsTitle:"Detalhes do erro (desenvolvimento)"},yk={common:Y1,nav:X1,learningPaths:Z1,courses:Q1,formations:ek,formationDetail:tk,search:sk,filters:rk,layout:nk,auth:ak,profile:ik,profileDropdown:ok,dashboard:lk,lessons:ck,admin:dk,application:uk,applicationForm:hk,scoreboard:fk,ambassadors:mk,achievements:pk,diagnostics:gk,projects:xk,errorBoundary:bk},bt="pt-BR";function vk(t,e=bt){const s=t.trim(),r=s&&s!==e?[s]:[];return r.includes(e)||r.push(e),r}function $t(t){return t.reduce((e,s)=>(e[s.locale]=s,e),{})}function wk(t,e,s=bt){const r=vk(e,s);for(const a of r){const i=t.find(o=>o.locale===a&&o.is_published);if(i)return i}return null}async function jo(t){const{data:e,error:s}=await t.from("locales").select("code, label, is_default").order("is_default",{ascending:!1}).order("label",{ascending:!0});if(s)throw s;return e??[]}function No(t,e,s){return t.reduce((r,a)=>(r[a.code]=e[a.code]??s(a.code),r),{})}function qs(t){var e;return((e=t.find(s=>s.is_default))==null?void 0:e.code)??bt}const kb="app_language",jk=()=>{if(typeof window>"u"||typeof document>"u")return bt;const e=document.cookie.split(";").find(s=>s.trim().startsWith(`${kb}=`));return e?e.split("=")[1]:bt},Nk=t=>{if(typeof window>"u"||typeof document>"u")return;const e=new Date;e.setFullYear(e.getFullYear()+1),document.cookie=`${kb}=${t};expires=${e.toUTCString()};path=/;SameSite=Lax`};_t.use(Zw).init({resources:{"en-US":{translation:J1},"pt-BR":{translation:yk}},lng:jk(),fallbackLng:bt,interpolation:{escapeValue:!1}});_t.on("languageChanged",t=>{Nk(t)});const kk="modulepreload",Sk=function(t){return"/"+t},am={},ko=function(e,s,r){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=Sk(c),c in am)return;am[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":kk,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},_k=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ko(async()=>{const{default:r}=await Promise.resolve().then(()=>Ma);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Sh extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Ck extends Sh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class im extends Sh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class om extends Sh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var iu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(iu||(iu={}));var Tk=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};class Pk{constructor(e,{headers:s={},customFetch:r,region:a=iu.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=_k(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Tk(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(g=>{throw new Ck(g)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new im(h);if(!h.ok)throw new om(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield h.json():m==="application/octet-stream"?x=yield h.blob():m==="text/event-stream"?x=h:m==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof om||a instanceof im?a.context:void 0}}})}}var Jt={},_h={},Dc={},So={},$c={},Fc={},Ek=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ga=Ek();const Ak=ga.fetch,Sb=ga.fetch.bind(ga),_b=ga.Headers,Lk=ga.Request,Rk=ga.Response,Ma=Object.freeze(Object.defineProperty({__proto__:null,Headers:_b,Request:Lk,Response:Rk,default:Sb,fetch:Ak},Symbol.toStringTag,{value:"Module"})),Ok=Qw(Ma);var zc={};Object.defineProperty(zc,"__esModule",{value:!0});let Mk=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};zc.default=Mk;var Cb=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fc,"__esModule",{value:!0});const Ik=Cb(Ok),Dk=Cb(zc);let $k=class{constructor(e){var s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ik.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,h=null,f=null,m=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,x="OK")}catch{i.status===404&&b===""?(m=204,x="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,m=200,x="OK"),u&&this.shouldThrowOnError)throw new Dk.default(u)}return{error:u,data:h,count:f,status:m,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,s)}returns(){return this}overrideTypes(){return this}};Fc.default=$k;var Fk=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($c,"__esModule",{value:!0});const zk=Fk(Fc);let Bk=class extends zk.default{select(e){let s=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};$c.default=Bk;var Uk=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(So,"__esModule",{value:!0});const Vk=Uk($c);let Hk=class extends Vk.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};So.default=Hk;var Wk=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dc,"__esModule",{value:!0});const qa=Wk(So);let qk=class{constructor(e,{headers:s={},schema:r,fetch:a}){this.url=e,this.headers=new Headers(s),this.schema=r,this.fetch=a}select(e,{head:s=!1,count:r}={}){const a=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new qa.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:r=!0}={}){var a;const i="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new qa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new qa.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:s}={}){var r;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new qa.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var s;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new qa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Dc.default=qk;var Tb=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_h,"__esModule",{value:!0});const Kk=Tb(Dc),Gk=Tb(So);let Jk=class Pb{constructor(e,{headers:s={},schema:r,fetch:a}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=a}from(e){const s=new URL(`${this.url}/${e}`);return new Kk.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Pb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;r||a?(l=r?"HEAD":"GET",Object.entries(s).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",d=s);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new Gk.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};_h.default=Jk;var Ia=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.PostgrestError=Jt.PostgrestBuilder=Jt.PostgrestTransformBuilder=Jt.PostgrestFilterBuilder=Jt.PostgrestQueryBuilder=Jt.PostgrestClient=void 0;const Eb=Ia(_h);Jt.PostgrestClient=Eb.default;const Ab=Ia(Dc);Jt.PostgrestQueryBuilder=Ab.default;const Lb=Ia(So);Jt.PostgrestFilterBuilder=Lb.default;const Rb=Ia($c);Jt.PostgrestTransformBuilder=Rb.default;const Ob=Ia(Fc);Jt.PostgrestBuilder=Ob.default;const Mb=Ia(zc);Jt.PostgrestError=Mb.default;var Yk=Jt.default={PostgrestClient:Eb.default,PostgrestQueryBuilder:Ab.default,PostgrestFilterBuilder:Lb.default,PostgrestTransformBuilder:Rb.default,PostgrestBuilder:Ob.default,PostgrestError:Mb.default};const{PostgrestClient:Xk,PostgrestQueryBuilder:L$,PostgrestFilterBuilder:R$,PostgrestTransformBuilder:O$,PostgrestBuilder:M$,PostgrestError:I$}=Yk;class Zk{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Qk="2.15.1",eS=`realtime-js/${Qk}`,tS="1.0.0",ou=1e4,sS=1e3,rS=100;var ui;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ui||(ui={}));var wt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wt||(wt={}));var Ss;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ss||(Ss={}));var lu;(function(t){t.websocket="websocket"})(lu||(lu={}));var dn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(dn||(dn={}));class nS{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+a));o=o+a;const c=r.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Ib{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const lm=(t,e,s={})=>{var r;const a=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=aS(o,t,e,a),i),{})},aS=(t,e,s,r)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,o=s[t];return i&&!r.includes(i)?Db(i,o):cu(o)},Db=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return cS(e,s)}switch(t){case Ze.bool:return iS(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return oS(e);case Ze.json:case Ze.jsonb:return lS(e);case Ze.timestamp:return dS(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return cu(e);default:return cu(e)}},cu=t=>t,iS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},lS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},cS=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Db(e,l))}return t},dS=t=>typeof t=="string"?t.replace(" ","T"):t,$b=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class cd{constructor(e,s,r={},a=ou){this.channel=e,this.event=s,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(cm||(cm={}));class hi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hi.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=hi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=hi.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,a){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),x=u.filter(b=>m.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);x.length>0&&(l[d]=x),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(e,s,r,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}r(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const a=e[r];return"metas"in a?s[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(dm||(dm={}));var fi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fi||(fi={}));var sr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(sr||(sr={}));class Ch{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new cd(this,Ss.join,this.params,this.timeout),this.rejoinTimer=new Ib(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ss.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new hi(this),this.broadcastEndpointURL=$b(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[fi.PRESENCE]&&this.bindings[fi.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(sr.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(sr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e==null||e(sr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,b=[];for(let y=0;y<g;y++){const w=x[y],{filter:{event:N,schema:S,table:k,filter:j}}=w,v=f&&f[y];if(v&&v.event===N&&v.schema===S&&v.table===k&&v.filter===j)b.push(Object.assign(Object.assign({},w),{id:v.id}));else{this.unsubscribe(),this.state=wt.errored,e==null||e(sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(sr.SUBSCRIBED);return}}).receive("error",f=>{this.state=wt.errored,e==null||e(sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===wt.joined&&e===fi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,r)}async send(e,s={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ss.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new cd(this,Ss.leave,{},e),r.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new cd(this,e,s,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rS){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ss;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var x,g,b;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(g=m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,g,b,y,w,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const S=m.id,k=(x=m.filter)===null||x===void 0?void 0:x.event;return S&&((g=s.ids)===null||g===void 0?void 0:g.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(w=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((N=s==null?void 0:s.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:b,commit_timestamp:y,type:w,errors:N}=x;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:w,new:{},old:{},errors:N}),this._getPayloadRecords(x))}m.callback(f,r)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const a=e.toLocaleLowerCase(),i={type:a,filter:s,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ch.isEqual(a.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ss.close,{},e)}_onError(e){this._on(Ss.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=lm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=lm(e.columns,e.old_record)),s}}const um=()=>{},Fo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uS=[1e3,2e3,5e3,1e4],hS=1e4,fS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mS{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ou,this.transport=null,this.heartbeatIntervalMs=Fo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=um,this.ref=0,this.reconnectTimer=null,this.logger=um,this.conn=null,this.sendBuffer=[],this.serializer=new nS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>ko(async()=>{const{default:l}=await Promise.resolve().then(()=>Ma);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${lu.websocket}`,this.httpEndpoint=$b(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:tS}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ui.connecting:return dn.Connecting;case ui.open:return dn.Open;case ui.closing:return dn.Closing;default:return dn.Closed}}isConnected(){return this.connectionState()===dn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new Ch(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sS,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Fo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=s,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ss.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${r}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([fS],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const a={access_token:s,version:eS};s&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Ss.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ib(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,a,i,o,l,c,d;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ou,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Fo.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:u=>uS[u-1]||hS,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(u,h)=>h(JSON.stringify(u)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Th extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class pS extends Th{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class du extends Th{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var gS=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const Fb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ko(async()=>{const{default:r}=await Promise.resolve().then(()=>Ma);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},xS=()=>gS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ko(()=>Promise.resolve().then(()=>Ma),void 0)).Response:Response}),uu=t=>{if(Array.isArray(t))return t.map(s=>uu(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=uu(r)}),e},bS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var In=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const dd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yS=(t,e,s)=>In(void 0,void 0,void 0,function*(){const r=yield xS();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(a=>{const i=t.status||500,o=(a==null?void 0:a.statusCode)||i+"";e(new pS(dd(a),i,o))}).catch(a=>{e(new du(dd(a),a))}):e(new du(dd(t),t))}),vS=(t,e,s,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?a:(bS(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),s))};function _o(t,e,s,r,a,i){return In(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,vS(e,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>yS(c,l,r))})})}function Fl(t,e,s,r){return In(this,void 0,void 0,function*(){return _o(t,"GET",e,s,r)})}function Ms(t,e,s,r,a){return In(this,void 0,void 0,function*(){return _o(t,"POST",e,r,a,s)})}function hu(t,e,s,r,a){return In(this,void 0,void 0,function*(){return _o(t,"PUT",e,r,a,s)})}function wS(t,e,s,r){return In(this,void 0,void 0,function*(){return _o(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function zb(t,e,s,r,a){return In(this,void 0,void 0,function*(){return _o(t,"DELETE",e,r,a,s)})}var Bt=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const jS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NS{constructor(e,s={},r,a){this.url=e,this.headers=s,this.bucketId=r,this.fetch=Fb(a)}uploadOrUpdate(e,s,r,a){return Bt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},hm),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?hu:Ms)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Nt(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,a){return Bt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:hm.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield hu(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Nt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return Bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield Ms(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Th("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}update(e,s,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Bt(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}})}copy(e,s,r){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,r){return Bt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield Ms(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,r){return Bt(this,void 0,void 0,function*(){try{const a=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}})}download(e,s){return Bt(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Fl(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Nt(l))return{data:null,error:l};throw l}})}info(e){return Bt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Fl(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:uu(r),error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}exists(e){return Bt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield wS(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Nt(r)&&r instanceof du){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield zb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Nt(s))return{data:null,error:s};throw s}})}list(e,s,r){return Bt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},jS),s),{prefix:e||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}})}listV2(e,s){return Bt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ms(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const kS="2.11.0",SS={"X-Client-Info":`storage-js/${kS}`};var Wn=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};class _S{constructor(e,s={},r,a){const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},SS),s),this.fetch=Fb(r)}listBuckets(){return Wn(this,void 0,void 0,function*(){try{return{data:yield Fl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Nt(e))return{data:null,error:e};throw e}})}getBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Fl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Nt(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Wn(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Nt(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield zb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Nt(s))return{data:null,error:s};throw s}})}}class CS extends _S{constructor(e,s={},r,a){super(e,s,r,a)}from(e){return new NS(this.url,this.headers,e,this.fetch)}}const TS="2.56.0";let si="";typeof Deno<"u"?si="deno":typeof document<"u"?si="web":typeof navigator<"u"&&navigator.product==="ReactNative"?si="react-native":si="node";const PS={"X-Client-Info":`supabase-js-${si}/${TS}`},ES={headers:PS},AS={schema:"public"},LS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RS={};var OS=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const MS=t=>{let e;return t?e=t:typeof fetch>"u"?e=Sb:e=fetch,(...s)=>e(...s)},IS=()=>typeof Headers>"u"?_b:Headers,DS=(t,e,s)=>{const r=MS(s),a=IS();return(i,o)=>OS(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var $S=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};function FS(t){return t.endsWith("/")?t:t+"/"}function zS(t,e){var s,r;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>$S(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Bb="2.71.1",Zn=30*1e3,fu=3,ud=fu*Zn,BS="http://localhost:9999",US="supabase.auth.token",VS={"X-Client-Info":`gotrue-js/${Bb}`},mu="X-Supabase-Api-Version",Ub={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,WS=10*60*1e3;class Ph extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function _e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class qS extends Ph{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function KS(t){return _e(t)&&t.name==="AuthApiError"}class Vb extends Ph{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Hr extends Ph{constructor(e,s,r,a){super(e,r,a),this.name=s,this.status=r}}class kr extends Hr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GS(t){return _e(t)&&t.name==="AuthSessionMissingError"}class zo extends Hr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bo extends Hr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Uo extends Hr{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JS(t){return _e(t)&&t.name==="AuthImplicitGrantRedirectError"}class fm extends Hr{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pu extends Hr{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function hd(t){return _e(t)&&t.name==="AuthRetryableFetchError"}class mm extends Hr{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class gu extends Hr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pm=` 	
\r=`.split(""),YS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pm.length;e+=1)t[pm[e].charCodeAt(0)]=-2;for(let e=0;e<zl.length;e+=1)t[zl[e].charCodeAt(0)]=e;return t})();function gm(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(zl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(zl[r]),e.queuedBits-=6}}function Hb(t,e,s){const r=YS[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xm(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{QS(o,r,s)};for(let o=0;o<t.length;o+=1)Hb(t.charCodeAt(o),a,i);return e.join("")}function XS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ZS(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}XS(r,e)}}function QS(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function e_(t){const e=[],s={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Hb(t.charCodeAt(a),s,r);return new Uint8Array(e)}function t_(t){const e=[];return ZS(t,s=>e.push(s)),new Uint8Array(e)}function s_(t){const e=[],s={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>gm(a,s,r)),gm(null,s,r),e.join("")}function r_(t){return Math.round(Date.now()/1e3)+t}function n_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ns=()=>typeof window<"u"&&typeof document<"u",tn={tested:!1,writable:!1},Wb=()=>{if(!Ns())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tn.tested)return tn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tn.tested=!0,tn.writable=!0}catch{tn.tested=!0,tn.writable=!1}return tn.writable};function a_(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return s.searchParams.forEach((r,a)=>{e[a]=r}),e}const qb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ko(async()=>{const{default:r}=await Promise.resolve().then(()=>Ma);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},i_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qn=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},sn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},vr=async(t,e)=>{await t.removeItem(e)};class Bc{constructor(){this.promise=new Bc.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Bc.promiseConstructor=Promise;function fd(t){const e=t.split(".");if(e.length!==3)throw new gu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!HS.test(e[r]))throw new gu("JWT not in base64url format");return{header:JSON.parse(xm(e[0])),payload:JSON.parse(xm(e[1])),signature:e_(e[2]),raw:{header:e[0],payload:e[1]}}}async function o_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function l_(t,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function c_(t){return("0"+t.toString(16)).substr(-2)}function d_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,c_).join("")}async function u_(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function h_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await u_(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qn(t,e,s=!1){const r=d_();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await Qn(t,`${e}-code-verifier`,a);const i=await h_(r);return[i,r===i?"plain":"s256"]}const f_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function m_(t){const e=t.headers.get(mu);if(!e||!e.match(f_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function p_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function g_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const x_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kn(t){if(!x_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function md(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bm(t){return JSON.parse(JSON.stringify(t))}var b_=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s};const on=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),y_=[502,503,504];async function ym(t){var e;if(!i_(t))throw new pu(on(t),0);if(y_.includes(t.status))throw new pu(on(t),t.status);let s;try{s=await t.json()}catch(i){throw new Vb(on(i),i)}let r;const a=m_(t);if(a&&a.getTime()>=Ub["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new mm(on(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new kr}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new mm(on(s),t.status,s.weak_password.reasons);throw new qS(on(s),t.status||500,r)}const v_=(t,e,s,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};async function Oe(t,e,s,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[mu]||(i[mu]=Ub["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await w_(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function w_(t,e,s,r,a,i){const o=v_(e,r,a,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new pu(on(c),0)}if(l.ok||await ym(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await ym(c)}}function er(t){var e;let s=null;S_(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=r_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function vm(t){const e=er(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function j_(t){return{data:t,error:null}}function N_(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i}=t,o=b_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function k_(t){return t}function S_(t){return t.access_token&&t.refresh_token&&t.expires_in}const pd=["global","local","others"];var __=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s};class C_{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=qb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=pd[0]){if(pd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pd.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Lr})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=__(e,["options"]),a=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:N_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(_e(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lr})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:k_});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(_e(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Kn(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lr})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Kn(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Lr})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Kn(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Lr})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Kn(e.userId);try{const{data:s,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:r}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Kn(e.userId),Kn(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}}function wm(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function T_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gn={debug:!!(globalThis&&Wb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class P_ extends Kb{}async function E_(t,e,s){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new P_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}T_();const A_={url:BS,storageKey:US,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function jm(t,e,s){return await s()}const Jn={};class Ri{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ri.nextInstanceID,Ri.nextInstanceID+=1,this.instanceID>0&&Ns()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},A_),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new C_({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=qb(a.fetch),this.lock=a.lock||jm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ns()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=E_:this.lock=jm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Wb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=wm(this.memoryStorage)),Ns()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Jn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Jn[this.storageKey]=Object.assign(Object.assign({},Jn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Jn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Jn[this.storageKey]=Object.assign(Object.assign({},Jn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=a_(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Ns()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),JS(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return _e(s)?{error:s}:{error:new Vb("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,a;try{const i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:er}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,a;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await qn(this.storage,this.storageKey)),i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:er})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:er})}else throw new Bo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vm})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vm})}else throw new Bo("You must provide either an email or phone number and a password");const{data:r,error:a}=s;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,a,i,o,l,c,d,u,h,f,m;let x,g;if("message"in e)x=e.message,g=e.signature;else{const{chain:b,wallet:y,statement:w,options:N}=e;let S;if(Ns())if(typeof y=="object")S=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const k=new URL((s=N==null?void 0:N.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let v;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")v=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)v=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in v&&"signature"in v&&(typeof v.signedMessage=="string"||v.signedMessage instanceof Uint8Array)&&v.signature instanceof Uint8Array)x=typeof v.signedMessage=="string"?v.signedMessage:new TextDecoder().decode(v.signedMessage),g=v.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(u=N==null?void 0:N.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...N.signInWithSolana.resources.map(v=>`- ${v}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(x),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:b,error:y}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:s_(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:er});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new zo}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(_e(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await sn(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(s??"").split("/");try{const{data:i,error:o}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:er});if(await vr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new zo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(_e(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:a,access_token:i,nonce:o}=e,l=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:er}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new zo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await qn(this.storage,this.storageKey));const{error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Bo("You must provide either an email or phone number.")}catch(l){if(_e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{let a,i;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:er});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(_e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await qn(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:j_})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new kr;const{error:a}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:o}=await Oe(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:o,error:l}=await Oe(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Bo("You must provide either an email or phone number and a type")}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ud:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await sn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=md()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lr}):await this._useSession(async s=>{var r,a,i;const{data:o,error:l}=s;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Lr})})}catch(s){if(_e(s))return GS(s)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new kr;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await qn(this.storage,this.storageKey));const{data:d,error:u}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Lr});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kr;const s=Date.now()/1e3;let r=s,a=!0,i=null;const{payload:o}=fd(e.access_token);if(o.exp&&(r=o.exp,a=r<=s),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(_e(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new kr;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Ns())throw new Uo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Uo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new fm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fm("No code detected.");const{data:w,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new Uo("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Zn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,u);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(_e(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await sn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(KS(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=n_(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await qn(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ns()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(_e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)throw o;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await l_(async a=>(a>0&&await o_(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:er})),(a,i)=>{const o=200*Math.pow(2,a);return i&&hd(i)&&Date.now()+o-r<Zn})}catch(r){if(this._debug(s,"error",r),_e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Ns()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await sn(this.storage,this.storageKey);if(a&&this.userStorage){let o=await sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Qn(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:md()}else if(a&&!a.user&&!a.user){const o=await sn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await vr(this.storage,this.storageKey+"-user"),await Qn(this.storage,this.storageKey,a)):a.user=md()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ud;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ud}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),hd(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Bc;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new kr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),_e(i)){const o={session:null,error:i};return hd(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Qn(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const i=bm(a);await Qn(this.storage,this.storageKey,i)}else{const a=bm(s);await Qn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await vr(this.storage,this.storageKey+"-code-verifier"),await vr(this.storage,this.storageKey+"-user"),this.userStorage&&await vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ns()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Zn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Zn}ms, refresh threshold is ${fu} ticks`),a<=fu&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Kb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ns()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const a=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await qn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(_e(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(_e(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=fd(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(l=>l.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+WS>a)return r;const{data:i,error:o}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};r=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=fd(r);s!=null&&s.allowExpired||p_(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const u=g_(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,t_(`${l}.${c}`)))throw new gu("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}}Ri.nextInstanceID=0;const L_=Ri;class R_ extends L_{constructor(e){super(e)}}var O_=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};class M_{constructor(e,s,r){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=FS(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:AS,realtime:RS,auth:Object.assign(Object.assign({},LS),{storageKey:d}),global:ES},h=zS(r??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=DS(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Xk(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new CS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Pk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return O_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new R_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new mS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const I_=(t,e,s)=>new M_(t,e,s);function D_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}D_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.parse=H_;Eh.serialize=W_;const $_=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,F_=/^[\u0021-\u003A\u003C-\u007E]*$/,z_=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,B_=/^[\u0020-\u003A\u003D-\u007E]*$/,U_=Object.prototype.toString,V_=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function H_(t,e){const s=new V_,r=t.length;if(r<2)return s;const a=(e==null?void 0:e.decode)||q_;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),c=l===-1?r:l;if(o>c){i=t.lastIndexOf(";",o-1)+1;continue}const d=Nm(t,i,o),u=km(t,o,d),h=t.slice(d,u);if(s[h]===void 0){let f=Nm(t,o+1,c),m=km(t,c,f);const x=a(t.slice(f,m));s[h]=x}i=c+1}while(i<r);return s}function Nm(t,e,s){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<s);return s}function km(t,e,s){for(;e>s;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return s}function W_(t,e,s){const r=(s==null?void 0:s.encode)||encodeURIComponent;if(!$_.test(t))throw new TypeError(`argument name is invalid: ${t}`);const a=r(e);if(!F_.test(a))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+a;if(!s)return i;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!z_.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!B_.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!K_(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i}function q_(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function K_(t){return U_.call(t)==="[object Date]"}const Sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_m=` 	
\r=`.split("");(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_m.length;e+=1)t[_m[e].charCodeAt(0)]=-2;for(let e=0;e<Sm.length;e+=1)t[Sm[e].charCodeAt(0)]=e;return t})();const G_=()=>({url:"https://fdeblavnrrnoyqivydsg.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkZWJsYXZucnJub3lxaXZ5ZHNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTgxMzgsImV4cCI6MjA3MDA3NDEzOH0.iaK-5qda3SZGkSwSJRB5ejyJ1Ky8S2tPOxRAPAap_FI"});let Gb;try{Gb=G_()}catch(t){throw console.error("Supabase config error:",t),t}let Vo=null;function Ue(){if(Vo)return Vo;const{url:t,anonKey:e}=Gb;return Vo=I_(t,e,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",debug:!1},global:{headers:{"X-Client-Info":"forge-college-web"}},realtime:{params:{eventsPerSecond:10}}}),Vo}const Jb=p.createContext(void 0);function J_({children:t}){const[e,s]=p.useState(null),[r,a]=p.useState(null),[i,o]=p.useState(!0),l=p.useRef(!0),c=p.useMemo(()=>Ue(),[]),d=async()=>{try{o(!0),console.log("Starting sign out process...");const{error:f}=await c.auth.signOut();if(f)throw f;console.log("Supabase sign out successful"),s(null),a(null),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("supabase.auth.refreshToken"),Object.keys(localStorage).filter(x=>x.includes("google")||x.includes("oauth")||x.includes("auth")).forEach(x=>{console.log("Removing Google/OAuth token:",x),localStorage.removeItem(x)}),document.cookie.split(";").forEach(function(x){document.cookie=x.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),sessionStorage.clear(),console.log("Local storage cleared, redirecting..."),window.location.replace("/")}catch(f){console.error("Error signing out:",f),s(null),a(null),window.location.href="/"}finally{o(!1)}},u=async()=>{try{o(!0);const{data:{session:f},error:m}=await c.auth.getSession();if(m)throw m;a(f),s((f==null?void 0:f.user)??null)}catch(f){console.error("Error refreshing session:",f)}finally{o(!1)}};p.useEffect(()=>{l.current=!0,(async()=>{try{const{data:{session:x},error:g}=await c.auth.getSession();if(g)throw g;l.current&&(a(x),s((x==null?void 0:x.user)??null),o(!1))}catch(x){console.error("Error initializing auth:",x),l.current&&o(!1)}})();const{data:{subscription:m}}=c.auth.onAuthStateChange(async(x,g)=>{var b,y,w;if(l.current)switch(console.log("Auth state changed:",x,(b=g==null?void 0:g.user)==null?void 0:b.email,"Provider:",(w=(y=g==null?void 0:g.user)==null?void 0:y.app_metadata)==null?void 0:w.provider),x){case"SIGNED_IN":case"TOKEN_REFRESHED":case"INITIAL_SESSION":g!=null&&g.user&&(a(g),s(g.user),o(!1));break;case"SIGNED_OUT":a(null),s(null),o(!1);break;default:a(g),s((g==null?void 0:g.user)??null),o(!1)}});return()=>{l.current=!1,m.unsubscribe()}},[]);const h=p.useMemo(()=>({user:e,session:r,loading:i,signOut:d,refreshSession:u}),[e,r,i,d,u]);return n.jsx(Jb.Provider,{value:h,children:t})}function Ah(){const t=p.useContext(Jb);if(t===void 0)throw new Error("useOAuth must be used within an OAuthProvider");return t}function Ct(){const{user:t,session:e,loading:s}=Ah();return{isAuthenticated:!!t&&!s,user:t||null,session:e||null,loading:s||!1}}const Y_=1,X_=1e6;let gd=0;function Z_(){return gd=(gd+1)%Number.MAX_SAFE_INTEGER,gd.toString()}const xd=new Map,Cm=t=>{if(xd.has(t))return;const e=setTimeout(()=>{xd.delete(t),mi({type:"REMOVE_TOAST",toastId:t})},X_);xd.set(t,e)},Q_=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Y_)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?Cm(s):t.toasts.forEach(r=>{Cm(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},fl=[];let ml={toasts:[]};function mi(t){ml=Q_(ml,t),fl.forEach(e=>{e(ml)})}function eC({...t}){const e=Z_(),s=a=>mi({type:"UPDATE_TOAST",toast:{...a,id:e}}),r=()=>mi({type:"DISMISS_TOAST",toastId:e});return mi({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||r()}}}),{id:e,dismiss:r,update:s}}function Yb(){const[t,e]=p.useState(ml);return p.useEffect(()=>(fl.push(e),()=>{const s=fl.indexOf(e);s>-1&&fl.splice(s,1)}),[t]),{...t,toast:eC,dismiss:s=>mi({type:"DISMISS_TOAST",toastId:s})}}function Xb(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(s=Xb(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function Zb(){for(var t,e,s=0,r="",a=arguments.length;s<a;s++)(t=arguments[s])&&(e=Xb(t))&&(r&&(r+=" "),r+=e);return r}const Tm=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Pm=Zb,It=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return Pm(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(d=>{const u=s==null?void 0:s[d],h=i==null?void 0:i[d];if(u===null)return null;const f=Tm(u)||Tm(h);return a[d][f]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...d,h,f]:d},[]);return Pm(t,o,c,s==null?void 0:s.class,s==null?void 0:s.className)},Lh="-",tC=t=>{const e=rC(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Lh);return l[0]===""&&l.length!==1&&l.shift(),Qb(l,e)||sC(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Qb=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),a=r?Qb(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const i=t.join(Lh);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Em=/^\[(.+)\]$/,sC=t=>{if(Em.test(t)){const e=Em.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},rC=t=>{const{theme:e,prefix:s}=t,r={nextPart:new Map,validators:[]};return aC(Object.entries(t.classGroups),s).forEach(([i,o])=>{xu(o,r,i,e)}),r},xu=(t,e,s,r)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?e:Am(e,a);i.classGroupId=s;return}if(typeof a=="function"){if(nC(a)){xu(a(r),e,s,r);return}e.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{xu(o,Am(e,i),s,r)})})},Am=(t,e)=>{let s=t;return e.split(Lh).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},nC=t=>t.isThemeGetter,aC=(t,e)=>e?t.map(([s,r])=>{const a=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[s,a]}):t,iC=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const a=(i,o)=>{s.set(i,o),e++,e>t&&(e=0,r=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},ey="!",oC=t=>{const{separator:e,experimentalParseClassName:s}=t,r=e.length===1,a=e[0],i=e.length,o=l=>{const c=[];let d=0,u=0,h;for(let b=0;b<l.length;b++){let y=l[b];if(d===0){if(y===a&&(r||l.slice(b,b+i)===e)){c.push(l.slice(u,b)),u=b+i;continue}if(y==="/"){h=b;continue}}y==="["?d++:y==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(ey),x=m?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}};return s?l=>s({className:l,parseClassName:o}):o},lC=t=>{if(t.length<=1)return t;const e=[];let s=[];return t.forEach(r=>{r[0]==="["?(e.push(...s.sort(),r),s=[]):s.push(r)}),e.push(...s.sort()),e},cC=t=>({cache:iC(t.cacheSize),parseClassName:oC(t),...tC(t)}),dC=/\s+/,uC=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a}=e,i=[],o=t.trim().split(dC);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=s(d);let x=!!m,g=r(x?f.substring(0,m):f);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const b=lC(u).join(":"),y=h?b+ey:b,w=y+g;if(i.includes(w))continue;i.push(w);const N=a(g,x);for(let S=0;S<N.length;++S){const k=N[S];i.push(y+k)}l=d+(l.length>0?" "+l:l)}return l};function hC(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=ty(e))&&(r&&(r+=" "),r+=s);return r}const ty=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=ty(t[r]))&&(s&&(s+=" "),s+=e);return s};function fC(t,...e){let s,r,a,i=o;function o(c){const d=e.reduce((u,h)=>h(u),t());return s=cC(d),r=s.cache.get,a=s.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=uC(c,s);return a(c,u),u}return function(){return i(hC.apply(null,arguments))}}const st=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},sy=/^\[(?:([a-z-]+):)?(.+)\]$/i,mC=/^\d+\/\d+$/,pC=new Set(["px","full","screen"]),gC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ys=t=>la(t)||pC.has(t)||mC.test(t),wr=t=>Da(t,"length",TC),la=t=>!!t&&!Number.isNaN(Number(t)),bd=t=>Da(t,"number",la),Ka=t=>!!t&&Number.isInteger(Number(t)),wC=t=>t.endsWith("%")&&la(t.slice(0,-1)),Ce=t=>sy.test(t),jr=t=>gC.test(t),jC=new Set(["length","size","percentage"]),NC=t=>Da(t,jC,ry),kC=t=>Da(t,"position",ry),SC=new Set(["image","url"]),_C=t=>Da(t,SC,EC),CC=t=>Da(t,"",PC),Ga=()=>!0,Da=(t,e,s)=>{const r=sy.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):s(r[2]):!1},TC=t=>xC.test(t)&&!bC.test(t),ry=()=>!1,PC=t=>yC.test(t),EC=t=>vC.test(t),AC=()=>{const t=st("colors"),e=st("spacing"),s=st("blur"),r=st("brightness"),a=st("borderColor"),i=st("borderRadius"),o=st("borderSpacing"),l=st("borderWidth"),c=st("contrast"),d=st("grayscale"),u=st("hueRotate"),h=st("invert"),f=st("gap"),m=st("gradientColorStops"),x=st("gradientColorStopPositions"),g=st("inset"),b=st("margin"),y=st("opacity"),w=st("padding"),N=st("saturate"),S=st("scale"),k=st("sepia"),j=st("skew"),v=st("space"),_=st("translate"),E=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",Ce,e],F=()=>[Ce,e],L=()=>["",Ys,wr],U=()=>["auto",la,Ce],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Ce],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>[la,Ce];return{cacheSize:500,separator:":",theme:{colors:[Ga],spacing:[Ys,wr],blur:["none","",jr,Ce],brightness:C(),borderColor:[t],borderRadius:["none","","full",jr,Ce],borderSpacing:F(),borderWidth:L(),contrast:C(),grayscale:D(),hueRotate:C(),invert:D(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[wC,wr],inset:z(),margin:z(),opacity:C(),padding:F(),saturate:C(),scale:C(),sepia:D(),skew:C(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[jr]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),Ce]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ka,Ce]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Ka,Ce]}],"grid-cols":[{"grid-cols":[Ga]}],"col-start-end":[{col:["auto",{span:["full",Ka,Ce]},Ce]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Ga]}],"row-start-end":[{row:["auto",{span:[Ka,Ce]},Ce]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[v]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[v]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,e]}],"min-w":[{"min-w":[Ce,e,"min","max","fit"]}],"max-w":[{"max-w":[Ce,e,"none","full","min","max","fit","prose",{screen:[jr]},jr]}],h:[{h:[Ce,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,e,"auto","min","max","fit"]}],"font-size":[{text:["base",jr,wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bd]}],"font-family":[{font:[Ga]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",la,bd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ys,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ys,wr]}],"underline-offset":[{"underline-offset":["auto",Ys,Ce]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),kC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",NC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_C]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:Y()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ys,Ce]}],"outline-w":[{outline:[Ys,wr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ys,wr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",jr,CC]}],"shadow-color":[{shadow:[Ga]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jr,Ce]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:C()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:C()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ka,Ce]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ys,wr,bd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LC=fC(AC);function $(...t){return LC(Zb(t))}function Oi(){try{if(typeof window>"u")return"/auth/callback";const t=window.location.origin,e=window.location.hostname;return e.includes("localhost")||e.startsWith("127.")?`${t}/auth/callback`:e==="forge.college"?"https://app.forge.college/auth/callback":`${t}/auth/callback`}catch{return"/auth/callback"}}const RC=ej,ny=p.forwardRef(({className:t,...e},s)=>n.jsx(fx,{ref:s,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));ny.displayName=fx.displayName;const OC=It("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ay=p.forwardRef(({className:t,variant:e,...s},r)=>n.jsx(mx,{ref:r,className:$(OC({variant:e}),t),...s}));ay.displayName=mx.displayName;const MC=p.forwardRef(({className:t,...e},s)=>n.jsx(px,{ref:s,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));MC.displayName=px.displayName;const iy=p.forwardRef(({className:t,...e},s)=>n.jsx(gx,{ref:s,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(bs,{className:"h-4 w-4"})}));iy.displayName=gx.displayName;const oy=p.forwardRef(({className:t,...e},s)=>n.jsx(xx,{ref:s,className:$("text-sm font-semibold",t),...e}));oy.displayName=xx.displayName;const ly=p.forwardRef(({className:t,...e},s)=>n.jsx(bx,{ref:s,className:$("text-sm opacity-90",t),...e}));ly.displayName=bx.displayName;function IC(){const{toasts:t}=Yb();return n.jsxs(RC,{children:[t.map(function({id:e,title:s,description:r,action:a,...i}){return n.jsxs(ay,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(oy,{children:s}),r&&n.jsx(ly,{children:r})]}),a,n.jsx(iy,{})]},e)}),n.jsx(ny,{})]})}var Lm=["light","dark"],DC="(prefers-color-scheme: dark)",$C=p.createContext(void 0),FC={setTheme:t=>{},themes:[]},zC=()=>{var t;return(t=p.useContext($C))!=null?t:FC};p.memo(({forcedTheme:t,storageKey:e,attribute:s,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,h=a?Lm.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,g=!1,b=!0)=>{let y=o?o[x]:x,w=g?x+"|| ''":`'${y}'`,N="";return a&&b&&!g&&Lm.includes(x)&&(N+=`d.style.colorScheme = '${x}';`),s==="class"?g||y?N+=`c.add(${w})`:N+="null":y&&(N+=`d[s](n,${w})`),N},m=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${DC}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${d?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var BC=t=>{switch(t){case"success":return HC;case"info":return qC;case"warning":return WC;case"error":return KC;default:return null}},UC=Array(12).fill(0),VC=({visible:t,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},H.createElement("div",{className:"sonner-spinner"},UC.map((s,r)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),HC=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WC=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),qC=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),KC=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),GC=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JC=()=>{let[t,e]=H.useState(document.hidden);return H.useEffect(()=>{let s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t},bu=1,YC=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:s,...r}=t,a=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:bu++,i=this.toasts.find(l=>l.id===a),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...t,id:a,title:s}),{...l,...t,id:a,dismissible:o,title:s}):l):this.addToast({title:s,...r,dismissible:o,id:a}),a},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let s;e.loading!==void 0&&(s=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),a=s!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],H.isValidElement(c))a=!1,this.create({id:s,type:"default",message:c});else if(ZC(c)&&!c.ok){a=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:s,type:"error",message:d,description:u})}else if(e.success!==void 0){a=!1;let d=typeof e.success=="function"?await e.success(c):e.success,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:s,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){a=!1;let d=typeof e.error=="function"?await e.error(c):e.error,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:s,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(s),s=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(t,e)=>{let s=(e==null?void 0:e.id)||bu++;return this.create({jsx:t(s),id:s,...e}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Gt=new YC,XC=(t,e)=>{let s=(e==null?void 0:e.id)||bu++;return Gt.addToast({title:t,...e,id:s}),s},ZC=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",QC=XC,e2=()=>Gt.toasts,t2=()=>Gt.getActiveToasts(),Q=Object.assign(QC,{success:Gt.success,info:Gt.info,warning:Gt.warning,error:Gt.error,custom:Gt.custom,message:Gt.message,promise:Gt.promise,dismiss:Gt.dismiss,loading:Gt.loading},{getHistory:e2,getToasts:t2});function s2(t,{insertAt:e}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}s2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ho(t){return t.label!==void 0}var r2=3,n2="32px",a2="16px",Rm=4e3,i2=356,o2=14,l2=20,c2=200;function js(...t){return t.filter(Boolean).join(" ")}function d2(t){let[e,s]=t.split("-"),r=[];return e&&r.push(e),s&&r.push(s),r}var u2=t=>{var e,s,r,a,i,o,l,c,d,u,h;let{invert:f,toast:m,unstyled:x,interacting:g,setHeights:b,visibleToasts:y,heights:w,index:N,toasts:S,expanded:k,removeToast:j,defaultRichColors:v,closeButton:_,style:E,cancelButtonStyle:R,actionButtonStyle:z,className:F="",descriptionClassName:L="",duration:U,position:J,gap:Y,loadingIcon:I,expandByDefault:O,classNames:D,icons:W,closeButtonAriaLabel:C="Close toast",pauseWhenPageIsHidden:V}=t,[P,B]=H.useState(null),[T,q]=H.useState(null),[G,A]=H.useState(!1),[K,ne]=H.useState(!1),[le,ee]=H.useState(!1),[re,ae]=H.useState(!1),[Fe,M]=H.useState(!1),[X,fe]=H.useState(0),[Se,Te]=H.useState(0),qt=H.useRef(m.duration||U||Rm),Os=H.useRef(null),zt=H.useRef(null),zn=N===0,ze=N+1<=y,Pe=m.type,rs=m.dismissible!==!1,Gs=m.className||"",Bn=m.descriptionClassName||"",Js=H.useMemo(()=>w.findIndex(he=>he.toastId===m.id)||0,[w,m.id]),rd=H.useMemo(()=>{var he;return(he=m.closeButton)!=null?he:_},[m.closeButton,_]),gr=H.useMemo(()=>m.duration||U||Rm,[m.duration,U]),Un=H.useRef(0),xr=H.useRef(0),Io=H.useRef(0),br=H.useRef(null),[nd,ad]=J.split("-"),me=H.useMemo(()=>w.reduce((he,Re,De)=>De>=Js?he:he+Re.height,0),[w,Js]),He=JC(),Je=m.invert||f,Ie=Pe==="loading";xr.current=H.useMemo(()=>Js*Y+me,[Js,me]),H.useEffect(()=>{qt.current=gr},[gr]),H.useEffect(()=>{A(!0)},[]),H.useEffect(()=>{let he=zt.current;if(he){let Re=he.getBoundingClientRect().height;return Te(Re),b(De=>[{toastId:m.id,height:Re,position:m.position},...De]),()=>b(De=>De.filter(yt=>yt.toastId!==m.id))}},[b,m.id]),H.useLayoutEffect(()=>{if(!G)return;let he=zt.current,Re=he.style.height;he.style.height="auto";let De=he.getBoundingClientRect().height;he.style.height=Re,Te(De),b(yt=>yt.find(mt=>mt.toastId===m.id)?yt.map(mt=>mt.toastId===m.id?{...mt,height:De}:mt):[{toastId:m.id,height:De,position:m.position},...yt])},[G,m.title,m.description,b,m.id]);let Ke=H.useCallback(()=>{ne(!0),fe(xr.current),b(he=>he.filter(Re=>Re.toastId!==m.id)),setTimeout(()=>{j(m)},c2)},[m,j,b,xr]);H.useEffect(()=>{if(m.promise&&Pe==="loading"||m.duration===1/0||m.type==="loading")return;let he;return k||g||V&&He?(()=>{if(Io.current<Un.current){let Re=new Date().getTime()-Un.current;qt.current=qt.current-Re}Io.current=new Date().getTime()})():qt.current!==1/0&&(Un.current=new Date().getTime(),he=setTimeout(()=>{var Re;(Re=m.onAutoClose)==null||Re.call(m,m),Ke()},qt.current)),()=>clearTimeout(he)},[k,g,m,Pe,V,He,Ke]),H.useEffect(()=>{m.delete&&Ke()},[Ke,m.delete]);function Dt(){var he,Re,De;return W!=null&&W.loading?H.createElement("div",{className:js(D==null?void 0:D.loader,(he=m==null?void 0:m.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":Pe==="loading"},W.loading):I?H.createElement("div",{className:js(D==null?void 0:D.loader,(Re=m==null?void 0:m.classNames)==null?void 0:Re.loader,"sonner-loader"),"data-visible":Pe==="loading"},I):H.createElement(VC,{className:js(D==null?void 0:D.loader,(De=m==null?void 0:m.classNames)==null?void 0:De.loader),visible:Pe==="loading"})}return H.createElement("li",{tabIndex:0,ref:zt,className:js(F,Gs,D==null?void 0:D.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[Pe],(s=m==null?void 0:m.classNames)==null?void 0:s[Pe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:v,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":G,"data-promise":!!m.promise,"data-swiped":Fe,"data-removed":K,"data-visible":ze,"data-y-position":nd,"data-x-position":ad,"data-index":N,"data-front":zn,"data-swiping":le,"data-dismissible":rs,"data-type":Pe,"data-invert":Je,"data-swipe-out":re,"data-swipe-direction":T,"data-expanded":!!(k||O&&G),style:{"--index":N,"--toasts-before":N,"--z-index":S.length-N,"--offset":`${K?X:xr.current}px`,"--initial-height":O?"auto":`${Se}px`,...E,...m.style},onDragEnd:()=>{ee(!1),B(null),br.current=null},onPointerDown:he=>{Ie||!rs||(Os.current=new Date,fe(xr.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(ee(!0),br.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Re,De,yt;if(re||!rs)return;br.current=null;let mt=Number(((he=zt.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vt=Number(((Re=zt.current)==null?void 0:Re.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ds=new Date().getTime()-((De=Os.current)==null?void 0:De.getTime()),Kt=P==="x"?mt:vt,yr=Math.abs(Kt)/ds;if(Math.abs(Kt)>=l2||yr>.11){fe(xr.current),(yt=m.onDismiss)==null||yt.call(m,m),q(P==="x"?mt>0?"right":"left":vt>0?"down":"up"),Ke(),ae(!0),M(!1);return}ee(!1),B(null)},onPointerMove:he=>{var Re,De,yt,mt;if(!br.current||!rs||((Re=window.getSelection())==null?void 0:Re.toString().length)>0)return;let vt=he.clientY-br.current.y,ds=he.clientX-br.current.x,Kt=(De=t.swipeDirections)!=null?De:d2(J);!P&&(Math.abs(ds)>1||Math.abs(vt)>1)&&B(Math.abs(ds)>Math.abs(vt)?"x":"y");let yr={x:0,y:0};P==="y"?(Kt.includes("top")||Kt.includes("bottom"))&&(Kt.includes("top")&&vt<0||Kt.includes("bottom")&&vt>0)&&(yr.y=vt):P==="x"&&(Kt.includes("left")||Kt.includes("right"))&&(Kt.includes("left")&&ds<0||Kt.includes("right")&&ds>0)&&(yr.x=ds),(Math.abs(yr.x)>0||Math.abs(yr.y)>0)&&M(!0),(yt=zt.current)==null||yt.style.setProperty("--swipe-amount-x",`${yr.x}px`),(mt=zt.current)==null||mt.style.setProperty("--swipe-amount-y",`${yr.y}px`)}},rd&&!m.jsx?H.createElement("button",{"aria-label":C,"data-disabled":Ie,"data-close-button":!0,onClick:Ie||!rs?()=>{}:()=>{var he;Ke(),(he=m.onDismiss)==null||he.call(m,m)},className:js(D==null?void 0:D.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=W==null?void 0:W.close)!=null?i:GC):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:H.createElement(H.Fragment,null,Pe||m.icon||m.promise?H.createElement("div",{"data-icon":"",className:js(D==null?void 0:D.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Dt():null,m.type!=="loading"?m.icon||(W==null?void 0:W[Pe])||BC(Pe):null):null,H.createElement("div",{"data-content":"",className:js(D==null?void 0:D.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},H.createElement("div",{"data-title":"",className:js(D==null?void 0:D.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?H.createElement("div",{"data-description":"",className:js(L,Bn,D==null?void 0:D.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Ho(m.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:he=>{var Re,De;Ho(m.cancel)&&rs&&((De=(Re=m.cancel).onClick)==null||De.call(Re,he),Ke())},className:js(D==null?void 0:D.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Ho(m.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||z,onClick:he=>{var Re,De;Ho(m.action)&&((De=(Re=m.action).onClick)==null||De.call(Re,he),!he.defaultPrevented&&Ke())},className:js(D==null?void 0:D.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Om(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function h2(t,e){let s={};return[t,e].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?a2:n2;function c(d){["top","right","bottom","left"].forEach(u=>{s[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?s[`${o}-${d}`]=l:s[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),s}var f2=p.forwardRef(function(t,e){let{invert:s,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:h,duration:f,style:m,visibleToasts:x=r2,toastOptions:g,dir:b=Om(),gap:y=o2,loadingIcon:w,icons:N,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:k}=t,[j,v]=H.useState([]),_=H.useMemo(()=>Array.from(new Set([r].concat(j.filter(V=>V.position).map(V=>V.position)))),[j,r]),[E,R]=H.useState([]),[z,F]=H.useState(!1),[L,U]=H.useState(!1),[J,Y]=H.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=H.useRef(null),O=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=H.useRef(null),W=H.useRef(!1),C=H.useCallback(V=>{v(P=>{var B;return(B=P.find(T=>T.id===V.id))!=null&&B.delete||Gt.dismiss(V.id),P.filter(({id:T})=>T!==V.id)})},[]);return H.useEffect(()=>Gt.subscribe(V=>{if(V.dismiss){v(P=>P.map(B=>B.id===V.id?{...B,delete:!0}:B));return}setTimeout(()=>{tj.flushSync(()=>{v(P=>{let B=P.findIndex(T=>T.id===V.id);return B!==-1?[...P.slice(0,B),{...P[B],...V},...P.slice(B+1)]:[V,...P]})})})}),[]),H.useEffect(()=>{if(u!=="system"){Y(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let V=window.matchMedia("(prefers-color-scheme: dark)");try{V.addEventListener("change",({matches:P})=>{Y(P?"dark":"light")})}catch{V.addListener(({matches:B})=>{try{Y(B?"dark":"light")}catch(T){console.error(T)}})}},[u]),H.useEffect(()=>{j.length<=1&&F(!1)},[j]),H.useEffect(()=>{let V=P=>{var B,T;a.every(q=>P[q]||P.code===q)&&(F(!0),(B=I.current)==null||B.focus()),P.code==="Escape"&&(document.activeElement===I.current||(T=I.current)!=null&&T.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[a]),H.useEffect(()=>{if(I.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,W.current=!1)}},[I.current]),H.createElement("section",{ref:e,"aria-label":`${S} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((V,P)=>{var B;let[T,q]=V.split("-");return j.length?H.createElement("ol",{key:V,dir:b==="auto"?Om():b,tabIndex:-1,ref:I,className:l,"data-sonner-toaster":!0,"data-theme":J,"data-y-position":T,"data-lifted":z&&j.length>1&&!i,"data-x-position":q,style:{"--front-toast-height":`${((B=E[0])==null?void 0:B.height)||0}px`,"--width":`${i2}px`,"--gap":`${y}px`,...m,...h2(c,d)},onBlur:G=>{W.current&&!G.currentTarget.contains(G.relatedTarget)&&(W.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||W.current||(W.current=!0,D.current=G.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{L||F(!1)},onDragEnd:()=>F(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},j.filter(G=>!G.position&&P===0||G.position===V).map((G,A)=>{var K,ne;return H.createElement(u2,{key:G.id,icons:N,index:A,toast:G,defaultRichColors:h,duration:(K=g==null?void 0:g.duration)!=null?K:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:s,visibleToasts:x,closeButton:(ne=g==null?void 0:g.closeButton)!=null?ne:o,interacting:L,position:V,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:C,toasts:j.filter(le=>le.position==G.position),heights:E.filter(le=>le.position==G.position),setHeights:R,expandByDefault:i,gap:y,loadingIcon:w,expanded:z,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const m2=({...t})=>{const{theme:e="system"}=zC();return n.jsx(f2,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},Sn=sj,xa=rj,ba=nj,_n=p.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(yx,{ref:r,sideOffset:e,className:$("z-50 max-w-xs rounded-md border bg-popover px-3 py-2 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 break-words leading-relaxed",t),...s}));_n.displayName=yx.displayName;const Rh=p.createContext({});function $a(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const Oh=typeof window<"u",Uc=Oh?p.useLayoutEffect:p.useEffect,Vc=p.createContext(null);function Mh(t,e){t.indexOf(e)===-1&&t.push(e)}function Ih(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Ks=(t,e,s)=>s>e?e:s<t?t:s;let Mi=()=>{};const ir={},cy=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function dy(t){return typeof t=="object"&&t!==null}const uy=t=>/^0[^.\s]+$/u.test(t);function Dh(t){let e;return()=>(e===void 0&&(e=t()),e)}const es=t=>t,p2=(t,e)=>s=>e(t(s)),Co=(...t)=>t.reduce(p2),ya=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class $h{constructor(){this.subscriptions=[]}add(e){return Mh(this.subscriptions,e),()=>Ih(this.subscriptions,e)}notify(e,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Us=t=>t*1e3,Vs=t=>t/1e3;function Fh(t,e){return e?t*(1e3/e):0}const hy=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,g2=1e-7,x2=12;function b2(t,e,s,r,a){let i,o,l=0;do o=e+(s-e)/2,i=hy(o,r,a)-t,i>0?s=o:e=o;while(Math.abs(i)>g2&&++l<x2);return o}function To(t,e,s,r){if(t===e&&s===r)return es;const a=i=>b2(i,0,1,t,s);return i=>i===0||i===1?i:hy(a(i),e,r)}const fy=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,my=t=>e=>1-t(1-e),py=To(.33,1.53,.69,.99),zh=my(py),gy=fy(zh),xy=t=>(t*=2)<1?.5*zh(t):.5*(2-Math.pow(2,-10*(t-1))),Bh=t=>1-Math.sin(Math.acos(t)),by=my(Bh),yy=fy(Bh),y2=To(.42,0,1,1),v2=To(0,0,.58,1),vy=To(.42,0,.58,1),w2=t=>Array.isArray(t)&&typeof t[0]!="number",wy=t=>Array.isArray(t)&&typeof t[0]=="number",j2={linear:es,easeIn:y2,easeInOut:vy,easeOut:v2,circIn:Bh,circInOut:yy,circOut:by,backIn:zh,backInOut:gy,backOut:py,anticipate:xy},N2=t=>typeof t=="string",Mm=t=>{if(wy(t)){Mi(t.length===4);const[e,s,r,a]=t;return To(e,s,r,a)}else if(N2(t))return j2[t];return t},Wo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function k2(t,e){let s=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),t()),u(l)}const d={schedule:(u,h=!1,f=!1)=>{const x=f&&a?s:r;return h&&o.add(u),x.has(u)||x.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(l=u,a){i=!0;return}a=!0,[s,r]=[r,s],s.forEach(c),s.clear(),a=!1,i&&(i=!1,d.process(u))}};return d}const S2=40;function jy(t,e){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=Wo.reduce((N,S)=>(N[S]=k2(i),N),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:f,render:m,postRender:x}=o,g=()=>{const N=ir.useManualTiming?a.timestamp:performance.now();s=!1,ir.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(N-a.timestamp,S2),1)),a.timestamp=N,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),f.process(a),m.process(a),x.process(a),a.isProcessing=!1,s&&e&&(r=!1,t(g))},b=()=>{s=!0,r=!0,a.isProcessing||t(g)};return{schedule:Wo.reduce((N,S)=>{const k=o[S];return N[S]=(j,v=!1,_=!1)=>(s||b(),k.schedule(j,v,_)),N},{}),cancel:N=>{for(let S=0;S<Wo.length;S++)o[Wo[S]].cancel(N)},state:a,steps:o}}const{schedule:Ge,cancel:As,state:Tt,steps:yd}=jy(typeof requestAnimationFrame<"u"?requestAnimationFrame:es,!0);let pl;function _2(){pl=void 0}const Zt={now:()=>(pl===void 0&&Zt.set(Tt.isProcessing||ir.useManualTiming?Tt.timestamp:performance.now()),pl),set:t=>{pl=t,queueMicrotask(_2)}},Ny=t=>e=>typeof e=="string"&&e.startsWith(t),Uh=Ny("--"),C2=Ny("var(--"),Vh=t=>C2(t)?T2.test(t.split("/*")[0].trim()):!1,T2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ii={...Fa,transform:t=>Ks(0,1,t)},qo={...Fa,default:1},pi=t=>Math.round(t*1e5)/1e5,Hh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function P2(t){return t==null}const E2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wh=(t,e)=>s=>!!(typeof s=="string"&&E2.test(s)&&s.startsWith(t)||e&&!P2(s)&&Object.prototype.hasOwnProperty.call(s,e)),ky=(t,e,s)=>r=>{if(typeof r!="string")return r;const[a,i,o,l]=r.match(Hh);return{[t]:parseFloat(a),[e]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},A2=t=>Ks(0,255,t),vd={...Fa,transform:t=>Math.round(A2(t))},un={test:Wh("rgb","red"),parse:ky("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+vd.transform(t)+", "+vd.transform(e)+", "+vd.transform(s)+", "+pi(Ii.transform(r))+")"};function L2(t){let e="",s="",r="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const yu={test:Wh("#"),parse:L2,transform:un.transform},Po=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sr=Po("deg"),Hs=Po("%"),be=Po("px"),R2=Po("vh"),O2=Po("vw"),Im={...Hs,parse:t=>Hs.parse(t)/100,transform:t=>Hs.transform(t*100)},sa={test:Wh("hsl","hue"),parse:ky("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hs.transform(pi(e))+", "+Hs.transform(pi(s))+", "+pi(Ii.transform(r))+")"},gt={test:t=>un.test(t)||yu.test(t)||sa.test(t),parse:t=>un.test(t)?un.parse(t):sa.test(t)?sa.parse(t):yu.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?un.transform(t):sa.transform(t),getAnimatableNone:t=>{const e=gt.parse(t);return e.alpha=0,gt.transform(e)}},M2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I2(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Hh))==null?void 0:e.length)||0)+(((s=t.match(M2))==null?void 0:s.length)||0)>0}const Sy="number",_y="color",D2="var",$2="var(",Dm="${}",F2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Di(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},a=[];let i=0;const l=e.replace(F2,c=>(gt.test(c)?(r.color.push(i),a.push(_y),s.push(gt.parse(c))):c.startsWith($2)?(r.var.push(i),a.push(D2),s.push(c)):(r.number.push(i),a.push(Sy),s.push(parseFloat(c))),++i,Dm)).split(Dm);return{values:s,split:l,indexes:r,types:a}}function Cy(t){return Di(t).values}function Ty(t){const{split:e,types:s}=Di(t),r=e.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],a[o]!==void 0){const l=s[o];l===Sy?i+=pi(a[o]):l===_y?i+=gt.transform(a[o]):i+=a[o]}return i}}const z2=t=>typeof t=="number"?0:gt.test(t)?gt.getAnimatableNone(t):t;function B2(t){const e=Cy(t);return Ty(t)(e.map(z2))}const Fr={test:I2,parse:Cy,createTransformer:Ty,getAnimatableNone:B2};function wd(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function U2({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let a=0,i=0,o=0;if(!e)a=i=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;a=wd(c,l,t+1/3),i=wd(c,l,t),o=wd(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Bl(t,e){return s=>s>0?e:t}const lt=(t,e,s)=>t+(e-t)*s,jd=(t,e,s)=>{const r=t*t,a=s*(e*e-r)+r;return a<0?0:Math.sqrt(a)},V2=[yu,un,sa],H2=t=>V2.find(e=>e.test(t));function $m(t){const e=H2(t);if(!e)return!1;let s=e.parse(t);return e===sa&&(s=U2(s)),s}const Fm=(t,e)=>{const s=$m(t),r=$m(e);if(!s||!r)return Bl(t,e);const a={...s};return i=>(a.red=jd(s.red,r.red,i),a.green=jd(s.green,r.green,i),a.blue=jd(s.blue,r.blue,i),a.alpha=lt(s.alpha,r.alpha,i),un.transform(a))},vu=new Set(["none","hidden"]);function W2(t,e){return vu.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function q2(t,e){return s=>lt(t,e,s)}function qh(t){return typeof t=="number"?q2:typeof t=="string"?Vh(t)?Bl:gt.test(t)?Fm:J2:Array.isArray(t)?Py:typeof t=="object"?gt.test(t)?Fm:K2:Bl}function Py(t,e){const s=[...t],r=s.length,a=t.map((i,o)=>qh(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)s[o]=a[o](i);return s}}function K2(t,e){const s={...t,...e},r={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(r[a]=qh(t[a])(t[a],e[a]));return a=>{for(const i in r)s[i]=r[i](a);return s}}function G2(t,e){const s=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=t.indexes[i][r[i]],l=t.values[o]??0;s[a]=l,r[i]++}return s}const J2=(t,e)=>{const s=Fr.createTransformer(e),r=Di(t),a=Di(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?vu.has(t)&&!a.values.length||vu.has(e)&&!r.values.length?W2(t,e):Co(Py(G2(r,a),a.values),s):Bl(t,e)};function Ey(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?lt(t,e,s):qh(t)(t,e)}const Y2=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Ge.update(e,s),stop:()=>As(e),now:()=>Tt.isProcessing?Tt.timestamp:Zt.now()}},Ay=(t,e,s=10)=>{let r="";const a=Math.max(Math.round(e/s),2);for(let i=0;i<a;i++)r+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ul=2e4;function Kh(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<Ul;)e+=s,r=t.next(e);return e>=Ul?1/0:e}function X2(t,e=100,s){const r=s({...t,keyframes:[0,e]}),a=Math.min(Kh(r),Ul);return{type:"keyframes",ease:i=>r.next(a*i).value/e,duration:Vs(a)}}const Z2=5;function Ly(t,e,s){const r=Math.max(e-Z2,0);return Fh(s-t(r),e-r)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nd=.001;function Q2({duration:t=dt.duration,bounce:e=dt.bounce,velocity:s=dt.velocity,mass:r=dt.mass}){let a,i,o=1-e;o=Ks(dt.minDamping,dt.maxDamping,o),t=Ks(dt.minDuration,dt.maxDuration,Vs(t)),o<1?(a=d=>{const u=d*o,h=u*t,f=u-s,m=wu(d,o),x=Math.exp(-h);return Nd-f/m*x},i=d=>{const h=d*o*t,f=h*s+s,m=Math.pow(o,2)*Math.pow(d,2)*t,x=Math.exp(-h),g=wu(Math.pow(d,2),o);return(-a(d)+Nd>0?-1:1)*((f-m)*x)/g}):(a=d=>{const u=Math.exp(-d*t),h=(d-s)*t+1;return-Nd+u*h},i=d=>{const u=Math.exp(-d*t),h=(s-d)*(t*t);return u*h});const l=5/t,c=tT(a,i,l);if(t=Us(t),isNaN(c))return{stiffness:dt.stiffness,damping:dt.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const eT=12;function tT(t,e,s){let r=s;for(let a=1;a<eT;a++)r=r-t(r)/e(r);return r}function wu(t,e){return t*Math.sqrt(1-e*e)}const sT=["duration","bounce"],rT=["stiffness","damping","mass"];function zm(t,e){return e.some(s=>t[s]!==void 0)}function nT(t){let e={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...t};if(!zm(t,rT)&&zm(t,sT))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,i=2*Ks(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:dt.mass,stiffness:a,damping:i}}else{const s=Q2(t);e={...e,...s,mass:dt.mass},e.isResolvedFromDuration=!0}return e}function Vl(t=dt.visualDuration,e=dt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=nT({...s,velocity:-Vs(s.velocity||0)}),x=f||0,g=d/(2*Math.sqrt(c*u)),b=o-i,y=Vs(Math.sqrt(c/u)),w=Math.abs(b)<5;r||(r=w?dt.restSpeed.granular:dt.restSpeed.default),a||(a=w?dt.restDelta.granular:dt.restDelta.default);let N;if(g<1){const k=wu(y,g);N=j=>{const v=Math.exp(-g*y*j);return o-v*((x+g*y*b)/k*Math.sin(k*j)+b*Math.cos(k*j))}}else if(g===1)N=k=>o-Math.exp(-y*k)*(b+(x+y*b)*k);else{const k=y*Math.sqrt(g*g-1);N=j=>{const v=Math.exp(-g*y*j),_=Math.min(k*j,300);return o-v*((x+g*y*b)*Math.sinh(_)+k*b*Math.cosh(_))/k}}const S={calculatedDuration:m&&h||null,next:k=>{const j=N(k);if(m)l.done=k>=h;else{let v=k===0?x:0;g<1&&(v=k===0?Us(x):Ly(N,k,j));const _=Math.abs(v)<=r,E=Math.abs(o-j)<=a;l.done=_&&E}return l.value=l.done?o:j,l},toString:()=>{const k=Math.min(Kh(S),Ul),j=Ay(v=>S.next(k*v).value,k,30);return k+"ms "+j},toTransition:()=>{}};return S}Vl.applyToOptions=t=>{const e=X2(t,100,Vl);return t.ease=e.ease,t.duration=Us(e.duration),t.type="keyframes",t};function ju({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},m=_=>l!==void 0&&_<l||c!==void 0&&_>c,x=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let g=s*e;const b=h+g,y=o===void 0?b:o(b);y!==b&&(g=y-h);const w=_=>-g*Math.exp(-_/r),N=_=>y+w(_),S=_=>{const E=w(_),R=N(_);f.done=Math.abs(E)<=d,f.value=f.done?y:R};let k,j;const v=_=>{m(f.value)&&(k=_,j=Vl({keyframes:[f.value,x(f.value)],velocity:Ly(N,_,f.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return v(0),{calculatedDuration:null,next:_=>{let E=!1;return!j&&k===void 0&&(E=!0,S(_),v(_)),k!==void 0&&_>=k?j.next(_-k):(!E&&S(_),f)}}}function aT(t,e,s){const r=[],a=s||ir.mix||Ey,i=t.length-1;for(let o=0;o<i;o++){let l=a(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||es:e;l=Co(c,l)}r.push(l)}return r}function Gh(t,e,{clamp:s=!0,ease:r,mixer:a}={}){const i=t.length;if(Mi(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=aT(e,r,a),c=l.length,d=u=>{if(o&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=ya(t[h],t[h+1],u);return l[h](f)};return s?u=>d(Ks(t[0],t[i-1],u)):d}function iT(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const a=ya(0,e,r);t.push(lt(s,1,a))}}function Ry(t){const e=[0];return iT(e,t.length-1),e}function oT(t,e){return t.map(s=>s*e)}function lT(t,e){return t.map(()=>e||vy).splice(0,t.length-1)}function gi({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const a=w2(r)?r.map(Mm):Mm(r),i={done:!1,value:e[0]},o=oT(s&&s.length===e.length?s:Ry(e),t),l=Gh(o,e,{ease:Array.isArray(a)?a:lT(e,a)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const cT=t=>t!==null;function Jh(t,{repeat:e,repeatType:s="loop"},r,a=1){const i=t.filter(cT),l=a<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const dT={decay:ju,inertia:ju,tween:gi,keyframes:gi,spring:Vl};function Oy(t){typeof t.type=="string"&&(t.type=dT[t.type])}class Yh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const uT=t=>t/100;class Hc extends Yh{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:s}=this.options;s&&s.updatedAt!==Zt.now()&&this.tick(Zt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Oy(e);const{type:s=gi,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=s||gi;c!==gi&&typeof l[0]!="number"&&(this.mixKeyframes=Co(uT,Ey(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Kh(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=d}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:m,type:x,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let N=this.currentTime,S=r;if(h){const _=Math.min(this.currentTime,a)/l;let E=Math.floor(_),R=_%1;!R&&_>=1&&(R=1),R===1&&E--,E=Math.min(E,h+1),!!(E%2)&&(f==="reverse"?(R=1-R,m&&(R-=m/l)):f==="mirror"&&(S=o)),N=Ks(0,1,R)*l}const k=w?{done:!1,value:u[0]}:S.next(N);i&&(k.value=i(k.value));let{done:j}=k;!w&&c!==null&&(j=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const v=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return v&&x!==ju&&(k.value=Jh(u,this.options,b,this.speed)),g&&g(k.value),v&&this.finish(),k}then(e,s){return this.finished.then(e,s)}get duration(){return Vs(this.calculatedDuration)}get time(){return Vs(this.currentTime)}set time(e){var s;e=Us(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zt.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Vs(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:e=Y2,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function hT(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hn=t=>t*180/Math.PI,Nu=t=>{const e=hn(Math.atan2(t[1],t[0]));return ku(e)},fT={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Nu,rotateZ:Nu,skewX:t=>hn(Math.atan(t[1])),skewY:t=>hn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ku=t=>(t=t%360,t<0&&(t+=360),t),Bm=Nu,Um=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Vm=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),mT={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Um,scaleY:Vm,scale:t=>(Um(t)+Vm(t))/2,rotateX:t=>ku(hn(Math.atan2(t[6],t[5]))),rotateY:t=>ku(hn(Math.atan2(-t[2],t[0]))),rotateZ:Bm,rotate:Bm,skewX:t=>hn(Math.atan(t[4])),skewY:t=>hn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Su(t){return t.includes("scale")?1:0}function _u(t,e){if(!t||t==="none")return Su(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=mT,a=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=fT,a=l}if(!a)return Su(e);const i=r[e],o=a[1].split(",").map(gT);return typeof i=="function"?i(o):o[i]}const pT=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return _u(s,e)};function gT(t){return parseFloat(t.trim())}const za=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ba=new Set(za),Hm=t=>t===Fa||t===be,xT=new Set(["x","y","z"]),bT=za.filter(t=>!xT.has(t));function yT(t){const e=[];return bT.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const bn={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>_u(e,"x"),y:(t,{transform:e})=>_u(e,"y")};bn.translateX=bn.x;bn.translateY=bn.y;const yn=new Set;let Cu=!1,Tu=!1,Pu=!1;function My(){if(Tu){const t=Array.from(yn).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const a=yT(r);a.length&&(s.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Tu=!1,Cu=!1,yn.forEach(t=>t.complete(Pu)),yn.clear()}function Iy(){yn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Tu=!0)})}function vT(){Pu=!0,Iy(),My(),Pu=!1}class Xh{constructor(e,s,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(yn.add(this),Cu||(Cu=!0,Ge.read(Iy),Ge.resolveKeyframes(My))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:a}=this;if(e[0]===null){const i=a==null?void 0:a.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&s){const l=r.readValue(s,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}hT(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yn.delete(this)}cancel(){this.state==="scheduled"&&(yn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wT=t=>t.startsWith("--");function jT(t,e,s){wT(e)?t.style.setProperty(e,s):t.style[e]=s}const Dy=Dh(()=>window.ScrollTimeline!==void 0),NT={};function kT(t,e){const s=Dh(t);return()=>NT[e]??s()}const $y=kT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ri=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,Wm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ri([0,.65,.55,1]),circOut:ri([.55,0,1,.45]),backIn:ri([.31,.01,.66,-.59]),backOut:ri([.33,1.53,.69,.99])};function Fy(t,e){if(t)return typeof t=="function"?$y()?Ay(t,e):"ease-out":wy(t)?ri(t):Array.isArray(t)?t.map(s=>Fy(s,e)||Wm.easeOut):Wm[t]}function ST(t,e,s,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[e]:s};c&&(u.offset=c);const h=Fy(l,a);Array.isArray(h)&&(u.easing=h);const f={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(f.pseudoElement=d),t.animate(u,f)}function zy(t){return typeof t=="function"&&"applyToOptions"in t}function _T({type:t,...e}){return zy(t)&&$y()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class CT extends Yh{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Mi(typeof e.type!="string");const d=_T(e);this.animation=ST(s,r,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Jh(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):jT(s,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,r;const e=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Vs(Number(e))}get time(){return Vs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Us(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Dy()?(this.animation.timeline=e,es):s(this)}}const By={anticipate:xy,backInOut:gy,circInOut:yy};function TT(t){return t in By}function PT(t){typeof t.ease=="string"&&TT(t.ease)&&(t.ease=By[t.ease])}const qm=10;class ET extends CT{constructor(e){PT(e),Oy(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const l=new Hc({...o,autoplay:!1}),c=Us(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-qm).value,l.sample(c).value,qm),l.stop()}}const Km=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fr.test(t)||t==="0")&&!t.startsWith("url("));function AT(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function LT(t,e,s,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Km(a,e),l=Km(i,e);return!o||!l?!1:AT(t)||(s==="spring"||zy(s))&&r}function Eu(t){t.duration=0,t.type}const RT=new Set(["opacity","clipPath","filter","transform"]),OT=Dh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function MT(t){var u;const{motionValue:e,name:s,repeatDelay:r,repeatType:a,damping:i,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return OT()&&s&&RT.has(s)&&(s!=="transform"||!d)&&!c&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const IT=40;class DT extends Yh{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){var x;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Zt.now();const f={autoplay:e,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},m=(u==null?void 0:u.KeyframeResolver)||Xh;this.keyframeResolver=new m(l,(g,b,y)=>this.onKeyframesResolved(g,b,f,!y),c,d,u),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,s,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=r;this.resolvedAt=Zt.now(),LT(e,i,o,l)||((ir.instantAnimations||!c)&&(u==null||u(Jh(e,r,s))),e[0]=e[e.length-1],Eu(r),r.repeat=0);const f={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>IT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},m=!d&&MT(f)?new ET({...f,element:f.motionValue.owner.current}):new Hc(f);m.finished.then(()=>this.notifyFinished()).catch(es),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),vT()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const $T=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function FT(t){const e=$T.exec(t);if(!e)return[,];const[,s,r,a]=e;return[`--${s??r}`,a]}function Uy(t,e,s=1){const[r,a]=FT(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return cy(o)?parseFloat(o):o}return Vh(a)?Uy(a,e,s+1):a}function Zh(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Vy=new Set(["width","height","top","left","right","bottom",...za]),zT={test:t=>t==="auto",parse:t=>t},Hy=t=>e=>e.test(t),Wy=[Fa,be,Hs,Sr,O2,R2,zT],Gm=t=>Wy.find(Hy(t));function BT(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uy(t):!0}const UT=new Set(["brightness","contrast","saturate","opacity"]);function VT(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(Hh)||[];if(!r)return t;const a=s.replace(r,"");let i=UT.has(e)?1:0;return r!==s&&(i*=100),e+"("+i+a+")"}const HT=/\b([a-z-]*)\(.*?\)/gu,Au={...Fr,getAnimatableNone:t=>{const e=t.match(HT);return e?e.map(VT).join(" "):t}},Jm={...Fa,transform:Math.round},WT={rotate:Sr,rotateX:Sr,rotateY:Sr,rotateZ:Sr,scale:qo,scaleX:qo,scaleY:qo,scaleZ:qo,skew:Sr,skewX:Sr,skewY:Sr,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:Ii,originX:Im,originY:Im,originZ:be},Qh={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,backgroundPositionX:be,backgroundPositionY:be,...WT,zIndex:Jm,fillOpacity:Ii,strokeOpacity:Ii,numOctaves:Jm},qT={...Qh,color:gt,backgroundColor:gt,outlineColor:gt,fill:gt,stroke:gt,borderColor:gt,borderTopColor:gt,borderRightColor:gt,borderBottomColor:gt,borderLeftColor:gt,filter:Au,WebkitFilter:Au},qy=t=>qT[t];function Ky(t,e){let s=qy(t);return s!==Au&&(s=Fr),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const KT=new Set(["auto","none","0"]);function GT(t,e,s){let r=0,a;for(;r<t.length&&!a;){const i=t[r];typeof i=="string"&&!KT.has(i)&&Di(i).values.length&&(a=t[r]),r++}if(a&&s)for(const i of e)t[i]=Ky(s,a)}class JT extends Xh{constructor(e,s,r,a,i){super(e,s,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Vh(d))){const u=Uy(d,s.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Vy.has(r)||e.length!==2)return;const[a,i]=e,o=Gm(a),l=Gm(i);if(o!==l)if(Hm(o)&&Hm(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else bn[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||BT(e[a]))&&r.push(a);r.length&&GT(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bn[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){var l;const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=bn[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function Gy(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const a=document.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const Jy=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function ef(t){return dy(t)&&"offsetHeight"in t}const Ym=30,YT=t=>!isNaN(parseFloat(t)),xi={current:void 0};class XT{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=Zt.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Zt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YT(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new $h);const r=this.events[e].add(s);return e==="change"?()=>{r(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return xi.current&&xi.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Zt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ym)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Ym);return Fh(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cs(t,e){return new XT(t,e)}const{schedule:tf}=jy(queueMicrotask,!1),ks={x:!1,y:!1};function Yy(){return ks.x||ks.y}function ZT(t){return t==="x"||t==="y"?ks[t]?null:(ks[t]=!0,()=>{ks[t]=!1}):ks.x||ks.y?null:(ks.x=ks.y=!0,()=>{ks.x=ks.y=!1})}function Xy(t,e){const s=Gy(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[s,a,()=>r.abort()]}function Xm(t){return!(t.pointerType==="touch"||Yy())}function QT(t,e,s={}){const[r,a,i]=Xy(t,s),o=l=>{if(!Xm(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const u=h=>{Xm(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return r.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const Zy=(t,e)=>e?t===e?!0:Zy(t,e.parentElement):!1,sf=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,eP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tP(t){return eP.has(t.tagName)||t.tabIndex!==-1}const gl=new WeakSet;function Zm(t){return e=>{e.key==="Enter"&&t(e)}}function kd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sP=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=Zm(()=>{if(gl.has(s))return;kd(s,"down");const a=Zm(()=>{kd(s,"up")}),i=()=>kd(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function Qm(t){return sf(t)&&!Yy()}function rP(t,e,s={}){const[r,a,i]=Xy(t,s),o=l=>{const c=l.currentTarget;if(!Qm(l))return;gl.add(c);const d=e(c,l),u=(m,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),gl.has(c)&&gl.delete(c),Qm(m)&&typeof d=="function"&&d(m,{success:x})},h=m=>{u(m,c===window||c===document||s.useGlobalTarget||Zy(c,m.target))},f=m=>{u(m,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",f,a)};return r.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),ef(l)&&(l.addEventListener("focus",d=>sP(d,a)),!tP(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function rf(t){return dy(t)&&"ownerSVGElement"in t}const xl=new WeakMap;let _r;const Qy=(t,e,s)=>(r,a)=>a&&a[0]?a[0][t+"Size"]:rf(r)&&"getBBox"in r?r.getBBox()[e]:r[s],nP=Qy("inline","width","offsetWidth"),aP=Qy("block","height","offsetHeight");function iP({target:t,borderBoxSize:e}){var s;(s=xl.get(t))==null||s.forEach(r=>{r(t,{get width(){return nP(t,e)},get height(){return aP(t,e)}})})}function oP(t){t.forEach(iP)}function lP(){typeof ResizeObserver>"u"||(_r=new ResizeObserver(oP))}function cP(t,e){_r||lP();const s=Gy(t);return s.forEach(r=>{let a=xl.get(r);a||(a=new Set,xl.set(r,a)),a.add(e),_r==null||_r.observe(r)}),()=>{s.forEach(r=>{const a=xl.get(r);a==null||a.delete(e),a!=null&&a.size||_r==null||_r.unobserve(r)})}}const bl=new Set;let ra;function dP(){ra=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};bl.forEach(e=>e(t))},window.addEventListener("resize",ra)}function uP(t){return bl.add(t),ra||dP(),()=>{bl.delete(t),!bl.size&&typeof ra=="function"&&(window.removeEventListener("resize",ra),ra=void 0)}}function hP(t,e){return typeof t=="function"?uP(t):cP(t,e)}function ev(t,e){let s;const r=()=>{const{currentTime:a}=e,o=(a===null?0:a.value)/100;s!==o&&t(o),s=o};return Ge.preUpdate(r,!0),()=>As(r)}function fP(t){return rf(t)&&t.tagName==="svg"}function mP(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],a=t[1+s],i=t[2+s],o=t[3+s],l=Gh(a,i,o);return e?l(r):l}const Et=t=>!!(t&&t.getVelocity);function pP(t,e,s){const r=t.get();let a=null,i=r,o;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,c=()=>{a&&(a.stop(),a=null)},d=()=>{c(),a=new Hc({keyframes:[tp(t.get()),tp(i)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:o})};if(t.attach((u,h)=>(i=u,o=f=>h(ep(f,l)),Ge.postRender(d),t.get()),c),Et(e)){const u=e.on("change",f=>t.set(ep(f,l))),h=t.on("destroy",u);return()=>{u(),h()}}return c}function ep(t,e){return e?t+e:t}function tp(t){return typeof t=="number"?t:parseFloat(t)}const gP=[...Wy,gt,Fr],xP=t=>gP.find(Hy(t)),Eo=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class bP extends p.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=ef(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function yP({children:t,isPresent:e,anchorX:s,root:r}){const a=p.useId(),i=p.useRef(null),o=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(Eo);return p.useInsertionEffect(()=>{const{width:c,height:d,top:u,left:h,right:f}=o.current;if(e||!i.current||!c||!d)return;const m=s==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=a;const x=document.createElement("style");l&&(x.nonce=l);const g=r??document.head;return g.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{g.contains(x)&&g.removeChild(x)}},[e]),n.jsx(bP,{isPresent:e,childRef:i,sizeRef:o,children:p.cloneElement(t,{ref:i})})}const vP=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const d=$a(wP),u=p.useId();let h=!0,f=p.useMemo(()=>(h=!1,{id:u,initial:e,isPresent:s,custom:a,onExitComplete:m=>{d.set(m,!0);for(const x of d.values())if(!x)return;r&&r()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[s,d,r]);return i&&h&&(f={...f}),p.useMemo(()=>{d.forEach((m,x)=>d.set(x,!1))},[s]),p.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),o==="popLayout"&&(t=n.jsx(yP,{isPresent:s,anchorX:l,root:c,children:t})),n.jsx(Vc.Provider,{value:f,children:t})};function wP(){return new Map}function tv(t=!0){const e=p.useContext(Vc);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=e,i=p.useId();p.useEffect(()=>{if(t)return a(i)},[t]);const o=p.useCallback(()=>t&&r&&r(i),[i,r,t]);return!s&&r?[!1,o]:[!0]}const Ko=t=>t.key||"";function sp(t){const e=[];return p.Children.forEach(t,s=>{p.isValidElement(s)&&e.push(s)}),e}const jP=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,u]=tv(o),h=p.useMemo(()=>sp(t),[t]),f=o&&!d?[]:h.map(Ko),m=p.useRef(!0),x=p.useRef(h),g=$a(()=>new Map),[b,y]=p.useState(h),[w,N]=p.useState(h);Uc(()=>{m.current=!1,x.current=h;for(let j=0;j<w.length;j++){const v=Ko(w[j]);f.includes(v)?g.delete(v):g.get(v)!==!0&&g.set(v,!1)}},[w,f.length,f.join("-")]);const S=[];if(h!==b){let j=[...h];for(let v=0;v<w.length;v++){const _=w[v],E=Ko(_);f.includes(E)||(j.splice(v,0,_),S.push(_))}return i==="wait"&&S.length&&(j=S),N(sp(j)),y(h),null}const{forceRender:k}=p.useContext(Rh);return n.jsx(n.Fragment,{children:w.map(j=>{const v=Ko(j),_=o&&!d?!1:h===w||f.includes(v),E=()=>{if(g.has(v))g.set(v,!0);else return;let R=!0;g.forEach(z=>{z||(R=!1)}),R&&(k==null||k(),N(x.current),o&&(u==null||u()),r&&r())};return n.jsx(vP,{isPresent:_,initial:!m.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:_?void 0:E,anchorX:l,children:j},v)})})},sv=p.createContext({strict:!1}),rp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},va={};for(const t in rp)va[t]={isEnabled:e=>rp[t].some(s=>!!e[s])};function NP(t){for(const e in t)va[e]={...va[e],...t[e]}}const kP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kP.has(t)}let rv=t=>!Hl(t);function SP(t){typeof t=="function"&&(rv=e=>e.startsWith("on")?!Hl(e):t(e))}try{SP(require("@emotion/is-prop-valid").default)}catch{}function _P(t,e,s){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(rv(a)||s===!0&&Hl(a)||!e&&!Hl(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}const Wc=p.createContext({});function qc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $i(t){return typeof t=="string"||Array.isArray(t)}const nf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],af=["initial",...nf];function Kc(t){return qc(t.animate)||af.some(e=>$i(t[e]))}function nv(t){return!!(Kc(t)||t.variants)}function CP(t,e){if(Kc(t)){const{initial:s,animate:r}=t;return{initial:s===!1||$i(s)?s:void 0,animate:$i(r)?r:void 0}}return t.inherit!==!1?e:{}}function TP(t){const{initial:e,animate:s}=CP(t,p.useContext(Wc));return p.useMemo(()=>({initial:e,animate:s}),[np(e),np(s)])}function np(t){return Array.isArray(t)?t.join(" "):t}const Fi={};function PP(t){for(const e in t)Fi[e]=t[e],Uh(e)&&(Fi[e].isCSSVariable=!0)}function av(t,{layout:e,layoutId:s}){return Ba.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Fi[t]||t==="opacity")}const EP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AP=za.length;function LP(t,e,s){let r="",a=!0;for(let i=0;i<AP;i++){const o=za[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=Jy(l,Qh[o]);if(!c){a=!1;const u=EP[o]||o;r+=`${u}(${d}) `}s&&(e[o]=d)}}return r=r.trim(),s?r=s(e,a?"":r):a&&(r="none"),r}function of(t,e,s){const{style:r,vars:a,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Ba.has(c)){o=!0;continue}else if(Uh(c)){a[c]=d;continue}else{const u=Jy(d,Qh[c]);c.startsWith("origin")?(l=!0,i[c]=u):r[c]=u}}if(e.transform||(o||s?r.transform=LP(e,t.transform,s):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${d} ${u}`}}const lf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iv(t,e,s){for(const r in e)!Et(e[r])&&!av(r,s)&&(t[r]=e[r])}function RP({transformTemplate:t},e){return p.useMemo(()=>{const s=lf();return of(s,e,t),Object.assign({},s.vars,s.style)},[e])}function OP(t,e){const s=t.style||{},r={};return iv(r,s,t),Object.assign(r,RP(t,e)),r}function MP(t,e){const s={},r=OP(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const IP={offset:"stroke-dashoffset",array:"stroke-dasharray"},DP={offset:"strokeDashoffset",array:"strokeDasharray"};function $P(t,e,s=1,r=0,a=!0){t.pathLength=1;const i=a?IP:DP;t[i.offset]=be.transform(-r);const o=be.transform(e),l=be.transform(s);t[i.array]=`${o} ${l}`}function ov(t,{attrX:e,attrY:s,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(of(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),a!==void 0&&$P(h,a,i,o,!1)}const lv=()=>({...lf(),attrs:{}}),cv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function FP(t,e,s,r){const a=p.useMemo(()=>{const i=lv();return ov(i,e,cv(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};iv(i,t.style,t),a.style={...i,...a.style}}return a}const zP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cf(t){return typeof t!="string"||t.includes("-")?!1:!!(zP.indexOf(t)>-1||/[A-Z]/u.test(t))}function BP(t,e,s,{latestValues:r},a,i=!1){const l=(cf(t)?FP:MP)(e,r,a,t),c=_P(e,typeof t=="string",i),d=t!==p.Fragment?{...c,...l,ref:s}:{},{children:u}=e,h=p.useMemo(()=>Et(u)?u.get():u,[u]);return p.createElement(t,{...d,children:h})}function ap(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function df(t,e,s,r){if(typeof e=="function"){const[a,i]=ap(r);e=e(s!==void 0?s:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=ap(r);e=e(s!==void 0?s:t.custom,a,i)}return e}function yl(t){return Et(t)?t.get():t}function UP({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,a){return{latestValues:VP(s,r,a,t),renderState:e()}}function VP(t,e,s,r){const a={},i=r(t,{});for(const f in i)a[f]=yl(i[f]);let{initial:o,animate:l}=t;const c=Kc(t),d=nv(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!qc(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const x=df(t,f[m]);if(x){const{transitionEnd:g,transition:b,...y}=x;for(const w in y){let N=y[w];if(Array.isArray(N)){const S=u?N.length-1:0;N=N[S]}N!==null&&(a[w]=N)}for(const w in g)a[w]=g[w]}}}return a}const dv=t=>(e,s)=>{const r=p.useContext(Wc),a=p.useContext(Vc),i=()=>UP(t,e,r,a);return s?i():$a(i)};function uf(t,e,s){var i;const{style:r}=t,a={};for(const o in r)(Et(r[o])||e.style&&Et(e.style[o])||av(o,t)||((i=s==null?void 0:s.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const HP=dv({scrapeMotionValuesFromProps:uf,createRenderState:lf});function uv(t,e,s){const r=uf(t,e,s);for(const a in t)if(Et(t[a])||Et(e[a])){const i=za.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}const WP=dv({scrapeMotionValuesFromProps:uv,createRenderState:lv}),qP=Symbol.for("motionComponentSymbol");function na(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function KP(t,e,s){return p.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):na(s)&&(s.current=r))},[e])}const hf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GP="framerAppearId",hv="data-"+hf(GP),fv=p.createContext({});function JP(t,e,s,r,a){var g,b;const{visualElement:i}=p.useContext(Wc),o=p.useContext(sv),l=p.useContext(Vc),c=p.useContext(Eo).reducedMotion,d=p.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:i,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=p.useContext(fv);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&YP(d.current,s,a,h);const f=p.useRef(!1);p.useInsertionEffect(()=>{u&&f.current&&u.update(s,l)});const m=s[hv],x=p.useRef(!!m&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,m))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,m)));return Uc(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),x.current&&u.animationState&&u.animationState.animateChanges())}),p.useEffect(()=>{u&&(!x.current&&u.animationState&&u.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),x.current=!1),u.enteringChildren=void 0)}),u}function YP(t,e,s,r){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:mv(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&na(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:d})}function mv(t){if(t)return t.options.allowProjection!==!1?t.projection:mv(t.parent)}function Sd(t,{forwardMotionProps:e=!1}={},s,r){s&&NP(s);const a=cf(t)?WP:HP;function i(l,c){let d;const u={...p.useContext(Eo),...l,layoutId:XP(l)},{isStatic:h}=u,f=TP(l),m=a(l,h);if(!h&&Oh){ZP();const x=QP(u);d=x.MeasureLayout,f.visualElement=JP(t,m,u,r,x.ProjectionNode)}return n.jsxs(Wc.Provider,{value:f,children:[d&&f.visualElement?n.jsx(d,{visualElement:f.visualElement,...u}):null,BP(t,l,KP(m,f.visualElement,c),m,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=p.forwardRef(i);return o[qP]=t,o}function XP({layoutId:t}){const e=p.useContext(Rh).id;return e&&t!==void 0?e+"-"+t:t}function ZP(t,e){p.useContext(sv).strict}function QP(t){const{drag:e,layout:s}=va;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function eE(t,e){if(typeof Proxy>"u")return Sd;const s=new Map,r=(i,o)=>Sd(i,o,t,e),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(s.has(o)||s.set(o,Sd(o,void 0,t,e)),s.get(o))})}function pv({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function tE({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sE(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function _d(t){return t===void 0||t===1}function Lu({scale:t,scaleX:e,scaleY:s}){return!_d(t)||!_d(e)||!_d(s)}function ln(t){return Lu(t)||gv(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gv(t){return ip(t.x)||ip(t.y)}function ip(t){return t&&t!=="0%"}function Wl(t,e,s){const r=t-s,a=e*r;return s+a}function op(t,e,s,r,a){return a!==void 0&&(t=Wl(t,a,r)),Wl(t,s,r)+e}function Ru(t,e=0,s=1,r,a){t.min=op(t.min,e,s,r,a),t.max=op(t.max,e,s,r,a)}function xv(t,{x:e,y:s}){Ru(t.x,e.translate,e.scale,e.originPoint),Ru(t.y,s.translate,s.scale,s.originPoint)}const lp=.999999999999,cp=1.0000000000001;function rE(t,e,s,r=!1){const a=s.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ia(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xv(t,o)),r&&ln(i.latestValues)&&ia(t,i.latestValues))}e.x<cp&&e.x>lp&&(e.x=1),e.y<cp&&e.y>lp&&(e.y=1)}function aa(t,e){t.min=t.min+e,t.max=t.max+e}function dp(t,e,s,r,a=.5){const i=lt(t.min,t.max,a);Ru(t,e,s,i,r)}function ia(t,e){dp(t.x,e.x,e.scaleX,e.scale,e.originX),dp(t.y,e.y,e.scaleY,e.scale,e.originY)}function bv(t,e){return pv(sE(t.getBoundingClientRect(),e))}function nE(t,e,s){const r=bv(t,s),{scroll:a}=e;return a&&(aa(r.x,a.offset.x),aa(r.y,a.offset.y)),r}const up=()=>({translate:0,scale:1,origin:0,originPoint:0}),oa=()=>({x:up(),y:up()}),hp=()=>({min:0,max:0}),ht=()=>({x:hp(),y:hp()}),Ou={current:null},yv={current:!1};function aE(){if(yv.current=!0,!!Oh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ou.current=t.matches;t.addEventListener("change",e),e()}else Ou.current=!1}const iE=new WeakMap;function oE(t,e,s){for(const r in e){const a=e[r],i=s[r];if(Et(a))t.addValue(r,a);else if(Et(i))t.addValue(r,Cs(a,{owner:t}));else if(i!==a)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(r);t.addValue(r,Cs(o!==void 0?o:a,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const fp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lE{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Zt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ge.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Kc(s),this.isVariantNode=nv(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&Et(m)&&m.set(c[f])}}mount(e){var s;this.current=e,iE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),yv.current||aE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ou.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),As(this.notifyUpdate),As(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ba.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),i&&i(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in va){const s=va[e];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<fp.length;r++){const a=fp[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=oE(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=Cs(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(cy(r)||uy(r))?r=parseFloat(r):!xP(r)&&Fr.test(s)&&(r=Ky(e,s)),this.setBaseTarget(e,Et(r)?r.get():r)),Et(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=df(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Et(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new $h),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){tf.render(this.render)}}class vv extends lE{constructor(){super(...arguments),this.KeyframeResolver=JT}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Et(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function wv(t,{style:e,vars:s},r,a){const i=t.style;let o;for(o in e)i[o]=e[o];a==null||a.applyProjectionStyles(i,r);for(o in s)i.setProperty(o,s[o])}function cE(t){return window.getComputedStyle(t)}class dE extends vv{constructor(){super(...arguments),this.type="html",this.renderInstance=wv}readValueFromInstance(e,s){var r;if(Ba.has(s))return(r=this.projection)!=null&&r.isProjecting?Su(s):pT(e,s);{const a=cE(e),i=(Uh(s)?a.getPropertyValue(s):a[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return bv(e,s)}build(e,s,r){of(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return uf(e,s,r)}}const jv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uE(t,e,s,r){wv(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(jv.has(a)?a:hf(a),e.attrs[a])}class hE extends vv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Ba.has(s)){const r=qy(s);return r&&r.default||0}return s=jv.has(s)?s:hf(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return uv(e,s,r)}build(e,s,r){ov(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,a){uE(e,s,r,a)}mount(e){this.isSVGTag=cv(e.tagName),super.mount(e)}}const fE=(t,e)=>cf(t)?new hE(e):new dE(e,{allowProjection:t!==p.Fragment});function ca(t,e,s){const r=t.getProps();return df(r,e,s!==void 0?s:r.custom,t)}const Mu=t=>Array.isArray(t);function mE(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Cs(s))}function pE(t){return Mu(t)?t[t.length-1]||0:t}function gE(t,e){const s=ca(t,e);let{transitionEnd:r={},transition:a={},...i}=s||{};i={...i,...r};for(const o in i){const l=pE(i[o]);mE(t,o,l)}}function xE(t){return!!(Et(t)&&t.add)}function Iu(t,e){const s=t.getValue("willChange");if(xE(s))return s.add(e);if(!s&&ir.WillChange){const r=new ir.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Nv(t){return t.props[hv]}const bE=t=>t!==null;function yE(t,{repeat:e,repeatType:s="loop"},r){const a=t.filter(bE),i=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[i]}const vE={type:"spring",stiffness:500,damping:25,restSpeed:10},wE=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jE={type:"keyframes",duration:.8},NE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kE=(t,{keyframes:e})=>e.length>2?jE:Ba.has(t)?t.startsWith("scale")?wE(e[1]):vE:NE;function SE({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const ff=(t,e,s,r={},a,i)=>o=>{const l=Zh(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Us(c);const u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:a};SE(l)||Object.assign(u,kE(t,u)),u.duration&&(u.duration=Us(u.duration)),u.repeatDelay&&(u.repeatDelay=Us(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Eu(u),u.delay===0&&(h=!0)),(ir.instantAnimations||ir.skipAnimations)&&(h=!0,Eu(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const f=yE(u.keyframes,l);if(f!==void 0){Ge.update(()=>{u.onUpdate(f),u.onComplete()});return}}return l.isSync?new Hc(u):new DT(u)};function _E({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function kv(t,e,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(i=r);const c=[],d=a&&t.animationState&&t.animationState.getState()[a];for(const u in l){const h=t.getValue(u,t.latestValues[u]??null),f=l[u];if(f===void 0||d&&_E(d,u))continue;const m={delay:s,...Zh(i||{},u)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===x&&!m.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=Nv(t);if(y){const w=window.MotionHandoffAnimation(y,u,Ge);w!==null&&(m.startTime=w,g=!0)}}Iu(t,u),h.start(ff(u,h,f,t.shouldReduceMotion&&Vy.has(u)?{type:!1}:m,t,g));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Ge.update(()=>{o&&gE(t,o)})}),c}function Sv(t,e,s,r=0,a=1){const i=Array.from(t).sort((d,u)=>d.sortNodePosition(u)).indexOf(e),o=t.size,l=(o-1)*r;return typeof s=="function"?s(i,o):a===1?i*r:l-i*r}function Du(t,e,s={}){var c;const r=ca(t,e,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(kv(t,r,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=a;return CE(t,e,d,u,h,f,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(s.delay)])}function CE(t,e,s=0,r=0,a=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Du(c,e,{...o,delay:s+(typeof r=="function"?0:r)+Sv(t.variantChildren,c,r,a,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function TE(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(i=>Du(t,i,s));r=Promise.all(a)}else if(typeof e=="string")r=Du(t,e,s);else{const a=typeof e=="function"?ca(t,e,s.custom):e;r=Promise.all(kv(t,a,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}function _v(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const PE=af.length;function Cv(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Cv(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<PE;s++){const r=af[s],a=t.props[r];($i(a)||a===!1)&&(e[r]=a)}return e}const EE=[...nf].reverse(),AE=nf.length;function LE(t){return e=>Promise.all(e.map(({animation:s,options:r})=>TE(t,s,r)))}function RE(t){let e=LE(t),s=mp(),r=!0;const a=c=>(d,u)=>{var f;const h=ca(t,u,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:x,...g}=h;d={...d,...g,...x}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,u=Cv(t.parent)||{},h=[],f=new Set;let m={},x=1/0;for(let b=0;b<AE;b++){const y=EE[b],w=s[y],N=d[y]!==void 0?d[y]:u[y],S=$i(N),k=y===c?w.isActive:null;k===!1&&(x=b);let j=N===u[y]&&N!==d[y]&&S;if(j&&r&&t.manuallyAnimateOnMount&&(j=!1),w.protectedKeys={...m},!w.isActive&&k===null||!N&&!w.prevProp||qc(N)||typeof N=="boolean")continue;const v=OE(w.prevProp,N);let _=v||y===c&&w.isActive&&!j&&S||b>x&&S,E=!1;const R=Array.isArray(N)?N:[N];let z=R.reduce(a(y),{});k===!1&&(z={});const{prevResolvedValues:F={}}=w,L={...F,...z},U=I=>{_=!0,f.has(I)&&(E=!0,f.delete(I)),w.needsAnimating[I]=!0;const O=t.getValue(I);O&&(O.liveStyle=!1)};for(const I in L){const O=z[I],D=F[I];if(m.hasOwnProperty(I))continue;let W=!1;Mu(O)&&Mu(D)?W=!_v(O,D):W=O!==D,W?O!=null?U(I):f.add(I):O!==void 0&&f.has(I)?U(I):w.protectedKeys[I]=!0}w.prevProp=N,w.prevResolvedValues=z,w.isActive&&(m={...m,...z}),r&&t.blockInitialAnimation&&(_=!1);const J=j&&v;_&&(!J||E)&&h.push(...R.map(I=>{const O={type:y};if(typeof I=="string"&&r&&!J&&t.manuallyAnimateOnMount&&t.parent){const{parent:D}=t,W=ca(D,I);if(D.enteringChildren&&W){const{delayChildren:C}=W.transition||{};O.delay=Sv(D.enteringChildren,t,C)}}return{animation:I,options:O}}))}if(f.size){const b={};if(typeof d.initial!="boolean"){const y=ca(t,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(b.transition=y.transition)}f.forEach(y=>{const w=t.getBaseTarget(y),N=t.getValue(y);N&&(N.liveStyle=!0),b[y]=w??null}),h.push({animation:b})}let g=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function l(c,d){var h;if(s[c].isActive===d)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,d)}),s[c].isActive=d;const u=o(c);for(const f in s)s[f].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=mp(),r=!0}}}function OE(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_v(e,t):!1}function rn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mp(){return{animate:rn(!0),whileInView:rn(),whileHover:rn(),whileTap:rn(),whileDrag:rn(),whileFocus:rn(),exit:rn()}}class Wr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ME extends Wr{constructor(e){super(e),e.animationState||(e.animationState=RE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let IE=0;class DE extends Wr{constructor(){super(...arguments),this.id=IE++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const $E={animation:{Feature:ME},exit:{Feature:DE}};function zi(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function Ao(t){return{point:{x:t.pageX,y:t.pageY}}}const FE=t=>e=>sf(e)&&t(e,Ao(e));function bi(t,e,s,r){return zi(t,e,FE(s),r)}const Tv=1e-4,zE=1-Tv,BE=1+Tv,Pv=.01,UE=0-Pv,VE=0+Pv;function Vt(t){return t.max-t.min}function HE(t,e,s){return Math.abs(t-e)<=s}function pp(t,e,s,r=.5){t.origin=r,t.originPoint=lt(e.min,e.max,t.origin),t.scale=Vt(s)/Vt(e),t.translate=lt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=zE&&t.scale<=BE||isNaN(t.scale))&&(t.scale=1),(t.translate>=UE&&t.translate<=VE||isNaN(t.translate))&&(t.translate=0)}function yi(t,e,s,r){pp(t.x,e.x,s.x,r?r.originX:void 0),pp(t.y,e.y,s.y,r?r.originY:void 0)}function gp(t,e,s){t.min=s.min+e.min,t.max=t.min+Vt(e)}function WE(t,e,s){gp(t.x,e.x,s.x),gp(t.y,e.y,s.y)}function xp(t,e,s){t.min=e.min-s.min,t.max=t.min+Vt(e)}function vi(t,e,s){xp(t.x,e.x,s.x),xp(t.y,e.y,s.y)}function ms(t){return[t("x"),t("y")]}const Ev=({current:t})=>t?t.ownerDocument.defaultView:null,bp=(t,e)=>Math.abs(t-e);function qE(t,e){const s=bp(t.x,e.x),r=bp(t.y,e.y);return Math.sqrt(s**2+r**2)}class Av{constructor(e,s,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Td(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=qE(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!x)return;const{point:g}=f,{timestamp:b}=Tt;this.history.push({...g,timestamp:b});const{onStart:y,onMove:w}=this.handlers;m||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Cd(m,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Td(f.type==="pointercancel"?this.lastMoveEventInfo:Cd(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,y),g&&g(f,y)},!sf(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const l=Ao(e),c=Cd(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=Tt;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=s;h&&h(e,Td(c,this.history)),this.removeListeners=Co(bi(this.contextWindow,"pointermove",this.handlePointerMove),bi(this.contextWindow,"pointerup",this.handlePointerUp),bi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),As(this.updatePoint)}}function Cd(t,e){return e?{point:e(t.point)}:t}function yp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Td({point:t},e){return{point:t,delta:yp(t,Lv(e)),offset:yp(t,KE(e)),velocity:GE(e,.1)}}function KE(t){return t[0]}function Lv(t){return t[t.length-1]}function GE(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const a=Lv(t);for(;s>=0&&(r=t[s],!(a.timestamp-r.timestamp>Us(e)));)s--;if(!r)return{x:0,y:0};const i=Vs(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function JE(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?lt(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?lt(s,t,r.max):Math.min(t,s)),t}function vp(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function YE(t,{top:e,left:s,bottom:r,right:a}){return{x:vp(t.x,s,a),y:vp(t.y,e,r)}}function wp(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function XE(t,e){return{x:wp(t.x,e.x),y:wp(t.y,e.y)}}function ZE(t,e){let s=.5;const r=Vt(t),a=Vt(e);return a>r?s=ya(e.min,e.max-r,t.min):r>a&&(s=ya(t.min,t.max-a,e.min)),Ks(0,1,s)}function QE(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const $u=.35;function eA(t=$u){return t===!1?t=0:t===!0&&(t=$u),{x:jp(t,"left","right"),y:jp(t,"top","bottom")}}function jp(t,e,s){return{min:Np(t,e),max:Np(t,s)}}function Np(t,e){return typeof t=="number"?t:t[e]||0}const tA=new WeakMap;class sA{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Ao(h).point)},o=(h,f)=>{const{drag:m,dragPropagation:x,onDragStart:g}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ZT(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ms(y=>{let w=this.getAxisMotionValue(y).get()||0;if(Hs.test(w)){const{projection:N}=this.visualElement;if(N&&N.layout){const S=N.layout.layoutBox[y];S&&(w=Vt(S)*(parseFloat(w)/100))}}this.originPoint[y]=w}),g&&Ge.postRender(()=>g(h,f)),Iu(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:g,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=f;if(x&&this.currentDirection===null){this.currentDirection=rA(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),b&&b(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ms(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Av(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:Ev(this.visualElement)})}stop(e,s){const r=e||this.latestPointerEvent,a=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ge.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:a}=this.getProps();if(!r||!Go(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=JE(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;e&&na(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=YE(r.layoutBox,e):this.constraints=!1,this.elastic=eA(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ms(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=QE(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!na(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=nE(r,a.root,this.visualElement.getTransformPagePoint());let o=XE(a.layout.layoutBox,i);if(s){const l=s(tE(o));this.hasMutatedConstraints=!!l,l&&(o=pv(l))}return o}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ms(u=>{if(!Go(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=a?200:1e6,m=a?40:1e7,x={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(d).then(l)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return Iu(this.visualElement,e),r.start(ff(e,r,0,s,this.visualElement,!1))}stopAnimation(){ms(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ms(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ms(s=>{const{drag:r}=this.getProps();if(!Go(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(e[s]-lt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!na(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ms(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=ZE({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ms(o=>{if(!Go(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(lt(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;tA.set(this.visualElement,this);const e=this.visualElement.current,s=bi(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();na(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ge.read(r);const o=zi(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ms(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=$u,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Go(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function rA(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class nA extends Wr{constructor(e){super(e),this.removeGroupControls=es,this.removeListeners=es,this.controls=new sA(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||es}unmount(){this.removeGroupControls(),this.removeListeners()}}const kp=t=>(e,s)=>{t&&Ge.postRender(()=>t(e,s))};class aA extends Wr{constructor(){super(...arguments),this.removePointerDownListener=es}onPointerDown(e){this.session=new Av(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ev(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:kp(e),onStart:kp(s),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Ge.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=bi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sp(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ja={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const s=Sp(t,e.target.x),r=Sp(t,e.target.y);return`${s}% ${r}%`}},iA={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,a=Fr.parse(t);if(a.length>5)return r;const i=Fr.createTransformer(t),o=typeof a[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const d=lt(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};let Pd=!1;class oA extends p.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=e;PP(lA),i&&(s.group&&s.group.add(i),r&&r.register&&a&&r.register(i),Pd&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),vl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Pd=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ge.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=e;Pd=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Rv(t){const[e,s]=tv(),r=p.useContext(Rh);return n.jsx(oA,{...t,layoutGroup:r,switchLayoutGroup:p.useContext(fv),isPresent:e,safeToRemove:s})}const lA={borderRadius:{...Ja,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ja,borderTopRightRadius:Ja,borderBottomLeftRadius:Ja,borderBottomRightRadius:Ja,boxShadow:iA};function cA(t,e,s){const r=Et(t)?t:Cs(t);return r.start(ff("",r,e,s)),r.animation}const dA=(t,e)=>t.depth-e.depth;class uA{constructor(){this.children=[],this.isDirty=!1}add(e){Mh(this.children,e),this.isDirty=!0}remove(e){Ih(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dA),this.isDirty=!1,this.children.forEach(e)}}function hA(t,e){const s=Zt.now(),r=({timestamp:a})=>{const i=a-s;i>=e&&(As(r),t(i-e))};return Ge.setup(r,!0),()=>As(r)}const Ov=["TopLeft","TopRight","BottomLeft","BottomRight"],fA=Ov.length,_p=t=>typeof t=="string"?parseFloat(t):t,Cp=t=>typeof t=="number"||be.test(t);function mA(t,e,s,r,a,i){a?(t.opacity=lt(0,s.opacity??1,pA(r)),t.opacityExit=lt(e.opacity??1,0,gA(r))):i&&(t.opacity=lt(e.opacity??1,s.opacity??1,r));for(let o=0;o<fA;o++){const l=`border${Ov[o]}Radius`;let c=Tp(e,l),d=Tp(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Cp(c)===Cp(d)?(t[l]=Math.max(lt(_p(c),_p(d),r),0),(Hs.test(d)||Hs.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||s.rotate)&&(t.rotate=lt(e.rotate||0,s.rotate||0,r))}function Tp(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pA=Mv(0,.5,by),gA=Mv(.5,.95,es);function Mv(t,e,s){return r=>r<t?0:r>e?1:s(ya(t,e,r))}function Pp(t,e){t.min=e.min,t.max=e.max}function us(t,e){Pp(t.x,e.x),Pp(t.y,e.y)}function Ep(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ap(t,e,s,r,a){return t-=e,t=Wl(t,1/s,r),a!==void 0&&(t=Wl(t,1/a,r)),t}function xA(t,e=0,s=1,r=.5,a,i=t,o=t){if(Hs.test(e)&&(e=parseFloat(e),e=lt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=lt(i.min,i.max,r);t===i&&(l-=e),t.min=Ap(t.min,e,s,l,a),t.max=Ap(t.max,e,s,l,a)}function Lp(t,e,[s,r,a],i,o){xA(t,e[s],e[r],e[a],e.scale,i,o)}const bA=["x","scaleX","originX"],yA=["y","scaleY","originY"];function Rp(t,e,s,r){Lp(t.x,e,bA,s?s.x:void 0,r?r.x:void 0),Lp(t.y,e,yA,s?s.y:void 0,r?r.y:void 0)}function Op(t){return t.translate===0&&t.scale===1}function Iv(t){return Op(t.x)&&Op(t.y)}function Mp(t,e){return t.min===e.min&&t.max===e.max}function vA(t,e){return Mp(t.x,e.x)&&Mp(t.y,e.y)}function Ip(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Dv(t,e){return Ip(t.x,e.x)&&Ip(t.y,e.y)}function Dp(t){return Vt(t.x)/Vt(t.y)}function $p(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class wA{constructor(){this.members=[]}add(e){Mh(this.members,e),e.scheduleRender()}remove(e){if(Ih(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jA(t,e,s){let r="";const a=t.x.translate/e.x,i=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:f,skewX:m,skewY:x}=s;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Ed=["","X","Y","Z"],NA=1e3;let kA=0;function Ad(t,e,s,r){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function $v(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=Nv(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Ge,!(a||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&$v(r)}function Fv({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=kA++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(CA),this.nodes.forEach(AA),this.nodes.forEach(LA),this.nodes.forEach(TA)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new uA)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $h),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rf(o)&&!fP(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let u,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ge.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,u&&u(),u=hA(f,250),vl.hasAnimatedSinceResize&&(vl.hasAnimatedSinceResize=!1,this.nodes.forEach(Bp)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||DA,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=d.getProps(),y=!this.targetLayout||!Dv(this.targetLayout,m),w=!h&&f;if(this.options.layoutRoot||this.resumeFrom||w||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Zh(x,"layout"),onPlay:g,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(u,w)}else h||Bp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),As(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RA),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$v(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fp);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(EA),this.nodes.forEach(SA),this.nodes.forEach(_A)):this.nodes.forEach(zp),this.clearAllSnapshots();const l=Zt.now();Tt.delta=Ks(0,1e3/60,l-Tt.timestamp),Tt.timestamp=l,Tt.isProcessing=!0,yd.update.process(Tt),yd.preRender.process(Tt),yd.render.process(Tt),Tt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PA),this.sharedNodes.forEach(OA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vt(this.snapshot.measuredBox.x)&&!Vt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Iv(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ln(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),$A(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return ht();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(FA))){const{scroll:u}=this.root;u&&(aa(l.x,u.offset.x),aa(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=ht();if(us(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&us(l,o),aa(l.x,h.offset.x),aa(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=ht();us(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ia(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ln(u.latestValues)&&ia(c,u.latestValues)}return ln(this.latestValues)&&ia(c,this.latestValues),c}removeTransform(o){const l=ht();us(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ln(d.latestValues))continue;Lu(d.latestValues)&&d.updateSnapshot();const u=ht(),h=d.measurePageBox();us(u,h),Rp(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return ln(this.latestValues)&&Rp(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Tt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),vi(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):us(this.target,this.layout.layoutBox),xv(this.target,this.targetDelta)):us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),vi(this.relativeTargetOrigin,this.target,m.target),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Lu(this.parent.latestValues)||gv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Tt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;us(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;rE(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ht());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ep(this.prevProjectionDelta.x,this.projectionDelta.x),Ep(this.prevProjectionDelta.y,this.projectionDelta.y)),yi(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!$p(this.projectionDelta.x,this.prevProjectionDelta.x)||!$p(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oa(),this.projectionDelta=oa(),this.projectionDeltaWithTransform=oa()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=oa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ht(),m=c?c.source:void 0,x=this.layout?this.layout.source:void 0,g=m!==x,b=this.getStack(),y=!b||b.members.length<=1,w=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(IA));this.animationProgress=0;let N;this.mixTargetDelta=S=>{const k=S/1e3;Up(h.x,o.x,k),Up(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MA(this.relativeTarget,this.relativeTargetOrigin,f,k),N&&vA(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=ht()),us(N,this.relativeTarget)),g&&(this.animationValues=u,mA(u,d,this.latestValues,k,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(As(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{vl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cs(0)),this.currentAnimation=cA(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&zv(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ht();const h=Vt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Vt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}us(l,c),ia(l,u),yi(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wA),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Ad("z",o,d,this.animationValues);for(let u=0;u<Ed.length;u++)Ad(`rotate${Ed[u]}`,o,d,this.animationValues),Ad(`skew${Ed[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=yl(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=yl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ln(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=jA(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in Fi){if(u[x]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:y}=Fi[x],w=h==="none"?u[x]:g(u[x],d);if(b){const N=b.length;for(let S=0;S<N;S++)o[b[S]]=w}else y?this.options.visualElement.renderState.vars[x]=w:o[x]=w}this.options.layoutId&&(o.pointerEvents=d===this?yl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Fp),this.root.sharedNodes.clear()}}}function SA(t){t.updateLayout()}function _A(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?ms(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Vt(f);f.min=r[h].min,f.max=f.min+m}):zv(i,e.layoutBox,r)&&ms(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Vt(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=oa();yi(l,r,e.layoutBox);const c=oa();o?yi(c,t.applyTransform(a,!0),e.measuredBox):yi(c,r,e.layoutBox);const d=!Iv(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const x=ht();vi(x,e.layoutBox,f.layoutBox);const g=ht();vi(g,r,m.layoutBox),Dv(x,g)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function CA(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function TA(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function PA(t){t.clearSnapshot()}function Fp(t){t.clearMeasurements()}function zp(t){t.isLayoutDirty=!1}function EA(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Bp(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AA(t){t.resolveTargetDelta()}function LA(t){t.calcProjection()}function RA(t){t.resetSkewAndRotation()}function OA(t){t.removeLeadSnapshot()}function Up(t,e,s){t.translate=lt(e.translate,0,s),t.scale=lt(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Vp(t,e,s,r){t.min=lt(e.min,s.min,r),t.max=lt(e.max,s.max,r)}function MA(t,e,s,r){Vp(t.x,e.x,s.x,r),Vp(t.y,e.y,s.y,r)}function IA(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const DA={duration:.45,ease:[.4,0,.1,1]},Hp=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Wp=Hp("applewebkit/")&&!Hp("chrome/")?Math.round:es;function qp(t){t.min=Wp(t.min),t.max=Wp(t.max)}function $A(t){qp(t.x),qp(t.y)}function zv(t,e,s){return t==="position"||t==="preserve-aspect"&&!HE(Dp(e),Dp(s),.2)}function FA(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const zA=Fv({attachResizeListener:(t,e)=>zi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ld={current:void 0},Bv=Fv({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ld.current){const t=new zA({});t.mount(window),t.setOptions({layoutScroll:!0}),Ld.current=t}return Ld.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BA={pan:{Feature:aA},drag:{Feature:nA,ProjectionNode:Bv,MeasureLayout:Rv}};function Kp(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=r[a];i&&Ge.postRender(()=>i(e,Ao(e)))}class UA extends Wr{mount(){const{current:e}=this.node;e&&(this.unmount=QT(e,(s,r)=>(Kp(this.node,r,"Start"),a=>Kp(this.node,a,"End"))))}unmount(){}}class VA extends Wr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Co(zi(this.node.current,"focus",()=>this.onFocus()),zi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gp(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=r[a];i&&Ge.postRender(()=>i(e,Ao(e)))}class HA extends Wr{mount(){const{current:e}=this.node;e&&(this.unmount=rP(e,(s,r)=>(Gp(this.node,r,"Start"),(a,{success:i})=>Gp(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fu=new WeakMap,Rd=new WeakMap,WA=t=>{const e=Fu.get(t.target);e&&e(t)},qA=t=>{t.forEach(WA)};function KA({root:t,...e}){const s=t||document;Rd.has(s)||Rd.set(s,{});const r=Rd.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(qA,{root:t,...e})),r[a]}function GA(t,e,s){const r=KA(e);return Fu.set(t,s),r.observe(t),()=>{Fu.delete(t),r.unobserve(t)}}const JA={some:0,all:1};class YA extends Wr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:JA[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return GA(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(XA(e,s))&&this.startObserver()}unmount(){}}function XA({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const ZA={inView:{Feature:YA},tap:{Feature:HA},focus:{Feature:VA},hover:{Feature:UA}},QA={layout:{ProjectionNode:Bv,MeasureLayout:Rv}},eL={...$E,...ZA,...BA,...QA},Me=eE(eL,fE),tL=50,Jp=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),sL=()=>({time:0,x:Jp(),y:Jp()}),rL={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Yp(t,e,s,r){const a=s[e],{length:i,position:o}=rL[e],l=a.current,c=s.time;a.current=t[`scroll${o}`],a.scrollLength=t[`scroll${i}`]-t[`client${i}`],a.offset.length=0,a.offset[0]=0,a.offset[1]=a.scrollLength,a.progress=ya(0,a.scrollLength,a.current);const d=r-c;a.velocity=d>tL?0:Fh(a.current-l,d)}function nL(t,e,s){Yp(t,"x",e,s),Yp(t,"y",e,s),e.time=s}function aL(t,e){const s={x:0,y:0};let r=t;for(;r&&r!==e;)if(ef(r))s.x+=r.offsetLeft,s.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const a=r.getBoundingClientRect();r=r.parentElement;const i=r.getBoundingClientRect();s.x+=a.left-i.left,s.y+=a.top-i.top}else if(r instanceof SVGGraphicsElement){const{x:a,y:i}=r.getBBox();s.x+=a,s.y+=i;let o=null,l=r.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=r.parentNode;r=o}else break;return s}const zu={start:0,center:.5,end:1};function Xp(t,e,s=0){let r=0;if(t in zu&&(t=zu[t]),typeof t=="string"){const a=parseFloat(t);t.endsWith("px")?r=a:t.endsWith("%")?t=a/100:t.endsWith("vw")?r=a/100*document.documentElement.clientWidth:t.endsWith("vh")?r=a/100*document.documentElement.clientHeight:t=a}return typeof t=="number"&&(r=e*t),s+r}const iL=[0,0];function oL(t,e,s,r){let a=Array.isArray(t)?t:iL,i=0,o=0;return typeof t=="number"?a=[t,t]:typeof t=="string"&&(t=t.trim(),t.includes(" ")?a=t.split(" "):a=[t,zu[t]?t:"0"]),i=Xp(a[0],s,r),o=Xp(a[1],e),i-o}const lL={All:[[0,0],[1,1]]},cL={x:0,y:0};function dL(t){return"getBBox"in t&&t.tagName!=="svg"?t.getBBox():{width:t.clientWidth,height:t.clientHeight}}function uL(t,e,s){const{offset:r=lL.All}=s,{target:a=t,axis:i="y"}=s,o=i==="y"?"height":"width",l=a!==t?aL(a,t):cL,c=a===t?{width:t.scrollWidth,height:t.scrollHeight}:dL(a),d={width:t.clientWidth,height:t.clientHeight};e[i].offset.length=0;let u=!e[i].interpolate;const h=r.length;for(let f=0;f<h;f++){const m=oL(r[f],d[o],c[o],l[i]);!u&&m!==e[i].interpolatorOffsets[f]&&(u=!0),e[i].offset[f]=m}u&&(e[i].interpolate=Gh(e[i].offset,Ry(r),{clamp:!1}),e[i].interpolatorOffsets=[...e[i].offset]),e[i].progress=Ks(0,1,e[i].interpolate(e[i].current))}function hL(t,e=t,s){if(s.x.targetOffset=0,s.y.targetOffset=0,e!==t){let r=e;for(;r&&r!==t;)s.x.targetOffset+=r.offsetLeft,s.y.targetOffset+=r.offsetTop,r=r.offsetParent}s.x.targetLength=e===t?e.scrollWidth:e.clientWidth,s.y.targetLength=e===t?e.scrollHeight:e.clientHeight,s.x.containerLength=t.clientWidth,s.y.containerLength=t.clientHeight}function fL(t,e,s,r={}){return{measure:a=>{hL(t,r.target,s),nL(t,s,a),(r.offset||r.target)&&uL(t,s,r)},notify:()=>e(s)}}const Ya=new WeakMap,Zp=new WeakMap,Od=new WeakMap,Qp=t=>t===document.scrollingElement?window:t;function Uv(t,{container:e=document.scrollingElement,...s}={}){if(!e)return es;let r=Od.get(e);r||(r=new Set,Od.set(e,r));const a=sL(),i=fL(e,t,a,s);if(r.add(i),!Ya.has(e)){const l=()=>{for(const h of r)h.measure(Tt.timestamp);Ge.preUpdate(c)},c=()=>{for(const h of r)h.notify()},d=()=>Ge.read(l);Ya.set(e,d);const u=Qp(e);window.addEventListener("resize",d,{passive:!0}),e!==document.documentElement&&Zp.set(e,hP(e,d)),u.addEventListener("scroll",d,{passive:!0}),d()}const o=Ya.get(e);return Ge.read(o,!1,!0),()=>{var d;As(o);const l=Od.get(e);if(!l||(l.delete(i),l.size))return;const c=Ya.get(e);Ya.delete(e),c&&(Qp(e).removeEventListener("scroll",c),(d=Zp.get(e))==null||d(),window.removeEventListener("resize",c))}}const eg=new Map;function mL(t){const e={value:0},s=Uv(r=>{e.value=r[t.axis].progress*100},t);return{currentTime:e,cancel:s}}function Vv({source:t,container:e,...s}){const{axis:r}=s;t&&(e=t);const a=eg.get(e)??new Map;eg.set(e,a);const i=s.target??"self",o=a.get(i)??{},l=r+(s.offset??[]).join(",");return o[l]||(o[l]=!s.target&&Dy()?new ScrollTimeline({source:e,axis:r}):mL({container:e,...s})),o[l]}function pL(t,e){const s=Vv(e);return t.attachTimeline({timeline:e.target?void 0:s,observe:r=>(r.pause(),ev(a=>{r.time=r.duration*a},s))})}function gL(t){return t.length===2}function xL(t,e){return gL(t)?Uv(s=>{t(s[e.axis].progress,s)},e):ev(t,Vv(e))}function bL(t,{axis:e="y",container:s=document.scrollingElement,...r}={}){if(!s)return es;const a={axis:e,container:s,...r};return typeof t=="function"?xL(t,a):pL(t,a)}const yL=()=>({scrollX:Cs(0),scrollY:Cs(0),scrollXProgress:Cs(0),scrollYProgress:Cs(0)}),Jo=t=>t?!t.current:!1;function vL({container:t,target:e,...s}={}){const r=$a(yL),a=p.useRef(null),i=p.useRef(!1),o=p.useCallback(()=>(a.current=bL((l,{x:c,y:d})=>{r.scrollX.set(c.current),r.scrollXProgress.set(c.progress),r.scrollY.set(d.current),r.scrollYProgress.set(d.progress)},{...s,container:(t==null?void 0:t.current)||void 0,target:(e==null?void 0:e.current)||void 0}),()=>{var l;(l=a.current)==null||l.call(a)}),[t,e,JSON.stringify(s.offset)]);return Uc(()=>{if(i.current=!1,Jo(t)||Jo(e)){i.current=!0;return}else return o()},[o]),p.useEffect(()=>{if(i.current)return Mi(!Jo(t)),Mi(!Jo(e)),o()},[o]),r}function ql(t){const e=$a(()=>Cs(t)),{isStatic:s}=p.useContext(Eo);if(s){const[,r]=p.useState(t);p.useEffect(()=>e.on("change",r),[])}return e}function Hv(t,e){const s=ql(e()),r=()=>s.set(e());return r(),Uc(()=>{const a=()=>Ge.preRender(r,!1,!0),i=t.map(o=>o.on("change",a));return()=>{i.forEach(o=>o()),As(r)}}),s}function wL(t){xi.current=[],t();const e=Hv(xi.current,t);return xi.current=void 0,e}function Bu(t,e,s,r){if(typeof t=="function")return wL(t);const a=typeof e=="function"?e:mP(e,s,r);return Array.isArray(t)?tg(t,a):tg([t],([i])=>a(i))}function tg(t,e){const s=$a(()=>[]);return Hv(t,()=>{s.length=0;const r=t.length;for(let a=0;a<r;a++)s[a]=t[a].get();return e(s)})}function sg(t,e={}){const{isStatic:s}=p.useContext(Eo),r=()=>Et(t)?t.get():t;if(s)return Bu(r);const a=ql(r());return p.useInsertionEffect(()=>pP(a,t,e),[a,JSON.stringify(e)]),a}const mf=({isOpen:t,onClose:e,title:s,formType:r})=>{const{t:a}=je(),[i,o]=p.useState({name:"",email:"",company:"",message:"",experience:"",portfolio:"",investmentAmount:"",timeline:""});if(!t)return null;const l=u=>{u.preventDefault(),console.log("Form submitted:",i),alert(a("applicationForm.messages.success")),e()},c=u=>{o(h=>({...h,[u.target.name]:u.target.value}))},d=n.jsx("span",{className:"text-red-500",children:" *"});return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:n.jsx("div",{className:"max-h-[90vh] w-full max-w-md overflow-y-auto rounded-xl bg-white",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s}),n.jsxs("button",{onClick:e,className:"text-gray-400 transition-colors hover:text-gray-600",children:[n.jsx(bs,{size:24,"aria-hidden":!0}),n.jsx("span",{className:"sr-only",children:a("applicationForm.accessibility.close")})]})]}),n.jsxs("form",{onSubmit:l,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:[a("applicationForm.fields.name"),d]}),n.jsx("input",{type:"text",name:"name",required:!0,value:i.name,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:[a("applicationForm.fields.email"),d]}),n.jsx("input",{type:"email",name:"email",required:!0,value:i.email,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500"})]}),r!=="professional"&&n.jsxs("div",{children:[n.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:[a("applicationForm.fields.company"),d]}),n.jsx("input",{type:"text",name:"company",required:!0,value:i.company,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500"})]}),r==="professional"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:a("applicationForm.fields.experienceLabel")}),n.jsxs("select",{name:"experience",value:i.experience,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:a("applicationForm.fields.experiencePlaceholder")}),n.jsx("option",{value:"beginner",children:a("applicationForm.fields.experienceOptions.beginner")}),n.jsx("option",{value:"intermediate",children:a("applicationForm.fields.experienceOptions.intermediate")}),n.jsx("option",{value:"advanced",children:a("applicationForm.fields.experienceOptions.advanced")})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:a("applicationForm.fields.portfolio")}),n.jsx("input",{type:"url",name:"portfolio",value:i.portfolio,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500"})]})]}),r==="investor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:a("applicationForm.fields.investmentAmountLabel")}),n.jsxs("select",{name:"investmentAmount",value:i.investmentAmount,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:a("applicationForm.fields.investmentAmountPlaceholder")}),n.jsx("option",{value:"10k-50k",children:a("applicationForm.fields.investmentAmountOptions.10k_50k")}),n.jsx("option",{value:"50k-100k",children:a("applicationForm.fields.investmentAmountOptions.50k_100k")}),n.jsx("option",{value:"100k-500k",children:a("applicationForm.fields.investmentAmountOptions.100k_500k")}),n.jsx("option",{value:"500k+",children:a("applicationForm.fields.investmentAmountOptions.500k_plus")})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:a("applicationForm.fields.timelineLabel")}),n.jsxs("select",{name:"timeline",value:i.timeline,onChange:c,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:a("application.selectTimeline")}),n.jsx("option",{value:"immediate",children:a("application.timelineImmediate")}),n.jsx("option",{value:"quarter",children:a("application.timelineQuarter")}),n.jsx("option",{value:"year",children:a("applicationForm.fields.timelineOptions.year")}),n.jsx("option",{value:"exploring",children:a("applicationForm.fields.timelineOptions.exploring")})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:a("applicationForm.fields.message")}),n.jsx("textarea",{name:"message",rows:4,value:i.message,onChange:c,placeholder:a("applicationForm.fields.messagePlaceholder"),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500"})]}),n.jsx("button",{type:"submit",className:"w-full rounded-lg bg-blue-600 py-3 font-semibold text-white transition-colors hover:bg-blue-700",children:a("application.submit")})]})]})})})},pe=({children:t,delay:e=0,direction:s="up",className:r=""})=>{const a={up:{y:24,x:0},down:{y:-24,x:0},left:{y:0,x:24},right:{y:0,x:-24}};return n.jsx(Me.div,{initial:{opacity:0,...a[s],filter:"blur(6px)"},whileInView:{opacity:1,y:0,x:0,filter:"blur(0px)"},viewport:{once:!0,margin:"-80px"},transition:{duration:.6,delay:e,ease:"easeOut"},className:r,children:t})},Ts=({children:t,className:e="",onClick:s,strength:r=6})=>{const a=p.useRef(null),i=ql(0),o=ql(0),l=sg(i,{stiffness:300,damping:20}),c=sg(o,{stiffness:300,damping:20}),d=h=>{if(!a.current)return;const f=a.current.getBoundingClientRect(),m=f.left+f.width/2,x=f.top+f.height/2;i.set((h.clientX-m)/r),o.set((h.clientY-x)/r)},u=()=>{i.set(0),o.set(0)};return n.jsx(Me.button,{ref:a,onMouseMove:d,onMouseLeave:u,onClick:s,style:{x:l,y:c},whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},className:e,children:t})},wa=({children:t,speed:e=22,direction:s="left",className:r=""})=>{const a=s==="left"?"animate-marquee-left":"animate-marquee-right";return n.jsx("div",{className:`overflow-hidden whitespace-nowrap [mask-image:linear-gradient(to_right,transparent,black_10%,black_90%,transparent)] ${r}`,children:n.jsxs("div",{className:`inline-flex gap-10 ${a}`,style:{animationDuration:`${e}s`},children:[t,t]})})},pf=({title:t,codeBlock:e,steps:s})=>{const r=p.useRef(null),{scrollYProgress:a}=vL({target:r,offset:["start start","end end"]}),i=Bu(a,[0,1],[0,3]),o=Bu(a,[0,.5,1],[1,1.02,1]);return n.jsxs("section",{ref:r,className:"relative grid gap-10 lg:grid-cols-2 lg:gap-16 min-h-[160vh] lg:min-h-[200vh] px-4 sm:px-6 max-w-7xl mx-auto py-16 sm:py-20",children:[n.jsx("div",{className:"lg:sticky lg:top-24 self-start mb-8 lg:mb-0",children:n.jsxs(Me.div,{style:{rotate:i,scale:o},className:"rounded-3xl shadow-2xl p-5 sm:p-6 bg-forge-dark text-forge-cream overflow-hidden relative border border-forge-orange/20",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-forge-orange/5 to-transparent pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-forge-orange animate-pulse"}),n.jsx("span",{className:"text-forge-orange font-medium text-sm",children:"Live Code"})]}),n.jsx("pre",{className:"text-xs sm:text-sm overflow-auto text-forge-cream/90 leading-relaxed",children:n.jsx("code",{children:e})})]})]})}),n.jsxs("div",{className:"space-y-20 sm:space-y-28 lg:space-y-32 py-16 sm:py-24",children:[n.jsx(pe,{children:n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-8",children:t})}),s.map((l,c)=>n.jsx(pe,{delay:c*.1,children:n.jsxs("div",{className:"max-w-prose",children:[n.jsxs("h3",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-forge-dark mb-4",children:[l.title,l.highlight&&n.jsx("span",{className:"text-forge-orange ml-2",children:l.highlight})]}),n.jsx("p",{className:"text-base sm:text-lg text-forge-gray leading-relaxed",children:l.description})]})},l.title))]})]})},Yt=({variant:t="hero",className:e=""})=>{const s={hero:n.jsxs(n.Fragment,{children:[n.jsx(Me.div,{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(232,122,71,0.15),transparent_50%),radial-gradient(circle_at_80%_20%,rgba(45,58,46,0.1),transparent_50%),radial-gradient(circle_at_40%_70%,rgba(245,242,232,0.2),transparent_50%)]",animate:{background:["radial-gradient(circle_at_20%_30%,rgba(232,122,71,0.15),transparent_50%),radial-gradient(circle_at_80%_20%,rgba(45,58,46,0.1),transparent_50%),radial-gradient(circle_at_40%_70%,rgba(245,242,232,0.2),transparent_50%)","radial-gradient(circle_at_40%_20%,rgba(232,122,71,0.2),transparent_50%),radial-gradient(circle_at_60%_40%,rgba(45,58,46,0.15),transparent_50%),radial-gradient(circle_at_20%_80%,rgba(245,242,232,0.25),transparent_50%)","radial-gradient(circle_at_60%_60%,rgba(232,122,71,0.18),transparent_50%),radial-gradient(circle_at_20%_70%,rgba(45,58,46,0.12),transparent_50%),radial-gradient(circle_at_80%_30%,rgba(245,242,232,0.22),transparent_50%)"]},transition:{duration:8,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}}),n.jsx("div",{className:"absolute inset-0 opacity-[0.015] mix-blend-overlay [background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48ZmlsdGVyIGlkPSJub2lzZSI+PGZlVHVyYnVsZW5jZSBiYXNlRnJlcXVlbmN5PSIwLjkiIG51bU9jdGF2ZXM9IjQiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz48L2ZpbHRlcj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI25vaXNlKSIgb3BhY2l0eT0iMC4xIi8+PC9zdmc+')]"}),[...Array(12)].map((r,a)=>n.jsx(Me.div,{className:"absolute w-1 h-1 bg-forge-orange/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[.2,.8,.2],scale:[.5,1,.5]},transition:{duration:4+Math.random()*4,repeat:1/0,delay:Math.random()*2}},a))]}),subtle:n.jsx(Me.div,{className:"absolute inset-0 bg-gradient-to-br from-forge-cream/50 to-transparent",animate:{opacity:[.3,.6,.3]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),dark:n.jsx(Me.div,{className:"absolute inset-0 bg-gradient-to-br from-forge-dark via-forge-dark to-forge-dark/90",animate:{background:["linear-gradient(135deg, #2D3A2E 0%, #2D3A2E 50%, rgba(45,58,46,0.9) 100%)","linear-gradient(135deg, rgba(45,58,46,0.95) 0%, #2D3A2E 50%, #2D3A2E 100%)"]},transition:{duration:10,repeat:1/0,repeatType:"reverse"}})};return n.jsx("div",{className:`absolute inset-0 overflow-hidden ${e}`,children:s[t]})},jL=()=>{const[t,e]=p.useState(!1),s=[{value:"6",label:"Month Program",suffix:"",icon:n.jsx(Es,{className:"w-8 h-8"})},{value:"$6K",label:"Monthly Salary",suffix:"/mo",icon:n.jsx(Bf,{className:"w-8 h-8"})},{value:"95%",label:"Job Placement",suffix:"",icon:n.jsx(oi,{className:"w-8 h-8"})}],r=[{icon:n.jsx(Bf,{className:"w-6 h-6"}),title:"Get Paid to Learn",description:"Receive $6,000 USDC monthly while mastering Web3 development",highlight:"$36,000"},{icon:n.jsx(Ll,{className:"w-6 h-6"}),title:"Real Projects",description:"Build actual DeFi protocols, NFT platforms, and blockchain infrastructure",highlight:"Live Code"},{icon:n.jsx(Pc,{className:"w-6 h-6"}),title:"Guaranteed Placement",description:"Access our exclusive network of Web3 companies hiring developers",highlight:"95% Success"}],a=["Uniswap","Chainlink","Polygon","Solana","Ethereum Foundation","ConsenSys","Compound","Aave","OpenSea","Metamask"],i=[{quote:'"Changed my life completely. From zero to Web3 developer in 6 months."',author:"Sarah Chen"},{quote:'"The ISA model meant I could focus 100% on learning."',author:"Marcus Rodriguez"},{quote:'"Landed a $120k job right after graduation."',author:"Alex Thompson"}],o=`// Forge College Smart Contract
contract ForgeCollege {
  // Student program details
  struct Student {
    address wallet;
    uint256 stipendAmount;
    uint256 completedProjects;
    bool jobPlaced;
  }
  
  // Company sponsor mapping
  mapping(address => uint256) sponsors;
  
  // ISA terms and repayment logic
  function startLearning() public {
    // Begin 6-month program
    // Receive monthly stipend
    // Work on real projects
  }
  
  function completeProgram() public {
    // Portfolio validation
    // Job matching algorithm
    // ISA activation only on job placement
  }
}`,l=[{title:"Smart Contracts",description:"Learn to build and deploy smart contracts that power DeFi protocols, NFT marketplaces, and DAOs. Master Solidity, security best practices, and gas optimization.",highlight:"Real Impact"},{title:"DeFi Development",description:"Build actual trading protocols, yield farming platforms, and lending systems. Work with real liquidity and understand how billions flow through Web3.",highlight:"$2B+ TVL"},{title:"Job Guarantee",description:"Our ISA model means we only succeed when you do. Get placed in top Web3 companies or pay nothing. It's that simple.",highlight:"Zero Risk"}];return n.jsxs("div",{className:"min-h-[100svh] bg-forge-cream overflow-x-hidden",children:[n.jsxs("section",{className:"relative min-h-[100svh] flex items-center justify-center pt-28 sm:pt-32 pb-12 sm:pb-16 px-4 sm:px-6",children:[n.jsx(Yt,{variant:"hero"}),n.jsxs("div",{className:"max-w-6xl mx-auto text-center relative z-10",children:[n.jsxs(Me.h1,{initial:{opacity:0,y:30,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{duration:.8,ease:"easeOut"},className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold text-forge-dark mb-8 leading-[0.9] tracking-tight",children:["Get Paid",n.jsx("br",{}),n.jsxs("span",{className:"inline-flex items-center",children:["to Learn.",n.jsx(Me.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:n.jsx(Vr,{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 xl:w-24 xl:h-24 text-forge-orange mx-4"})})]})]}),n.jsxs(Me.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"text-lg sm:text-xl lg:text-2xl text-forge-gray max-w-4xl mx-auto mb-12 leading-relaxed",children:["Master Web3 development, earn $6,000 USDC monthly for 6 months,",n.jsx("br",{className:"hidden md:block"}),"and only pay us when we land you a job."]}),n.jsx(Me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:n.jsxs(Ts,{onClick:()=>e(!0),className:"inline-flex w-full sm:w-auto items-center gap-3 bg-forge-orange text-white px-6 py-3 sm:px-8 sm:py-4 rounded-full text-base sm:text-lg font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:["Apply to Next Cohort",n.jsx(fa,{className:"w-5 h-5"})]})})]})]}),n.jsx("section",{className:"py-10 sm:py-12 bg-white/50 backdrop-blur-sm border-y border-forge-orange/10",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[n.jsx(pe,{children:n.jsx("p",{className:"text-center text-forge-gray font-medium mb-8",children:"Learn the skills to work at companies like:"})}),n.jsx(wa,{className:"text-xl sm:text-2xl font-bold text-forge-dark/60",children:a.map((c,d)=>n.jsx("span",{className:"mx-6 sm:mx-8 hover:text-forge-orange transition-colors",children:c},d))})]})}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Program by the Numbers"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Real outcomes, real careers, real impact"})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((c,d)=>n.jsx(pe,{delay:d*.1,children:n.jsxs(Me.div,{className:"text-center bg-forge-cream p-6 sm:p-8 rounded-3xl border border-forge-orange/20 group hover:border-forge-orange/40 transition-all duration-300",whileHover:{y:-5},children:[n.jsx("div",{className:"text-forge-orange mb-4 flex justify-center group-hover:scale-110 transition-transform",children:c.icon}),n.jsxs("div",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-forge-dark mb-2",children:[c.value,n.jsx("span",{className:"text-forge-orange text-xl sm:text-2xl lg:text-3xl",children:c.suffix})]}),n.jsx("div",{className:"text-base sm:text-lg text-forge-gray font-medium",children:c.label})]})},d))})]})}),n.jsx(pf,{title:"Learn by Building Real Web3 Products",codeBlock:o,steps:l}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-forge-cream",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Why Forge College?"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"The only Web3 education program where you earn while you learn"})]}),n.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:r.map((c,d)=>n.jsx(pe,{delay:d*.1,children:n.jsxs(Me.div,{className:"bg-white p-6 sm:p-8 rounded-3xl border border-forge-orange/20 hover:border-forge-orange/40 transition-all duration-300 group",whileHover:{y:-8},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-forge-orange rounded-2xl flex items-center justify-center text-white group-hover:scale-110 group-hover:bg-forge-orange-light transition-all duration-200 shadow-lg",children:c.icon}),n.jsx("span",{className:"text-sm font-bold text-forge-orange bg-forge-orange/10 px-3 py-1 rounded-full",children:c.highlight})]}),n.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-forge-dark mb-4",children:c.title}),n.jsx("p",{className:"text-base sm:text-lg text-forge-gray leading-relaxed",children:c.description})]})},d))})]})}),n.jsx("section",{className:"py-12 sm:py-16 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[n.jsx(pe,{className:"text-center mb-12",children:n.jsx("h3",{className:"text-2xl font-bold text-forge-dark",children:"What Our Students Say"})}),n.jsx(wa,{speed:30,className:"text-base sm:text-lg",children:i.map((c,d)=>n.jsxs("div",{className:"mx-6 sm:mx-8 max-w-md",children:[n.jsx("p",{className:"text-forge-gray italic mb-2",children:c.quote}),n.jsxs("p",{className:"text-forge-dark font-semibold",children:[" ",c.author]})]},d))})]})}),n.jsxs("section",{className:"py-20 sm:py-28 lg:py-32 px-4 sm:px-6 bg-forge-cream relative overflow-hidden",children:[n.jsx(Yt,{variant:"subtle"}),n.jsxs("div",{className:"max-w-5xl mx-auto text-center relative z-10",children:[n.jsx(pe,{children:n.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6 leading-tight",children:["No upfront cost.",n.jsx("br",{}),"Pay only when you land a job."]})}),n.jsx(pe,{delay:.2,children:n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray max-w-3xl mx-auto mb-12 sm:mb-16 leading-relaxed",children:"Our Income Share Agreement means you focus on learning, not debt. We only succeed when you do."})}),n.jsx(pe,{delay:.4,children:n.jsxs(Me.div,{className:"bg-forge-dark rounded-3xl p-6 sm:p-10 lg:p-12 text-white relative overflow-hidden border-4 border-forge-orange",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs(Me.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},className:"inline-flex items-center gap-2 text-forge-orange mb-6",children:[n.jsx(vx,{className:"w-6 h-6"}),n.jsx("span",{className:"font-medium",children:"Next Cohort Starting Soon"})]}),n.jsx("h3",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-6 text-forge-cream",children:"April 2026"}),n.jsx("p",{className:"text-base sm:text-lg text-forge-cream/80 mb-8",children:"Limited to 10 students"}),n.jsx(Ts,{onClick:()=>e(!0),className:"bg-forge-orange text-white px-6 py-3 sm:px-10 sm:py-4 rounded-full font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:"Secure Your Spot"})]})]})})]})]}),n.jsxs("section",{className:"py-20 sm:py-28 lg:py-32 px-4 sm:px-6 bg-forge-dark text-white relative overflow-hidden",children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[n.jsx(pe,{children:n.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-8 leading-tight text-forge-cream",children:["Ready to forge",n.jsx("br",{}),"your future?"]})}),n.jsx(pe,{delay:.2,children:n.jsxs("p",{className:"text-lg sm:text-xl text-forge-cream/80 mb-10 sm:mb-12 leading-relaxed",children:["Join the next generation of Web3 developers.",n.jsx("br",{}),"Apply now for the April 2026 cohort."]})}),n.jsx(pe,{delay:.4,children:n.jsxs(Ts,{onClick:()=>e(!0),className:"inline-flex w-full sm:w-auto items-center gap-3 bg-forge-orange text-white px-6 py-4 sm:px-10 sm:py-5 rounded-full text-base sm:text-lg font-bold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:["Apply Now",n.jsx(fa,{className:"w-6 h-6"})]})}),n.jsx(pe,{delay:.6,children:n.jsx("div",{className:"mt-8 text-sm text-forge-cream/60",children:"No upfront cost  Pay only when you get hired"})})]})]}),n.jsx(mf,{isOpen:t,onClose:()=>e(!1),title:"Apply to Join the Next Cohort",formType:"professional"})]})},NL=()=>{const[t,e]=p.useState(!1),s=[{value:"95%",label:"Job Placement Rate",suffix:"",icon:n.jsx(Es,{className:"w-8 h-8"})},{value:"6",label:"Month Training",suffix:"mo",icon:n.jsx(Pc,{className:"w-8 h-8"})},{value:"Real",label:"Project Experience",suffix:"",icon:n.jsx(Ll,{className:"w-8 h-8"})}],r=[{icon:n.jsx(Es,{className:"w-6 h-6"}),title:"Qualified Talent Pool",description:"Access developers who have completed real Web3 projects and proven their skills through hands-on experience",highlight:"Pre-vetted"},{icon:n.jsx(vx,{className:"w-6 h-6"}),title:"Fast Hiring Process",description:"Streamlined recruitment with candidates who are ready to contribute from day one",highlight:"Day 1 Ready"},{icon:n.jsx(Ll,{className:"w-6 h-6"}),title:"Project-Based Vetting",description:"Our graduates have worked on actual Web3 projects, giving you confidence in their practical abilities",highlight:"Proven Skills"}],a=[{tier:"Project Partner",highlight:"Start Here",features:["2-3 project submissions per cohort","Access to student portfolios","Hiring pipeline access"],cta:"Join as Partner"},{tier:"Curriculum Sponsor",highlight:"Most Popular",features:["Curriculum influence","Sponsor 3-5 students","Dedicated hiring events","Brand partnership benefits"],cta:"Become Sponsor",featured:!0},{tier:"Ecosystem Partner",highlight:"Full Access",features:["Full curriculum partnership","Sponsor entire cohort track","Exclusive hiring window","Advisory board seat"],cta:"Join Ecosystem"}],i=["Uniswap","Chainlink","Polygon","Solana","Ethereum Foundation","ConsenSys","Compound","Aave","OpenSea","Metamask"],o=[{quote:'"Hired 3 developers from Forge College. Best hiring decision we made this year."',author:"Sarah Kim, CTO at DeFi Protocol"},{quote:'"The candidates came with real project experience. No training period needed."',author:"Marcus Chen, Engineering Lead at Web3 Startup"},{quote:'"Forge College graduates understand the Web3 ecosystem better than traditional bootcamp grads."',author:"Elena Rodriguez, VP Engineering at NFT Platform"}],l=`// Partnership Integration Example
contract ForgePartnership {
  // Company partnership details
  struct Partner {
    address company;
    uint256 sponsoredStudents;
    bytes32[] projectIds;
    bool exclusiveHiring;
  }
  
  // Student project assignments
  mapping(address => bytes32[]) studentProjects;
  
  // Partnership benefits and ROI
  function sponsorStudent(address student) public {
    // Fund student salary during learning
    // Assign real company projects
    // Track performance metrics
  }
  
  function hireGraduate(address student) public {
    // Validate project completion
    // Execute hiring agreement
    // Activate partnership benefits
  }
  
  // Partnership ROI calculation
  function calculateROI() public view returns (uint256) {
    // Hiring success rate
    // Time to productivity
    // Cost savings vs traditional recruiting
  }
}`,c=[{title:"Real Project Experience",description:"Our students work on actual company projects during their 6-month program. This means they understand your business challenges and have proven their ability to deliver.",highlight:"Business Ready"},{title:"Reduced Hiring Risk",description:"Skip the uncertainty of traditional hiring. Our graduates have portfolios of completed projects and verified skills from working with real companies.",highlight:"Zero Risk"},{title:"Faster Time to Value",description:"Candidates hit the ground running from day one. No lengthy onboarding or training periods. They understand Web3 development and your business needs.",highlight:"Immediate Impact"}];return n.jsxs("div",{className:"min-h-[100svh] bg-forge-cream overflow-x-hidden",children:[n.jsxs("section",{className:"relative min-h-[100svh] flex items-center justify-center pt-28 sm:pt-32 pb-12 sm:pb-16 px-4 sm:px-6",children:[n.jsx(Yt,{variant:"hero"}),n.jsxs("div",{className:"max-w-6xl mx-auto text-center relative z-10",children:[n.jsxs(Me.h1,{initial:{opacity:0,y:30,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{duration:.8,ease:"easeOut"},className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold text-forge-dark mb-8 leading-[0.9] tracking-tight",children:["Hire Web3-Ready",n.jsx("br",{}),n.jsxs("span",{className:"inline-flex items-center",children:["Talents.",n.jsx(Me.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:n.jsx(pn,{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 xl:w-24 xl:h-24 text-forge-orange mx-4"})})]})]}),n.jsxs(Me.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"text-lg sm:text-xl lg:text-2xl text-forge-gray max-w-4xl mx-auto mb-12 leading-relaxed",children:["Access skilled developers from our intensive 6-month program.",n.jsx("br",{className:"hidden md:block"}),"Pre-vetted, project-tested, and ready to build from day one."]}),n.jsx(Me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:n.jsxs(Ts,{onClick:()=>e(!0),className:"inline-flex w-full sm:w-auto items-center gap-3 bg-forge-orange text-white px-6 py-3 sm:px-8 sm:py-4 rounded-full text-base sm:text-lg font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:["Partner With Us",n.jsx(fa,{className:"w-5 h-5"})]})})]})]}),n.jsx("section",{className:"py-10 sm:py-12 bg-white/50 backdrop-blur-sm border-y border-forge-orange/10",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[n.jsx(pe,{children:n.jsx("p",{className:"text-center text-forge-gray font-medium mb-8",children:"Join companies already building the future workforce"})}),n.jsx(wa,{className:"text-xl sm:text-2xl font-bold text-forge-dark/60",children:i.map((d,u)=>n.jsx("span",{className:"mx-6 sm:mx-8 hover:text-forge-orange transition-colors",children:d},u))})]})}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Hiring Success Metrics"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Real results from companies who partner with us"})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((d,u)=>n.jsx(pe,{delay:u*.1,children:n.jsxs(Me.div,{className:"text-center bg-forge-cream p-6 sm:p-8 rounded-3xl border border-forge-orange/20 group hover:border-forge-orange/40 transition-all duration-300",whileHover:{y:-5},children:[n.jsx("div",{className:"text-forge-orange mb-4 flex justify-center group-hover:scale-110 transition-transform",children:d.icon}),n.jsxs("div",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-forge-dark mb-2",children:[d.value,n.jsx("span",{className:"text-forge-orange text-xl sm:text-2xl lg:text-3xl",children:d.suffix})]}),n.jsx("div",{className:"text-base sm:text-lg text-forge-gray font-medium",children:d.label})]})},u))})]})}),n.jsx(pf,{title:"Why Companies Choose Forge College",codeBlock:l,steps:c}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-forge-cream",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Partnership Benefits"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Transform your hiring strategy by investing in talent development"})]}),n.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:r.map((d,u)=>n.jsx(pe,{delay:u*.1,children:n.jsxs(Me.div,{className:"bg-white p-6 sm:p-8 rounded-3xl border border-forge-orange/20 hover:border-forge-orange/40 transition-all duration-300 group",whileHover:{y:-8},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-forge-orange rounded-2xl flex items-center justify-center text-white group-hover:scale-110 group-hover:bg-forge-orange-light transition-all duration-200 shadow-lg",children:d.icon}),n.jsx("span",{className:"text-sm font-bold text-forge-orange bg-forge-orange/10 px-3 py-1 rounded-full",children:d.highlight})]}),n.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-forge-dark mb-4",children:d.title}),n.jsx("p",{className:"text-base sm:text-lg text-forge-gray leading-relaxed",children:d.description})]})},u))})]})}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Partnership Tiers"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Choose the partnership level that fits your hiring needs"})]}),n.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:a.map((d,u)=>n.jsx(pe,{delay:u*.1,children:n.jsxs(Me.div,{className:`p-6 sm:p-8 rounded-3xl transition-all duration-300 group relative overflow-hidden ${d.featured?"bg-forge-dark text-white border-4 border-forge-orange shadow-xl":"bg-forge-cream border border-forge-orange/20 hover:border-forge-orange/40"}`,whileHover:{y:-8,scale:d.featured?1.02:1},children:[d.featured&&n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("span",{className:"bg-forge-orange text-white px-3 py-1 rounded-full text-sm font-bold",children:d.highlight})}),n.jsx("h3",{className:`text-xl sm:text-2xl font-bold mb-2 ${d.featured?"text-forge-cream":"text-forge-dark"}`,children:d.tier}),n.jsx("div",{className:"mb-6",children:n.jsx("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${d.featured?"bg-forge-orange/20 text-forge-orange":"bg-forge-orange/10 text-forge-orange"}`,children:d.highlight})}),n.jsx("ul",{className:"space-y-3 mb-8",children:d.features.map((h,f)=>n.jsxs("li",{className:`flex items-start gap-3 ${d.featured?"text-forge-cream/90":"text-forge-gray"}`,children:[n.jsx(ar,{className:"w-5 h-5 text-forge-orange flex-shrink-0 mt-0.5"}),n.jsx("span",{children:h})]},f))}),n.jsx(Ts,{onClick:()=>e(!0),className:`w-full py-3 rounded-full font-semibold transition-all duration-200 ${d.featured,"bg-forge-orange text-white border-2 border-forge-orange hover:border-forge-orange-light"}`,children:d.cta})]})},u))})]})}),n.jsx("section",{className:"py-12 sm:py-16 bg-forge-cream",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[n.jsx(pe,{className:"text-center mb-12",children:n.jsx("h3",{className:"text-2xl font-bold text-forge-dark",children:"What Partner Companies Say"})}),n.jsx(wa,{speed:35,className:"text-base sm:text-lg",children:o.map((d,u)=>n.jsxs("div",{className:"mx-6 sm:mx-8 max-w-lg",children:[n.jsx("p",{className:"text-forge-gray italic mb-2",children:d.quote}),n.jsxs("p",{className:"text-forge-dark font-semibold",children:[" ",d.author]})]},u))})]})}),n.jsxs("section",{className:"py-20 sm:py-28 lg:py-32 px-4 sm:px-6 bg-forge-cream relative overflow-hidden",children:[n.jsx(Yt,{variant:"subtle"}),n.jsxs("div",{className:"max-w-5xl mx-auto text-center relative z-10",children:[n.jsx(pe,{children:n.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6 leading-tight",children:["Ready to hire",n.jsx("br",{}),"the best Web3 talent?"]})}),n.jsx(pe,{delay:.2,children:n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray max-w-3xl mx-auto mb-12 sm:mb-16 leading-relaxed",children:"Join leading Web3 companies who are building their teams through Forge College partnerships."})}),n.jsx(pe,{delay:.4,children:n.jsxs(Me.div,{className:"bg-forge-dark rounded-3xl p-6 sm:p-10 lg:p-12 text-white relative overflow-hidden border-4 border-forge-orange",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs(Me.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},className:"inline-flex items-center gap-2 text-forge-orange mb-6",children:[n.jsx(Rn,{className:"w-6 h-6"}),n.jsx("span",{className:"font-medium",children:"Next Hiring Cycle"})]}),n.jsx("h3",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-6 text-forge-cream",children:"April 2026"}),n.jsx("p",{className:"text-base sm:text-lg text-forge-cream/80 mb-8",children:"10 graduating developers ready for placement"}),n.jsx(Ts,{onClick:()=>e(!0),className:"bg-forge-orange text-white px-6 py-3 sm:px-10 sm:py-4 rounded-full font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:"Become a Partner"})]})]})})]})]}),n.jsxs("section",{className:"py-20 sm:py-28 lg:py-32 px-4 sm:px-6 bg-forge-dark text-white relative overflow-hidden",children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[n.jsx(pe,{children:n.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-8 leading-tight text-forge-cream",children:["Let's build the future",n.jsx("br",{}),"of Web3 together."]})}),n.jsx(pe,{delay:.2,children:n.jsxs("p",{className:"text-lg sm:text-xl text-forge-cream/80 mb-10 sm:mb-12 leading-relaxed",children:["Partner with Forge College and get first access",n.jsx("br",{}),"to the most skilled Web3 developers."]})}),n.jsx(pe,{delay:.4,children:n.jsxs(Ts,{onClick:()=>e(!0),className:"inline-flex w-full sm:w-auto items-center gap-3 bg-forge-orange text-white px-6 py-4 sm:px-10 sm:py-5 rounded-full text-base sm:text-lg font-bold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:["Start Partnership",n.jsx(fa,{className:"w-6 h-6"})]})}),n.jsx(pe,{delay:.6,children:n.jsx("div",{className:"mt-8 text-sm text-forge-cream/60",children:"Pre-vetted talent  Real project experience  Immediate impact"})})]})]}),n.jsx(mf,{isOpen:t,onClose:()=>e(!1),title:"Partner With Forge College",formType:"company"})]})},kL=()=>{const[t,e]=p.useState(!1),s=[{value:"8-12%",label:"Target IRR",suffix:"",icon:n.jsx(oi,{className:"w-8 h-8"})},{value:"3-5",label:"Year Payback",suffix:"yr",icon:n.jsx(Uf,{className:"w-8 h-8"})},{value:"92%",label:"Job Placement",suffix:"",icon:n.jsx(Es,{className:"w-8 h-8"})}],r=[{icon:n.jsx(ij,{className:"w-6 h-6"}),title:"Diversified RWA Exposure",description:"Invest in human capital through stablecoin-backed Income Share Agreements as a new asset class",highlight:"New Asset Class"},{icon:n.jsx(Uf,{className:"w-6 h-6"}),title:"Transparent Metrics",description:"Access real-time performance data, repayment rates, and ROI analytics through our investor dashboard",highlight:"Live Analytics"},{icon:n.jsx(bh,{className:"w-6 h-6"}),title:"Stable Returns",description:"Generate yield from high-demand Web3 talent with historical repayment rates exceeding traditional education loans",highlight:"Proven Model"}],a=[{metric:"$1.2T",label:"Web3 Market Cap",description:"Total value locked across DeFi and Web3 protocols"},{metric:"3.7M",label:"Developer Shortage",description:"Unfilled Web3 developer positions globally"},{metric:"$140K",label:"Average Salary",description:"Starting salary for Web3 developers"}],i=[{metric:"Target IRR",value:"8-12%",description:"Based on Web3 salary growth trends",trend:"up"},{metric:"Avg. Payback Period",value:"3-5 years",description:"Capped at 10% of income annually",trend:"neutral"},{metric:"Job Placement Rate",value:"92%",description:"Within 6 months of graduation",trend:"up"}],o=[{quarter:"Q2",title:"Fund Launch",description:"Initial investor round and first cohort funding"},{quarter:"Q3",title:"Performance Data",description:"First graduation metrics and repayment initiation"},{quarter:"Q4",title:"Secondary Market",description:"ISA trading platform and liquidity options"}],l=["Andreessen Horowitz","Coinbase Ventures","Paradigm","Sequoia","Tiger Global","Pantera Capital","Union Square Ventures","Binance Labs"],c=[{quote:'"Human capital ISAs represent the next evolution of RWA investments."',author:"Sarah Johnson, Partner at Web3 Fund"},{quote:'"The alignment of incentives in this model creates sustainable returns."',author:"Michael Chen, LP at DeFi Capital"},{quote:'"Finally, an investment that generates returns while solving real problems."',author:"Elena Rodriguez, Managing Director"}],d=`// ISA Investment Smart Contract
contract ForgeISAFund {
  // Investment and return structures
  struct Investment {
    address investor;
    uint256 amountUSDC;
    uint256 expectedReturn;
    uint256 timeframe;
    bool isActive;
  }
  
  // Student income share agreements
  mapping(address => ISATerms) studentISAs;
  
  // Performance tracking
  struct PerformanceMetrics {
    uint256 totalDeployed;
    uint256 totalReturned;
    uint256 currentIRR;
    uint256 activeISAs;
  }
  
  // Investment deployment
  function deployCapital(uint256 amount) public {
    // Fund student salaries (6 months)
    // Track investment allocation
    // Begin performance monitoring
  }
  
  // Return distribution
  function distributeReturns() public {
    // Calculate quarterly distributions
    // Process ISA collections
    // Pay investors based on stake
  }
  
  // Real-time analytics
  function getPortfolioMetrics() public view returns (PerformanceMetrics) {
    // Live IRR calculation
    // Risk-adjusted returns
    // Liquidity positions
  }
}`,u=[{title:"Human Capital as RWA",description:"Web3 has created a new asset class: human capital. Our ISA model tokenizes education investment, creating yield-generating assets backed by high-earning Web3 careers.",highlight:"Next-Gen RWA"},{title:"Aligned Incentives",description:"Unlike traditional education loans, ISAs align investor and student success. Returns are tied to job placement and salary growth, creating sustainable economics for all parties.",highlight:"Win-Win Model"},{title:"Liquidity & Scale",description:"Our roadmap includes secondary market infrastructure for ISA trading, fractional ownership, and automated portfolio management. Scale meets liquidity.",highlight:"DeFi Integration"}];return n.jsxs("div",{className:"min-h-[100svh] bg-forge-cream overflow-x-hidden",children:[n.jsxs("section",{className:"relative min-h-[100svh] flex items-center justify-center pt-28 sm:pt-32 pb-12 sm:pb-16 px-4 sm:px-6",children:[n.jsx(Yt,{variant:"hero"}),n.jsxs("div",{className:"max-w-6xl mx-auto text-center relative z-10",children:[n.jsxs(Me.h1,{initial:{opacity:0,y:30,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{duration:.8,ease:"easeOut"},className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold text-forge-dark mb-8 leading-[0.9] tracking-tight",children:["Invest in",n.jsx("br",{}),n.jsxs("span",{className:"inline-flex items-center",children:["People's Future.",n.jsx(Me.div,{animate:{rotate:[0,15,-15,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:n.jsx(oi,{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 xl:w-24 xl:h-24 text-forge-orange mx-4"})})]})]}),n.jsxs(Me.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"text-lg sm:text-xl lg:text-2xl text-forge-gray max-w-4xl mx-auto mb-12 leading-relaxed",children:["Generate stable returns by investing in Web3 talent",n.jsx("br",{className:"hidden md:block"}),"through innovative stablecoin-backed Income Share Agreements."]}),n.jsx(Me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:n.jsxs(Ts,{onClick:()=>e(!0),className:"inline-flex w-full sm:w-auto items-center gap-3 bg-forge-orange text-white px-6 py-3 sm:px-8 sm:py-4 rounded-full text-base sm:text-lg font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:["Join Investment Round",n.jsx(fa,{className:"w-5 h-5"})]})})]})]}),n.jsx("section",{className:"py-10 sm:py-12 bg-white/50 backdrop-blur-sm border-y border-forge-orange/10",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[n.jsx(pe,{children:n.jsx("p",{className:"text-center text-forge-gray font-medium mb-8",children:"Join institutional investors backing the future of work"})}),n.jsx(wa,{className:"text-xl sm:text-2xl font-bold text-forge-dark/60",children:l.map((h,f)=>n.jsx("span",{className:"mx-6 sm:mx-8 hover:text-forge-orange transition-colors",children:h},f))})]})}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Investment Performance"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Stable returns from a growing market"})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((h,f)=>n.jsx(pe,{delay:f*.1,children:n.jsxs(Me.div,{className:"text-center bg-forge-cream p-6 sm:p-8 rounded-3xl border border-forge-orange/20 group hover:border-forge-orange/40 transition-all duration-300",whileHover:{y:-5},children:[n.jsx("div",{className:"text-forge-orange mb-4 flex justify-center group-hover:scale-110 transition-transform",children:h.icon}),n.jsxs("div",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-forge-dark mb-2",children:[h.value,n.jsx("span",{className:"text-forge-orange text-xl sm:text-2xl lg:text-3xl",children:h.suffix})]}),n.jsx("div",{className:"text-base sm:text-lg text-forge-gray font-medium",children:h.label})]})},f))})]})}),n.jsxs("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-forge-dark text-white relative overflow-hidden",children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-cream mb-6",children:"Market Opportunity"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-cream/80",children:"The Web3 talent shortage creates unprecedented opportunity"})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:a.map((h,f)=>n.jsx(pe,{delay:f*.1,children:n.jsxs(Me.div,{className:"text-center p-6 sm:p-8 rounded-3xl border border-forge-orange/20 bg-white/5 backdrop-blur-sm hover:border-forge-orange/40 transition-all duration-300 group",whileHover:{y:-5,scale:1.02},children:[n.jsx("div",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-orange mb-3 group-hover:scale-110 transition-transform",children:h.metric}),n.jsx("h3",{className:"text-lg sm:text-xl font-bold text-forge-cream mb-2",children:h.label}),n.jsx("p",{className:"text-sm sm:text-base text-forge-cream/70",children:h.description})]})},f))})]})]}),n.jsx(pf,{title:"A New Asset Class is Born",codeBlock:d,steps:u}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-forge-cream",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Why Invest in Human Capital?"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Web3 has created new opportunities for yield generation"})]}),n.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:r.map((h,f)=>n.jsx(pe,{delay:f*.1,children:n.jsxs(Me.div,{className:"bg-white p-6 sm:p-8 rounded-3xl border border-forge-orange/20 hover:border-forge-orange/40 transition-all duration-300 group",whileHover:{y:-8},children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-forge-orange rounded-2xl flex items-center justify-center text-white group-hover:scale-110 group-hover:bg-forge-orange-light transition-all duration-200 shadow-lg",children:h.icon}),n.jsx("span",{className:"text-sm font-bold text-forge-orange bg-forge-orange/10 px-3 py-1 rounded-full",children:h.highlight})]}),n.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-forge-dark mb-4",children:h.title}),n.jsx("p",{className:"text-base sm:text-lg text-forge-gray leading-relaxed",children:h.description})]})},f))})]})}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Investment Metrics"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Transparent performance data you can trust"})]}),n.jsxs("div",{className:"grid lg:grid-cols-2 gap-10 lg:gap-16",children:[n.jsx("div",{className:"space-y-6",children:i.map((h,f)=>n.jsx(pe,{delay:f*.1,children:n.jsxs(Me.div,{className:"bg-forge-cream p-6 rounded-3xl border border-forge-orange/20 hover:border-forge-orange/40 transition-all duration-300 group",whileHover:{x:5},children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-forge-gray font-medium",children:h.metric}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xl sm:text-2xl font-bold text-forge-dark",children:h.value}),h.trend==="up"&&n.jsx(oi,{className:"w-5 h-5 text-green-500"})]})]}),n.jsx("p",{className:"text-sm text-forge-gray/80",children:h.description})]})},f))}),n.jsx(pe,{delay:.4,children:n.jsxs(Me.div,{className:"bg-forge-dark text-white p-6 sm:p-8 rounded-3xl border-4 border-forge-orange relative overflow-hidden",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-6 text-forge-cream",children:"Investment Structure"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-l-4 border-forge-orange pl-4",children:[n.jsx("h4",{className:"font-semibold text-forge-cream",children:"Minimum Investment"}),n.jsx("p",{className:"text-forge-cream/80",children:"$10,000 USDC/USDT"})]}),n.jsxs("div",{className:"border-l-4 border-blue-400 pl-4",children:[n.jsx("h4",{className:"font-semibold text-forge-cream",children:"Fund Duration"}),n.jsx("p",{className:"text-forge-cream/80",children:"7-year fund life with extension options"})]}),n.jsxs("div",{className:"border-l-4 border-green-400 pl-4",children:[n.jsx("h4",{className:"font-semibold text-forge-cream",children:"Distribution Schedule"}),n.jsx("p",{className:"text-forge-cream/80",children:"Quarterly distributions based on collections"})]}),n.jsxs("div",{className:"border-l-4 border-purple-400 pl-4",children:[n.jsx("h4",{className:"font-semibold text-forge-cream",children:"Management Fee"}),n.jsx("p",{className:"text-forge-cream/80",children:"2% annually + 20% performance fee"})]})]}),n.jsx(Ts,{onClick:()=>e(!0),className:"w-full bg-forge-orange text-white py-4 rounded-full font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200 mt-8",children:"Join Investment Round"})]})]})})]})]})}),n.jsx("section",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-forge-cream",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs(pe,{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6",children:"Roadmap to Liquidity"}),n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray",children:"Clear path to returns and secondary market access"})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:o.map((h,f)=>n.jsx(pe,{delay:f*.1,children:n.jsxs(Me.div,{className:"bg-white p-6 sm:p-8 rounded-3xl border border-forge-orange/20 hover:border-forge-orange/40 transition-all duration-300 group text-center",whileHover:{y:-5},children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-forge-orange rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:n.jsx("span",{className:"text-white font-bold text-xl",children:h.quarter})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-forge-dark mb-4",children:h.title}),n.jsx("p",{className:"text-forge-gray",children:h.description})]})},f))})]})}),n.jsx("section",{className:"py-12 sm:py-16 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[n.jsx(pe,{className:"text-center mb-12",children:n.jsx("h3",{className:"text-2xl font-bold text-forge-dark",children:"What Investors Say"})}),n.jsx(wa,{speed:40,className:"text-base sm:text-lg",children:c.map((h,f)=>n.jsxs("div",{className:"mx-6 sm:mx-8 max-w-lg",children:[n.jsx("p",{className:"text-forge-gray italic mb-2",children:h.quote}),n.jsxs("p",{className:"text-forge-dark font-semibold",children:[" ",h.author]})]},f))})]})}),n.jsxs("section",{className:"py-20 sm:py-28 lg:py-32 px-4 sm:px-6 bg-forge-cream relative overflow-hidden",children:[n.jsx(Yt,{variant:"subtle"}),n.jsxs("div",{className:"max-w-5xl mx-auto text-center relative z-10",children:[n.jsx(pe,{children:n.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-forge-dark mb-6 leading-tight",children:["Ready to generate",n.jsx("br",{}),"stable returns?"]})}),n.jsx(pe,{delay:.2,children:n.jsx("p",{className:"text-lg sm:text-xl text-forge-gray max-w-3xl mx-auto mb-12 sm:mb-16 leading-relaxed",children:"Join institutional investors backing the next generation of Web3 builders through innovative ISA investments."})}),n.jsx(pe,{delay:.4,children:n.jsxs(Me.div,{className:"bg-forge-dark rounded-3xl p-6 sm:p-10 lg:p-12 text-white relative overflow-hidden border-4 border-forge-orange",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs(Me.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},className:"inline-flex items-center gap-2 text-forge-orange mb-6",children:[n.jsx(aj,{className:"w-6 h-6"}),n.jsx("span",{className:"font-medium",children:"Next Investment Round"})]}),n.jsx("h3",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-6 text-forge-cream",children:"$2M Target"}),n.jsx("p",{className:"text-base sm:text-lg text-forge-cream/80 mb-8",children:"Funding the April 2026 cohort"}),n.jsx(Ts,{onClick:()=>e(!0),className:"bg-forge-orange text-white px-6 py-3 sm:px-10 sm:py-4 rounded-full font-semibold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:"Invest Now"})]})]})})]})]}),n.jsxs("section",{className:"py-20 sm:py-28 lg:py-32 px-4 sm:px-6 bg-forge-dark text-white relative overflow-hidden",children:[n.jsx(Yt,{variant:"dark"}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[n.jsx(pe,{children:n.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-8 leading-tight text-forge-cream",children:["Invest in impact.",n.jsx("br",{}),"Generate returns."]})}),n.jsx(pe,{delay:.2,children:n.jsxs("p",{className:"text-lg sm:text-xl text-forge-cream/80 mb-10 sm:mb-12 leading-relaxed",children:["Join the future of education funding through",n.jsx("br",{}),"innovative stablecoin-backed ISA investments."]})}),n.jsx(pe,{delay:.4,children:n.jsxs(Ts,{onClick:()=>e(!0),className:"inline-flex w-full sm:w-auto items-center gap-3 bg-forge-orange text-white px-6 py-4 sm:px-10 sm:py-5 rounded-full text-base sm:text-lg font-bold shadow-xl border-2 border-forge-orange hover:border-forge-orange-light transition-all duration-200",children:["Join Investment Round",n.jsx(fa,{className:"w-6 h-6"})]})}),n.jsx(pe,{delay:.6,children:n.jsx("div",{className:"mt-8 text-sm text-forge-cream/60",children:"Minimum $10K USDC  Quarterly distributions  Secondary market access"})})]})]}),n.jsx(mf,{isOpen:t,onClose:()=>e(!1),title:"Join the Investment Round",formType:"investor"})]})},SL=()=>{const t=cr();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),n.jsx("div",{className:"min-h-[100svh] flex items-center justify-center bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),n.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),n.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},_L={signInWithPassword:async({email:t,password:e})=>(await new Promise(s=>setTimeout(s,1e3)),t==="demo@example.com"&&e==="demo123"?{data:{user:{id:"mock-user-id",email:"demo@example.com",user_metadata:{name:"Demo User"}},session:{access_token:"mock-access-token",refresh_token:"mock-refresh-token"}},error:null}:{data:{user:null,session:null},error:{message:"Invalid login credentials",status:400}}),signInWithOAuth:async({provider:t})=>(console.log(`Mock OAuth redirect for ${t}`),window.location.href=`/auth/callback?provider=${t}&mock=true`,{data:null,error:null}),signOut:async()=>({error:null}),getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})};function rg(){return!1}const gf=It("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=p.forwardRef(({className:t,variant:e,size:s,asChild:r=!1,...a},i)=>{const o=r?On:"button";return n.jsx(o,{className:$(gf({variant:e,size:s,className:t})),ref:i,...a})});te.displayName="Button";const ye=p.forwardRef(({className:t,type:e,...s},r)=>n.jsx("input",{type:e,className:$("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s}));ye.displayName="Input";const CL=It("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ts=p.forwardRef(({className:t,...e},s)=>n.jsx(wx,{ref:s,className:$(CL(),t),...e}));ts.displayName=wx.displayName;const de=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:$("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));de.displayName="Card";const Be=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:$("flex flex-col space-y-1.5 p-6",t),...e}));Be.displayName="CardHeader";const qe=p.forwardRef(({className:t,...e},s)=>n.jsx("h3",{ref:s,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));qe.displayName="CardTitle";const ls=p.forwardRef(({className:t,...e},s)=>n.jsx("p",{ref:s,className:$("text-sm text-muted-foreground",t),...e}));ls.displayName="CardDescription";const oe=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:$("p-6 pt-0",t),...e}));oe.displayName="CardContent";const TL=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:$("flex items-center p-6 pt-0",t),...e}));TL.displayName="CardFooter";const PL="/",EL="/companies",AL="/investors",LL="/old/hidden/index",Wv="/login",RL="/signup",OL="/forgot-password",ML="/update-password",Qt="/dashboard",as="/dashboard/explore",Cn="/dashboard/formations",IL=t=>`/dashboard/formations/${t}`,Uu="/dashboard/courses",wl="/dashboard/admin",Yo="/dashboard/admin/lessons",DL=t=>`/dashboard/admin/lessons/${t}/edit`,jl="/dashboard/scoreboard",da="/dashboard/achievements",Nl="/dashboard/ambassadors",vn="/dashboard/community-projects",Or=t=>`/dashboard/learn/course/${t}`,ua=t=>`/dashboard/learn/path/${t}`,ns={[Qt]:"nav.dashboard",[as]:"nav.paths",[wl]:"nav.admin",[jl]:"nav.scoreboard",[da]:"nav.achievements",[Nl]:"nav.ambassadors",[vn]:"nav.communityProjects",LEARN:"nav.learn",COURSE:"nav.course",PATH:"nav.path",PROFILE:"nav.myProfile",PAGE:"nav.page"};function $L(){const{t}=je(),[e,s]=p.useState(""),[r,a]=p.useState(""),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(!1),h=dr(),f=cr(),m=async b=>{var y,w,N,S,k,j,v,_,E,R,z,F,L;b.preventDefault(),c(null),o(!0);try{rg(),console.log("Attempting Supabase authentication...");const U=Ue(),{data:J,error:Y}=await U.auth.signInWithPassword({email:e.trim(),password:r});if(console.log("Login response:",{data:!!J,error:Y==null?void 0:Y.message}),Y){if((y=Y.message)!=null&&y.includes("Invalid login credentials"))throw new Error("Invalid email or password. Please check your credentials and try again.");if((w=Y.message)!=null&&w.includes("Email not confirmed"))throw new Error("Please check your email and click the confirmation link before signing in.");if((N=Y.message)!=null&&N.includes("Too many requests"))throw new Error("Too many login attempts. Please wait a moment before trying again.");if((S=Y.message)!=null&&S.includes("body stream already read")){console.log("Supabase error detected, falling back to mock auth...");const{data:I,error:O}=await _L.signInWithPassword({email:e.trim(),password:r});if(O)throw new Error(O.message);if(I!=null&&I.user){localStorage.setItem("mock-auth-user",JSON.stringify(I.user));const D=((j=(k=f.state)==null?void 0:k.from)==null?void 0:j.pathname)||Qt;h(D,{replace:!0})}return}else throw new Error(Y.message||"Login failed")}if(J!=null&&J.user){console.log("Login successful, redirecting...");const I=((_=(v=f.state)==null?void 0:v.from)==null?void 0:_.pathname)||Qt;h(I,{replace:!0})}}catch(U){console.error("Login error:",U),(E=U.message)!=null&&E.includes("body stream already read")?c("Authentication service configuration error. Using demo mode - try email: demo@example.com, password: demo123"):(R=U.message)!=null&&R.includes("fetch")||(z=U.message)!=null&&z.includes("network")?c("Network connection error. Please check your internet connection and try again."):(F=U.message)!=null&&F.includes("Failed to execute")?c("Authentication service error. The Supabase instance may be misconfigured."):(L=U.message)!=null&&L.includes("Supabase connection failed")?c("Cannot connect to authentication service. Please check if Supabase is properly configured."):c(U.message||"An unexpected error occurred. Please try again.")}finally{o(!1)}},x=async()=>{try{c(null),o(!0);const b=Ue(),{error:y}=await b.auth.signInWithOAuth({provider:"google",options:{redirectTo:Oi()}});if(y)throw console.error("Google OAuth error:",y),new Error("Google sign-in failed. Please try again.")}catch(b){console.error("Google login error:",b),c(b.message||"Google sign-in failed. Please try again."),o(!1)}},g=async()=>{try{c(null),o(!0);const b=Ue(),{error:y}=await b.auth.signInWithOAuth({provider:"github",options:{redirectTo:Oi()}});if(y)throw console.error("GitHub OAuth error:",y),new Error("GitHub sign-in failed. Please try again.")}catch(b){console.error("GitHub login error:",b),c(b.message||"GitHub sign-in failed. Please try again."),o(!1)}};return n.jsxs("div",{className:"flex items-center justify-center min-h-[100svh] bg-forge-cream relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-forge-orange/5 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-40 right-20 w-48 h-48 bg-forge-orange/10 rounded-full blur-2xl"})]}),n.jsxs(de,{className:"w-full max-w-md bg-white/95 backdrop-blur-sm border border-forge-orange/20 shadow-xl relative z-10",children:[n.jsx(Be,{children:n.jsx(qe,{className:"text-forge-dark text-2xl font-bold",children:"Login"})}),n.jsxs(oe,{children:[rg(),n.jsx("form",{onSubmit:m,children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"email",className:"text-forge-dark font-medium",children:"Email"}),n.jsx(ye,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:e,onChange:b=>s(b.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"password",className:"text-forge-dark font-medium",children:"Password"}),n.jsx(ye,{id:"password",type:"password",required:!0,value:r,onChange:b=>a(b.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),l&&n.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:l}),n.jsx(te,{type:"submit",className:"w-full bg-forge-orange text-white hover:bg-forge-orange-light transition-all duration-200 shadow-lg hover:shadow-xl font-semibold py-3 rounded-xl",disabled:i,children:i?"Loading...":"Login"}),n.jsxs("div",{className:"relative my-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("span",{className:"w-full border-t border-forge-orange/20"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-forge-gray",children:"Or continue with"})})]}),n.jsxs("div",{className:"grid gap-3",children:[n.jsxs(te,{type:"button",variant:"outline",onClick:x,className:"w-full border-forge-orange/20 hover:border-forge-orange hover:bg-forge-orange/5 transition-all duration-200 font-medium py-3 rounded-xl group",disabled:i,children:[n.jsxs("svg",{className:"w-6 h-6 mr-3 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),n.jsxs(te,{type:"button",variant:"outline",onClick:g,className:"w-full border-forge-orange/20 hover:border-forge-orange hover:bg-forge-orange/5 transition-all duration-200 font-medium py-3 rounded-xl group",disabled:i,children:[n.jsx(Ec,{className:"w-6 h-6 mr-3 transition-transform group-hover:scale-110"}),"Continue with GitHub"]})]}),n.jsxs("div",{className:"mt-4 text-center text-sm",children:[n.jsx("span",{className:"text-forge-gray",children:"Don't have an account?"})," ",n.jsx(we,{to:"/signup",className:"text-forge-orange hover:text-forge-orange-light font-medium underline transition-colors",children:"Sign up"})]}),n.jsx("div",{className:"text-center text-sm",children:n.jsx(we,{to:"/forgot-password",className:"text-forge-orange hover:text-forge-orange-light font-medium underline transition-colors",children:"Forgot your password?"})}),!1]})})]})]})]})}function FL(){const[t,e]=p.useState(""),[s,r]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,h]=p.useState(null),f=async g=>{if(g.preventDefault(),s!==a){h("Passwords do not match");return}h(null),l(!0),d("");try{const b=Ue(),{error:y}=await b.auth.signUp({email:t,password:s});if(y)throw new Error(y.message||"Sign up failed");d("Check your email for the confirmation link!")}catch(b){b.message.includes("fetch")||b.message.includes("network")?h("Authentication service not configured. Please contact the administrator."):h(b.message)}finally{l(!1)}},m=async()=>{try{h(null),l(!0);const g=Ue(),{error:b}=await g.auth.signInWithOAuth({provider:"google",options:{redirectTo:Oi()}});if(b)throw new Error(b.message||"OAuth sign-in failed")}catch(g){h(g.message),l(!1)}},x=async()=>{try{h(null),l(!0);const g=Ue(),{error:b}=await g.auth.signInWithOAuth({provider:"github",options:{redirectTo:Oi()}});if(b)throw new Error(b.message||"OAuth sign-in failed")}catch(g){h(g.message),l(!1)}};return n.jsxs("div",{className:"flex items-center justify-center min-h-[100svh] bg-forge-cream relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-forge-orange/5 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-40 right-20 w-48 h-48 bg-forge-orange/10 rounded-full blur-2xl"})]}),n.jsxs(de,{className:"w-full max-w-md bg-white/95 backdrop-blur-sm border border-forge-orange/20 shadow-xl relative z-10",children:[n.jsx(Be,{children:n.jsx(qe,{className:"text-forge-dark text-2xl font-bold",children:"Create Account"})}),n.jsx(oe,{children:n.jsx("form",{onSubmit:f,children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"email",className:"text-forge-dark font-medium",children:"Email"}),n.jsx(ye,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:t,onChange:g=>e(g.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"password",className:"text-forge-dark font-medium",children:"Password"}),n.jsx(ye,{id:"password",type:"password",required:!0,value:s,onChange:g=>r(g.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"confirm-password",className:"text-forge-dark font-medium",children:"Confirm Password"}),n.jsx(ye,{id:"confirm-password",type:"password",required:!0,value:a,onChange:g=>i(g.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),u&&n.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:u}),c&&n.jsx("p",{className:"text-green-500 text-sm bg-green-50 p-3 rounded-lg border border-green-200",children:c}),n.jsx(te,{type:"submit",className:"w-full bg-forge-orange text-white hover:bg-forge-orange-light transition-all duration-200 shadow-lg hover:shadow-xl font-semibold py-3 rounded-xl",disabled:o,children:o?"Creating account...":"Sign Up"}),n.jsxs("div",{className:"relative my-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("span",{className:"w-full border-t border-forge-orange/20"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-forge-gray",children:"Or continue with"})})]}),n.jsxs("div",{className:"grid gap-3",children:[n.jsxs(te,{type:"button",variant:"outline",onClick:m,className:"w-full border-forge-orange/20 hover:border-forge-orange hover:bg-forge-orange/5 transition-all duration-200 font-medium py-3 rounded-xl group",disabled:o,children:[n.jsxs("svg",{className:"w-6 h-6 mr-3 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),n.jsxs(te,{type:"button",variant:"outline",onClick:x,className:"w-full border-forge-orange/20 hover:border-forge-orange hover:bg-forge-orange/5 transition-all duration-200 font-medium py-3 rounded-xl group",disabled:o,children:[n.jsx(Ec,{className:"w-6 h-6 mr-3 transition-transform group-hover:scale-110"}),"Continue with GitHub"]})]}),n.jsxs("div",{className:"mt-4 text-center text-sm",children:[n.jsx("span",{className:"text-forge-gray",children:"Already have an account?"})," ",n.jsx(we,{to:"/login",className:"text-forge-orange hover:text-forge-orange-light font-medium underline transition-colors",children:"Login"})]})]})})})]})]})}function zL(){const[t,e]=p.useState(""),[s,r]=p.useState(!1),[a,i]=p.useState(""),[o,l]=p.useState(null),c=async d=>{d.preventDefault(),l(null),i(""),r(!0);try{const u=Ue(),{error:h}=await u.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/update-password`});if(h)throw new Error(h.message||"Failed to send reset email");i("Check your email for a password reset link.")}catch(u){l(u.message)}finally{r(!1)}};return n.jsxs("div",{className:"flex items-center justify-center min-h-[100svh] bg-forge-cream relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-forge-orange/5 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-40 right-20 w-48 h-48 bg-forge-orange/10 rounded-full blur-2xl"})]}),n.jsxs(de,{className:"w-full max-w-md bg-white/95 backdrop-blur-sm border border-forge-orange/20 shadow-xl relative z-10",children:[n.jsx(Be,{children:n.jsx(qe,{className:"text-forge-dark text-2xl font-bold",children:"Forgot Password"})}),n.jsx(oe,{children:n.jsx("form",{onSubmit:c,children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"email",className:"text-forge-dark font-medium",children:"Email"}),n.jsx(ye,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:t,onChange:d=>e(d.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),o&&n.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:o}),a&&n.jsx("p",{className:"text-green-500 text-sm bg-green-50 p-3 rounded-lg border border-green-200",children:a}),n.jsx(te,{type:"submit",className:"w-full bg-forge-orange text-white hover:bg-forge-orange-light transition-all duration-200 shadow-lg hover:shadow-xl font-semibold py-3 rounded-xl",disabled:s,children:s?"Sending...":"Send Reset Link"}),n.jsxs("div",{className:"mt-4 text-center text-sm",children:[n.jsx("span",{className:"text-forge-gray",children:"Remembered your password?"})," ",n.jsx(we,{to:"/login",className:"text-forge-orange hover:text-forge-orange-light font-medium underline transition-colors",children:"Login"})]})]})})})]})]})}const Md=768;function qv(){const[t,e]=p.useState(void 0);return p.useEffect(()=>{const s=window.matchMedia(`(max-width: ${Md-1}px)`),r=()=>{e(window.innerWidth<Md)};return s.addEventListener("change",r),e(window.innerWidth<Md),()=>s.removeEventListener("change",r)},[]),!!t}const Ft=p.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...r},a)=>n.jsx(jx,{ref:a,decorative:s,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Ft.displayName=jx.displayName;const BL=vh,UL=yh,Kv=p.forwardRef(({className:t,...e},s)=>n.jsx(po,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));Kv.displayName=po.displayName;const VL=It("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Gv=p.forwardRef(({side:t="right",className:e,children:s,...r},a)=>n.jsxs(UL,{children:[n.jsx(Kv,{}),n.jsxs(go,{ref:a,className:$(VL({side:t}),e),...r,children:[n.jsx(Ea,{className:"sr-only",children:"Menu"}),s,n.jsxs(Nx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(bs,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gv.displayName=go.displayName;const HL=p.forwardRef(({className:t,...e},s)=>n.jsx(Ea,{ref:s,className:$("text-lg font-semibold text-foreground",t),...e}));HL.displayName=Ea.displayName;const WL=p.forwardRef(({className:t,...e},s)=>n.jsx(xo,{ref:s,className:$("text-sm text-muted-foreground",t),...e}));WL.displayName=xo.displayName;const qL=It("bg-muted",{variants:{variant:{pulse:"animate-pulse",shimmer:"relative overflow-hidden before:absolute before:inset-0 before:-translate-x-full before:animate-shimmer before:bg-gradient-to-r before:from-transparent before:via-white/20 before:to-transparent",wave:"relative overflow-hidden before:absolute before:inset-0 before:-translate-x-full before:animate-shimmer before:bg-gradient-to-r before:from-transparent before:via-white/30 before:to-transparent"},shape:{default:"rounded-md",circle:"rounded-full",rectangle:"rounded-none",lg:"rounded-lg",xl:"rounded-xl"}},defaultVariants:{variant:"shimmer",shape:"default"}});function Ps({className:t,variant:e,shape:s,...r}){return n.jsx("div",{className:$(qL({variant:e,shape:s}),t),role:"status","aria-label":"Loading...",...r})}function KL({className:t,lines:e=1,...s}){return n.jsx("div",{className:$("space-y-2",t),...s,children:Array.from({length:e}).map((r,a)=>n.jsx(Ps,{className:$("h-4",a===e-1&&e>1?"w-4/5":"w-full")},a))})}function GL({className:t,size:e="md",...s}){const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"};return n.jsx(Ps,{shape:"circle",className:$(r[e],t),...s})}const JL="sidebar:state",YL=60*60*24*7,XL="16rem",ZL="18rem",QL="3rem",eR="b",Jv=p.createContext(null),Yv=p.createContext({prevent:!1});function Dn(){const t=p.useContext(Jv);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const Xv=p.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:s,expandOnHover:r=!1,className:a,style:i,children:o,...l},c)=>{const d=qv(),[u,h]=p.useState(!1),[f,m]=p.useState(t),x=e??f,g=p.useCallback(N=>{const S=typeof N=="function"?N(x):N;s?s(S):m(S),r||(document.cookie=`${JL}=${S}; path=/; max-age=${YL}`)},[s,x,r]),b=p.useCallback(()=>d?h(N=>!N):g(N=>!N),[d,g,h]);p.useEffect(()=>{const N=S=>{S.key===eR&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),b())};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[b]);const y=x?"expanded":"collapsed",w=p.useMemo(()=>({state:y,open:x,setOpen:g,isMobile:d,openMobile:u,setOpenMobile:h,toggleSidebar:b,expandOnHover:r}),[y,x,g,d,u,h,b,r]);return n.jsx(Jv.Provider,{value:w,children:n.jsx(Sn,{delayDuration:0,children:n.jsx("div",{style:{"--sidebar-width":XL,"--sidebar-width-icon":QL,...i},className:$("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",a),ref:c,...l,children:o})})})});Xv.displayName="SidebarProvider";const Zv=p.forwardRef(({side:t="left",variant:e="sidebar",collapsible:s="offcanvas",className:r,children:a,...i},o)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u,setOpen:h,expandOnHover:f}=Dn(),m=p.useRef(null),x=p.useContext(Yv).prevent,g=p.useCallback(()=>{m.current&&(clearTimeout(m.current),m.current=null),h(!0)},[h]),b=p.useCallback(()=>{x||(m.current=setTimeout(()=>{h(!1),m.current=null},200))},[h,x]);return p.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]),p.useEffect(()=>{x&&m.current&&(clearTimeout(m.current),m.current=null)},[x]),s==="none"?n.jsx("div",{className:$("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:a}):l?n.jsx(BL,{open:d,onOpenChange:u,...i,children:n.jsx(Gv,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":ZL},side:t,children:n.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):n.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?s:"","data-variant":e,"data-side":t,onMouseEnter:f?g:void 0,onMouseLeave:f?b:void 0,children:[n.jsx("div",{className:$("duration-300 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-in-out","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),n.jsx("div",{className:$("duration-300 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-in-out md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:n.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});Zv.displayName="Sidebar";const Qv=p.forwardRef(({className:t,onClick:e,...s},r)=>{const{toggleSidebar:a,state:i,expandOnHover:o}=Dn();return o?null:n.jsxs(te,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:$("h-7 w-7",t),onClick:l=>{e==null||e(l),a()},...s,children:[n.jsx(kx,{className:$("transition-transform duration-200",i==="collapsed"?"rotate-180":"")}),n.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Qv.displayName="SidebarTrigger";const e0=p.forwardRef(({className:t,...e},s)=>{const{toggleSidebar:r,expandOnHover:a}=Dn();return a?null:n.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:$("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all duration-300 ease-in-out group-data-[side=left]:right-0 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:right-0","[[data-side=right][data-collapsible=offcanvas]_&]:left-0",t),...e})});e0.displayName="SidebarRail";const t0=p.forwardRef(({className:t,...e},s)=>n.jsx("main",{ref:s,className:$("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));t0.displayName="SidebarInset";const tR=p.forwardRef(({className:t,...e},s)=>n.jsx(ye,{ref:s,"data-sidebar":"input",className:$("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));tR.displayName="SidebarInput";const s0=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-sidebar":"header",className:$("flex flex-col gap-2 p-2 transition-[padding] duration-300 ease-in-out",t),...e}));s0.displayName="SidebarHeader";const r0=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-sidebar":"footer",className:$("flex flex-col gap-2 p-2 transition-[padding,gap] duration-300 ease-in-out","group-data-[collapsible=icon]:items-center",t),...e}));r0.displayName="SidebarFooter";const sR=p.forwardRef(({className:t,...e},s)=>n.jsx(Ft,{ref:s,"data-sidebar":"separator",className:$("mx-2 w-auto bg-sidebar-border",t),...e}));sR.displayName="SidebarSeparator";const n0=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-sidebar":"content",className:$("flex min-h-0 flex-1 flex-col gap-2 overflow-x-hidden overflow-y-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));n0.displayName="SidebarContent";const a0=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-sidebar":"group",className:$("relative flex w-full min-w-0 flex-col p-2",t),...e}));a0.displayName="SidebarGroup";const rR=p.forwardRef(({className:t,asChild:e=!1,...s},r)=>{const a=e?On:"div";return n.jsx(a,{ref:r,"data-sidebar":"group-label",className:$("duration-300 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] ease-in-out focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...s})});rR.displayName="SidebarGroupLabel";const nR=p.forwardRef(({className:t,asChild:e=!1,...s},r)=>{const a=e?On:"button";return n.jsx(a,{ref:r,"data-sidebar":"group-action",className:$("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...s})});nR.displayName="SidebarGroupAction";const i0=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-sidebar":"group-content",className:$("w-full text-sm",t),...e}));i0.displayName="SidebarGroupContent";const o0=p.forwardRef(({className:t,...e},s)=>n.jsx("ul",{ref:s,"data-sidebar":"menu",className:$("flex w-full min-w-0 flex-col gap-1",t),...e}));o0.displayName="SidebarMenu";const Cr=p.forwardRef(({className:t,...e},s)=>n.jsx("li",{ref:s,"data-sidebar":"menu-item",className:$("group/menu-item relative",t),...e}));Cr.displayName="SidebarMenuItem";const aR=It("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-[#303b2e] data-[active=true]:font-medium data-[active=true]:text-white data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:gap-0 [&>*:first-child]:shrink-0 [&>*:nth-child(2)]:min-w-0 [&>*:nth-child(2)]:truncate [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Tr=p.forwardRef(({asChild:t=!1,isActive:e=!1,variant:s="default",size:r="default",tooltip:a,className:i,...o},l)=>{const c=t?On:"button",{isMobile:d,state:u}=Dn(),h=n.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:$(aR({variant:s,size:r}),i),...o});return a?(typeof a=="string"&&(a={children:a}),n.jsxs(xa,{children:[n.jsx(ba,{asChild:!0,children:h}),n.jsx(_n,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});Tr.displayName="SidebarMenuButton";const iR=p.forwardRef(({className:t,asChild:e=!1,showOnHover:s=!1,...r},a)=>{const i=e?On:"button";return n.jsx(i,{ref:a,"data-sidebar":"menu-action",className:$("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-white md:opacity-0",t),...r})});iR.displayName="SidebarMenuAction";const oR=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:$("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-white","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));oR.displayName="SidebarMenuBadge";const lR=p.forwardRef(({className:t,showIcon:e=!1,...s},r)=>{const a=p.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return n.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:$("rounded-md h-8 flex gap-2 px-2 items-center",t),...s,children:[e&&n.jsx(Ps,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),n.jsx(Ps,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});lR.displayName="SidebarMenuSkeleton";const l0=p.forwardRef(({className:t,...e},s)=>n.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:$("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));l0.displayName="SidebarMenuSub";const kl=p.forwardRef(({...t},e)=>n.jsx("li",{ref:e,...t}));kl.displayName="SidebarMenuSubItem";const Sl=p.forwardRef(({asChild:t=!1,size:e="md",isActive:s,className:r,...a},i)=>{const o=t?On:"a";return n.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":e,"data-active":s,className:$("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0","data-[active=true]:bg-[#303b2e] data-[active=true]:text-white",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});Sl.displayName="SidebarMenuSubButton";const cR=oj,dR=lj,uR=cj,hR=hj,fR=fj,mR=p.forwardRef(({className:t,inset:e,children:s,...r},a)=>n.jsxs(Sx,{ref:a,className:$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[s,n.jsx(dj,{className:"ml-auto h-4 w-4"})]}));mR.displayName=Sx.displayName;const pR=p.forwardRef(({className:t,...e},s)=>n.jsx(_x,{ref:s,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));pR.displayName=_x.displayName;const c0=p.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(uj,{children:n.jsx(Cx,{ref:r,sideOffset:e,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));c0.displayName=Cx.displayName;const ni=p.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(Tx,{ref:r,className:$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...s}));ni.displayName=Tx.displayName;const gR=p.forwardRef(({className:t,children:e,checked:s,...r},a)=>n.jsxs(Px,{ref:a,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Ex,{children:n.jsx(bo,{className:"h-4 w-4"})})}),e]}));gR.displayName=Px.displayName;const xR=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(Ax,{ref:r,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Ex,{children:n.jsx(Ac,{className:"h-2 w-2 fill-current"})})}),e]}));xR.displayName=Ax.displayName;const d0=p.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(Lx,{ref:r,className:$("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));d0.displayName=Lx.displayName;const Vu=p.forwardRef(({className:t,...e},s)=>n.jsx(Rx,{ref:s,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));Vu.displayName=Rx.displayName;const Gc=p.forwardRef(({className:t,...e},s)=>n.jsx(Ox,{ref:s,className:$("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Gc.displayName=Ox.displayName;const Jc=p.forwardRef(({className:t,...e},s)=>n.jsx(Mx,{ref:s,className:$("aspect-square h-full w-full",t),...e}));Jc.displayName=Mx.displayName;const Yc=p.forwardRef(({className:t,...e},s)=>n.jsx(Ix,{ref:s,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Yc.displayName=Ix.displayName;function Hu(){var h,f;const{t}=je(),{user:e}=Ct(),{signOut:s,loading:r}=Ah(),{state:a}=Dn(),i=a==="collapsed";let o=null;const l=!!((h=e==null?void 0:e.app_metadata)!=null&&h.is_admin||o!=null&&o.is_admin),c=async()=>{try{await s()}catch(m){console.error("Error during logout:",m),window.location.href="/"}},d=m=>m?m.substring(0,2).toUpperCase():"U",u=()=>{var m,x;return(m=e==null?void 0:e.user_metadata)!=null&&m.full_name?e.user_metadata.full_name:(x=e==null?void 0:e.user_metadata)!=null&&x.name?e.user_metadata.name:e!=null&&e.email?e.email.split("@")[0]:"User"};return e?n.jsxs(hR,{children:[n.jsx(fR,{asChild:!0,children:n.jsxs(te,{variant:"ghost",className:$("w-full gap-2 px-2",i?"justify-center":"justify-start"),children:[n.jsxs(Gc,{className:"h-8 w-8",children:[n.jsx(Jc,{src:(f=e==null?void 0:e.user_metadata)==null?void 0:f.avatar_url}),n.jsx(Yc,{children:d(e==null?void 0:e.email)})]}),!i&&n.jsxs("div",{className:"flex flex-col items-start text-left",children:[n.jsx("span",{className:"text-sm font-medium",children:u()}),n.jsx("span",{className:"text-xs text-muted-foreground",children:e==null?void 0:e.email})]})]})}),n.jsxs(c0,{align:"end",className:"w-56",children:[n.jsx(d0,{children:t("profileDropdown.myAccount")}),n.jsx(Vu,{}),n.jsx(ni,{asChild:!0,children:n.jsxs(we,{to:"/dashboard/profile",children:[n.jsx(Lc,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:t("profileDropdown.profile")})]})}),l&&n.jsx(ni,{asChild:!0,children:n.jsxs(we,{to:"/dashboard/admin",children:[n.jsx(bh,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:t("profileDropdown.admin")})]})}),n.jsxs(ni,{children:[n.jsx(mj,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:t("profileDropdown.connectWallet")})]}),n.jsx(Vu,{}),n.jsxs(ni,{onClick:c,disabled:r,children:[n.jsx(pj,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:t(r?"auth.logout.signingOut":"auth.logout.button")})]})]})]}):null}function Wu(){const{t}=je();return n.jsx("div",{className:"absolute inset-x-0 top-0 z-50 bg-forge-orange-600 text-white shadow-md",children:n.jsx("div",{className:"mx-auto flex h-[30px] max-w-6xl items-center justify-center px-4 text-center text-sm font-medium",children:n.jsx("p",{className:"m-0 font-medium",children:t("layout.betaPromo.message")})})})}function bR(){const t=cr(),{t:e}=je(),s=[{label:e("nav.dashboard"),to:Qt,icon:Dx,isActive:r=>r===Qt},{label:e("nav.paths"),to:as,icon:Lt,isActive:r=>r.startsWith(as)||r.startsWith("/dashboard/learn")||r.startsWith(Cn)},{label:e("nav.achievements"),to:da,icon:gn,isActive:r=>r.startsWith(da)},{label:e("nav.communityProjects"),to:vn,icon:yo,isActive:r=>r.startsWith(vn)},{label:e("nav.myProfile"),to:`${Qt}/profile`,icon:Lc,isActive:r=>r.startsWith(`${Qt}/profile`)}];return n.jsx("nav",{className:"fixed inset-x-0 bottom-0 z-40 border-t border-forge-cream/80 bg-white/95 backdrop-blur-md md:hidden",children:n.jsx("div",{className:"flex items-center justify-between gap-2 px-3 pb-[env(safe-area-inset-bottom)] pt-2",children:s.map(r=>{const a=r.isActive(t.pathname),i=r.icon;return n.jsxs(we,{to:r.to,className:$("flex flex-1 flex-col items-center justify-center gap-1 rounded-lg py-2 text-[11px] font-semibold transition-colors",a?"bg-forge-orange/10 text-forge-orange":"text-gray-500 hover:text-forge-dark"),"aria-label":r.label,children:[n.jsx(i,{className:"h-5 w-5"}),n.jsx("span",{children:r.label})]},r.to)})})})}const Pt=jj,Rt=Nj,kt=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs($x,{ref:r,className:$("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,n.jsx(gj,{asChild:!0,children:n.jsx(vo,{className:"h-4 w-4 opacity-50"})})]}));kt.displayName=$x.displayName;const u0=p.forwardRef(({className:t,...e},s)=>n.jsx(Fx,{ref:s,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(xj,{className:"h-4 w-4"})}));u0.displayName=Fx.displayName;const h0=p.forwardRef(({className:t,...e},s)=>n.jsx(zx,{ref:s,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(vo,{className:"h-4 w-4"})}));h0.displayName=zx.displayName;const St=p.forwardRef(({className:t,children:e,position:s="popper",...r},a)=>n.jsx(bj,{children:n.jsxs(Bx,{ref:a,className:$("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[n.jsx(u0,{}),n.jsx(yj,{className:$("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),n.jsx(h0,{})]})}));St.displayName=Bx.displayName;const yR=p.forwardRef(({className:t,...e},s)=>n.jsx(Ux,{ref:s,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));yR.displayName=Ux.displayName;const Ye=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(Vx,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(vj,{children:n.jsx(bo,{className:"h-4 w-4"})})}),n.jsx(wj,{children:e})]}));Ye.displayName=Vx.displayName;const vR=p.forwardRef(({className:t,...e},s)=>n.jsx(Hx,{ref:s,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));vR.displayName=Hx.displayName;const ng="forge:appLocale";function wR(){const{state:t}=Dn();return n.jsx(we,{to:"/dashboard",className:"absolute left-2 top-4 z-10 flex items-start group-data-[collapsible=icon]:left-1/2 group-data-[collapsible=icon]:-translate-x-1/2",children:t==="collapsed"?n.jsx("img",{src:"/lovable-uploads/forge-logo-icon.png",alt:"Forge College",className:"h-9 w-9 shrink-0 object-contain"}):n.jsx("img",{src:"https://cdn.builder.io/api/v1/assets/a59c9d8d677c4c99bcaffef64866607b/forgecollege-2c35f0?format=webp&width=800",alt:"Forge College",className:"h-10 w-auto max-w-full object-contain"})})}function jR({location:t,educationOpen:e,setEducationOpen:s}){const{t:r}=je(),{state:a,toggleSidebar:i,expandOnHover:o}=Dn(),l=c=>{a==="collapsed"&&!o&&(c.preventDefault(),c.stopPropagation(),i())};return n.jsx(Cr,{children:n.jsxs(cR,{open:e,onOpenChange:s,className:"group/collapsible",children:[n.jsx(dR,{asChild:!0,children:n.jsxs(Tr,{tooltip:r("nav.education"),onClick:l,children:[n.jsx(Lt,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.education")}),n.jsx(vo,{className:"ml-auto h-4 w-4 shrink-0 transition-transform group-data-[state=open]/collapsible:rotate-180 group-data-[collapsible=icon]:hidden"})]})}),n.jsx(uR,{children:n.jsxs(l0,{children:[n.jsx(kl,{children:n.jsx(Sl,{asChild:!0,isActive:t.pathname.startsWith(Cn),children:n.jsxs(we,{to:Cn,children:[n.jsx(li,{className:"h-4 w-4"}),n.jsx("span",{children:r("nav.formations")})]})})}),n.jsx(kl,{children:n.jsx(Sl,{asChild:!0,isActive:t.pathname.startsWith(as),children:n.jsxs(we,{to:as,children:[n.jsx(wo,{className:"h-4 w-4"}),n.jsx("span",{children:r("nav.learningPaths")})]})})}),n.jsx(kl,{children:n.jsx(Sl,{asChild:!0,isActive:t.pathname.startsWith(Uu),children:n.jsxs(we,{to:Uu,children:[n.jsx(Ti,{className:"h-4 w-4"}),n.jsx("span",{children:r("nav.courses")})]})})})]})})]})})}function NR(){var E;const{user:t,loading:e}=Ct(),s=cr(),{t:r,i18n:a}=je(),[i,o]=p.useState(a.language),[l,c]=p.useState(!1);p.useEffect(()=>{if(typeof window>"u")return;const R=localStorage.getItem(ng);R&&R!==a.language&&(a.changeLanguage(R),o(R))},[a]),p.useEffect(()=>{o(a.language)},[a.language]);const d=p.useMemo(()=>[{value:"en-US",label:"EN",flag:"https://flagcdn.com/24x18/us.png"},{value:"pt-BR",label:"PT",flag:"https://flagcdn.com/24x18/br.png"}],[]),u=R=>{o(R),a.changeLanguage(R),typeof window<"u"&&localStorage.setItem(ng,R)},h=s.pathname===Qt;s.pathname.startsWith(as);const f=s.pathname.startsWith(wl),m=s.pathname.startsWith(jl),x=s.pathname.startsWith(da),g=s.pathname.startsWith(Nl),b=s.pathname.startsWith(vn),y=s.pathname.startsWith(Cn)||s.pathname.startsWith(as)||s.pathname.startsWith(Uu),w=/^\/dashboard\/learn\/course\/[^/]+/.test(s.pathname),[N,S]=p.useState(null),[k,j]=p.useState(y);let v=null;const _=!!((E=t==null?void 0:t.app_metadata)!=null&&E.is_admin||v!=null&&v.is_admin);return p.useMemo(()=>{const R=s.pathname.split("/").filter(Boolean),z=[];if(z.push({label:r(ns[Qt]),to:Qt}),R.length<=1)return z;const F=R[1];if(F==="explore")z.push({label:r(ns[as])});else if(F==="profile")z.push({label:r(ns.PROFILE)});else if(F==="scoreboard")z.push({label:r(ns[jl])});else if(F==="achievements")z.push({label:r(ns[da])});else if(F==="ambassadors")z.push({label:r(ns[Nl])});else if(F==="community-projects")z.push({label:r(ns[vn])});else if(F==="admin"){z.push({label:r(ns[wl])});const L=R[2];if(L){const J={paths:r("admin.layout.nav.paths"),courses:r("admin.layout.nav.courses"),modules:r("admin.layout.nav.modules"),lessons:r("admin.layout.nav.lessons"),projects:r("admin.layout.nav.projects")}[L];J&&z.push({label:J})}}else if(F==="learn"){const L=R[2];L==="course"?(z.push({label:r(ns.LEARN),to:as}),z.push({label:r(ns.COURSE)})):L==="path"&&(z.push({label:r(ns.LEARN),to:as}),z.push({label:r(ns.PATH)}))}return z},[s.pathname,r]),e?n.jsx("div",{className:"min-h-[100svh] flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-forge-orange mx-auto mb-4"}),n.jsx("p",{className:"text-forge-gray",children:r("dashboard.layout.loading")})]})}):n.jsxs(Xv,{defaultOpen:!1,expandOnHover:!0,children:[!w&&n.jsx(Yv.Provider,{value:{prevent:l},children:n.jsxs(Zv,{collapsible:"icon",children:[n.jsx(e0,{}),n.jsx(s0,{className:"relative h-[72px] shrink-0 flex flex-col justify-center gap-0 px-4 py-0 group-data-[collapsible=icon]:px-1.5 overflow-hidden",children:n.jsxs("div",{className:"flex items-center justify-end w-full",children:[n.jsx(wR,{}),n.jsx(Qv,{className:"h-8 w-8 shrink-0 bg-gray-50 hover:bg-gray-100 rounded-lg transition-all duration-300 ease-in-out text-gray-600 hover:text-gray-800 group-data-[collapsible=icon]:hidden"})]})}),n.jsx(n0,{className:"pt-8",children:n.jsx(a0,{children:n.jsx(i0,{children:n.jsxs(o0,{children:[n.jsx(Cr,{children:n.jsx(Tr,{asChild:!0,isActive:h,tooltip:r("nav.dashboard"),children:n.jsxs(we,{to:Qt,children:[n.jsx(Dx,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.dashboard")})]})})}),n.jsx(jR,{location:s,educationOpen:k,setEducationOpen:j}),n.jsx(Cr,{children:n.jsx(Tr,{asChild:!0,isActive:b,tooltip:r("nav.communityProjects"),children:n.jsxs(we,{to:vn,children:[n.jsx(yo,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.communityProjects")})]})})}),n.jsx(Cr,{children:n.jsx(Tr,{asChild:!0,isActive:m,tooltip:r("nav.scoreboard"),children:n.jsxs(we,{to:jl,children:[n.jsx(pn,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.scoreboard")})]})})}),n.jsx(Cr,{children:n.jsx(Tr,{asChild:!0,isActive:x,tooltip:r("nav.achievements"),children:n.jsxs(we,{to:da,children:[n.jsx(gn,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.achievements")})]})})}),n.jsx(Cr,{children:n.jsx(Tr,{asChild:!0,isActive:g,tooltip:r("nav.ambassadors"),children:n.jsxs(we,{to:Nl,children:[n.jsx(Rn,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.ambassadors")})]})})}),_&&n.jsx(Cr,{children:n.jsx(Tr,{asChild:!0,isActive:f,tooltip:r("nav.admin"),children:n.jsxs(we,{to:wl,children:[n.jsx(bh,{}),n.jsx("span",{className:"transition-opacity duration-200 ease-in-out group-data-[collapsible=icon]:opacity-0",children:r("nav.admin")})]})})})]})})})}),n.jsxs(r0,{className:"p-2 space-y-3 group-data-[collapsible=icon]:space-y-2",children:[n.jsx("div",{className:"rounded-full border border-forge-cream/80 bg-white/90 px-3 py-2 shadow-sm group-data-[collapsible=icon]:hidden",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rl,{className:"h-4 w-4 shrink-0 text-forge-orange"}),n.jsx("span",{className:"shrink-0 text-sm font-semibold text-forge-dark",children:r("dashboard.sidebar.localeTitle")}),n.jsxs(Pt,{value:i,onValueChange:u,onOpenChange:c,children:[n.jsx(kt,{className:"h-8 flex-1 min-w-0",children:n.jsx(Rt,{placeholder:r("dashboard.sidebar.localePlaceholder")})}),n.jsx(St,{side:"right",align:"start",sideOffset:4,children:d.map(R=>n.jsx(Ye,{value:R.value,children:n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("img",{src:R.flag,alt:"",className:"h-4 w-5 shrink-0 object-cover rounded-sm"}),R.label]})},R.value))})]})]})}),n.jsx("div",{className:"hidden justify-center group-data-[collapsible=icon]:flex",children:n.jsxs(Pt,{value:i,onValueChange:u,onOpenChange:c,children:[n.jsxs(kt,{className:"h-10 w-10 rounded-full border border-forge-cream bg-white/90 p-0 text-forge-dark focus:ring-forge-orange justify-center [&>svg:last-child]:hidden",children:[n.jsx(Rl,{className:"h-4 w-4 text-forge-orange"}),n.jsx("span",{className:"sr-only",children:r("dashboard.sidebar.localePlaceholder")})]}),n.jsx(St,{side:"right",align:"center",sideOffset:4,children:d.map(R=>n.jsx(Ye,{value:R.value,children:n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx("img",{src:R.flag,alt:"",className:"h-4 w-5 shrink-0 object-cover rounded-sm"}),R.label]})},R.value))})]})}),n.jsx(Hu,{})]})]})}),n.jsxs(t0,{children:[n.jsxs("div",{className:"relative",children:[!w&&n.jsx(Wu,{}),n.jsx("div",{className:w?"":"pt-[30px]",children:n.jsxs("div",{className:w?"":"px-4 sm:px-6 py-6 sm:py-8 relative pb-24 md:pb-8",children:[!w&&n.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[n.jsx("div",{className:"absolute -top-6 right-6 w-32 h-32 bg-forge-cream rounded-full blur-2xl"}),n.jsx("div",{className:"absolute bottom-0 left-10 w-24 h-24 bg-forge-orange/10 rounded-full blur-2xl"})]}),n.jsx(wh,{context:{setHeaderBreadcrumb:S}})]})})]}),!w&&n.jsx(bR,{})]})]})}function kR(){const[t,e]=p.useState(""),[s,r]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,d]=p.useState(null),u=dr(),h=async f=>{if(f.preventDefault(),t!==s){d("Passwords do not match");return}d(null),i(!0),l("");try{const m=Ue(),{error:x}=await m.auth.updateUser({password:t});if(x)throw new Error(x.message||"Failed to update password");l("Password updated successfully! Redirecting to login..."),setTimeout(()=>u("/login"),3e3)}catch(m){d(m.message)}finally{i(!1)}};return n.jsxs("div",{className:"flex items-center justify-center min-h-[100svh] bg-forge-cream relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-forge-orange/5 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-40 right-20 w-48 h-48 bg-forge-orange/10 rounded-full blur-2xl"})]}),n.jsxs(de,{className:"w-full max-w-md bg-white/95 backdrop-blur-sm border border-forge-orange/20 shadow-xl relative z-10",children:[n.jsx(Be,{children:n.jsx(qe,{className:"text-forge-dark text-2xl font-bold",children:"Update Your Password"})}),n.jsx(oe,{children:n.jsx("form",{onSubmit:h,children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"password",className:"text-forge-dark font-medium",children:"New Password"}),n.jsx(ye,{id:"password",type:"password",required:!0,value:t,onChange:f=>e(f.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(ts,{htmlFor:"confirm-password",className:"text-forge-dark font-medium",children:"Confirm New Password"}),n.jsx(ye,{id:"confirm-password",type:"password",required:!0,value:s,onChange:f=>r(f.target.value),className:"border-forge-orange/20 focus:border-forge-orange focus:ring-forge-orange/20"})]}),c&&n.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:c}),o&&n.jsx("p",{className:"text-green-500 text-sm bg-green-50 p-3 rounded-lg border border-green-200",children:o}),n.jsx(te,{type:"submit",className:"w-full bg-forge-orange text-white hover:bg-forge-orange-light transition-all duration-200 shadow-lg hover:shadow-xl font-semibold py-3 rounded-xl",disabled:a,children:a?"Updating...":"Update Password"})]})})})]})]})}const SR=new Set(["a","abbr","b","blockquote","br","code","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","li","ol","p","pre","small","span","strong","sub","sup","table","tbody","td","th","thead","tr","u","ul","iframe"]),_R=new Set(["class","id","title","aria-label"]),CR={a:new Set(["href","target","rel"]),img:new Set(["src","alt","width","height","loading","referrerpolicy"]),iframe:new Set(["src","width","height","title","allow","allowfullscreen","loading","referrerpolicy","sandbox","frameborder"]),table:new Set(["cellpadding","cellspacing"]),td:new Set(["colspan","rowspan"]),th:new Set(["colspan","rowspan","scope"])},TR=new Set(["script","style","link","meta","object","embed","base","form","input","button","textarea","select","option"]);function ag(t,e){const s=t.trim();if(!s)return!1;if(e==="href"&&s.startsWith("#"))return!0;try{const a=new URL(s,typeof window<"u"?window.location.origin:"https://example.com").protocol.toLowerCase();return!!(a==="http:"||a==="https:"||e==="href"&&(a==="mailto:"||a==="tel:")||e==="src"&&a==="data:"&&s.startsWith("data:image/"))}catch{return!1}}function PR(t){try{const e=new URL(t,typeof window<"u"?window.location.origin:"https://example.com"),s=e.hostname.toLowerCase(),r=e.pathname;return!!(s==="www.youtube.com"&&r.startsWith("/embed/")||s==="youtube.com"&&r.startsWith("/embed/")||s==="player.vimeo.com"&&r.startsWith("/video/"))}catch{return!1}}function ER(t){const e=t.parentNode;if(e){for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}}function AR(t){const e=t.tagName.toLowerCase(),s=CR[e]??new Set;for(const r of Array.from(t.attributes)){const a=r.name.toLowerCase(),i=r.value;if(a.startsWith("on")){t.removeAttribute(r.name);continue}if(!(_R.has(a)||s.has(a))){t.removeAttribute(r.name);continue}if(a==="href"&&!ag(i,"href")){t.removeAttribute(r.name);continue}if(a==="src"){if(e==="iframe"){if(!PR(i)){t.remove();return}}else if(!ag(i,"src")){t.removeAttribute(r.name);continue}}}e==="a"&&t.getAttribute("href")&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer")),e==="iframe"&&t.getAttribute("src")&&(t.setAttribute("loading",t.getAttribute("loading")??"lazy"),t.setAttribute("referrerpolicy",t.getAttribute("referrerpolicy")??"strict-origin-when-cross-origin"))}function LR(t){if(!t)return"";if(typeof window>"u"||typeof DOMParser>"u")return t.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"");const s=new DOMParser().parseFromString(t,"text/html"),r=Array.from(s.body.querySelectorAll("*"));for(const a of r){const i=a.tagName.toLowerCase();if(TR.has(i)){a.remove();continue}if(!SR.has(i)){ER(a);continue}AR(a)}return s.body.innerHTML}function RR(t){return/<\/?[a-z][\s\S]*>/i.test(t)}function OR({content:t}){const e=RR(t),s="prose prose-slate max-w-none break-words overflow-x-hidden [overflow-wrap:anywhere] prose-img:max-w-full prose-img:h-auto prose-pre:overflow-x-auto prose-pre:max-w-full prose-pre:whitespace-pre-wrap sm:prose-pre:whitespace-pre prose-pre:break-words prose-code:break-words prose-table:block prose-table:max-w-full prose-table:overflow-x-auto";return e?n.jsx("div",{className:s,dangerouslySetInnerHTML:{__html:LR(t)}}):n.jsx("div",{className:s,children:n.jsx(Wx,{components:{a:({node:r,...a})=>n.jsx("a",{...a,target:"_blank",rel:"noopener noreferrer"})},children:t})})}function MR({videoUrl:t}){const[e,s]=p.useState(!0),[r,a]=p.useState(!1),i=h=>{if(!h||typeof h!="string")return null;h=h.trim();const f=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|m\.youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/youtu\.be\/([a-zA-Z0-9_-]{11})/,/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/,/m\.youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/];for(const m of f){const x=h.match(m);if(x&&x[1])return x[1]}return null},o=h=>{const f=new URLSearchParams({rel:"0",modestbranding:"1",controls:"1",showinfo:"0",fs:"1",cc_load_policy:"1",hl:"pt-BR",autoplay:"0",disablekb:"0",enablejsapi:"1",widget_referrer:window.location.origin});return`https://www.youtube.com/embed/${h}?${f.toString()}`},l=i(t);if(!l)return n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border border-red-200 rounded-lg bg-red-50",children:[n.jsx("div",{className:"text-red-600 font-medium mb-2",children:"URL de vdeo invlida"}),n.jsxs("div",{className:"text-red-500 text-sm text-center",children:["Por favor, fornea uma URL vlida do YouTube. Formatos suportados:",n.jsxs("ul",{className:"mt-2 text-xs space-y-1",children:[n.jsx("li",{children:" youtube.com/watch?v=ID_DO_VIDEO"}),n.jsx("li",{children:" youtu.be/ID_DO_VIDEO"}),n.jsx("li",{children:" youtube.com/embed/ID_DO_VIDEO"})]})]})]});const c=o(l),d=()=>{s(!1),a(!1)},u=()=>{s(!1),a(!0)};return n.jsxs("div",{className:"relative w-full",children:[n.jsxs("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:[e&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Carregando vdeo..."})]})}),r&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 rounded-lg",children:n.jsxs("div",{className:"text-center p-4",children:[n.jsx("div",{className:"text-red-600 font-medium mb-2",children:"Erro ao carregar vdeo"}),n.jsx("div",{className:"text-red-500 text-sm",children:"No foi possvel carregar o vdeo. Verifique a URL e sua conexo."}),n.jsx("button",{onClick:()=>{s(!0),a(!1);const h=document.querySelector("iframe[data-youtube-iframe]");h&&(h.src=c)},className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:"Tentar novamente"})]})}),!r&&n.jsx("iframe",{"data-youtube-iframe":!0,src:c,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full rounded-lg shadow-lg",title:"YouTube video player",onLoad:d,onError:u,loading:"lazy"})]}),n.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:"Player otimizado para experincia de aprendizado"})]})}const f0=p.forwardRef(({className:t,...e},s)=>n.jsx(qx,{className:$("grid gap-2",t),...e,ref:s}));f0.displayName=qx.displayName;const m0=p.forwardRef(({className:t,...e},s)=>n.jsx(Kx,{ref:s,className:$("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:n.jsx(kj,{className:"flex items-center justify-center",children:n.jsx(Ac,{className:"h-2.5 w-2.5 fill-current text-current"})})}));m0.displayName=Kx.displayName;function IR({quizData:t}){const[e,s]=p.useState(0),[r,a]=p.useState(null),[i,o]=p.useState(!1),[l,c]=p.useState(0),d=t[e],u=()=>{r===d.correctAnswer&&c(l+1),o(!0)},h=()=>{o(!1),a(null),e<t.length-1?s(e+1):alert(`Quiz Finished! Your score: ${l}/${t.length}`)};return d?n.jsxs(de,{className:"w-full max-w-2xl mx-auto",children:[n.jsxs(Be,{children:[n.jsx(qe,{children:"Quiz"}),n.jsxs(ls,{children:["Question ",e+1," of ",t.length]})]}),n.jsxs(oe,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:d.question}),n.jsx(f0,{onValueChange:a,value:r,children:d.options.map((f,m)=>n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(m0,{value:f,id:`option-${m}`,disabled:i}),n.jsx(ts,{htmlFor:`option-${m}`,children:f})]},m))}),!i&&n.jsx(te,{onClick:u,disabled:!r,className:"mt-6",children:"Submit Answer"}),i&&n.jsxs("div",{className:"mt-6",children:[r===d.correctAnswer?n.jsx("p",{className:"text-green-600 font-semibold",children:"Correct!"}):n.jsxs("p",{className:"text-red-600 font-semibold",children:["Incorrect. The correct answer was: ",d.correctAnswer]}),n.jsx(te,{onClick:h,className:"mt-4",children:e<t.length-1?"Next Question":"Finish Quiz"})]})]})]}):n.jsx("div",{className:"text-red-500",children:"No quiz data available."})}const ig={video:{icon:_j,color:"text-blue-500"},text:{icon:jh,color:"text-emerald-500"},quiz:{icon:Sj,color:"text-purple-500"}};function DR({lesson:t,course:e}){const{t:s}=je();if(!t)return n.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:n.jsx("p",{className:"text-gray-500",children:s("lessons.selectToBegin")})});const r=(e==null?void 0:e.modules.flatMap(d=>d.lessons))??[],a=r.findIndex(d=>d.id===t.id),i=ig[t.lesson_type]||ig.text,o=i.icon,l=t.lesson_type==="video"||t.lesson_type==="text"||t.lesson_type==="quiz"?s("lessons.types."+t.lesson_type):t.lesson_type,c=()=>{switch(t.lesson_type){case"text":return n.jsx(OR,{content:typeof t.content=="string"?t.content:""});case"video":return n.jsx(MR,{videoUrl:typeof t.content=="string"?t.content:""});case"quiz":return n.jsx(IR,{quizData:typeof t.content=="string"?JSON.parse(t.content):t.content});default:return n.jsx("div",{className:"text-red-500",children:s("lessons.unsupportedType",{type:t.lesson_type})})}};return n.jsxs("article",{className:"flex-1 flex flex-col",children:[n.jsxs("header",{className:"mb-6 sm:mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3 text-sm",children:[n.jsxs("span",{className:$("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full font-medium","bg-gray-100 dark:bg-gray-800",i.color),children:[n.jsx(o,{className:"w-3.5 h-3.5"}),l]}),n.jsx("span",{className:"text-gray-400",children:""}),n.jsx("span",{className:"text-gray-500",children:s("lessons.lessonInfo",{current:a+1,total:r.length,xp:t.xp_value})})]}),n.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white leading-tight",children:t.title})]}),n.jsx("div",{className:$("flex-1",t.lesson_type==="video"&&"-mx-4 sm:-mx-6 lg:-mx-10 xl:-mx-12"),children:n.jsx("div",{className:$(t.lesson_type!=="video"&&"bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm p-5 sm:p-8"),children:c()})})]})}const Yn={};function $R({courseTitle:t,lessonTitle:e,lessonType:s,lessonContent:r}){let a="";return typeof r=="string"?a=r:r&&(a=JSON.stringify(r)),`${`Course: ${t||""}
Lesson: ${e||""}
Type: ${s||""}`.trim()}

${a}`.slice(0,8e3)}function og(t){const e=p.useMemo(()=>$R(t),[t.courseTitle,t.lessonTitle,t.lessonType,t.lessonContent]),[s,r]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(""),[c,d]=p.useState(!1),[u,h]=p.useState(!1),f=p.useRef(null),m=Yn==null?void 0:Yn.VITE_OPENAI_API_KEY,x=(Yn==null?void 0:Yn.VITE_OPENAI_MODEL)||"gpt-4o-mini",g=async()=>{var y,w,N,S;if(!m)return null;try{const k=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({model:x,messages:[{role:"system",content:"You are an expert course assistant. Generate three concise, distinct, helpful questions based on the provided lesson context. Return ONLY a JSON array of three strings."},{role:"user",content:`Lesson context (may be truncated):

${e}`}],temperature:.7,max_tokens:256})}),j=await k.text();if(!k.ok)return console.error("AI suggest client error:",j),null;let v="";try{v=((S=(N=(w=(y=JSON.parse(j))==null?void 0:y.choices)==null?void 0:w[0])==null?void 0:N.message)==null?void 0:S.content)||""}catch{v=""}const _=v.replace(/```[a-z]*\n?/gi,"").replace(/```/g,"").trim();let E=[];const R=_.match(/\[[\s\S]*\]/);if(R)try{const z=JSON.parse(R[0]);Array.isArray(z)&&(E=z)}catch{}return E.length||(E=_.split(`
`).map(z=>z.replace(/^[-*\d.\s]+/,"").replace(/^\"|\",?$/g,"").replace(/,$/,"").trim()).filter(Boolean)),E.map(z=>z.replace(/^\"|\"$/g,"").trim()).slice(0,3)}catch(k){return console.error("AI suggest client exception:",k),null}};p.useEffect(()=>{(async()=>{h(!0),r([]);try{const w=await fetch("/api/ai-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"suggest",lessonContext:e})});if(!w.ok){console.error("AI suggest error status:",w.status,w.statusText);const S=await g();S&&r(S);return}let N=null;try{N=await w.json()}catch{console.error("AI suggest parse error (json)");return}Array.isArray(N==null?void 0:N.suggestions)&&r(N.suggestions)}catch(w){console.error("AI suggest exception:",w);const N=await g();N&&r(N)}finally{h(!1)}})()},[e]),p.useEffect(()=>{var y;(y=f.current)==null||y.scrollTo({top:f.current.scrollHeight,behavior:"smooth"})},[a]);const b=async y=>{var N,S,k;if(!y.trim())return;const w={role:"user",content:y.trim()};i(j=>[...j,w]),l(""),d(!0);try{const j=await fetch("/api/ai-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"chat",lessonContext:e,messages:[{role:"user",content:y.trim()}]})});if(!j.ok){if(m)try{const R=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({model:x,messages:[{role:"system",content:'You are "AI Instructor", a concise, friendly tutor for software and blockchain courses.'},{role:"system",content:`Lesson context: ${e}`},{role:"user",content:y.trim()}],temperature:.5,max_tokens:700})});if(R.ok){const z=await R.json().catch(()=>null),F=((k=(S=(N=z==null?void 0:z.choices)==null?void 0:N[0])==null?void 0:S.message)==null?void 0:k.content)||"";i(L=>[...L,{role:"assistant",content:F||"No reply"}]);return}}catch(R){console.error("AI chat client exception:",R)}const E=`Error: ${j.status} ${j.statusText}`;i(R=>[...R,{role:"assistant",content:E}]);return}let v=null;try{v=await j.json()}catch{v=null}const _=(v==null?void 0:v.reply)||"Sorry, I could not generate an answer.";i(E=>[...E,{role:"assistant",content:_}])}catch(j){console.error("AI chat exception:",j),i(v=>[...v,{role:"assistant",content:"There was an error contacting the AI service."}])}finally{d(!1)}};return n.jsxs(de,{className:"h-full max-h-full flex flex-col text-xs",children:[n.jsx(Be,{className:"pb-3",children:n.jsxs(qe,{className:"text-sm flex items-center gap-2",children:[n.jsx(tu,{className:"h-4 w-4 text-forge-dark"}),n.jsx("span",{children:"AI Instructor"})]})}),n.jsxs(oe,{className:"flex-1 min-h-0 flex flex-col gap-3 text-xs",children:[n.jsxs("div",{ref:f,className:"flex-1 min-h-0 overflow-y-auto rounded-md border p-3 bg-white flex flex-col gap-2",children:[u&&n.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Loading suggestions..."}),!!s.length&&!u&&n.jsx("div",{className:"grid gap-2",children:s.map((y,w)=>n.jsxs("button",{type:"button",onClick:()=>b(y),className:"w-full text-left border rounded-lg p-3 bg-white hover:bg-forge-cream transition-colors shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Suggestion"}),n.jsx("div",{className:"text-xs",children:y})]},w))}),n.jsx("div",{className:"flex-1"}),a.length===0&&n.jsx("div",{className:"text-xs text-muted-foreground",children:"Hint: Click on a suggested question or ask yours."}),a.map((y,w)=>n.jsxs("div",{className:y.role==="user"?"text-right":"text-left",children:[n.jsx("div",{className:"text-[10px] uppercase tracking-wide mb-1 text-muted-foreground",children:y.role==="user"?"Me:":"Instructor:"}),n.jsx("div",{className:"inline-block rounded-lg px-3 py-2 text-xs break-words text-left "+(y.role==="user"?"bg-forge-orange text-white max-w-[70%]":"bg-forge-cream text-forge-dark"),children:y.role==="assistant"?n.jsx(Wx,{className:"prose prose-xs max-w-none [&_p]:mb-3 [&_p:last-child]:mb-0",children:y.content}):y.content})]},w)),c&&n.jsx("div",{className:"text-xs text-muted-foreground",children:"Thinking..."})]}),n.jsxs("form",{onSubmit:y=>{y.preventDefault(),b(o)},className:"flex gap-2",children:[n.jsx(ye,{placeholder:"Ask me about this lesson...",value:o,onChange:y=>l(y.target.value)}),n.jsx(te,{type:"submit",disabled:c,children:"Send"})]})]})]})}function FR({onComplete:t}){const[e,s]=p.useState("enter");return p.useEffect(()=>{const r=setTimeout(()=>s("show"),50),a=setTimeout(()=>s("exit"),1400),i=setTimeout(()=>t(),1900);return()=>{clearTimeout(r),clearTimeout(a),clearTimeout(i)}},[t]),n.jsxs("div",{className:`
        fixed inset-0 z-50 flex flex-col items-center justify-center
        bg-gradient-to-br from-forge-cream-200 via-forge-cream-300 to-forge-cream-400
        transition-all duration-500 ease-[cubic-bezier(0.4,0,0.2,1)]
        ${e==="enter"?"opacity-0":e==="exit"?"opacity-0 scale-105":"opacity-100 scale-100"}
      `,children:[n.jsx("div",{className:`
          absolute w-96 h-96 rounded-full 
          bg-gradient-to-r from-forge-orange/20 to-orange-600/10 
          blur-3xl transition-all duration-700 ease-out
          ${e==="enter"?"scale-0 opacity-0":e==="show"?"scale-100 opacity-100":"scale-150 opacity-0"}
        `}),n.jsx("div",{className:`
          relative z-10 transition-all duration-700 ease-[cubic-bezier(0.34,1.56,0.64,1)]
          ${e==="enter"?"scale-50 opacity-0 rotate-[-8deg]":"scale-100 opacity-100 rotate-0"}
        `,children:n.jsx("img",{src:"/lovable-uploads/Forge College Logo Transparent.png",alt:"Forge College",className:"h-20 sm:h-24 md:h-28 w-auto max-w-[280px] object-contain drop-shadow-[0_0_40px_rgba(249,115,22,0.3)]",style:{imageRendering:"auto"},loading:"eager",onError:r=>{const a=r.target;a.src.includes("Forge College Logo.png")||(a.src="/lovable-uploads/Forge College Logo.png")}})}),n.jsxs("div",{className:`
          relative z-10 mt-8 text-center transition-all duration-500 ease-out
          ${e==="enter"?"opacity-0 translate-y-6":e==="show"?"opacity-100 translate-y-0":"opacity-0 translate-y-[-10px]"}
        `,style:{transitionDelay:e==="enter"?"0ms":"200ms"},children:[n.jsx("p",{className:"text-forge-dark/90 text-base sm:text-lg font-medium tracking-wider uppercase",children:"Learning Mode"}),n.jsxs("div",{className:`
            mt-3 flex items-center justify-center gap-2 text-forge-dark/60 text-xs sm:text-sm
            transition-all duration-300
            ${e==="show"?"opacity-100":"opacity-0"}
          `,style:{transitionDelay:"400ms"},children:[n.jsx("span",{children:"Focus"}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-forge-orange/60"}),n.jsx("span",{children:"Learn"}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-forge-orange/60"}),n.jsx("span",{children:"Build"})]})]}),n.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[n.jsx("div",{className:`
            w-32 h-32 rounded-full border border-forge-dark/10
            transition-all duration-1000 ease-out
            ${e==="enter"?"scale-50 opacity-0":e==="show"?"scale-[2.5] opacity-100":"scale-[3] opacity-0"}
          `}),n.jsx("div",{className:`
            absolute w-48 h-48 rounded-full border border-forge-dark/10
            transition-all duration-1200 ease-out
            ${e==="enter"?"scale-50 opacity-0":e==="show"?"scale-[2] opacity-100":"scale-[2.5] opacity-0"}
          `,style:{transitionDelay:"100ms"}})]})]})}const zR=Pj,p0=p.forwardRef(({className:t,...e},s)=>n.jsx(Cj,{ref:s,className:$("border-b",t),...e}));p0.displayName="AccordionItem";const g0=p.forwardRef(({className:t,children:e,...s},r)=>n.jsx(Tj,{className:"flex",children:n.jsxs(Gx,{ref:r,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...s,children:[e,n.jsx(vo,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));g0.displayName=Gx.displayName;const x0=p.forwardRef(({className:t,children:e,...s},r)=>n.jsx(Jx,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:n.jsx("div",{className:$("pb-4 pt-0",t),children:e})}));x0.displayName=Jx.displayName;function BR({course:t,currentLessonId:e,defaultOpenModuleId:s,onLessonClick:r,minimal:a=!1}){const{user:i}=Ct(),[o,l]=p.useState({}),c=Ue();p.useEffect(()=>{if(!i)return;(async()=>{const f=t.modules.flatMap(b=>b.lessons.map(y=>y.id)),{data:m,error:x}=await c.from("user_progress").select("lesson_id, status").eq("user_id",i.id).in("lesson_id",f);if(x){console.error("Error fetching progress:",x);return}const g={};m.forEach(b=>{g[b.lesson_id]=b.status}),f.forEach(b=>{g[b]||(g[b]="not_started")}),l(g)})()},[i,t]);const d=h=>(o[h]||"not_started")==="completed"?n.jsx(ar,{className:"h-3.5 w-3.5 text-emerald-500 flex-shrink-0"}):n.jsx(Ac,{className:"h-3.5 w-3.5 text-gray-300 flex-shrink-0"}),u=h=>{const f=h.lessons.length;return{completed:h.lessons.filter(x=>o[x.id]==="completed").length,total:f}};return n.jsxs("div",{className:$("px-3 py-2",a&&"py-0"),children:[!a&&n.jsxs("div",{className:"mb-3 px-1",children:[n.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:t.title}),t.description&&n.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:t.description})]}),n.jsx(zR,{type:"multiple",defaultValue:s?[s]:t.modules.map(h=>h.id),className:"w-full space-y-1",children:t.modules.map(h=>{const f=u(h),m=f.total>1;return n.jsxs(p0,{value:h.id,className:"border-none",children:[n.jsx(g0,{className:"py-2 px-2 hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-lg hover:no-underline",children:n.jsxs("div",{className:"flex items-center justify-between w-full pr-2 text-left",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:h.title}),m&&n.jsxs("span",{className:"text-xs text-gray-400 tabular-nums",children:[f.completed,"/",f.total]})]})}),n.jsx(x0,{className:"pb-1 pt-0",children:n.jsx("ul",{className:"space-y-0.5 pl-1",children:h.lessons.map(x=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>r(x),className:$("w-full text-left py-2 px-2 rounded-md flex items-center gap-2 transition-colors text-sm",x.id===e?"bg-forge-orange/10 text-forge-orange font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800/50"),children:[d(x.id),n.jsx("span",{className:"flex-1 truncate",children:x.title})]})},x.id))})})]},h.id)})})]})}function UR({open:t,onOpenChange:e,course:s,currentLessonId:r,defaultOpenModuleId:a,onLessonClick:i}){const o=qv(),[l,c]=p.useState(""),[d,u]=p.useState("closed"),[h,f]=p.useState(-1),m=p.useRef(null),x=p.useRef(null),g=p.useMemo(()=>s.modules.flatMap((j,v)=>j.lessons.map((_,E)=>({..._,moduleName:j.title,moduleId:j.id,globalIndex:v*100+E}))),[s]),b=p.useMemo(()=>{if(!l.trim())return null;const j=l.toLowerCase();return g.filter(v=>v.title.toLowerCase().includes(j)||v.moduleName.toLowerCase().includes(j))},[g,l]),y=b||g;p.useEffect(()=>{if(t){u("backdrop");const j=setTimeout(()=>{u("content")},50);return()=>clearTimeout(j)}else u("closed"),f(-1)},[t]),p.useEffect(()=>{f(l?0:-1)},[l]),p.useEffect(()=>{if(h>=0&&x.current){const j=x.current.querySelector(`[data-index="${h}"]`);j==null||j.scrollIntoView({block:"nearest",behavior:"smooth"})}},[h]),p.useEffect(()=>{if(!t)return;const j=v=>{var _,E;switch(v.key){case"Escape":v.preventDefault(),e(!1),c("");break;case"ArrowDown":case"j":if(v.key==="j"&&document.activeElement===m.current)break;v.preventDefault(),f(R=>R<y.length-1?R+1:0);break;case"ArrowUp":case"k":if(v.key==="k"&&document.activeElement===m.current)break;v.preventDefault(),f(R=>R>0?R-1:y.length-1);break;case"Enter":v.preventDefault(),h>=0&&y[h]&&w(y[h]);break;case"/":document.activeElement!==m.current&&(v.preventDefault(),(_=m.current)==null||_.focus());break;default:(v.metaKey||v.ctrlKey)&&v.key==="k"&&(v.preventDefault(),(E=m.current)==null||E.focus())}};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[t,e,h,y]);const w=p.useCallback(j=>{i(j),e(!1),c("")},[i,e]),N=p.useCallback(j=>{j.target===j.currentTarget&&(e(!1),c(""))},[e]);if(!t&&d==="closed")return null;const S=d!=="closed",k=d==="content";return n.jsxs("div",{className:$("fixed inset-0 z-50 flex items-start justify-center",o?"pt-0":"pt-[10vh]"),onClick:N,children:[n.jsx("div",{className:$("absolute inset-0 backdrop-blur-xl bg-black/40","transition-opacity duration-300 ease-out",S?"opacity-100":"opacity-0"),style:{transform:"translateZ(0)",willChange:"opacity"}}),n.jsx("div",{className:$("relative w-full","transition-all duration-300 ease-out",o?"h-full max-h-full":"max-w-lg mx-4 max-h-[75vh]",k?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-[0.98] -translate-y-2"),style:{transitionDelay:k?"50ms":"0ms"},onClick:j=>j.stopPropagation(),children:n.jsxs("div",{className:$("flex flex-col overflow-hidden","bg-white/90 dark:bg-gray-900/90","backdrop-blur-2xl backdrop-saturate-150","border border-white/30 dark:border-gray-700/40","shadow-2xl shadow-black/25",o?"h-full rounded-none":"rounded-2xl"),children:[n.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-200/60 dark:border-gray-700/60",children:n.jsxs("div",{className:"relative flex items-center gap-3",children:[n.jsx(Ol,{className:"absolute left-3 w-5 h-5 text-gray-400"}),n.jsx("input",{ref:m,type:"text",placeholder:"Buscar lio...",value:l,onChange:j=>c(j.target.value),className:$("w-full pl-10 pr-4 py-2.5 rounded-lg","bg-gray-100/80 dark:bg-gray-800/80","border border-gray-200/60 dark:border-gray-700/60","text-gray-900 dark:text-gray-100 placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-forge-orange/50 focus:border-forge-orange/30","transition-all duration-200"),autoFocus:!o}),n.jsx("button",{onClick:()=>{e(!1),c("")},className:$("flex-shrink-0 p-2 rounded-lg","hover:bg-gray-200/80 dark:hover:bg-gray-700/80","text-gray-500 hover:text-gray-700 dark:hover:text-gray-300","transition-colors duration-200"),children:n.jsx(bs,{className:"w-5 h-5"})})]})}),n.jsx("div",{ref:x,className:$("flex-1 overflow-y-auto overscroll-contain",o?"pb-safe":""),children:b?n.jsx("div",{className:"p-2",children:b.length===0?n.jsx("div",{className:"py-8 text-center text-gray-500",children:n.jsx("p",{className:"text-sm",children:"Nenhuma lio encontrada"})}):n.jsx("div",{className:"space-y-1",children:b.map((j,v)=>n.jsxs("button",{"data-index":v,onClick:()=>w(j),onMouseEnter:()=>f(v),className:$("w-full flex flex-col items-start p-3 rounded-xl text-left","transition-all duration-150",h===v?"bg-forge-orange/15 ring-1 ring-forge-orange/30":"hover:bg-gray-100/80 dark:hover:bg-gray-800/80",r===j.id&&"border-l-2 border-forge-orange"),children:[n.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:j.title}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:j.moduleName})]},j.id))})}):n.jsx(BR,{course:s,currentLessonId:r,defaultOpenModuleId:a,onLessonClick:w})})]})})]})}const qr=vh,VR=yh,b0=p.forwardRef(({className:t,...e},s)=>n.jsx(po,{ref:s,className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));b0.displayName=po.displayName;const ur=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(VR,{children:[n.jsx(b0,{}),n.jsxs(go,{ref:r,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(Nx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(bs,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ur.displayName=go.displayName;const hr=({className:t,...e})=>n.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});hr.displayName="DialogHeader";const fr=({className:t,...e})=>n.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});fr.displayName="DialogFooter";const mr=p.forwardRef(({className:t,...e},s)=>n.jsx(Ea,{ref:s,className:$("text-lg font-semibold leading-none tracking-tight",t),...e}));mr.displayName=Ea.displayName;const Kr=p.forwardRef(({className:t,...e},s)=>n.jsx(xo,{ref:s,className:$("text-sm text-muted-foreground",t),...e}));Kr.displayName=xo.displayName;const HR=It("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y0=p.forwardRef(({className:t,variant:e,...s},r)=>n.jsx("div",{ref:r,role:"alert",className:$(HR({variant:e}),t),...s}));y0.displayName="Alert";const WR=p.forwardRef(({className:t,...e},s)=>n.jsx("h5",{ref:s,className:$("mb-1 font-medium leading-none tracking-tight",t),...e}));WR.displayName="AlertTitle";const v0=p.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:$("text-sm [&_p]:leading-relaxed",t),...e}));v0.displayName="AlertDescription";const qR=It("inline-flex items-center gap-1 rounded-full border font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-white hover:bg-success/80",warning:"border-transparent bg-warning text-white hover:bg-warning/80",info:"border-transparent bg-info text-white hover:bg-info/80",error:"border-transparent bg-error text-white hover:bg-error/80",brand:"border-transparent bg-forge-orange text-white hover:bg-forge-orange-500","brand-subtle":"border-forge-orange/20 bg-forge-orange-50 text-forge-orange-600 hover:bg-forge-orange-100","coming-soon":"border-transparent bg-forge-cream-200 text-forge-dark-600 hover:bg-forge-cream-300",enrolled:"border-transparent bg-forge-orange-100 text-forge-orange-700 hover:bg-forge-orange-200 ring-1 ring-forge-orange/20",available:"border-transparent bg-gradient-soft-yellow text-forge-dark hover:opacity-90"},size:{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"},shape:{rounded:"rounded-full",square:"rounded-md"}},defaultVariants:{variant:"default",size:"md",shape:"rounded"}});function xe({className:t,variant:e,size:s,shape:r,icon:a,iconPosition:i="left",children:o,...l}){return n.jsxs("div",{className:$(qR({variant:e,size:s,shape:r}),t),...l,children:[a&&i==="left"&&n.jsx(a,{className:"h-3 w-3"}),o,a&&i==="right"&&n.jsx(a,{className:"h-3 w-3"})]})}const lg=t=>(t??"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"");function KR({moduleTitle:t,projects:e,submissions:s,submittingProjectId:r,onSubmit:a,communityLink:i}){const{t:o}=je(),[l,c]=p.useState(null),[d,u]=p.useState(""),[h,f]=p.useState(null),m=p.useMemo(()=>e.find(g=>g.id===l)??null,[l,e]);p.useEffect(()=>{if(!m){u(""),f(null);return}const g=s[m.id];u((g==null?void 0:g.repository_url)??""),f(null)},[m,s]);const x=async g=>{if(g.preventDefault(),!!m){if(!d.trim()){f(o("projects.errors.required"));return}try{if(!new URL(d.trim()).hostname.includes("github.com")){f(o("projects.errors.githubOnly"));return}}catch(b){console.error("Invalid repository url",b),f(o("projects.errors.invalidUrl"));return}f(null);try{await a(m.id,d.trim()),c(null)}catch(b){console.error("Project submission failed",b),f(o("projects.errors.submitFailed"))}}};return e.length===0?n.jsx(de,{className:"border border-dashed border-forge-cream/70 bg-white/80",children:n.jsxs(oe,{className:"flex items-center justify-between gap-3 p-5 text-sm text-forge-gray",children:[n.jsx("span",{children:o("projects.module.noProjects")}),n.jsx(te,{asChild:!0,variant:"outline",size:"sm",children:n.jsxs(we,{to:i,children:[o("projects.module.communityLink"),n.jsx(Yx,{className:"ml-2 h-4 w-4"})]})})]})}):n.jsxs(de,{className:"border border-forge-cream/70 bg-white/90",children:[n.jsxs(Be,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsxs(qe,{className:"flex items-center gap-2 text-forge-dark",children:[n.jsx(yo,{className:"h-5 w-5 text-forge-orange"}),o("projects.module.title",{module:t})]}),n.jsx("p",{className:"text-sm text-forge-gray",children:o("projects.module.subtitle")})]}),n.jsx(te,{asChild:!0,variant:"outline",size:"sm",children:n.jsxs(we,{to:i,children:[o("projects.module.communityLink"),n.jsx(Ej,{className:"ml-2 h-4 w-4"})]})})]}),n.jsx(oe,{className:"space-y-4",children:e.map(g=>{const b=s[g.id];return n.jsx("div",{className:"rounded-lg border border-forge-cream/60 bg-white/80 p-4 shadow-sm",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"rounded-full bg-forge-orange/10 px-2 py-0.5 text-xs font-medium text-forge-orange",children:o("projects.module.projectOrder",{order:g.order})}),n.jsx("h3",{className:"text-lg font-semibold text-forge-dark",children:g.title}),typeof g.xp_value=="number"&&n.jsx(xe,{variant:"secondary",className:"bg-forge-cream text-forge-dark",children:o("projects.module.xpValue",{xp:g.xp_value})})]}),g.description&&n.jsx("div",{className:"prose prose-sm max-w-none text-forge-gray",dangerouslySetInnerHTML:{__html:lg(g.description)}})]}),n.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[n.jsx(te,{onClick:()=>c(g.id),children:o(b?"projects.module.updateSubmission":"projects.module.startProject")}),b&&n.jsxs("div",{className:"text-xs text-forge-gray/80",children:[o("projects.module.yourSubmission")," ",n.jsx("a",{href:b.repository_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-forge-orange hover:underline",children:b.repository_url})]})]})]})},g.id)})}),n.jsx(qr,{open:!!m,onOpenChange:g=>!g&&c(null),children:n.jsxs(ur,{className:"max-w-2xl",children:[n.jsxs(hr,{children:[n.jsx(mr,{children:m?o("projects.module.dialog.title",{project:m.title}):""}),n.jsx(Kr,{children:o("projects.module.dialog.subtitle")})]}),m&&n.jsxs("form",{className:"space-y-5",onSubmit:x,children:[m.description&&n.jsx("div",{className:"max-h-64 overflow-y-auto rounded-md border border-forge-cream/60 bg-forge-cream/20 p-4 text-sm text-forge-dark",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:lg(m.description)}})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-forge-dark",htmlFor:"repository-url",children:o("projects.module.dialog.repositoryLabel")}),n.jsx(ye,{id:"repository-url",value:d,onChange:g=>u(g.target.value),placeholder:o("projects.module.dialog.repositoryPlaceholder")}),n.jsx("p",{className:"text-xs text-forge-gray/80",children:o("projects.module.dialog.repositoryHelp")})]}),h&&n.jsx(y0,{variant:"destructive",children:n.jsx(v0,{children:h})}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>c(null),children:o("common.buttons.cancel")}),n.jsx(te,{type:"submit",disabled:r===m.id,children:r===m.id?o("projects.module.dialog.submitting"):o("projects.module.dialog.submit")})]})]})]})})]})}function GR(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const w0=H.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Lo=()=>{const t=H.useContext(w0);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};GR(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function JR(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function YR(){return xf(/^Mac/)}function XR(){return xf(/^iPhone/)}function cg(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ZR(){return xf(/^iPad/)||YR()&&navigator.maxTouchPoints>1}function j0(){return XR()||ZR()}function xf(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const QR=24,eO=typeof window<"u"?p.useLayoutEffect:p.useEffect;function dg(...t){return(...e)=>{for(let s of t)typeof s=="function"&&s(...e)}}const Id=typeof document<"u"&&window.visualViewport;function ug(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function N0(t){for(ug(t)&&(t=t.parentElement);t&&!ug(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const tO=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Xo=0,Dd;function sO(t={}){let{isDisabled:e}=t;eO(()=>{if(!e)return Xo++,Xo===1&&j0()&&(Dd=rO()),()=>{Xo--,Xo===0&&(Dd==null||Dd())}},[e])}function rO(){let t,e=0,s=h=>{t=N0(h.target),!(t===document.documentElement&&t===document.body)&&(e=h.changedTouches[0].pageY)},r=h=>{if(!t||t===document.documentElement||t===document.body){h.preventDefault();return}let f=h.changedTouches[0].pageY,m=t.scrollTop,x=t.scrollHeight-t.clientHeight;x!==0&&((m<=0&&f>e||m>=x&&f<e)&&h.preventDefault(),e=f)},a=h=>{let f=h.target;qu(f)&&f!==document.activeElement&&(h.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},i=h=>{let f=h.target;qu(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",Id&&(Id.height<window.innerHeight?requestAnimationFrame(()=>{hg(f)}):Id.addEventListener("resize",()=>hg(f),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,d=dg(nO(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let u=dg(Xa(document,"touchstart",s,{passive:!1,capture:!0}),Xa(document,"touchmove",r,{passive:!1,capture:!0}),Xa(document,"touchend",a,{passive:!1,capture:!0}),Xa(document,"focus",i,!0),Xa(window,"scroll",o));return()=>{d(),u(),window.scrollTo(l,c)}}function nO(t,e,s){let r=t.style[e];return t.style[e]=s,()=>{t.style[e]=r}}function Xa(t,e,s,r){return t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}}function hg(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let s=N0(t);if(s!==document.documentElement&&s!==document.body&&s!==t){let r=s.getBoundingClientRect().top,a=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;const o=s.getBoundingClientRect().bottom+QR;i>o&&(s.scrollTop+=a-r)}t=s.parentElement}}function qu(t){return t instanceof HTMLInputElement&&!tO.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function aO(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function iO(...t){return e=>t.forEach(s=>aO(s,e))}function k0(...t){return p.useCallback(iO(...t),t)}const S0=new WeakMap;function jt(t,e,s=!1){if(!t||!(t instanceof HTMLElement))return;let r={};Object.entries(e).forEach(([a,i])=>{if(a.startsWith("--")){t.style.setProperty(a,i);return}r[a]=t.style[a],t.style[a]=i}),!s&&S0.set(t,r)}function oO(t,e){if(!t||!(t instanceof HTMLElement))return;let s=S0.get(t);s&&(t.style[e]=s[e])}const pt=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Zo(t,e){if(!t)return null;const s=window.getComputedStyle(t),r=s.transform||s.webkitTransform||s.mozTransform;let a=r.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[pt(e)?13:12]):(a=r.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[pt(e)?5:4]):null)}function lO(t){return 8*(Math.log(t+1)-2)}function $d(t,e){if(!t)return()=>{};const s=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=s}}function cO(...t){return(...e)=>{for(const s of t)typeof s=="function"&&s(...e)}}const ot={DURATION:.5,EASE:[.32,.72,0,1]},_0=.4,dO=.25,uO=100,C0=8,nn=16,Ku=26,Fd="vaul-dragging";function T0(t){const e=H.useRef(t);return H.useEffect(()=>{e.current=t}),H.useMemo(()=>(...s)=>e.current==null?void 0:e.current.call(e,...s),[])}function hO({defaultProp:t,onChange:e}){const s=H.useState(t),[r]=s,a=H.useRef(r),i=T0(e);return H.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),s}function P0({prop:t,defaultProp:e,onChange:s=()=>{}}){const[r,a]=hO({defaultProp:e,onChange:s}),i=t!==void 0,o=i?t:r,l=T0(s),c=H.useCallback(d=>{if(i){const h=typeof d=="function"?d(t):d;h!==t&&l(h)}else a(d)},[i,t,a,l]);return[o,c]}function fO({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:s,drawerRef:r,overlayRef:a,fadeFromIndex:i,onSnapPointChange:o,direction:l="bottom",container:c,snapToSequentialPoint:d}){const[u,h]=P0({prop:t,defaultProp:s==null?void 0:s[0],onChange:e}),[f,m]=H.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);H.useEffect(()=>{function v(){m({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const x=H.useMemo(()=>u===(s==null?void 0:s[s.length-1])||null,[s,u]),g=H.useMemo(()=>{var v;return(v=s==null?void 0:s.findIndex(_=>_===u))!=null?v:null},[s,u]),b=s&&s.length>0&&(i||i===0)&&!Number.isNaN(i)&&s[i]===u||!s,y=H.useMemo(()=>{const v=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var _;return(_=s==null?void 0:s.map(E=>{const R=typeof E=="string";let z=0;if(R&&(z=parseInt(E,10)),pt(l)){const L=R?z:f?E*v.height:0;return f?l==="bottom"?v.height-L:-v.height+L:L}const F=R?z:f?E*v.width:0;return f?l==="right"?v.width-F:-v.width+F:F}))!=null?_:[]},[s,f,c]),w=H.useMemo(()=>g!==null?y==null?void 0:y[g]:null,[y,g]),N=H.useCallback(v=>{var _;const E=(_=y==null?void 0:y.findIndex(R=>R===v))!=null?_:null;o(E),jt(r.current,{transition:`transform ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`,transform:pt(l)?`translate3d(0, ${v}px, 0)`:`translate3d(${v}px, 0, 0)`}),y&&E!==y.length-1&&i!==void 0&&E!==i&&E<i?jt(a.current,{transition:`opacity ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`,opacity:"0"}):jt(a.current,{transition:`opacity ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`,opacity:"1"}),h(s==null?void 0:s[Math.max(E,0)])},[r.current,s,y,i,a,h]);H.useEffect(()=>{if(u||t){var v;const _=(v=s==null?void 0:s.findIndex(E=>E===t||E===u))!=null?v:-1;y&&_!==-1&&typeof y[_]=="number"&&N(y[_])}},[u,t,s,y,N]);function S({draggedDistance:v,closeDrawer:_,velocity:E,dismissible:R}){if(i===void 0)return;const z=l==="bottom"||l==="right"?(w??0)-v:(w??0)+v,F=g===i-1,L=g===0,U=v>0;if(F&&jt(a.current,{transition:`opacity ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`}),!d&&E>2&&!U){R?_():N(y[0]);return}if(!d&&E>2&&U&&y&&s){N(y[s.length-1]);return}const J=y==null?void 0:y.reduce((I,O)=>typeof I!="number"||typeof O!="number"?I:Math.abs(O-z)<Math.abs(I-z)?O:I),Y=pt(l)?window.innerHeight:window.innerWidth;if(E>_0&&Math.abs(v)<Y*.4){const I=U?1:-1;if(I>0&&x&&s){N(y[s.length-1]);return}if(L&&I<0&&R&&_(),g===null)return;N(y[g+I]);return}N(J)}function k({draggedDistance:v}){if(w===null)return;const _=l==="bottom"||l==="right"?w-v:w+v;(l==="bottom"||l==="right")&&_<y[y.length-1]||(l==="top"||l==="left")&&_>y[y.length-1]||jt(r.current,{transform:pt(l)?`translate3d(0, ${_}px, 0)`:`translate3d(${_}px, 0, 0)`})}function j(v,_){if(!s||typeof g!="number"||!y||i===void 0)return null;const E=g===i-1;if(g>=i&&_)return 0;if(E&&!_)return 1;if(!b&&!E)return null;const z=E?g+1:g-1,F=E?y[z]-y[z-1]:y[z+1]-y[z],L=v/Math.abs(F);return E?1-L:L}return{isLastSnapPoint:x,activeSnapPoint:u,shouldFade:b,getPercentageDragged:j,setActiveSnapPoint:h,activeSnapPointIndex:g,onRelease:S,onDrag:k,snapPointsOffset:y}}const mO=()=>()=>{};function pO(){const{direction:t,isOpen:e,shouldScaleBackground:s,setBackgroundColorOnScale:r,noBodyStyles:a}=Lo(),i=H.useRef(null),o=p.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-Ku)/window.innerWidth}H.useEffect(()=>{if(e&&s){i.current&&clearTimeout(i.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;cO(r&&!a?$d(document.body,{background:"black"}):mO,$d(c,{transformOrigin:pt(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ot.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ot.EASE.join(",")})`}));const d=$d(c,{borderRadius:`${C0}px`,overflow:"hidden",...pt(t)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),i.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},ot.DURATION*1e3)}}},[e,s,o])}let Za=null;function gO({isOpen:t,modal:e,nested:s,hasBeenOpened:r,preventScrollRestoration:a,noBodyStyles:i}){const[o,l]=H.useState(()=>typeof window<"u"?window.location.href:""),c=H.useRef(0),d=H.useCallback(()=>{if(cg()&&Za===null&&t&&!i){Za={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const m=f-window.innerHeight;m&&c.current>=f&&(document.body.style.top=`${-(c.current+m)}px`)}),300)}},[t]),u=H.useCallback(()=>{if(cg()&&Za!==null&&!i){const h=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Za),window.requestAnimationFrame(()=>{if(a&&o!==window.location.href){l(window.location.href);return}window.scrollTo(f,h)}),Za=null}},[o]);return H.useEffect(()=>{function h(){c.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),H.useEffect(()=>{if(e)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||u()}},[e,u]),H.useEffect(()=>{s||!r||(t?(!window.matchMedia("(display-mode: standalone)").matches&&d(),e||window.setTimeout(()=>{u()},500)):u())},[t,r,o,e,s,d,u]),{restorePositionSetting:u}}function xO({open:t,onOpenChange:e,children:s,onDrag:r,onRelease:a,snapPoints:i,shouldScaleBackground:o=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=dO,scrollLockTimeout:d=uO,dismissible:u=!0,handleOnly:h=!1,fadeFromIndex:f=i&&i.length-1,activeSnapPoint:m,setActiveSnapPoint:x,fixed:g,modal:b=!0,onClose:y,nested:w,noBodyStyles:N=!1,direction:S="bottom",defaultOpen:k=!1,disablePreventScroll:j=!0,snapToSequentialPoint:v=!1,preventScrollRestoration:_=!1,repositionInputs:E=!0,onAnimationEnd:R,container:z,autoFocus:F=!1}){var L,U;const[J=!1,Y]=P0({defaultProp:k,prop:t,onChange:me=>{e==null||e(me),!me&&!w&&rs(),setTimeout(()=>{R==null||R(me)},ot.DURATION*1e3),me&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),me||(document.body.style.pointerEvents="auto")}}),[I,O]=H.useState(!1),[D,W]=H.useState(!1),[C,V]=H.useState(!1),P=H.useRef(null),B=H.useRef(null),T=H.useRef(null),q=H.useRef(null),G=H.useRef(null),A=H.useRef(!1),K=H.useRef(null),ne=H.useRef(0),le=H.useRef(!1),ee=H.useRef(!k),re=H.useRef(0),ae=H.useRef(null),Fe=H.useRef(((L=ae.current)==null?void 0:L.getBoundingClientRect().height)||0),M=H.useRef(((U=ae.current)==null?void 0:U.getBoundingClientRect().width)||0),X=H.useRef(0),fe=H.useCallback(me=>{i&&me===zt.length-1&&(B.current=new Date)},[]),{activeSnapPoint:Se,activeSnapPointIndex:Te,setActiveSnapPoint:qt,onRelease:Os,snapPointsOffset:zt,onDrag:zn,shouldFade:ze,getPercentageDragged:Pe}=fO({snapPoints:i,activeSnapPointProp:m,setActiveSnapPointProp:x,drawerRef:ae,fadeFromIndex:f,overlayRef:P,onSnapPointChange:fe,direction:S,container:z,snapToSequentialPoint:v});sO({isDisabled:!J||D||!b||C||!I||!E||!j});const{restorePositionSetting:rs}=gO({isOpen:J,modal:b,nested:w??!1,hasBeenOpened:I,preventScrollRestoration:_,noBodyStyles:N});function Gs(){return(window.innerWidth-Ku)/window.innerWidth}function Bn(me){var He,Je;!u&&!i||ae.current&&!ae.current.contains(me.target)||(Fe.current=((He=ae.current)==null?void 0:He.getBoundingClientRect().height)||0,M.current=((Je=ae.current)==null?void 0:Je.getBoundingClientRect().width)||0,W(!0),T.current=new Date,j0()&&window.addEventListener("touchend",()=>A.current=!1,{once:!0}),me.target.setPointerCapture(me.pointerId),ne.current=pt(S)?me.pageY:me.pageX)}function Js(me,He){var Je;let Ie=me;const Ke=(Je=window.getSelection())==null?void 0:Je.toString(),Dt=ae.current?Zo(ae.current,S):null,he=new Date;if(Ie.tagName==="SELECT"||Ie.hasAttribute("data-vaul-no-drag")||Ie.closest("[data-vaul-no-drag]"))return!1;if(S==="right"||S==="left")return!0;if(B.current&&he.getTime()-B.current.getTime()<500)return!1;if(Dt!==null&&(S==="bottom"?Dt>0:Dt<0))return!0;if(Ke&&Ke.length>0)return!1;if(G.current&&he.getTime()-G.current.getTime()<d&&Dt===0||He)return G.current=he,!1;for(;Ie;){if(Ie.scrollHeight>Ie.clientHeight){if(Ie.scrollTop!==0)return G.current=new Date,!1;if(Ie.getAttribute("role")==="dialog")return!0}Ie=Ie.parentNode}return!0}function rd(me){if(ae.current&&D){const He=S==="bottom"||S==="right"?1:-1,Je=(ne.current-(pt(S)?me.pageY:me.pageX))*He,Ie=Je>0,Ke=i&&!u&&!Ie;if(Ke&&Te===0)return;const Dt=Math.abs(Je),he=document.querySelector("[data-vaul-drawer-wrapper]"),Re=S==="bottom"||S==="top"?Fe.current:M.current;let De=Dt/Re;const yt=Pe(Dt,Ie);if(yt!==null&&(De=yt),Ke&&De>=1||!A.current&&!Js(me.target,Ie))return;if(ae.current.classList.add(Fd),A.current=!0,jt(ae.current,{transition:"none"}),jt(P.current,{transition:"none"}),i&&zn({draggedDistance:Je}),Ie&&!i){const vt=lO(Je),ds=Math.min(vt*-1,0)*He;jt(ae.current,{transform:pt(S)?`translate3d(0, ${ds}px, 0)`:`translate3d(${ds}px, 0, 0)`});return}const mt=1-De;if((ze||f&&Te===f-1)&&(r==null||r(me,De),jt(P.current,{opacity:`${mt}`,transition:"none"},!0)),he&&P.current&&o){const vt=Math.min(Gs()+De*(1-Gs()),1),ds=8-De*8,Kt=Math.max(0,14-De*14);jt(he,{borderRadius:`${ds}px`,transform:pt(S)?`scale(${vt}) translate3d(0, ${Kt}px, 0)`:`scale(${vt}) translate3d(${Kt}px, 0, 0)`,transition:"none"},!0)}if(!i){const vt=Dt*He;jt(ae.current,{transform:pt(S)?`translate3d(0, ${vt}px, 0)`:`translate3d(${vt}px, 0, 0)`})}}}H.useEffect(()=>{window.requestAnimationFrame(()=>{ee.current=!0})},[]),H.useEffect(()=>{var me;function He(){if(!ae.current||!E)return;const Je=document.activeElement;if(qu(Je)||le.current){var Ie;const Ke=((Ie=window.visualViewport)==null?void 0:Ie.height)||0,Dt=window.innerHeight;let he=Dt-Ke;const Re=ae.current.getBoundingClientRect().height||0,De=Re>Dt*.8;X.current||(X.current=Re);const yt=ae.current.getBoundingClientRect().top;if(Math.abs(re.current-he)>60&&(le.current=!le.current),i&&i.length>0&&zt&&Te){const mt=zt[Te]||0;he+=mt}if(re.current=he,Re>Ke||le.current){const mt=ae.current.getBoundingClientRect().height;let vt=mt;mt>Ke&&(vt=Ke-(De?yt:Ku)),g?ae.current.style.height=`${mt-Math.max(he,0)}px`:ae.current.style.height=`${Math.max(vt,Ke-yt)}px`}else JR()||(ae.current.style.height=`${X.current}px`);i&&i.length>0&&!le.current?ae.current.style.bottom="0px":ae.current.style.bottom=`${Math.max(he,0)}px`}}return(me=window.visualViewport)==null||me.addEventListener("resize",He),()=>{var Je;return(Je=window.visualViewport)==null?void 0:Je.removeEventListener("resize",He)}},[Te,i,zt]);function gr(me){xr(),y==null||y(),me||Y(!1),setTimeout(()=>{i&&qt(i[0])},ot.DURATION*1e3)}function Un(){if(!ae.current)return;const me=document.querySelector("[data-vaul-drawer-wrapper]"),He=Zo(ae.current,S);jt(ae.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`}),jt(P.current,{transition:`opacity ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`,opacity:"1"}),o&&He&&He>0&&J&&jt(me,{borderRadius:`${C0}px`,overflow:"hidden",...pt(S)?{transform:`scale(${Gs()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Gs()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ot.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ot.EASE.join(",")})`},!0)}function xr(){!D||!ae.current||(ae.current.classList.remove(Fd),A.current=!1,W(!1),q.current=new Date)}function Io(me){if(!D||!ae.current)return;ae.current.classList.remove(Fd),A.current=!1,W(!1),q.current=new Date;const He=Zo(ae.current,S);if(!me||!Js(me.target,!1)||!He||Number.isNaN(He)||T.current===null)return;const Je=q.current.getTime()-T.current.getTime(),Ie=ne.current-(pt(S)?me.pageY:me.pageX),Ke=Math.abs(Ie)/Je;if(Ke>.05&&(V(!0),setTimeout(()=>{V(!1)},200)),i){Os({draggedDistance:Ie*(S==="bottom"||S==="right"?1:-1),closeDrawer:gr,velocity:Ke,dismissible:u}),a==null||a(me,!0);return}if(S==="bottom"||S==="right"?Ie>0:Ie<0){Un(),a==null||a(me,!0);return}if(Ke>_0){gr(),a==null||a(me,!1);return}var Dt;const he=Math.min((Dt=ae.current.getBoundingClientRect().height)!=null?Dt:0,window.innerHeight);var Re;const De=Math.min((Re=ae.current.getBoundingClientRect().width)!=null?Re:0,window.innerWidth),yt=S==="left"||S==="right";if(Math.abs(He)>=(yt?De:he)*c){gr(),a==null||a(me,!1);return}a==null||a(me,!0),Un()}H.useEffect(()=>(J&&(jt(document.documentElement,{scrollBehavior:"auto"}),B.current=new Date),()=>{oO(document.documentElement,"scrollBehavior")}),[J]);function br(me){const He=me?(window.innerWidth-nn)/window.innerWidth:1,Je=me?-nn:0;K.current&&window.clearTimeout(K.current),jt(ae.current,{transition:`transform ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`,transform:pt(S)?`scale(${He}) translate3d(0, ${Je}px, 0)`:`scale(${He}) translate3d(${Je}px, 0, 0)`}),!me&&ae.current&&(K.current=setTimeout(()=>{const Ie=Zo(ae.current,S);jt(ae.current,{transition:"none",transform:pt(S)?`translate3d(0, ${Ie}px, 0)`:`translate3d(${Ie}px, 0, 0)`})},500))}function nd(me,He){if(He<0)return;const Je=(window.innerWidth-nn)/window.innerWidth,Ie=Je+He*(1-Je),Ke=-nn+He*nn;jt(ae.current,{transform:pt(S)?`scale(${Ie}) translate3d(0, ${Ke}px, 0)`:`scale(${Ie}) translate3d(${Ke}px, 0, 0)`,transition:"none"})}function ad(me,He){const Je=pt(S)?window.innerHeight:window.innerWidth,Ie=He?(Je-nn)/Je:1,Ke=He?-nn:0;He&&jt(ae.current,{transition:`transform ${ot.DURATION}s cubic-bezier(${ot.EASE.join(",")})`,transform:pt(S)?`scale(${Ie}) translate3d(0, ${Ke}px, 0)`:`scale(${Ie}) translate3d(${Ke}px, 0, 0)`})}return H.useEffect(()=>{b||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[b]),H.createElement(vh,{defaultOpen:k,onOpenChange:me=>{!u&&!me||(me?O(!0):gr(!0),Y(me))},open:J},H.createElement(w0.Provider,{value:{activeSnapPoint:Se,snapPoints:i,setActiveSnapPoint:qt,drawerRef:ae,overlayRef:P,onOpenChange:e,onPress:Bn,onRelease:Io,onDrag:rd,dismissible:u,shouldAnimate:ee,handleOnly:h,isOpen:J,isDragging:D,shouldFade:ze,closeDrawer:gr,onNestedDrag:nd,onNestedOpenChange:br,onNestedRelease:ad,keyboardIsOpen:le,modal:b,snapPointsOffset:zt,activeSnapPointIndex:Te,direction:S,shouldScaleBackground:o,setBackgroundColorOnScale:l,noBodyStyles:N,container:z,autoFocus:F}},s))}const E0=H.forwardRef(function({...t},e){const{overlayRef:s,snapPoints:r,onRelease:a,shouldFade:i,isOpen:o,modal:l,shouldAnimate:c}=Lo(),d=k0(e,s),u=r&&r.length>0;if(!l)return null;const h=H.useCallback(f=>a(f),[a]);return H.createElement(po,{onMouseUp:h,ref:d,"data-vaul-overlay":"","data-vaul-snap-points":o&&u?"true":"false","data-vaul-snap-points-overlay":o&&i?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...t})});E0.displayName="Drawer.Overlay";const A0=H.forwardRef(function({onPointerDownOutside:t,style:e,onOpenAutoFocus:s,...r},a){const{drawerRef:i,onPress:o,onRelease:l,onDrag:c,keyboardIsOpen:d,snapPointsOffset:u,activeSnapPointIndex:h,modal:f,isOpen:m,direction:x,snapPoints:g,container:b,handleOnly:y,shouldAnimate:w,autoFocus:N}=Lo(),[S,k]=H.useState(!1),j=k0(a,i),v=H.useRef(null),_=H.useRef(null),E=H.useRef(!1),R=g&&g.length>0;pO();const z=(L,U,J=0)=>{if(E.current)return!0;const Y=Math.abs(L.y),I=Math.abs(L.x),O=I>Y,D=["bottom","right"].includes(U)?1:-1;if(U==="left"||U==="right"){if(!(L.x*D<0)&&I>=0&&I<=J)return O}else if(!(L.y*D<0)&&Y>=0&&Y<=J)return!O;return E.current=!0,!0};H.useEffect(()=>{R&&window.requestAnimationFrame(()=>{k(!0)})},[]);function F(L){v.current=null,E.current=!1,l(L)}return H.createElement(go,{"data-vaul-drawer-direction":x,"data-vaul-drawer":"","data-vaul-delayed-snap-points":S?"true":"false","data-vaul-snap-points":m&&R?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":w!=null&&w.current?"true":"false",...r,ref:j,style:u&&u.length>0?{"--snap-point-height":`${u[h??0]}px`,...e}:e,onPointerDown:L=>{y||(r.onPointerDown==null||r.onPointerDown.call(r,L),v.current={x:L.pageX,y:L.pageY},o(L))},onOpenAutoFocus:L=>{s==null||s(L),N||L.preventDefault()},onPointerDownOutside:L=>{if(t==null||t(L),!f||L.defaultPrevented){L.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:L=>{if(!f){L.preventDefault();return}},onPointerMove:L=>{if(_.current=L,y||(r.onPointerMove==null||r.onPointerMove.call(r,L),!v.current))return;const U=L.pageY-v.current.y,J=L.pageX-v.current.x,Y=L.pointerType==="touch"?10:2;z({x:J,y:U},x,Y)?c(L):(Math.abs(J)>Y||Math.abs(U)>Y)&&(v.current=null)},onPointerUp:L=>{r.onPointerUp==null||r.onPointerUp.call(r,L),v.current=null,E.current=!1,l(L)},onPointerOut:L=>{r.onPointerOut==null||r.onPointerOut.call(r,L),F(_.current)},onContextMenu:L=>{r.onContextMenu==null||r.onContextMenu.call(r,L),_.current&&F(_.current)}})});A0.displayName="Drawer.Content";const bO=250,yO=120,vO=H.forwardRef(function({preventCycle:t=!1,children:e,...s},r){const{closeDrawer:a,isDragging:i,snapPoints:o,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:d,handleOnly:u,isOpen:h,onPress:f,onDrag:m}=Lo(),x=H.useRef(null),g=H.useRef(!1);function b(){if(g.current){N();return}window.setTimeout(()=>{y()},yO)}function y(){if(i||t||g.current){N();return}if(N(),!o||o.length===0){d||a();return}if(l===o[o.length-1]&&d){a();return}const k=o.findIndex(v=>v===l);if(k===-1)return;const j=o[k+1];c(j)}function w(){x.current=window.setTimeout(()=>{g.current=!0},bO)}function N(){x.current&&window.clearTimeout(x.current),g.current=!1}return H.createElement("div",{onClick:b,onPointerCancel:N,onPointerDown:S=>{u&&f(S),w()},onPointerMove:S=>{u&&m(S)},ref:r,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},H.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},e))});vO.displayName="Drawer.Handle";function wO(t){const e=Lo(),{container:s=e.container,...r}=t;return H.createElement(yh,{container:s,...r})}const pr={Root:xO,Content:A0,Overlay:E0,Portal:wO,Title:Ea,Description:xo},L0=({shouldScaleBackground:t=!0,...e})=>n.jsx(pr.Root,{shouldScaleBackground:t,...e});L0.displayName="Drawer";const jO=pr.Portal,R0=p.forwardRef(({className:t,...e},s)=>n.jsx(pr.Overlay,{ref:s,className:$("fixed inset-0 z-50 bg-black/80",t),...e}));R0.displayName=pr.Overlay.displayName;const O0=p.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(jO,{children:[n.jsx(R0,{}),n.jsxs(pr.Content,{ref:r,className:$("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...s,children:[n.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),e]})]}));O0.displayName="DrawerContent";const M0=({className:t,...e})=>n.jsx("div",{className:$("grid gap-1.5 p-4 text-center sm:text-left",t),...e});M0.displayName="DrawerHeader";const I0=p.forwardRef(({className:t,...e},s)=>n.jsx(pr.Title,{ref:s,className:$("text-lg font-semibold leading-none tracking-tight",t),...e}));I0.displayName=pr.Title.displayName;const NO=p.forwardRef(({className:t,...e},s)=>n.jsx(pr.Description,{ref:s,className:$("text-sm text-muted-foreground",t),...e}));NO.displayName=pr.Description.displayName;function kO(){var G;const{courseId:t}=Rc(),[e,s]=p.useState(null),[r]=Aj(),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(!0),[u,h]=p.useState(!1),[f,m]=p.useState(!1),[x,g]=p.useState(!1),b=Ue(),y=Ht(),{setHeaderBreadcrumb:w}=Lj(),{user:N}=Ct(),{t:S}=je(),k=r.get("lessonId"),j=r.get("moduleId"),{data:v,isLoading:_}=$e({queryKey:["courseView",t],enabled:!!t,queryFn:async()=>{const{data:A,error:K}=await b.from("courses").select(`
          id, title, description,
          modules:modules(id, title, order,
            lessons:lessons(id, title, content, lesson_type, order, xp_value),
            projects:module_projects(id, title, description, xp_value, is_active, created_at)
          )
        `).eq("id",t).single();if(K)throw new Error(K.message||"Failed to load course");const ne=A;return{id:ne.id,title:ne.title,description:ne.description,modules:(ne.modules??[]).slice().sort((ee,re)=>(ee.order??0)-(re.order??0)).map(ee=>({id:ee.id,title:ee.title,lessons:(ee.lessons??[]).slice().sort((re,ae)=>(re.order??0)-(ae.order??0)).map(re=>({id:re.id,title:re.title,content:re.content,lesson_type:re.lesson_type,xp_value:re.xp_value??0})),projects:(ee.projects??[]).slice().filter(re=>re.is_active??!0).sort((re,ae)=>{const Fe=re.created_at?new Date(re.created_at).getTime():0,M=ae.created_at?new Date(ae.created_at).getTime():0;return Fe!==M?Fe-M:re.title.localeCompare(ae.title)}).map((re,ae)=>({id:re.id,title:re.title,description:re.description??"",order:ae+1,xp_value:re.xp_value??null}))}))}}}),E=p.useMemo(()=>{if(v){if(j)return j;if(k){for(const A of v.modules)if(A.lessons.some(K=>K.id===k))return A.id}}},[v,k,j]);p.useEffect(()=>{var A,K,ne;if(v){if(k)for(const le of v.modules){const ee=le.lessons.find(re=>re.id===k)??null;if(ee){(e==null?void 0:e.id)!==ee.id&&s(ee);return}}if(j&&!e){const le=v.modules.find(re=>re.id===j)??null,ee=((A=le==null?void 0:le.lessons)==null?void 0:A[0])??null;if(ee){s(ee);return}}if(!e){const le=((ne=(K=v.modules[0])==null?void 0:K.lessons)==null?void 0:ne[0])??null;le&&s(le)}}},[v,e,k,j]);const R=p.useMemo(()=>v?v.modules.flatMap(A=>A.projects.map(K=>K.id)):[],[v]),z=p.useMemo(()=>R.length===0?[]:Array.from(new Set(R)).sort(),[R]),F=p.useMemo(()=>z.join(","),[z]),{data:L}=$e({queryKey:["user-lesson-progress",N==null?void 0:N.id,e==null?void 0:e.id],enabled:!!(N&&(e!=null&&e.id)),queryFn:async()=>{if(!N||!e)return null;const{data:A,error:K}=await b.from("user_progress").select("status").eq("user_id",N.id).eq("lesson_id",e.id).maybeSingle();if(K)throw K;return A}}),U=(L==null?void 0:L.status)==="completed",{data:J={}}=$e({queryKey:["module-project-submissions",N==null?void 0:N.id,F],enabled:!!(N&&z.length>0),queryFn:async()=>{if(!N)return{};const{data:A,error:K}=await b.from("module_project_submissions").select("project_id, repository_url, submitted_at").eq("user_id",N.id).in("project_id",z);if(K)throw K;const ne={};for(const le of A??[])ne[le.project_id]={repository_url:le.repository_url,submitted_at:le.submitted_at};return ne}}),Y=Xe({mutationFn:async({projectId:A,repositoryUrl:K})=>{if(!N)throw new Error("AUTH_REQUIRED");const{error:ne}=await b.from("module_project_submissions").upsert({project_id:A,user_id:N.id,repository_url:K,submitted_at:new Date().toISOString()},{onConflict:"project_id,user_id"});if(ne)throw ne},onSuccess:(A,K)=>{y.invalidateQueries({queryKey:["module-project-submissions",N==null?void 0:N.id,F]}),Q.success(S(K.isUpdate?"projects.notifications.updated":"projects.notifications.submitted"))},onError:A=>{if(A instanceof Error&&A.message==="AUTH_REQUIRED"){Q.error(S("projects.errors.loginRequired"));return}console.error("Project submission failed",A),Q.error(S("projects.notifications.submitError"))}}),I=p.useCallback(async(A,K)=>{const ne=!!J[A];await Y.mutateAsync({projectId:A,repositoryUrl:K,isUpdate:ne})},[J,Y]),O=((G=Y.variables)==null?void 0:G.projectId)??null;p.useEffect(()=>(w(null),()=>w(null)),[w]),p.useEffect(()=>{const A=K=>{(K.metaKey||K.ctrlKey)&&K.key==="k"&&(K.preventDefault(),i(!0))};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[]);const D=p.useMemo(()=>!v||!e?null:v.modules.find(A=>A.lessons.some(K=>K.id===e.id))??null,[v,e]),W=p.useMemo(()=>!D||!e||D.lessons.length===0?!1:D.lessons[D.lessons.length-1].id===e.id,[e,D]),C=p.useMemo(()=>v?v.modules.flatMap(A=>A.lessons):[],[v]),V=p.useMemo(()=>e?C.findIndex(A=>A.id===e.id):-1,[C,e]),P=V>0?C[V-1]:null,B=V<C.length-1?C[V+1]:null,T=async()=>{if(!N||!e){Q.error("You need to be logged in to track progress");return}h(!0);try{const{error:A}=await b.from("user_progress").upsert({user_id:N.id,lesson_id:e.id,status:"completed",completed_at:new Date().toISOString()},{onConflict:"user_id,lesson_id"});if(A)throw new Error(A.message||"Failed to save progress");y.invalidateQueries({queryKey:["user-lesson-progress",N.id,e.id]}),Q.success(S("lessons.lessonCompleted")),B&&s(B)}catch(A){console.error("Error marking lesson as complete:",A),Q.error("Error saving progress")}finally{h(!1)}},q=async()=>{if(!(!N||!e)){m(!0);try{const{error:A}=await b.from("user_progress").upsert({user_id:N.id,lesson_id:e.id,status:"in_progress",completed_at:null},{onConflict:"user_id,lesson_id"});if(A)throw new Error(A.message||"Failed to update progress");y.invalidateQueries({queryKey:["user-lesson-progress",N.id,e.id]}),Q.success(S("lessons.unmarked"))}catch(A){console.error("Error unmarking lesson:",A),Q.error(S("lessons.progressSaveFailed"))}finally{m(!1)}}};return _||!v?n.jsx("div",{className:"min-h-[100svh] flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-forge-orange mx-auto mb-4"}),n.jsx("p",{className:"text-forge-gray",children:S("common.buttons.loading")})]})}):n.jsxs(n.Fragment,{children:[c&&n.jsx(FR,{onComplete:()=>d(!1)}),n.jsxs("div",{className:"min-h-[100svh] flex flex-col bg-gradient-to-br from-slate-50 to-white",children:[n.jsxs("header",{className:"h-14 border-b bg-white/95 backdrop-blur-sm flex items-center px-4 sticky top-0 z-30 shadow-sm",children:[n.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:n.jsxs(we,{to:as,className:"text-gray-500 hover:text-forge-dark transition-colors flex items-center gap-1.5 text-sm",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),n.jsx("span",{className:"hidden sm:inline",children:"Exit"})]})}),n.jsx("div",{className:"flex-1 flex justify-center px-2",children:n.jsxs("button",{onClick:()=>i(!0),className:"group flex items-center gap-1.5 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors max-w-xs sm:max-w-md",children:[n.jsx("span",{className:"text-sm font-medium text-forge-dark truncate",children:(e==null?void 0:e.title)||v.title}),n.jsx(vo,{className:"w-4 h-4 text-gray-400 group-hover:text-forge-orange transition-colors flex-shrink-0"})]})}),e&&n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsxs("div",{className:"hidden md:flex items-center gap-2 mr-2",children:[n.jsx("div",{className:"h-1.5 w-24 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-forge-orange to-orange-400 rounded-full transition-all duration-300",style:{width:`${(V+1)/C.length*100}%`}})}),n.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[V+1,"/",C.length]})]}),n.jsxs("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[n.jsx("button",{onClick:()=>P&&s(P),disabled:!P,className:"p-2 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed transition-colors border-r","aria-label":"Previous lesson",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("button",{onClick:()=>B&&s(B),disabled:!B,className:"p-2 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Next lesson",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),n.jsxs("button",{onClick:U?q:T,disabled:u||f,onMouseEnter:()=>U&&g(!0),onMouseLeave:()=>g(!1),className:$("ml-2 w-[130px] h-9 flex-shrink-0 px-4 py-2 rounded-lg text-white text-sm font-medium flex items-center justify-center gap-2 transition-colors whitespace-nowrap",U?x?"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed":"bg-gradient-to-r from-forge-orange to-orange-500 hover:shadow-md disabled:opacity-60 disabled:cursor-not-allowed"),children:[U&&x?n.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):U?n.jsx(Vr,{className:"w-4 h-4 flex-shrink-0","aria-hidden":!0}):n.jsx(bo,{className:"w-4 h-4 flex-shrink-0"}),n.jsx("span",{className:"hidden sm:inline",children:S(U?f?"common.buttons.saving":x?"lessons.unmark":"lessons.completed":u?"common.buttons.saving":"lessons.complete")})]})]})]}),n.jsxs("div",{className:"flex-1 flex h-[calc(100svh-56px)]",children:[n.jsx("main",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-slate-50 via-white to-slate-50",children:n.jsxs("div",{className:"max-w-5xl mx-auto py-6 px-4 sm:py-8 sm:px-6 lg:px-10 xl:px-12",children:[n.jsx(DR,{lesson:e,course:v}),D&&W&&n.jsx("div",{className:"mt-8 border rounded-xl bg-white shadow-sm",children:n.jsx(KR,{moduleTitle:D.title,projects:D.projects,submissions:J,submittingProjectId:O,onSubmit:I,communityLink:vn})})]})}),n.jsx("aside",{className:"hidden xl:flex xl:flex-col w-80 flex-shrink-0 border-l bg-white sticky top-14 h-[calc(100svh-56px)]",children:n.jsx(og,{courseTitle:v==null?void 0:v.title,lessonTitle:e==null?void 0:e.title,lessonType:e==null?void 0:e.lesson_type,lessonContent:e==null?void 0:e.content})})]}),n.jsx("button",{onClick:()=>l(!0),className:"xl:hidden fixed bottom-6 right-6 z-40 w-14 h-14 rounded-full bg-gradient-to-r from-forge-orange to-orange-500 text-white shadow-lg hover:shadow-xl flex items-center justify-center transition-all hover:scale-105","aria-label":"Open AI Assistant",children:n.jsx(tu,{className:"w-6 h-6"})}),n.jsx(L0,{open:o,onOpenChange:l,children:n.jsxs(O0,{className:"h-[85vh]",children:[n.jsx(M0,{className:"border-b",children:n.jsxs(I0,{className:"flex items-center gap-2",children:[n.jsx(tu,{className:"h-5 w-5 text-forge-orange"}),"AI Instructor"]})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(og,{courseTitle:v==null?void 0:v.title,lessonTitle:e==null?void 0:e.title,lessonType:e==null?void 0:e.lesson_type,lessonContent:e==null?void 0:e.content})})]})}),n.jsx(UR,{open:a,onOpenChange:i,course:v,currentLessonId:e==null?void 0:e.id,defaultOpenModuleId:E,onLessonClick:s})]})]})}const fg=(t,e)=>{const s="relative group inline-flex items-center justify-center overflow-hidden rounded-2xl font-semibold transition-all duration-200 transform hover:scale-[1.02]",r={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},a={primary:"bg-forge-orange text-white hover:bg-forge-orange-light shadow-lg hover:shadow-xl",secondary:"bg-forge-dark text-white hover:bg-forge-dark/90 shadow-lg hover:shadow-xl",outline:"border-2 border-forge-orange text-forge-orange hover:bg-forge-orange hover:text-white",ghost:"text-forge-dark hover:bg-forge-cream/50"};return`${s} ${r[e]} ${a[t]}`},it=({children:t,variant:e="primary",size:s="md",icon:r,withGradient:a=!1,withIcon:i=!1,className:o,asChild:l=!1,...c})=>{var f,m;const d=a&&n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-forge-orange to-forge-orange-light opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),h=r||i&&!r&&n.jsx(Vr,{size:16});if(l&&p.isValidElement(t)){const x=t,g=$(fg(e,s),(f=x.props)==null?void 0:f.className,o);return p.cloneElement(x,{...c,className:g},n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"relative z-10 inline-flex items-center gap-2",children:[h,(m=x.props)==null?void 0:m.children]}),d]}))}return n.jsxs("button",{className:$(fg(e,s),o),...c,children:[n.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[h,t]}),d]})};function SO(){const{pathId:t}=Rc(),{user:e}=Ct(),s=Ht(),r=Ue(),{t:a}=je(),{data:i,isLoading:o,error:l}=$e({queryKey:["pathOverview",t,e==null?void 0:e.id],enabled:!!t,queryFn:async()=>{const{data:g,error:b}=await r.from("learning_paths").select("id, title, description, courses(id, title, description, thumbnail_url, order, modules(id, title, order, lessons(id)))").eq("id",t).single();if(b)throw b;const y=(g.courses||[]).slice().sort((k,j)=>(k.order??0)-(j.order??0)),w={id:g.id,title:g.title,description:g.description,courses:y.map(k=>{const j=(k.modules||[]).map(v=>({id:v.id,title:v.title,order:v.order??0})).filter(v=>v.id&&v.title).sort((v,_)=>v.order-_.order);return{id:k.id,title:k.title,description:k.description??null,thumbnail_url:k.thumbnail_url??null,modules:j}})};let N=!1;if(e){const{data:k,error:j}=await r.from("user_enrollments").select("learning_path_id").eq("user_id",e.id).eq("learning_path_id",t).eq("is_active",!0).maybeSingle();j||(N=!!k)}const S={};if(e!=null&&e.id&&N&&y.length>0){const k={},j=[];for(const v of y)for(const _ of v.modules||[])for(const E of _.lessons||[])E!=null&&E.id&&(k[E.id]=v.id,j.push(E.id));if(j.length>0){const{data:v}=await r.from("user_progress").select("lesson_id, status").eq("user_id",e.id).in("lesson_id",j),_={};for(const E of y)_[E.id]={total:0,completed:0,inProgress:0};for(const E of j){const R=k[E];R&&_[R]&&_[R].total++}for(const E of v||[]){const R=k[E.lesson_id];R&&_[R]&&(E.status==="completed"?_[R].completed++:E.status==="in_progress"&&_[R].inProgress++)}for(const[E,R]of Object.entries(_))R.total===0?S[E]="not_started":R.completed===R.total?S[E]="completed":R.completed>0||R.inProgress>0?S[E]="in_progress":S[E]="not_started"}}return{path:w,isEnrolled:N,courseProgress:S}}}),{data:c}=$e({queryKey:["pathNextLesson",t,e==null?void 0:e.id],enabled:!!(t&&(e!=null&&e.id)&&(i!=null&&i.isEnrolled)),queryFn:async()=>{const{data:g}=await r.from("courses").select("id, modules(id, order, lessons(id, order))").eq("path_id",t).order("order",{ascending:!0}),b=[];for(const k of g||[]){const j=(k.modules||[]).slice().sort((v,_)=>(v.order??0)-(_.order??0));for(const v of j){const _=(v.lessons||[]).slice().sort((E,R)=>(E.order??0)-(R.order??0));for(const E of _)b.push({courseId:k.id,moduleId:v.id,lessonId:E.id})}}if(b.length===0)return null;const y=b.map(k=>k.lessonId),{data:w}=await r.from("user_progress").select("lesson_id, status").eq("user_id",e.id).in("lesson_id",y),N=new Set((w||[]).filter(k=>k.status==="completed").map(k=>k.lesson_id));return b.find(k=>!N.has(k.lessonId))??null}}),d=Xe({mutationFn:async()=>{if(!e||!t)throw new Error(a("dashboard.errors.notAuthenticated"));const{error:g}=await r.from("user_enrollments").insert({user_id:e.id,learning_path_id:t});if(g)throw new Error(g.message||a("dashboard.errors.failedToEnroll"))},onSuccess:()=>{Q.success(a("dashboard.pathOverview.continue")),s.invalidateQueries({queryKey:["availablePaths"]}),s.invalidateQueries({queryKey:["myPaths"]}),s.invalidateQueries({queryKey:["pathOverview"]}),s.invalidateQueries({queryKey:["formations"]}),s.invalidateQueries({queryKey:["formation-detail"]})},onError:()=>Q.error(a("dashboard.enrollError"))});if(o)return n.jsx("div",{className:"space-y-4",children:[...Array(2)].map((g,b)=>n.jsx(de,{children:n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),n.jsx("div",{className:"h-20 bg-gray-100 rounded"})]})})},b))});if(l&&console.error("Supabase error loading path overview:",l),!i)return n.jsx("div",{className:"text-gray-500",children:a("dashboard.pathOverview.notFound")});const{path:u,isEnrolled:h,courseProgress:f={}}=i,m=dr(),x=c?`${Or(c.courseId)}?lessonId=${c.lessonId}&moduleId=${c.moduleId}`:u.courses[0]?Or(u.courses[0].id):"#";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("header",{children:[n.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded bg-forge-orange/10 text-forge-orange text-xs font-medium",children:a("dashboard.pathOverview.badge")}),n.jsx("h1",{className:"text-3xl font-bold mt-2 text-forge-dark",children:u.title}),u.description&&n.jsx("p",{className:"mt-2 text-forge-gray",children:u.description})]}),h?n.jsx("div",{children:n.jsx(it,{asChild:!0,withGradient:!0,children:n.jsx(we,{to:x,children:a("dashboard.pathOverview.continue")})})}):n.jsx("div",{children:n.jsx(it,{onClick:()=>d.mutate(),disabled:!e||d.isPending,withGradient:!0,children:d.isPending?a("dashboard.enrolling"):a("dashboard.enroll")})}),n.jsxs("section",{className:"space-y-3",children:[n.jsx("h2",{className:"text-xl font-semibold",children:a("dashboard.pathOverview.courses")}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 items-stretch",children:u.courses.map(g=>{const b=f[g.id]==="in_progress",y=f[g.id]==="completed",w=g.modules||[],N=n.jsxs(de,{className:"relative rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden hover:shadow-lg transition-shadow h-full min-h-[480px] flex flex-col group cursor-pointer",children:[n.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{backgroundColor:"#303b2e"},children:[g.thumbnail_url?n.jsx("img",{src:g.thumbnail_url,alt:g.title,className:"w-full h-full object-cover"}):n.jsx(Ti,{className:"h-16 w-16 text-forge-orange"}),b&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"enrolled",size:"sm",icon:Nn,iconPosition:"left",children:a("dashboard.enrolled")})}),y&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"success",size:"sm",icon:Vr,iconPosition:"left",children:a("filters.progressOptions.completed")})}),!b&&!y&&h&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"default",size:"sm",icon:ar,iconPosition:"left",children:a("filters.statusOptions.available")})})]}),n.jsxs(Be,{className:"flex-1 min-h-0 flex flex-col space-y-2 p-6",children:[n.jsxs(qe,{className:"flex items-start gap-2 text-forge-dark tracking-normal text-lg md:text-xl leading-tight line-clamp-2 break-words flex-1",children:[n.jsx(Ti,{className:"h-4 w-4 mt-0.5 text-forge-orange shrink-0"}),n.jsx("span",{children:g.title})]}),n.jsx(ls,{className:"text-[13px] text-forge-gray line-clamp-3 min-h-[3.75rem]",children:g.description||a("courses.descriptionFallback")})]}),n.jsxs(oe,{className:"p-6 pt-0 space-y-4 mt-auto",children:[n.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Xx,{className:"h-4 w-4"}),a("courses.modules",{count:w.length})]})}),w.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-900",children:a("courses.modulesLabel")}),n.jsxs("div",{className:"space-y-1",children:[w.slice(0,3).map((S,k)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[n.jsxs("span",{className:"text-blue-500 font-medium",children:[k+1,"."]}),n.jsx("span",{className:"truncate",children:S.title})]},S.id)),w.length>3&&n.jsx("div",{className:"text-xs text-gray-500",children:a("courses.moreModules",{count:w.length-3})})]})]}),n.jsx(it,{className:"w-full text-sm py-2",size:"sm",withGradient:!0,onClick:S=>{S.preventDefault(),S.stopPropagation(),m(Or(g.id))},children:a(b?"common.buttons.continueLearning":"courses.startCourse")})]})]});return n.jsx(we,{to:Or(g.id),className:"block h-full rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:N},g.id)})})]})]})}function _O({className:t="",variant:e="default",children:s}){const{signOut:r,loading:a}=Ah(),i=async()=>{try{await r()}catch(o){console.error("Error signing out:",o)}};return e==="minimal"?n.jsx("button",{onClick:i,disabled:a,className:`text-sm text-gray-600 hover:text-gray-900 disabled:opacity-50 ${t}`,children:s||"Sign out"}):e==="icon"?n.jsx("button",{onClick:i,disabled:a,className:`p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full disabled:opacity-50 ${t}`,title:"Sign out",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}):n.jsx("button",{onClick:i,disabled:a,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-forge-orange hover:bg-forge-orange-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-forge-orange disabled:opacity-50 disabled:cursor-not-allowed ${t}`,children:a?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing out..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),s||"Sign out"]})})}const CO=()=>{const{t}=je(),[e,s]=p.useState(!1),r=cr(),{user:a,loading:i}=Ct();if(i)return null;const o=r.pathname.startsWith("/dashboard"),l=r.pathname==="/login"||r.pathname==="/signup"||r.pathname==="/forgot-password"||r.pathname==="/login-oauth",c="top-[calc(0.5rem+30px)] sm:top-[calc(1rem+30px)]";if(o)return null;if(l)return n.jsx("nav",{className:`fixed left-0 right-0 z-50 ${c}`,children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"flex justify-start items-center h-16 sm:h-20",children:n.jsx(we,{to:"/",className:"flex items-center space-x-3",children:n.jsx("img",{src:"https://cdn.builder.io/api/v1/assets/a59c9d8d677c4c99bcaffef64866607b/forgecollege-2c35f0?format=webp&width=800",alt:"Forge College",className:"h-10 sm:h-12 w-auto",style:{minWidth:"120px"}})})})})});const d=[{path:"/old/hidden/index",label:t("nav.forProfessionals")},{path:"/companies",label:t("nav.forCompanies")},{path:"/investors",label:t("nav.forInvestors")}];return n.jsx("nav",{className:`fixed left-0 right-0 z-50 ${c}`,children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center h-16 sm:h-20",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"md:hidden",children:n.jsx("button",{onClick:()=>s(!e),className:"text-forge-dark hover:text-forge-orange transition-colors p-2 bg-forge-cream/95 backdrop-blur-sm rounded-xl border border-forge-orange/20 shadow-lg","aria-label":e?"Close menu":"Open menu",children:e?n.jsx(bs,{size:24}):n.jsx(Rj,{size:24})})}),n.jsx(we,{to:"/",className:"flex items-center space-x-3",children:n.jsx("img",{src:"https://cdn.builder.io/api/v1/assets/a59c9d8d677c4c99bcaffef64866607b/forgecollege-2c35f0?format=webp&width=800",alt:"Forge College",className:"h-10 sm:h-12 w-auto",style:{minWidth:"120px"}})})]}),n.jsx("div",{className:"hidden md:flex items-center bg-forge-cream/95 backdrop-blur-sm rounded-2xl border border-forge-orange/20 shadow-lg overflow-hidden",children:d.map((u,h)=>n.jsxs("div",{className:"flex items-center",children:[n.jsxs(we,{to:u.path,className:`px-6 py-3 text-sm font-semibold transition-all duration-300 relative group ${r.pathname===u.path?"text-white":"text-forge-gray hover:text-forge-dark"}`,children:[r.pathname===u.path&&n.jsx("div",{className:"absolute inset-0 bg-forge-orange rounded-full m-1 -z-10"}),r.pathname!==u.path&&n.jsx("div",{className:"absolute inset-0 bg-forge-dark/20 rounded-full m-1 -z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.label]}),h<d.length-1&&n.jsx("div",{className:"h-6 w-px bg-forge-gray/30"})]},u.path))}),n.jsx("div",{className:"hidden md:flex items-center space-x-3",children:a?n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(we,{to:"/dashboard",className:"bg-forge-dark text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-forge-dark/80 transition-colors shadow-lg",children:t("nav.dashboard")}),n.jsx(Hu,{})]}):n.jsxs(n.Fragment,{children:[n.jsx(we,{to:"/login",className:"text-forge-orange transition-colors px-4 py-2 rounded-lg text-sm font-medium hover:bg-forge-cream/50",children:t("common.buttons.signIn")}),n.jsx(we,{to:"/signup",className:"bg-forge-orange text-white px-6 py-3 rounded-full text-sm font-semibold hover:bg-forge-orange-dark transition-colors shadow-lg border border-forge-orange",children:t("common.buttons.signUp")})]})}),n.jsx("div",{className:"md:hidden w-6"})]}),e&&n.jsxs("div",{className:"md:hidden py-6 bg-forge-cream/95 backdrop-blur-sm rounded-2xl mx-4 mt-4 border border-forge-orange/20 shadow-lg overflow-hidden",children:[d.map((u,h)=>n.jsxs("div",{children:[n.jsxs(we,{to:u.path,onClick:()=>s(!1),className:`block py-4 px-6 text-base font-semibold transition-colors relative group ${r.pathname===u.path?"text-white":"text-forge-gray hover:text-forge-dark"}`,children:[r.pathname===u.path&&n.jsx("div",{className:"absolute inset-0 bg-forge-orange rounded-full m-1 -z-10"}),r.pathname!==u.path&&n.jsx("div",{className:"absolute inset-0 bg-forge-dark/20 rounded-full m-1 -z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.label]}),h<d.length-1&&n.jsx("div",{className:"h-px bg-forge-gray/30 mx-6"})]},u.path)),a?n.jsxs("div",{className:"pt-4 mt-4 space-y-3 px-4",children:[n.jsx(we,{to:"/dashboard",onClick:()=>s(!1),className:"block text-center py-3 px-6 rounded-lg text-base font-medium bg-forge-dark text-white hover:bg-forge-dark/80 transition-colors shadow-lg",children:t("nav.dashboard")}),n.jsx("div",{children:n.jsx(Hu,{})}),n.jsx(_O,{className:"w-full py-3 rounded-lg"})]}):n.jsxs("div",{className:"pt-4 mt-4 space-y-3 px-4",children:[n.jsx(we,{to:"/login",onClick:()=>s(!1),className:"block text-center py-3 px-6 rounded-lg text-base font-medium text-forge-orange hover:bg-forge-orange/10 transition-colors",children:t("common.buttons.signIn")}),n.jsx(we,{to:"/signup",onClick:()=>s(!1),className:"block text-center py-3 px-6 rounded-full text-base font-semibold bg-forge-orange text-white hover:bg-forge-orange-dark transition-colors shadow-lg border border-forge-orange",children:t("common.buttons.signUp")})]})]})]})})};function TO(){return n.jsxs("div",{children:[n.jsx(CO,{}),n.jsx("main",{children:n.jsx(wh,{})})]})}function Ot(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function PO(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const Qo=43200,mg=1440;let EO={};function AO(){return EO}function pg(t){const e=Ot(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function _l(t,e){const s=Ot(t),r=Ot(e),a=s.getTime()-r.getTime();return a<0?-1:a>0?1:a}function LO(t){return PO(t,Date.now())}function RO(t,e){const s=Ot(t),r=Ot(e),a=s.getFullYear()-r.getFullYear(),i=s.getMonth()-r.getMonth();return a*12+i}function OO(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function MO(t,e){return+Ot(t)-+Ot(e)}function IO(t){const e=Ot(t);return e.setHours(23,59,59,999),e}function DO(t){const e=Ot(t),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(23,59,59,999),e}function $O(t){const e=Ot(t);return+IO(e)==+DO(e)}function FO(t,e){const s=Ot(t),r=Ot(e),a=_l(s,r),i=Math.abs(RO(s,r));let o;if(i<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*i);let l=_l(s,r)===-a;$O(Ot(t))&&i===1&&_l(t,r)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function zO(t,e,s){const r=MO(t,e)/1e3;return OO(s==null?void 0:s.roundingMethod)(r)}const BO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UO=(t,e,s)=>{let r;const a=BO[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function ha(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const VO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qO={date:ha({formats:VO,defaultWidth:"full"}),time:ha({formats:HO,defaultWidth:"full"}),dateTime:ha({formats:WO,defaultWidth:"full"})},KO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GO=(t,e,s,r)=>KO[t];function Fs(t){return(e,s)=>{const r=s!=null&&s.context?String(s.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=s!=null&&s.width?String(s.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=s!=null&&s.width?String(s.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const JO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tM=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},sM={ordinalNumber:tM,era:Fs({values:JO,defaultWidth:"wide"}),quarter:Fs({values:YO,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fs({values:XO,defaultWidth:"wide"}),day:Fs({values:ZO,defaultWidth:"wide"}),dayPeriod:Fs({values:QO,defaultWidth:"wide",formattingValues:eM,defaultFormattingWidth:"wide"})};function zs(t){return(e,s={})=>{const r=s.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?nM(l,h=>h.test(o)):rM(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function rM(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function nM(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function D0(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const aM=/^(\d+)(th|st|nd|rd)?/i,iM=/\d+/i,oM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lM={any:[/^b/i,/^(a|c)/i]},cM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dM={any:[/1/i,/2/i,/3/i,/4/i]},uM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xM={ordinalNumber:D0({matchPattern:aM,parsePattern:iM,valueCallback:t=>parseInt(t,10)}),era:zs({matchPatterns:oM,defaultMatchWidth:"wide",parsePatterns:lM,defaultParseWidth:"any"}),quarter:zs({matchPatterns:cM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:zs({matchPatterns:uM,defaultMatchWidth:"wide",parsePatterns:hM,defaultParseWidth:"any"}),day:zs({matchPatterns:fM,defaultMatchWidth:"wide",parsePatterns:mM,defaultParseWidth:"any"}),dayPeriod:zs({matchPatterns:pM,defaultMatchWidth:"any",parsePatterns:gM,defaultParseWidth:"any"})},bM={code:"en-US",formatDistance:UO,formatLong:qO,formatRelative:GO,localize:sM,match:xM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yM(t,e,s){const r=AO(),a=(s==null?void 0:s.locale)??r.locale??bM,i=2520,o=_l(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o});let c,d;o>0?(c=Ot(e),d=Ot(t)):(c=Ot(t),d=Ot(e));const u=zO(d,c),h=(pg(d)-pg(c))/1e3,f=Math.round((u-h)/60);let m;if(f<2)return s!=null&&s.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):f===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",f,l);if(f<45)return a.formatDistance("xMinutes",f,l);if(f<90)return a.formatDistance("aboutXHours",1,l);if(f<mg){const x=Math.round(f/60);return a.formatDistance("aboutXHours",x,l)}else{if(f<i)return a.formatDistance("xDays",1,l);if(f<Qo){const x=Math.round(f/mg);return a.formatDistance("xDays",x,l)}else if(f<Qo*2)return m=Math.round(f/Qo),a.formatDistance("aboutXMonths",m,l)}if(m=FO(d,c),m<12){const x=Math.round(f/Qo);return a.formatDistance("xMonths",x,l)}else{const x=m%12,g=Math.trunc(m/12);return x<3?a.formatDistance("aboutXYears",g,l):x<9?a.formatDistance("overXYears",g,l):a.formatDistance("almostXYears",g+1,l)}}function or(t,e){return yM(t,LO(t),e)}function vM({className:t,showHeader:e=!0,showFooter:s=!1,contentLines:r=3,showAvatar:a=!1,...i}){return n.jsxs(de,{className:$("",t),...i,children:[e&&n.jsx(Be,{className:"space-y-2",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(Ps,{className:"h-6 w-3/4"}),n.jsx(Ps,{className:"h-4 w-1/2"})]}),a&&n.jsx(GL,{size:"md"})]})}),n.jsx(oe,{className:e?"pt-0":"",children:n.jsx(KL,{lines:r})}),s&&n.jsx(oe,{className:"pt-0",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsx(Ps,{className:"h-9 w-24"}),n.jsx(Ps,{className:"h-9 w-24"})]})})]})}function Xc({className:t,count:e=6,columns:s={sm:1,md:2,lg:3},aspectRatio:r="video",showContent:a=!0,...i}){const o={square:"aspect-square",video:"aspect-video",portrait:"aspect-[3/4]"},l=[s.sm&&`grid-cols-${s.sm}`,s.md&&`md:grid-cols-${s.md}`,s.lg&&`lg:grid-cols-${s.lg}`].filter(Boolean).join(" ");return n.jsx("div",{className:$("grid gap-card-gap",l,t),...i,children:Array.from({length:e}).map((c,d)=>n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ps,{className:$("w-full",o[r]),shape:"lg"}),a&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ps,{className:"h-5 w-3/4"}),n.jsx(Ps,{className:"h-4 w-1/2"})]})]},d))})}const wM=It("flex flex-col items-center justify-center text-center",{variants:{size:{sm:"py-8 px-4",md:"py-12 px-6",lg:"py-16 px-8"}},defaultVariants:{size:"md"}}),jM=It("rounded-full flex items-center justify-center mb-4",{variants:{variant:{default:"bg-muted text-muted-foreground",search:"bg-info-100 text-info-600",error:"bg-error-100 text-error-600","no-data":"bg-muted text-muted-foreground",success:"bg-success-100 text-success-600"},size:{sm:"h-12 w-12",md:"h-16 w-16",lg:"h-20 w-20"}},defaultVariants:{variant:"default",size:"md"}}),NM={default:Vf,search:Ol,error:Mj,"no-data":Oj,success:Vf},Tn=p.forwardRef(({className:t,size:e="md",variant:s="default",icon:r,title:a,description:i,action:o,secondaryAction:l,iconSize:c,...d},u)=>{const h=r||NM[s||"default"],f=c||e,m={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-10 w-10"};return n.jsxs("div",{ref:u,className:$(wM({size:e}),t),role:"status","aria-live":"polite",...d,children:[n.jsx("div",{className:$(jM({variant:s,size:f})),"aria-hidden":"true",children:n.jsx(h,{className:m[f||"md"]})}),n.jsx("h3",{className:$("font-semibold tracking-tight text-foreground",e==="sm"&&"text-lg",e==="md"&&"text-xl",e==="lg"&&"text-2xl"),children:a}),i&&n.jsx("p",{className:$("mt-2 text-muted-foreground max-w-md",e==="sm"&&"text-sm",e==="md"&&"text-base",e==="lg"&&"text-lg"),children:i}),(o||l)&&n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 items-center justify-center",children:[o&&n.jsxs(te,{onClick:o.onClick,variant:o.variant||"default",className:"w-full sm:w-auto","aria-label":o.label,children:[o.icon&&n.jsx(o.icon,{className:"mr-2 h-4 w-4"}),o.label]}),l&&n.jsxs(te,{onClick:l.onClick,variant:l.variant||"outline",className:"w-full sm:w-auto","aria-label":l.label,children:[l.icon&&n.jsx(l.icon,{className:"mr-2 h-4 w-4"}),l.label]})]})]})});Tn.displayName="EmptyState";function bf({value:t,onChange:e,placeholder:s="Search...",className:r,debounceMs:a=300}){const[i,o]=p.useState(t),[l,c]=p.useState(!1),d=p.useRef(null),u=p.useRef(null);p.useEffect(()=>{o(t)},[t]),p.useEffect(()=>{const m=setTimeout(()=>{i!==t&&e(i)},a);return()=>clearTimeout(m)},[i,a,e,t]),p.useEffect(()=>{t&&!l&&c(!0)},[t,l]),p.useEffect(()=>{l&&d.current&&d.current.focus()},[l]),p.useEffect(()=>{const m=x=>{u.current&&!u.current.contains(x.target)&&!i&&c(!1)};if(l)return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[l,i]);const h=p.useCallback(()=>{o(""),e(""),d.current&&d.current.focus()},[e]),f=()=>{c(!0)};return n.jsx("div",{ref:u,className:$("relative",r),children:l?n.jsxs("div",{className:"relative w-full min-w-[200px]",children:[n.jsx(Ol,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),n.jsx(ye,{ref:d,type:"text",value:i,onChange:m=>o(m.target.value),placeholder:s,className:"h-10 pl-9 pr-9",onBlur:()=>{i||c(!1)}}),i&&n.jsx("button",{type:"button",onClick:h,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Clear search",children:n.jsx(bs,{className:"h-4 w-4"})})]}):n.jsx("button",{type:"button",onClick:f,className:"flex items-center justify-center h-10 w-10 rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground transition-colors shrink-0","aria-label":"Search",children:n.jsx(Ol,{className:"h-4 w-4 text-muted-foreground"})})})}const kM=[{value:"all",icon:Zx},{value:"available",icon:ar},{value:"coming_soon",icon:is}];function SM({value:t,onChange:e,className:s,showLabels:r=!0}){const{t:a}=je(),i=o=>{e(t===o?"all":o)};return n.jsx("div",{className:$("flex items-center gap-2",s),children:kM.map(({value:o,icon:l})=>{const c=t===o,d=a(`filters.statusOptions.${o}`);return n.jsx("button",{type:"button",onClick:()=>i(o),className:"focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-full",children:n.jsx(xe,{variant:c?"brand":"outline",size:"md",icon:l,iconPosition:"left",className:"cursor-pointer transition-all hover:scale-105 h-10 px-3 flex items-center",children:r?d:""})},o)})})}const _M=[{value:"not_started",icon:Ac},{value:"in_progress",icon:Nn},{value:"completed",icon:Vr}];function CM({selected:t,onChange:e,className:s,showLabels:r=!0}){const{t:a}=je(),i=o=>{t.includes(o)?e(t.filter(l=>l!==o)):e([...t,o])};return n.jsx("div",{className:$("flex items-center gap-2",s),children:_M.map(({value:o,icon:l})=>{const c=t.includes(o),d=a(`filters.progressOptions.${o}`);return n.jsx("button",{type:"button",onClick:()=>i(o),className:"focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-full",children:n.jsx(xe,{variant:c?"brand":"outline",size:"md",icon:l,iconPosition:"left",className:"cursor-pointer transition-all hover:scale-105 h-10 px-3 flex items-center",children:r?d:""})},o)})})}const TM={recent:{icon:Dj},alphabetical:{icon:Ij},path_order:{icon:hl},course_order:{icon:hl},module_order:{icon:hl}};function PM({value:t,onChange:e,className:s,options:r=["recent","alphabetical","path_order"],showLabel:a=!0}){const{t:i}=je(),o=r.map(l=>({value:l,label:i(`filters.sortOptions.${l}`),icon:TM[l].icon}));return n.jsxs("div",{className:$("flex items-center gap-2",s),children:[n.jsx($j,{className:"h-4 w-4 text-muted-foreground shrink-0"}),a&&n.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:i("filters.sortBy")}),n.jsxs(Pt,{value:t,onValueChange:e,children:[n.jsx(kt,{className:"h-10 w-[180px]",children:n.jsx(Rt,{})}),n.jsx(St,{children:o.map(({value:l,label:c,icon:d})=>n.jsx(Ye,{value:l,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(d,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:c})]})},l))})]})]})}const EM=zj,AM=Bj,$0=p.forwardRef(({className:t,align:e="center",sideOffset:s=4,...r},a)=>n.jsx(Fj,{children:n.jsx(Qx,{ref:a,align:e,sideOffset:s,className:$("z-50 w-72 rounded-lg border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));$0.displayName=Qx.displayName;function yf({statusValue:t,onStatusChange:e,progressSelected:s,onProgressChange:r,sortValue:a,onSortChange:i,sortOptions:o=["recent","alphabetical","path_order"],className:l}){const{t:c}=je(),[d,u]=p.useState(!1),h=p.useMemo(()=>{let m=0;return t!=="all"&&m++,m+=s.length,m},[t,s]),f=()=>{e("all"),r([])};return n.jsxs(EM,{open:d,onOpenChange:u,children:[n.jsx(AM,{asChild:!0,children:n.jsxs(te,{variant:"outline",size:"sm",className:$("h-10 gap-2 px-3",h>0&&"border-forge-orange/50 bg-forge-orange/5",l),children:[n.jsx(Uj,{className:"h-4 w-4"}),n.jsx("span",{children:c("filters.title")}),h>0&&n.jsx("span",{className:"ml-1 flex h-5 w-5 items-center justify-center rounded-full bg-forge-orange text-[10px] font-medium text-white",children:h})]})}),n.jsx($0,{className:"w-80 p-4",align:"start",sideOffset:8,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-sm font-medium",children:c("filters.title")}),h>0&&n.jsxs(te,{variant:"ghost",size:"sm",onClick:f,className:"h-auto p-0 text-xs text-muted-foreground hover:text-foreground",children:[n.jsx(bs,{className:"mr-1 h-3 w-3"}),c("filters.clearAll")]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:c("filters.status")}),n.jsx(SM,{value:t,onChange:e,showLabels:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:c("filters.progress")}),n.jsx(CM,{selected:s,onChange:r,showLabels:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:c("filters.sort")}),n.jsx(PM,{value:a,onChange:i,options:o,showLabel:!1})]})]})})]})}function vf({children:t,className:e}){const s=p.useRef(null),r=p.useRef(new Map),a=p.useRef(null),[i,o]=p.useState(null),[l,c]=p.useState(null),d=p.useCallback(m=>{const x=r.current.get(m)??null,g=s.current;if(!x||!g)return;const b=g.getBoundingClientRect(),y=x.getBoundingClientRect();c({left:y.left-b.left,top:y.top-b.top,width:y.width,height:y.height})},[]),u=p.useCallback(m=>{a.current&&(clearTimeout(a.current),a.current=null),d(m),o(m)},[d]),h=p.useCallback(()=>{a.current=setTimeout(()=>{o(null),c(null)},50)},[]),f=H.Children.toArray(t);return n.jsxs("div",{ref:s,className:"relative",children:[n.jsx(jP,{children:i!==null&&l&&n.jsx(Me.div,{className:"pointer-events-none absolute rounded-xl z-0",initial:!1,animate:{left:l.left-12,top:l.top-12,width:l.width+24,height:l.height+24,opacity:1},exit:{opacity:0},transition:{type:"spring",damping:25,stiffness:300},style:{background:"rgba(251, 146, 60, 0.4)",border:"none",boxShadow:"0 0 20px rgba(251, 146, 60, 0.25)"}},"spotlight")}),n.jsx("div",{className:$("relative z-10",e),children:f.map((m,x)=>n.jsx("div",{ref:g=>r.current.set(x,g),onMouseEnter:()=>u(x),onMouseLeave:h,className:"h-full",children:m},H.isValidElement(m)&&m.key!=null?m.key:x))})]})}function F0({limit:t,className:e}){const{t:s}=je(),{user:r}=Ct(),a=Ue(),[i,o]=p.useState(""),[l,c]=p.useState("all"),[d,u]=p.useState([]),[h,f]=p.useState("recent"),[m,x]=p.useState(null),g=Ht(),{data:b=[],isLoading:y}=$e({queryKey:["formations",r==null?void 0:r.id],enabled:!0,staleTime:6e4,refetchOnWindowFocus:!1,keepPreviousData:!0,queryFn:async()=>{const{data:j,error:v}=await a.from("formations").select(`
          id, title, description, thumbnail_url, created_at, status,
          formation_paths(
            order,
            learning_paths(id, title)
          )
        `).in("status",["published","coming_soon"]).order("created_at",{ascending:!1});if(v)throw v;const _=j??[],E={};let R=[];if(r&&_.length>0){const z=[];if(_.forEach(F=>{const L=(F.formation_paths??[]).map(U=>{var J;return(J=U.learning_paths)==null?void 0:J.id}).filter(U=>!!U);z.push(...L)}),z.length>0){const{data:F}=await a.from("user_enrollments").select("learning_path_id").eq("user_id",r.id).eq("is_active",!0).in("learning_path_id",z);R=(F||[]).map(L=>L.learning_path_id).filter(L=>!!L)}if(z.length>0){const F=z.map(async J=>{try{const{data:Y,error:I}=await a.rpc("get_path_progress",{path_id:J,user_id:r.id});if(!I&&Y!==null&&Y!==void 0){const O=Y;return O===0?{pathId:J,status:"not_started"}:O===100?{pathId:J,status:"completed"}:{pathId:J,status:"in_progress"}}return{pathId:J,status:"not_started"}}catch{return{pathId:J,status:"not_started"}}}),L=await Promise.all(F),U={};L.forEach(({pathId:J,status:Y})=>{U[J]=Y}),_.forEach(J=>{const Y=(J.formation_paths??[]).map(C=>{var V;return(V=C.learning_paths)==null?void 0:V.id}).filter(C=>!!C);if(Y.length===0){E[J.id]="not_started";return}const I=Y.map(C=>U[C]||"not_started"),O=I.some(C=>C==="completed"),D=I.some(C=>C==="in_progress");I.every(C=>C==="completed")?E[J.id]="completed":D||O?E[J.id]="in_progress":E[J.id]="not_started"})}}return _.map(z=>{const F=(z.formation_paths??[]).map(L=>L.learning_paths?{id:L.learning_paths.id,title:L.learning_paths.title,order:L.order??0}:null).filter(L=>!!L).sort((L,U)=>L.order-U.order);return{id:z.id,title:z.title,description:z.description,thumbnail_url:z.thumbnail_url,status:z.status,paths_count:F.length,paths:F,created_at:z.created_at,progressStatus:E[z.id]||"not_started",firstPathEnrolled:F.length>0&&R.includes(F[0].id)}})}}),w=p.useMemo(()=>{let j=[...b];if(l!=="all"&&(j=j.filter(v=>l==="available"?v.status==="published":l==="coming_soon"?v.status==="coming_soon":!0)),d.length>0&&(j=j.filter(v=>d.includes(v.progressStatus||"not_started"))),i.trim()){const v=i.toLowerCase();j=j.filter(_=>_.title.toLowerCase().includes(v)||_.description&&_.description.toLowerCase().includes(v))}return j.sort((v,_)=>{const E=R=>R.status==="coming_soon"?3:R.progressStatus==="in_progress"?0:R.progressStatus==="not_started"?1:R.progressStatus==="completed"?2:4;switch(h){case"recent":const R=E(v)-E(_);if(R!==0)return R;const z=v.created_at?new Date(v.created_at).getTime():0;return(_.created_at?new Date(_.created_at).getTime():0)-z;case"alphabetical":const L=E(v)-E(_);return L!==0?L:v.title.localeCompare(_.title);default:const U=E(v)-E(_);if(U!==0)return U;const J=v.created_at?new Date(v.created_at).getTime():0;return(_.created_at?new Date(_.created_at).getTime():0)-J}}),j},[b,l,d,i,h]),N=t?w.slice(0,t):w,S=Xe({mutationFn:async j=>{if(!r)throw new Error(s("dashboard.mustLoginToEnroll"));const{error:v}=await a.from("user_enrollments").insert({user_id:r.id,learning_path_id:j});if(v)throw new Error(v.message||s("dashboard.errors.failedToEnroll"));return j},onMutate:j=>x(j),onSuccess:()=>{Q.success(s("dashboard.enrollSuccess")),g.invalidateQueries({queryKey:["formations"]}),g.invalidateQueries({queryKey:["availablePaths"]}),g.invalidateQueries({queryKey:["myPaths"]}),g.invalidateQueries({queryKey:["pathOverview"]}),g.invalidateQueries({queryKey:["formation-detail"]})},onError:j=>{console.error("Enroll error:",j),Q.error(s("dashboard.enrollError"))},onSettled:()=>x(null)}),k=j=>{if(!r){Q.error(s("dashboard.mustLoginToEnroll"));return}S.mutate(j)};return y?n.jsx(Xc,{count:t||3,columns:{sm:1,md:2,lg:3},aspectRatio:"portrait",showContent:!0}):N.length===0&&!y?i||l!=="all"?n.jsx(Tn,{variant:"no-results",icon:li,title:s("formations.emptyNoResults"),description:i?s("formations.emptyNoMatch",{term:i}):s("formations.emptyNoFilters"),size:"md"}):n.jsx(Tn,{variant:"no-data",icon:li,title:s("formations.emptyNoData"),description:s("formations.emptyNoDataDescription"),size:"md"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yf,{statusValue:l,onStatusChange:c,progressSelected:d,onProgressChange:u,sortValue:h,onSortChange:f,sortOptions:["recent","alphabetical"]}),n.jsx(bf,{value:i,onChange:o,placeholder:s("search.formations"),className:"w-full max-w-xs"})]})}),n.jsx(vf,{className:$("grid gap-6 md:grid-cols-2 lg:grid-cols-3 items-stretch",e),children:N.map(j=>{j.created_at&&or(new Date(j.created_at));const v=j.status==="coming_soon"&&j.progressStatus!=="in_progress"&&j.progressStatus!=="completed";return n.jsxs(de,{className:$("relative overflow-hidden hover:shadow-lg transition-shadow h-full min-h-[480px] flex flex-col group",v&&"opacity-70 cursor-not-allowed"),children:[n.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{backgroundColor:v?"#4a5a4a":"#303b2e"},children:[j.thumbnail_url?n.jsx("img",{src:j.thumbnail_url,alt:j.title,className:"w-full h-full object-cover"}):n.jsx(li,{className:"h-16 w-16 text-forge-orange"}),j.progressStatus==="completed"&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"success",size:"sm",icon:Vr,iconPosition:"left",children:s("filters.progressOptions.completed")})}),j.progressStatus!=="completed"&&(j.progressStatus==="in_progress"||j.firstPathEnrolled)&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"enrolled",size:"sm",icon:Nn,iconPosition:"left",children:s("dashboard.enrolled")})}),j.status==="coming_soon"&&j.progressStatus!=="in_progress"&&j.progressStatus!=="completed"&&!j.firstPathEnrolled&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"coming-soon",size:"sm",icon:is,iconPosition:"left",children:s("filters.statusOptions.coming_soon")})}),j.status==="published"&&j.progressStatus!=="in_progress"&&j.progressStatus!=="completed"&&!j.firstPathEnrolled&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"default",size:"sm",icon:ar,iconPosition:"left",children:s("filters.statusOptions.available")})})]}),n.jsx(Be,{className:"flex-1 min-h-0 flex flex-col",children:n.jsx("div",{className:"space-y-2",children:n.jsx(qe,{className:"flex items-center gap-2 text-xl",children:j.title})})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Lt,{className:"h-4 w-4"}),s("formations.paths",{count:j.paths_count})]})}),j.paths&&j.paths.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-900",children:s("formations.learningPathsLabel")}),n.jsxs("div",{className:"space-y-1",children:[j.paths.slice(0,3).map((_,E)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[n.jsxs("span",{className:"text-blue-500 font-medium",children:[E+1,"."]}),n.jsx("span",{className:"truncate",children:_.title})]},_.id)),j.paths.length>3&&n.jsx("div",{className:"text-xs text-gray-500",children:s("formations.morePaths",{count:j.paths.length-3})})]})]}),j.status==="published"&&n.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[n.jsx(we,{to:IL(j.id),className:"flex-1 min-w-0",children:n.jsx(it,{variant:"outline",className:"w-full !bg-white hover:!bg-gray-50 hover:!text-forge-orange",children:s("formations.viewFormation")})}),j.paths&&j.paths.length>0&&(j.firstPathEnrolled?n.jsx(we,{to:ua(j.paths[0].id),className:"flex-1 min-w-0",children:n.jsx(it,{className:"w-full",children:s("common.buttons.continue")})}):n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(it,{className:"w-full",onClick:()=>k(j.paths[0].id),disabled:!r||m===j.paths[0].id,children:m===j.paths[0].id?s("dashboard.enrolling"):s("dashboard.enroll")})}))]})]})]},j.id)})})]})}function LM(){const{t}=je();return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("formations.title")}),n.jsx(Sn,{delayDuration:0,children:n.jsxs(xa,{children:[n.jsx(ba,{asChild:!0,children:n.jsx(Pi,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),n.jsx(_n,{children:n.jsx("p",{children:t("dashboard.home.formationsTooltip")})})]})})]}),n.jsx("p",{className:"text-gray-600",children:t("formations.subtitle")})]})}),n.jsx(F0,{})]})}function RM({limit:t,className:e}){const{user:s}=Ct(),{t:r}=je(),[a,i]=p.useState(null),o=Ht(),l=Ue(),{data:c=[],isLoading:d}=$e({queryKey:["comingSoonPaths",s==null?void 0:s.id],enabled:!0,staleTime:6e4,refetchOnWindowFocus:!1,keepPreviousData:!0,queryFn:async()=>{const{data:m,error:x}=await l.from("learning_paths").select(`
          id, title, description,
          courses(id)
        `).eq("status","coming_soon");if(x)throw x;const g=m??[],b=g.map(w=>w.id);let y={};return b.length>0&&(y=(await Promise.all(b.map(async N=>{const{data:S,error:k}=await l.rpc("get_waiting_list_count",{p_learning_path_id:N});return k?(console.error("Error fetching waitlist count",k),{id:N,count:0}):{id:N,count:S??0}}))).reduce((N,{id:S,count:k})=>(N[S]=k,N),{})),g.map(w=>({id:w.id,title:w.title,description:w.description??"",courseCount:Array.isArray(w.courses)?w.courses.length:0,waitingListCount:y[w.id]||0}))}}),u=Xe({mutationFn:async m=>{if(!s)throw new Error("Must be logged in to join waiting list");const{error:x}=await l.from("waiting_list").insert({user_id:s.id,learning_path_id:m,email:s.email||""});if(x)throw x.code==="23505"?new Error("You are already on this waiting list"):new Error(x.message||"Failed to join waiting list");return m},onMutate:m=>{i(m)},onSuccess:()=>{Q.success("You have been added to the waiting list!"),o.invalidateQueries({queryKey:["comingSoonPaths"]})},onError:m=>{console.error("Error joining waiting list:",m);const x=m instanceof Error?m.message:"Failed to join waiting list";Q.error(x)},onSettled:()=>i(null)}),h=async m=>{if(!s){Q.error("You must be logged in to join the waiting list");return}u.mutate(m)},f=t?c.slice(0,t):c;return d?n.jsx(Xc,{count:t||3,columns:{sm:1,md:2,lg:3},aspectRatio:"portrait",showContent:!0}):f.length===0?n.jsx(Tn,{variant:"no-data",icon:is,title:r("dashboard.comingSoonPaths.empty.title"),description:r("dashboard.comingSoonPaths.empty.description"),size:"md"}):n.jsx("div",{className:`grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${e}`,children:f.map(m=>n.jsxs(de,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx("div",{className:"flex items-start justify-between gap-2",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs(qe,{className:"text-lg flex items-center gap-2",children:[m.title,n.jsx(xe,{variant:"coming-soon",size:"md",icon:is,iconPosition:"left",children:"Coming Soon"})]}),n.jsx(ls,{className:"text-sm",children:m.description||"Get ready for an amazing learning journey!"})]})})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Lt,{className:"h-4 w-4"}),m.courseCount," courses"]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Rn,{className:"h-4 w-4"}),m.waitingListCount," on waitlist"]})]}),n.jsx(it,{onClick:()=>h(m.id),disabled:a===m.id,className:"w-full text-xs",variant:"outline",size:"sm",children:a===m.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Joining..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Notify Me"]})})]})]},m.id))})}function OM(){return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(is,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Coming Soon"}),n.jsx("p",{className:"text-gray-600",children:"Be the first to know when new learning paths launch"})]})]}),n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"Join the Waiting List"}),n.jsx("p",{className:"text-orange-800 text-sm",children:"Get notified as soon as these learning paths become available. Join the waiting list to secure your spot and receive exclusive updates."})]})]}),n.jsx(RM,{}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[n.jsx(Oc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Stay Updated"}),n.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"We're constantly working on new learning paths. Check back regularly or join our waiting lists to be the first to know when new content is available."})]})]})}const MM=It("rounded-xl transition-all duration-200",{variants:{variant:{default:"bg-card text-card-foreground border shadow-sm hover:shadow-md",elevated:"bg-card text-card-foreground shadow-md hover:shadow-lg",outlined:"bg-transparent border-2 hover:border-forge-orange",ghost:"bg-transparent hover:bg-accent/50",gradient:"bg-gradient-soft-green-visible text-card-foreground border-0 shadow-sm","gradient-brand":"bg-gradient-brand text-white border-0 shadow-md","gradient-success":"bg-gradient-soft-green text-card-foreground border-0 shadow-sm","gradient-warning":"bg-gradient-soft-yellow text-card-foreground border-0 shadow-sm","gradient-purple":"bg-gradient-soft-purple text-card-foreground border-0 shadow-sm","gradient-orange":"bg-gradient-soft-orange text-card-foreground border-0 shadow-sm"},size:{sm:"p-4",md:"p-card-padding",lg:"p-card-padding-lg"},hover:{true:"cursor-pointer hover:scale-[1.02]",false:""},interactive:{true:"hover:shadow-lg active:scale-[0.98]",false:""}},defaultVariants:{variant:"default",size:"md",hover:!1,interactive:!1}}),ja=p.forwardRef(({className:t,variant:e,size:s,hover:r,interactive:a,as:i="div",...o},l)=>n.jsx(i,{ref:l,className:$(MM({variant:e,size:s,hover:r,interactive:a}),t),...o}));ja.displayName="EnhancedCard";const IM=It("flex flex-col",{variants:{spacing:{none:"space-y-0",sm:"space-y-1",md:"space-y-1.5",lg:"space-y-2"}},defaultVariants:{spacing:"md"}}),wf=p.forwardRef(({className:t,spacing:e,...s},r)=>n.jsx("div",{ref:r,className:$(IM({spacing:e}),t),...s}));wf.displayName="EnhancedCardHeader";const DM=It("font-semibold leading-none tracking-tight",{variants:{size:{sm:"text-lg",md:"text-xl lg:text-2xl",lg:"text-2xl lg:text-3xl"}},defaultVariants:{size:"md"}}),jf=p.forwardRef(({className:t,size:e,as:s="h3",...r},a)=>n.jsx(s,{ref:a,className:$(DM({size:e}),t),...r}));jf.displayName="EnhancedCardTitle";const $M=It("text-forge-dark-600",{variants:{size:{sm:"text-xs",md:"text-sm",lg:"text-base"}},defaultVariants:{size:"md"}}),z0=p.forwardRef(({className:t,size:e,...s},r)=>n.jsx("p",{ref:r,className:$($M({size:e}),t),...s}));z0.displayName="EnhancedCardDescription";const FM=It("",{variants:{spacing:{none:"pt-0",sm:"pt-2",md:"pt-4",lg:"pt-6"}},defaultVariants:{spacing:"md"}}),Bi=p.forwardRef(({className:t,spacing:e,...s},r)=>n.jsx("div",{ref:r,className:$(FM({spacing:e}),t),...s}));Bi.displayName="EnhancedCardContent";const zM=It("flex items-center",{variants:{spacing:{none:"pt-0",sm:"pt-2",md:"pt-4",lg:"pt-6"},justify:{start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between"}},defaultVariants:{spacing:"md",justify:"start"}}),BM=p.forwardRef(({className:t,spacing:e,justify:s,...r},a)=>n.jsx("div",{ref:a,className:$(zM({spacing:e,justify:s}),t),...r}));BM.displayName="EnhancedCardFooter";function UM({className:t}){const{user:e}=Ct(),s=p.useMemo(()=>Ue(),[]),{t:r}=je(),[a,i]=p.useState(null),{isLoading:o}=$e({queryKey:["continueLearning",e==null?void 0:e.id],enabled:!!(e!=null&&e.id),queryFn:async()=>{const{data:l}=await s.from("user_progress").select("lesson_id").eq("user_id",e.id).order("completed_at",{ascending:!1}).limit(1).maybeSingle();if(!l)return null;const{data:c,error:d}=await s.from("lessons").select("modules(courses(id, title, description))").eq("id",l.lesson_id).single();if(d||!c)return null;const u=Array.isArray(c.modules)?c.modules[0]:c.modules,h=u?Array.isArray(u.courses)?u.courses[0]:u.courses:null;if(!h)return null;const f={id:h.id,title:h.title,description:h.description};return i(f),f}});return o?n.jsx(vM,{className:t,showHeader:!0,contentLines:2,showFooter:!0}):a?n.jsxs(ja,{variant:"gradient",size:"lg",className:t,"aria-label":r("dashboard.continueLearning.ariaLabel",{course:a.title}),children:[n.jsxs(wf,{children:[n.jsx(jf,{size:"lg",children:r("dashboard.continueLearning.title")}),n.jsx(z0,{size:"md",children:r("dashboard.continueLearning.subtitle")}),n.jsx("p",{className:"text-xl font-semibold pt-2 text-foreground",children:a.title})]}),n.jsx(Bi,{children:n.jsx(we,{to:Or(a.id),children:n.jsx(it,{size:"lg",withGradient:!0,className:"w-full md:w-auto","aria-label":r("common.buttons.continueLearning")+" - "+a.title,children:r("common.buttons.continueLearning")})})})]}):n.jsx(ja,{variant:"gradient",size:"lg",className:t,children:n.jsx(Tn,{variant:"no-data",icon:Lt,title:r("dashboard.continueLearning.empty.title"),description:r("dashboard.continueLearning.empty.description"),size:"sm"})})}const gg=It("",{variants:{variant:{default:"",gradient:"",minimal:""},colorScheme:{blue:"bg-gradient-soft-blue",green:"bg-gradient-soft-green",yellow:"bg-gradient-soft-yellow",purple:"bg-gradient-soft-purple",orange:"bg-gradient-soft-orange",brand:"bg-gradient-brand text-white"},size:{sm:"",md:"",lg:""}},defaultVariants:{variant:"default",colorScheme:"blue",size:"md"}}),B0=p.forwardRef(({className:t,variant:e="default",colorScheme:s,size:r="md",icon:a,label:i,value:o,description:l,trend:c,isLoading:d=!1,iconColor:u,cardVariant:h,...f},m)=>{const x=h||(e==="gradient"?"gradient":"default"),g={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"},b={sm:"text-2xl font-bold",md:"text-3xl font-bold",lg:"text-4xl font-bold"},y={sm:"text-xs",md:"text-sm",lg:"text-base"},w=()=>u||"text-forge-orange-600";return d?n.jsx(ja,{ref:m,variant:x,className:$(gg({variant:e,colorScheme:s}),t),...f,children:n.jsx(Bi,{spacing:"md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-20"}),n.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-24"})]}),n.jsx("div",{className:$("rounded-full bg-muted animate-pulse",g[r||"md"])})]})})}):n.jsxs(ja,{ref:m,variant:x,className:$(gg({variant:e,colorScheme:s}),"relative overflow-hidden",t),...f,children:[n.jsx(Bi,{spacing:"md",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsx("p",{className:$("font-medium text-forge-dark-700",y[r||"md"]),children:i}),n.jsx("p",{className:$(b[r||"md"],"tracking-tight"),children:o}),l&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l}),c&&n.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[c.direction==="up"&&n.jsx(oi,{className:"h-4 w-4 text-success"}),c.direction==="down"&&n.jsx(Vj,{className:"h-4 w-4 text-error"}),n.jsx("span",{className:$("text-xs font-medium",c.direction==="up"&&"text-success",c.direction==="down"&&"text-error",c.direction==="neutral"&&"text-muted-foreground"),children:c.value}),c.label&&n.jsx("span",{className:"text-xs text-muted-foreground",children:c.label})]})]}),a&&n.jsx("div",{className:$("rounded-full p-2 bg-background/50",g[r||"md"]),children:n.jsx(a,{className:$("h-full w-full",w())})})]})}),e==="gradient"&&n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"})]})});B0.displayName="StatCard";function VM(){const{user:t}=Ct(),e=p.useMemo(()=>Ue(),[]),{t:s}=je(),[r,a]=p.useState({totalXP:0,completedLessons:0,inProgressPaths:0,totalTimeSpent:0}),[i,o]=p.useState(!0);p.useEffect(()=>{if(!t)return;let c=!0;return(async()=>{const u=Date.now();c&&o(!0);try{const{data:h,error:f}=await e.from("user_progress").select("lesson_id, status").eq("user_id",t.id).in("status",["in_progress","completed"]);if(f)throw new Error(f.message||s("dashboard.userStats.errors.loadProgress"));const m=h||[],x=new Set(m.filter(v=>v.status==="completed").map(v=>v.lesson_id)),g=x.size,b=Array.from(new Set(m.map(v=>v.lesson_id).filter(Boolean))),y=50;let w=[];if(b.length>0)for(let v=0;v<b.length;v+=y){const _=b.slice(v,v+y),{data:E,error:R}=await e.from("lessons").select("id, xp_value, duration_minutes, modules(courses(path_id))").in("id",_);if(R)throw new Error(R.message||s("dashboard.userStats.errors.loadLessons"));w=w.concat(E||[])}let N=0,S=0;const k=new Set;w.forEach(v=>{var E,R,z;x.has(v.id)&&(N+=(v==null?void 0:v.xp_value)||0,S+=(v==null?void 0:v.duration_minutes)||0);const _=((R=(E=v==null?void 0:v.modules)==null?void 0:E.courses)==null?void 0:R.path_id)||((z=v==null?void 0:v.modules)==null?void 0:z.path_id);_&&k.add(_)});const j=k.size;c&&a({totalXP:N,completedLessons:g,inProgressPaths:j,totalTimeSpent:S})}catch(h){if(!c)return;console.error("Error fetching user statistics:",(h==null?void 0:h.message)||h),a({totalXP:0,completedLessons:0,inProgressPaths:0,totalTimeSpent:0})}finally{if(!c)return;const h=Date.now()-u,m=Math.max(0,600-h);setTimeout(()=>{c&&o(!1)},m)}})(),()=>{c=!1}},[t,e]);const l=[{label:s("dashboard.userStats.totalXp"),value:r.totalXP,icon:pn,colorScheme:"yellow"},{label:s("dashboard.userStats.completedLessons"),value:r.completedLessons,icon:Lt,colorScheme:"green"},{label:s("dashboard.userStats.activePaths"),value:r.inProgressPaths,icon:Es,colorScheme:"blue"},{label:s("dashboard.userStats.studyTime"),value:s("dashboard.userStats.studyTimeValue",{minutes:r.totalTimeSpent}),icon:is,colorScheme:"purple"}];return n.jsx("div",{className:"grid gap-card-gap md:grid-cols-4",children:l.map((c,d)=>n.jsx(B0,{label:c.label,value:c.value,icon:c.icon,colorScheme:c.colorScheme,variant:"gradient",isLoading:i,"aria-label":`${c.label}: ${c.value}`},d))})}function U0({limit:t,className:e}){const{user:s}=Ct(),{t:r,i18n:a}=je(),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,f]=p.useState(null),[m,x]=p.useState(""),[g,b]=p.useState("all"),[y,w]=p.useState([]),[N,S]=p.useState("recent"),k=Ht(),j=Ue(),v=a.language||bt,{data:_=[],isLoading:E}=$e({queryKey:["availablePaths",s==null?void 0:s.id,v],enabled:!0,staleTime:6e4,refetchOnWindowFocus:!1,placeholderData:O=>O,queryFn:async()=>{const{data:O,error:D}=await j.from("learning_paths").select(`
            id,
            title,
            description,
            status,
            courses(id, title, order),
            learning_path_localizations(*)
          `).in("status",["published","coming_soon"]);if(D)throw D;let W=[],C=[];const V={};if(s){const{data:P,error:B}=await j.from("user_enrollments").select("learning_path_id").eq("user_id",s.id).eq("is_active",!0);if(B)console.error("Error fetching enrollments:",B);else if(W=(P||[]).map(T=>T.learning_path_id),W.length>0){const T=W.map(async q=>{try{const{data:G,error:A}=await j.rpc("get_path_progress",{path_id:q,user_id:s.id});if(!A&&G!==null&&G!==void 0){const K=G;K===0?V[q]="not_started":K===100?V[q]="completed":V[q]="in_progress"}else V[q]="not_started"}catch{V[q]="not_started"}});await Promise.all(T)}try{const{data:T,error:q}=await j.rpc("get_user_waitlisted_paths");if(!q&&T)C=T.map(G=>G.learning_path_id);else{q&&q.code!=="42883"&&console.warn("RPC function failed, trying direct query:",q);const{data:G,error:A}=await j.from("waiting_list").select("learning_path_id").eq("user_id",s.id).not("learning_path_id","is",null);A?console.error("Error fetching waitlist entries (fallback):",A):G&&(C=G.map(K=>K.learning_path_id))}}catch{try{const{data:q,error:G}=await j.from("waiting_list").select("learning_path_id").eq("user_id",s.id).not("learning_path_id","is",null);!G&&q&&(C=q.map(A=>A.learning_path_id))}catch{}}}return(O??[]).map(P=>{const B=wk(P.learning_path_localizations??[],v,bt),T=(P.courses||[]).map(q=>({id:q.id,title:q.title,order:q.order??0})).filter(q=>q.id&&q.title).sort((q,G)=>q.order-G.order);return{id:P.id,title:(B==null?void 0:B.title)??P.title,description:(B==null?void 0:B.description)??P.description??"",status:P.status,isEnrolled:W.includes(P.id),isOnWaitlist:C.includes(P.id),courseCount:T.length,courses:T,progressStatus:V[P.id]||(W.includes(P.id),"not_started")}})}}),R=Xe({mutationFn:async O=>{if(!s)throw new Error(r("dashboard.errors.notAuthenticated"));const{error:D}=await j.from("user_enrollments").insert({user_id:s.id,learning_path_id:O});if(D)throw new Error(D.message||r("dashboard.errors.failedToEnroll"));return O},onMutate:O=>{o(O)},onSuccess:()=>{Q.success(r("dashboard.enrollSuccess")),k.invalidateQueries({queryKey:["availablePaths"]}),k.invalidateQueries({queryKey:["myPaths"]})},onError:O=>{console.error("Error enrolling:",O),Q.error(r("dashboard.enrollError"))},onSettled:()=>o(null)}),z=async O=>{if(!s){Q.error(r("dashboard.mustLoginToEnroll"));return}R.mutate(O)},F=Xe({mutationFn:async O=>{var V,P,B,T;if(!s||!s.id)throw new Error("Must be logged in to join waiting list");const{data:D}=await j.from("waiting_list").select("id, created_at").eq("user_id",s.id).eq("learning_path_id",O).maybeSingle();if(D)return{pathId:O,alreadyOnList:!0};let W=null,C=null;try{const{data:q,error:G}=await j.rpc("add_to_waiting_list",{p_learning_path_id:O,p_formation_id:null,p_email:s.email||""});G?C=G:W=q}catch(q){C=q}if(C&&(C.code==="42883"||(V=C.message)!=null&&V.includes("function")||(P=C.message)!=null&&P.includes("does not exist"))){const{data:q,error:G}=await j.from("waiting_list").insert({user_id:s.id,learning_path_id:O,email:s.email||""}).select().single();if(G){if(console.error("Error inserting into waiting_list:",G),G.code==="23505")return{pathId:O,alreadyOnList:!0};throw new Error(G.message||"Failed to join waiting list")}if(q)return{pathId:O,alreadyOnList:!1}}else if(C){if(console.error("Error adding to waiting list via RPC:",C),(B=C.message)!=null&&B.includes("already")||(T=C.message)!=null&&T.includes("unique")||C.code==="23505")return{pathId:O,alreadyOnList:!0};throw new Error(C.message||"Failed to join waiting list")}return W?{pathId:O,alreadyOnList:!1}:{pathId:O,alreadyOnList:!1}},onMutate:async O=>{c(O),await k.cancelQueries({queryKey:["availablePaths",s==null?void 0:s.id]});const D=k.getQueryData(["availablePaths",s==null?void 0:s.id]);return D&&k.setQueryData(["availablePaths",s==null?void 0:s.id],W=>W&&W.map(C=>C.id===O?{...C,isOnWaitlist:!0}:C)),{previousPaths:D}},onSuccess:(O,D,W)=>{O.alreadyOnList?Q.info("You are already on the waiting list for this path!"):Q.success("You have been added to the waiting list! You will receive an email when this path becomes available."),k.invalidateQueries({queryKey:["availablePaths",s==null?void 0:s.id]})},onError:(O,D,W)=>{console.error("Error joining waiting list:",O);const C=O instanceof Error?O.message:"Failed to join waiting list";W!=null&&W.previousPaths&&k.setQueryData(["availablePaths",s==null?void 0:s.id],W.previousPaths),C.includes("already on")||C.includes("already")?(Q.info("You are already on the waiting list for this path!"),k.invalidateQueries({queryKey:["availablePaths",s==null?void 0:s.id]}),k.refetchQueries({queryKey:["availablePaths",s==null?void 0:s.id]})):Q.error(C)},onSettled:()=>c(null)}),L=async O=>{if(!s){Q.error("You must be logged in to join the waiting list");return}F.mutate(O)},U=Xe({mutationFn:async O=>{if(!s||!s.id)throw new Error("Must be logged in to leave waiting list");const{error:D}=await j.from("waiting_list").delete().eq("user_id",s.id).eq("learning_path_id",O);if(D)throw new Error(D.message||"Failed to leave waiting list");return O},onMutate:async O=>{u(O),await k.cancelQueries({queryKey:["availablePaths",s==null?void 0:s.id]});const D=k.getQueryData(["availablePaths",s==null?void 0:s.id]);return D&&k.setQueryData(["availablePaths",s==null?void 0:s.id],W=>W&&W.map(C=>C.id===O?{...C,isOnWaitlist:!1}:C)),{previousPaths:D}},onSuccess:()=>{Q.success("You have been removed from the waiting list."),k.invalidateQueries({queryKey:["availablePaths",s==null?void 0:s.id]})},onError:(O,D,W)=>{console.error("Error leaving waiting list:",O);const C=O instanceof Error?O.message:"Failed to leave waiting list";Q.error(C),W!=null&&W.previousPaths&&k.setQueryData(["availablePaths",s==null?void 0:s.id],W.previousPaths)},onSettled:()=>u(null)}),J=async O=>{if(!s){Q.error("You must be logged in to leave the waiting list");return}U.mutate(O)},Y=p.useMemo(()=>{let O=[..._];if(g!=="all"&&(O=O.filter(D=>g==="available"?D.status==="published":g==="coming_soon"?D.status==="coming_soon":!0)),y.length>0&&(O=O.filter(D=>y.includes(D.progressStatus||"not_started"))),m.trim()){const D=m.toLowerCase();O=O.filter(W=>W.title.toLowerCase().includes(D)||W.description&&W.description.toLowerCase().includes(D))}return O.sort((D,W)=>{const C=V=>V.status==="coming_soon"?3:V.isEnrolled||V.progressStatus==="in_progress"?0:V.progressStatus==="not_started"?1:V.progressStatus==="completed"?2:4;switch(N){case"recent":const V=C(D)-C(W);return V!==0?V:D.title.localeCompare(W.title);case"alphabetical":const P=C(D)-C(W);return P!==0?P:D.title.localeCompare(W.title);case"path_order":default:const B=C(D)-C(W);return B!==0?B:D.title.localeCompare(W.title)}}),O},[_,g,y,m,N]);if(E)return n.jsx(Xc,{count:t||6,columns:{sm:1,md:2,lg:3},aspectRatio:"portrait",showContent:!0});const I=typeof t=="number"&&t>0?Y.slice(0,t):Y;return n.jsxs("div",{className:e,children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yf,{statusValue:g,onStatusChange:b,progressSelected:y,onProgressChange:w,sortValue:N,onSortChange:S,sortOptions:["recent","alphabetical","path_order"]}),n.jsx(bf,{value:m,onChange:x,placeholder:r("search.learningPaths"),className:"w-full max-w-xs"})]})}),I.length===0&&!E&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:r(m||g!=="all"?"learningPaths.emptyNoMatch":"learningPaths.emptyNoData")})}),I.length>0&&n.jsx(vf,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 items-stretch",children:I.map(O=>{var V;const D=O.status==="coming_soon",W=O.courseCount||((V=O.courses)==null?void 0:V.length)||0,C=O.courses??[];return n.jsxs(de,{className:$("relative overflow-hidden hover:shadow-lg transition-shadow h-full min-h-[480px] flex flex-col group",D&&"opacity-70 cursor-not-allowed"),children:[n.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{backgroundColor:D?"#4a5a4a":"#303b2e"},children:[n.jsx(wo,{className:"h-16 w-16 text-forge-orange"}),O.progressStatus==="completed"&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"success",size:"sm",icon:Vr,iconPosition:"left",children:r("filters.progressOptions.completed")})}),O.progressStatus!=="completed"&&(O.progressStatus==="in_progress"||O.isEnrolled)&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"enrolled",size:"sm",icon:Nn,iconPosition:"left",children:r("dashboard.enrolled")})}),O.status==="coming_soon"&&O.progressStatus!=="in_progress"&&O.progressStatus!=="completed"&&!O.isEnrolled&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"coming-soon",size:"sm",icon:is,iconPosition:"left",children:r("filters.statusOptions.coming_soon")})}),O.status==="published"&&O.progressStatus!=="in_progress"&&O.progressStatus!=="completed"&&!O.isEnrolled&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"default",size:"sm",icon:ar,iconPosition:"left",children:r("filters.statusOptions.available")})})]}),n.jsx(Be,{className:"flex-1 min-h-0 flex flex-col",children:n.jsx("div",{className:"space-y-2",children:n.jsx(qe,{className:"flex items-center gap-2 text-xl",children:O.title})})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Lt,{className:"h-4 w-4"}),r("dashboard.availablePaths.courses",{count:W})]})}),C.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-900",children:r("dashboard.availablePaths.coursesLabel")}),n.jsxs("div",{className:"space-y-1",children:[C.slice(0,3).map((P,B)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[n.jsxs("span",{className:"text-blue-500 font-medium",children:[B+1,"."]}),n.jsx("span",{className:"truncate",children:P.title})]},P.id)),C.length>3&&n.jsx("div",{className:"text-xs text-gray-500",children:r("dashboard.availablePaths.moreCourses",{count:C.length-3})})]})]}),O.status==="published"&&n.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[n.jsx(we,{to:ua(O.id),className:"flex-1 min-w-0",children:n.jsx(it,{variant:"outline",className:"w-full !bg-white hover:!bg-gray-50 hover:!text-forge-orange",children:r("dashboard.availablePaths.viewPath")})}),O.isEnrolled?n.jsx(we,{to:ua(O.id),className:"flex-1 min-w-0",children:n.jsx(it,{className:"w-full",children:r("common.buttons.continue")})}):n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(it,{className:"w-full",onClick:()=>z(O.id),disabled:!s||i===O.id,children:i===O.id?r("dashboard.enrolling"):r("dashboard.enroll")})})]}),D&&n.jsx("div",{className:"mt-4",children:O.isOnWaitlist?n.jsx(it,{onClick:()=>J(O.id),onMouseEnter:()=>f(O.id),onMouseLeave:()=>f(null),disabled:d===O.id,className:"w-full",variant:"outline",size:"sm",children:d===O.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),r("courses.leaving")]}):h===O.id?n.jsxs(n.Fragment,{children:[n.jsx(bs,{className:"h-4 w-4 mr-2"}),r("courses.leave")]}):n.jsxs(n.Fragment,{children:[n.jsx(bo,{className:"h-4 w-4 mr-2"}),r("courses.onWaitlist")]})}):n.jsx(it,{onClick:()=>L(O.id),disabled:l===O.id,className:"w-full",variant:"outline",size:"sm",children:l===O.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),r("courses.joining")]}):n.jsxs(n.Fragment,{children:[n.jsx(Oc,{className:"h-4 w-4 mr-2"}),r("courses.notifyMe")]})})})]})]},O.id)})})]})}const V0=p.forwardRef(({className:t,value:e,...s},r)=>n.jsx(eb,{ref:r,className:$("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:n.jsx(Hj,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));V0.displayName=eb.displayName;function HM({className:t}){const{user:e}=Ct(),s=p.useMemo(()=>Ue(),[]),{t:r}=je(),{data:a=[],isLoading:i}=$e({queryKey:["learningHabits",e==null?void 0:e.id],enabled:!!(e!=null&&e.id),staleTime:6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!0,keepPreviousData:!0,queryFn:async()=>{const{data:u,error:h}=await s.from("user_progress").select("completed_at").eq("user_id",e.id).eq("status","completed").not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(200);if(h)throw new Error(h.message||r("dashboard.learningHabits.loadError"));return u}}),{streakDays:o,weekCount:l,weekSeries:c}=p.useMemo(()=>{const u=new Map;for(const g of a){if(!g.completed_at)continue;const y=new Date(g.completed_at).toISOString().slice(0,10);u.set(y,(u.get(y)||0)+1)}const h=new Date;h.setHours(0,0,0,0);let f=0;for(let g=new Date(h);;g.setDate(g.getDate()-1)){const b=g.toISOString().slice(0,10),y=u.get(b)||0;if(f===0&&y===0)break;if(y>0)f+=1;else break}const m=[];let x=0;for(let g=6;g>=0;g--){const b=new Date(h);b.setDate(h.getDate()-g);const y=b.toISOString().slice(0,10),w=u.get(y)||0;m.push(w),x+=w}return{streakDays:f,weekCount:x,weekSeries:m}},[a]),d=i?"-":r("dashboard.learningHabits.dayCount",{count:o});return n.jsxs(ja,{variant:"gradient",size:"lg",className:`h-full min-h-[220px] flex flex-col ${t||""}`,children:[n.jsx(wf,{children:n.jsx(jf,{size:"md",children:r("dashboard.learningHabits.title")})}),n.jsxs(Bi,{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:r("dashboard.learningHabits.currentStreak")}),n.jsx("div",{className:"text-2xl font-semibold",children:d})]})}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-1",children:n.jsx("div",{className:"text-sm text-gray-600",children:r("dashboard.learningHabits.weeklyGoal")})}),n.jsx(V0,{value:Math.min(100,o/7*100)})]}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:c.map((u,h)=>n.jsx("div",{className:"flex flex-col items-center gap-1",children:n.jsx("div",{className:"w-6 rounded bg-forge-orange-600 shadow-sm",style:{height:Math.max(6,Math.min(28,u*8))},title:r("dashboard.learningHabits.completions",{count:u})})},h))})]})]})}class cn extends p.Component{constructor(){super(...arguments);Do(this,"state",{hasError:!1})}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error("ErrorBoundary caught an error:",s,r)}render(){if(this.state.hasError){const s=_t.t.bind(_t);return this.props.fallback||n.jsxs("div",{style:{padding:"2rem",textAlign:"center",fontFamily:"system-ui, sans-serif",maxWidth:"600px",margin:"0 auto"},children:[n.jsx("h1",{children:s("errorBoundary.title")}),n.jsx("p",{children:s("errorBoundary.description")}),n.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:s("errorBoundary.reload")}),!1]})}return this.props.children}}function WM(){const{user:t}=Ct(),{t:e}=je(),s=()=>{var r,a;return(r=t==null?void 0:t.user_metadata)!=null&&r.full_name?t.user_metadata.full_name:(a=t==null?void 0:t.user_metadata)!=null&&a.name?t.user_metadata.name:t!=null&&t.email?t.email.split("@")[0]:e("common.labels.user")};return n.jsx(cn,{children:n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"inline-flex items-center text-sm rounded-full bg-forge-cream text-forge-dark px-2 py-0.5",children:[n.jsxs("span",{children:[e("dashboard.home.badge"),""]}),n.jsx("span",{className:"font-medium",children:s()}),n.jsx("span",{children:e("dashboard.home.headlineSuffix")})]})}),n.jsx("div",{className:"grid grid-cols-12 gap-6",children:n.jsxs("div",{className:"col-span-12 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[n.jsx("div",{className:"col-span-12 xl:col-span-8",children:n.jsx(cn,{children:n.jsx(UM,{className:"mb-0"})})}),n.jsx("div",{className:"col-span-12 xl:col-span-4",children:n.jsx(cn,{children:n.jsx(HM,{className:"mb-0"})})})]}),n.jsx(cn,{children:n.jsx(VM,{})})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:e("formations.title")}),n.jsx(Sn,{delayDuration:0,children:n.jsxs(xa,{children:[n.jsx(ba,{asChild:!0,children:n.jsx(Pi,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),n.jsx(_n,{children:n.jsx("p",{children:e("dashboard.home.formationsTooltip")})})]})})]}),n.jsx(we,{to:Cn,className:"text-forge-orange hover:underline",children:e("dashboard.home.viewAllFormations")})]}),n.jsx(cn,{children:n.jsx(F0,{limit:3,className:"mt-2"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:e(ns[as])}),n.jsx(Sn,{delayDuration:0,children:n.jsxs(xa,{children:[n.jsx(ba,{asChild:!0,children:n.jsx(Pi,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),n.jsx(_n,{children:n.jsx("p",{children:e("dashboard.home.learningPathTooltip")})})]})})]}),n.jsx(we,{to:as,className:"text-forge-orange hover:underline",children:e("dashboard.home.exploreCta")})]}),n.jsx(cn,{children:n.jsx(U0,{limit:6,className:"mt-2"})})]})]})]})})}const qM={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},KM=(t,e,s)=>{let r;const a=qM[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",String(e)),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"em "+r:"h "+r:r},GM={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},JM={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},YM={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XM={date:ha({formats:GM,defaultWidth:"full"}),time:ha({formats:JM,defaultWidth:"full"}),dateTime:ha({formats:YM,defaultWidth:"full"})},ZM={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},QM=(t,e,s,r)=>{const a=ZM[t];return typeof a=="function"?a(e):a},eI={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},tI={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},sI={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},rI={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},nI={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},aI={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},iI=(t,e)=>{const s=Number(t);return(e==null?void 0:e.unit)==="week"?s+"":s+""},oI={ordinalNumber:iI,era:Fs({values:eI,defaultWidth:"wide"}),quarter:Fs({values:tI,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fs({values:sI,defaultWidth:"wide"}),day:Fs({values:rI,defaultWidth:"wide"}),dayPeriod:Fs({values:nI,defaultWidth:"wide",formattingValues:aI,defaultFormattingWidth:"wide"})},lI=/^(\d+)[o]?/i,cI=/\d+/i,dI={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},uI={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},hI={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},fI={any:[/1/i,/2/i,/3/i,/4/i]},mI={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},pI={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},gI={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},xI={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},bI={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},yI={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},vI={ordinalNumber:D0({matchPattern:lI,parsePattern:cI,valueCallback:t=>parseInt(t,10)}),era:zs({matchPatterns:dI,defaultMatchWidth:"wide",parsePatterns:uI,defaultParseWidth:"any"}),quarter:zs({matchPatterns:hI,defaultMatchWidth:"wide",parsePatterns:fI,defaultParseWidth:"any",valueCallback:t=>t+1}),month:zs({matchPatterns:mI,defaultMatchWidth:"wide",parsePatterns:pI,defaultParseWidth:"any"}),day:zs({matchPatterns:gI,defaultMatchWidth:"wide",parsePatterns:xI,defaultParseWidth:"any"}),dayPeriod:zs({matchPatterns:bI,defaultMatchWidth:"any",parsePatterns:yI,defaultParseWidth:"any"})},wI={code:"pt-BR",formatDistance:KM,formatLong:XM,formatRelative:QM,localize:oI,match:vI,options:{weekStartsOn:0,firstWeekContainsDate:1}},xg=t=>typeof t=="object"&&t!==null&&"code"in t&&"message"in t;function jI(){var v;const{formationId:t}=Rc(),e=p.useMemo(()=>Ue(),[]),s=Ht(),{user:r}=Ct(),{t:a,i18n:i}=je(),o=(v=i.language)!=null&&v.startsWith("pt")?wI:void 0,{data:l,isLoading:c,isError:d,error:u}=$e({queryKey:["formation-detail",t,r==null?void 0:r.id],enabled:!!t,queryFn:async()=>{if(!t)throw new Error("Formation not found");const{data:_,error:E}=await e.from("formations").select(`
          id, title, description, thumbnail_url, created_at, published_at, status,
          formation_paths(
            order,
            learning_paths(id, title, status, courses(id, title, order))
          )
        `).eq("id",t).single();if(E||!_)throw E??new Error("Formation not found");const R=_,z=(R.formation_paths??[]).map(Y=>{if(!Y.learning_paths)return null;const I=Y.learning_paths,O=(I.courses||[]).map(D=>({id:D.id,title:D.title,order:D.order??0})).filter(D=>D.id&&D.title).sort((D,W)=>D.order-W.order);return{id:I.id,title:I.title,order:Y.order??0,status:I.status,courses:O}}).filter(Y=>!!Y).sort((Y,I)=>Y.order-I.order),{data:F,error:L}=await e.rpc("get_formation_waiting_list_count",{p_formation_id:t});if(L)throw L;let U=!1;if(r!=null&&r.id){const{data:Y,error:I}=await e.from("waiting_list").select("id").eq("formation_id",t).eq("user_id",r.id).maybeSingle();if(I)throw I;U=!!Y}let J=[];if(r!=null&&r.id&&z.length>0){const Y=z.map(O=>O.id),{data:I}=await e.from("user_enrollments").select("learning_path_id").eq("user_id",r.id).eq("is_active",!0).in("learning_path_id",Y);J=(I||[]).map(O=>O.learning_path_id).filter(O=>!!O)}return{id:R.id,title:R.title,description:R.description,thumbnail_url:R.thumbnail_url,created_at:R.created_at,published_at:R.published_at,status:R.status,paths:z,waitingListCount:F??0,isUserOnWaitlist:U,enrolledPathIds:J}}}),h=Xe({mutationFn:async()=>{if(!t)throw new Error("Formation not found");if(!r)throw new Error(a("formationDetail.mustLoginToJoinWaitlist"));const{error:_}=await e.from("waiting_list").insert({formation_id:t,user_id:r.id,email:r.email??""});if(_)throw _},onSuccess:()=>{Q.success(a("formationDetail.addedToWaitlist")),s.invalidateQueries({queryKey:["formation-detail",t,r==null?void 0:r.id]})},onError:_=>{if(xg(_)&&_.code==="23505"){Q.info(a("formationDetail.alreadyOnWaitlist")),s.invalidateQueries({queryKey:["formation-detail",t,r==null?void 0:r.id]});return}const E=xg(_)||_ instanceof Error?_.message:a("formationDetail.joinWaitlistFailed");Q.error(E)}}),[f,m]=p.useState(null),x=Xe({mutationFn:async _=>{if(!r)throw new Error(a("dashboard.mustLoginToEnroll"));const{error:E}=await e.from("user_enrollments").insert({user_id:r.id,learning_path_id:_});if(E)throw new Error(E.message||a("dashboard.errors.failedToEnroll"));return _},onMutate:_=>m(_),onSuccess:()=>{Q.success(a("dashboard.enrollSuccess")),s.invalidateQueries({queryKey:["formation-detail",t,r==null?void 0:r.id]}),s.invalidateQueries({queryKey:["availablePaths"]}),s.invalidateQueries({queryKey:["myPaths"]}),s.invalidateQueries({queryKey:["pathOverview"]})},onError:_=>{console.error("Enroll error:",_),Q.error(a("dashboard.enrollError"))},onSettled:()=>m(null)}),g=_=>{if(!r){Q.error(a("dashboard.mustLoginToEnroll"));return}x.mutate(_)};if(c)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"animate-pulse space-y-4",children:[n.jsx("div",{className:"h-8 w-40 rounded bg-gray-200"}),n.jsx("div",{className:"h-10 w-2/3 rounded bg-gray-200"}),n.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-200"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[...Array(2)].map((_,E)=>n.jsxs(de,{className:"animate-pulse",children:[n.jsxs(Be,{children:[n.jsx("div",{className:"h-5 w-1/2 rounded bg-gray-200"}),n.jsx("div",{className:"h-4 w-2/3 rounded bg-gray-100"})]}),n.jsx(oe,{children:n.jsx("div",{className:"h-10 w-full rounded bg-gray-100"})})]},E))})]});if(d||!l)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(we,{to:Cn,className:"inline-flex items-center gap-2 text-sm text-forge-orange hover:underline",children:[n.jsx(Hf,{className:"h-4 w-4"})," ",a("formationDetail.backToFormations")]}),n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/80",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:u instanceof Error?u.message:a("formationDetail.loadError")})})]});const b=l.created_at?or(new Date(l.created_at),{addSuffix:!0,locale:o}):null,y=l.published_at?or(new Date(l.published_at),{addSuffix:!0,locale:o}):null,w=l.status==="coming_soon",N=h.isPending||l.isUserOnWaitlist,S=l.paths.find(_=>_.status==="published"),k=l.enrolledPathIds.length>0,j=S?l.enrolledPathIds.includes(S.id):!1;return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs(we,{to:Cn,className:"inline-flex items-center gap-2 text-sm text-forge-orange hover:underline",children:[n.jsx(Hf,{className:"h-4 w-4"})," ",a("formationDetail.backToFormations")]}),n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:justify-between md:items-start",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("h1",{className:"text-3xl font-bold text-forge-dark",children:l.title}),n.jsx(xe,{variant:w?"coming-soon":k&&l.status==="published"?"enrolled":l.status==="published"?"available":"outline",icon:k&&l.status==="published"?Nn:l.status==="published"?ar:void 0,iconPosition:"left",children:w?a("filters.statusOptions.coming_soon"):k&&l.status==="published"?a("dashboard.enrolled"):l.status==="published"?a("filters.statusOptions.available"):a("filters.statusOptions.draft")})]}),n.jsx("p",{className:"text-forge-gray max-w-2xl",children:l.description||a("formationDetail.descriptionFallback")}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-forge-gray",children:[n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Lt,{className:"h-4 w-4"}),a("formationDetail.learningPathsCount",{count:l.paths.length})]}),w&&n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Rn,{className:"h-4 w-4"}),l.waitingListCount," ",a("formationDetail.onWaitingList")]}),b&&n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(is,{className:"h-4 w-4"}),a("formationDetail.createdAgo",{date:b})]}),y&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-forge-orange",children:[n.jsx(is,{className:"h-4 w-4"}),a("formationDetail.publishedAgo",{date:y})]})]})]}),n.jsx("div",{className:"flex flex-col gap-2",children:w?n.jsxs(n.Fragment,{children:[n.jsx(it,{onClick:()=>h.mutate(),disabled:N||!r,className:"min-w-[220px]",variant:l.isUserOnWaitlist?"outline":"primary",children:l.isUserOnWaitlist?a("formationDetail.onWaitlist"):h.isPending?a("formationDetail.joining"):a(r?"formationDetail.joinWaitlist":"formationDetail.signInToJoin")}),!r&&n.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"You must be signed in to join the waiting list."}),n.jsx("p",{className:"text-xs text-muted-foreground max-w-xs",children:"We will notify you as soon as this formation opens for enrollment."})]}):S?n.jsx(we,{to:ua(S.id),children:n.jsx(it,{className:"min-w-[220px]",withGradient:!0,children:a(j?"common.buttons.continue":"formationDetail.startLearning")})}):n.jsx(it,{className:"min-w-[220px]",variant:"outline",disabled:!0,children:a("formationDetail.pathsComingSoon")})})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-forge-dark",children:a("formationDetail.includedPaths")}),l.paths.length===0?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:a("formationDetail.pathsAddedSoon")})}):n.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 items-stretch",children:l.paths.map(_=>{var U;const E=_.status==="coming_soon",R=_.status==="draft",z=l.enrolledPathIds.includes(_.id),F=((U=_.courses)==null?void 0:U.length)??0,L=_.courses??[];return n.jsxs(de,{className:$("relative rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden hover:shadow-lg transition-shadow h-full min-h-[480px] flex flex-col group",(E||R)&&"opacity-70 cursor-not-allowed"),children:[n.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{backgroundColor:E||R?"#4a5a4a":"#303b2e"},children:[n.jsx(wo,{className:"h-16 w-16 text-forge-orange"}),_.status==="published"&&z&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"enrolled",size:"sm",icon:Nn,iconPosition:"left",children:a("dashboard.enrolled")})}),_.status==="published"&&!z&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"default",size:"sm",icon:ar,iconPosition:"left",children:a("filters.statusOptions.available")})}),_.status==="coming_soon"&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"coming-soon",size:"sm",icon:is,iconPosition:"left",children:a("filters.statusOptions.coming_soon")})}),_.status==="draft"&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"outline",size:"sm",children:a("filters.statusOptions.draft")})})]}),n.jsx(Be,{className:"flex-1 min-h-0 flex flex-col",children:n.jsx("div",{className:"space-y-2",children:n.jsx(qe,{className:"flex items-center gap-2 text-xl",children:_.title})})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Lt,{className:"h-4 w-4"}),a("dashboard.availablePaths.courses",{count:F})]})}),L.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-900",children:a("dashboard.availablePaths.coursesLabel")}),n.jsxs("div",{className:"space-y-1",children:[L.slice(0,3).map((J,Y)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[n.jsxs("span",{className:"text-blue-500 font-medium",children:[Y+1,"."]}),n.jsx("span",{className:"truncate",children:J.title})]},J.id)),L.length>3&&n.jsx("div",{className:"text-xs text-gray-500",children:a("dashboard.availablePaths.moreCourses",{count:L.length-3})})]})]}),_.status==="published"&&n.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[n.jsx(we,{to:ua(_.id),className:"flex-1 min-w-0",children:n.jsx(it,{variant:"outline",className:"w-full !bg-white hover:!bg-gray-50 hover:!text-forge-orange",children:a("dashboard.availablePaths.viewPath")})}),z?n.jsx(we,{to:ua(_.id),className:"flex-1 min-w-0",children:n.jsx(it,{className:"w-full",children:a("common.buttons.continue")})}):n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(it,{className:"w-full",onClick:()=>g(_.id),disabled:!r||f===_.id,children:f===_.id?a("dashboard.enrolling"):a("dashboard.enroll")})})]}),(E||R)&&n.jsx("div",{className:"mt-4",children:n.jsx(it,{variant:"ghost",className:"w-full",disabled:!0,children:a(E?"filters.statusOptions.coming_soon":"formationDetail.notYetPublished")})})]})]},_.id)})})]})]})}function NI({limit:t,className:e,showSearch:s=!0}){const{t:r}=je(),{user:a}=Ct(),i=p.useMemo(()=>Ue(),[]),o=Ht(),l=dr(),[c,d]=p.useState(""),[u,h]=p.useState("all"),[f,m]=p.useState([]),[x,g]=p.useState("path_order"),[b,y]=p.useState(null),[w,N]=p.useState(null),[S,k]=p.useState(null),{data:j=[],isLoading:v}=$e({queryKey:["publishedCourses"],staleTime:6e4,refetchOnWindowFocus:!1,queryFn:async()=>{const{data:I,error:O}=await i.from("courses").select("id, title, description, slug, duration_minutes, thumbnail_url, order, status, is_published, modules(id, title, order)").eq("is_published",!0).order("order",{ascending:!0});if(O)throw O;return(I||[]).map(D=>{const W=(D.modules||[]).map(C=>({id:C.id,title:C.title,order:C.order??0})).filter(C=>C.id&&C.title).sort((C,V)=>C.order-V.order);return{...D,modules:W}})}}),{data:_=[]}=$e({queryKey:["waitlistedCourses",a==null?void 0:a.id],enabled:!!(a!=null&&a.id)&&j.length>0,staleTime:6e4,refetchOnWindowFocus:!1,queryFn:async()=>{if(!(a!=null&&a.id))return[];const{data:I,error:O}=await i.from("waiting_list").select("course_id").eq("user_id",a.id).not("course_id","is",null);return O?(console.error("Error fetching waitlisted courses:",O),[]):(I||[]).map(D=>D.course_id).filter(Boolean)}}),{data:E={}}=$e({queryKey:["courseProgress",a==null?void 0:a.id],enabled:!!(a!=null&&a.id)&&j.length>0,staleTime:6e4,refetchOnWindowFocus:!1,queryFn:async()=>{const I=j.map(B=>B.id),{data:O}=await i.from("lessons").select("id, modules!inner(course_id)").in("modules.course_id",I);if(!O||O.length===0)return{};const D=O.map(B=>B.id),{data:W}=await i.from("user_progress").select("lesson_id, status").eq("user_id",a.id).in("lesson_id",D),C={};O.forEach(B=>{const T=Array.isArray(B.modules)?B.modules[0]:B.modules;T!=null&&T.course_id&&(C[B.id]=T.course_id)});const V={};I.forEach(B=>{V[B]={total:0,completed:0,inProgress:0}}),O.forEach(B=>{const T=C[B.id];T&&V[T]&&V[T].total++}),W==null||W.forEach(B=>{const T=C[B.lesson_id];T&&V[T]&&(B.status==="completed"?V[T].completed++:B.status==="in_progress"&&V[T].inProgress++)});const P={};return Object.entries(V).forEach(([B,T])=>{T.total===0?P[B]="not_started":T.completed===T.total?P[B]="completed":T.completed>0||T.inProgress>0?P[B]="in_progress":P[B]="not_started"}),P}}),R=Xe({mutationFn:async I=>{var C,V,P,B;if(!a||!a.id)throw new Error("Must be logged in to join waiting list");const{data:O}=await i.from("waiting_list").select("id, created_at").eq("user_id",a.id).eq("course_id",I).maybeSingle();if(O)return{courseId:I,alreadyOnList:!0};let D=null,W=null;try{const{data:T,error:q}=await i.rpc("add_to_waiting_list",{p_learning_path_id:null,p_formation_id:null,p_course_id:I,p_email:a.email||""});q?W=q:D=T}catch(T){W=T}if(W&&(W.code==="42883"||(C=W.message)!=null&&C.includes("function")||(V=W.message)!=null&&V.includes("does not exist"))){const{data:T,error:q}=await i.from("waiting_list").insert({user_id:a.id,course_id:I,email:a.email||""}).select().single();if(q){if(console.error("Error inserting into waiting_list:",q),q.code==="23505")return{courseId:I,alreadyOnList:!0};throw new Error(q.message||"Failed to join waiting list")}if(T)return{courseId:I,alreadyOnList:!1}}else if(W){if((P=W.message)!=null&&P.includes("already")||(B=W.message)!=null&&B.includes("unique")||W.code==="23505")return{courseId:I,alreadyOnList:!0};throw new Error(W.message||"Failed to join waiting list")}return D?{courseId:I,alreadyOnList:!1}:{courseId:I,alreadyOnList:!1}},onMutate:async I=>{y(I),await o.cancelQueries({queryKey:["waitlistedCourses",a==null?void 0:a.id]});const O=o.getQueryData(["waitlistedCourses",a==null?void 0:a.id]);return O&&o.setQueryData(["waitlistedCourses",a==null?void 0:a.id],D=>D&&[...D,I]),{previousWaitlisted:O}},onSuccess:I=>{I.alreadyOnList?Q.info("You are already on the waiting list for this course!"):Q.success("You have been added to the waiting list! You will receive an email when this course becomes available."),o.invalidateQueries({queryKey:["waitlistedCourses",a==null?void 0:a.id]})},onError:(I,O,D)=>{console.error("Error joining waiting list:",I);const W=I instanceof Error?I.message:"Failed to join waiting list";D!=null&&D.previousWaitlisted&&o.setQueryData(["waitlistedCourses",a==null?void 0:a.id],D.previousWaitlisted),W.includes("already on")||W.includes("already")?(Q.info("You are already on the waiting list for this course!"),o.invalidateQueries({queryKey:["waitlistedCourses",a==null?void 0:a.id]})):Q.error(W)},onSettled:()=>y(null)}),z=Xe({mutationFn:async I=>{if(!a||!a.id)throw new Error("Must be logged in to leave waiting list");const{error:O}=await i.from("waiting_list").delete().eq("user_id",a.id).eq("course_id",I);if(O)throw new Error(O.message||"Failed to leave waiting list");return I},onMutate:async I=>{N(I),await o.cancelQueries({queryKey:["waitlistedCourses",a==null?void 0:a.id]});const O=o.getQueryData(["waitlistedCourses",a==null?void 0:a.id]);return O&&o.setQueryData(["waitlistedCourses",a==null?void 0:a.id],D=>D&&D.filter(W=>W!==I)),{previousWaitlisted:O}},onSuccess:()=>{Q.success("You have been removed from the waiting list."),o.invalidateQueries({queryKey:["waitlistedCourses",a==null?void 0:a.id]})},onError:(I,O,D)=>{console.error("Error leaving waiting list:",I);const W=I instanceof Error?I.message:"Failed to leave waiting list";Q.error(W),D!=null&&D.previousWaitlisted&&o.setQueryData(["waitlistedCourses",a==null?void 0:a.id],D.previousWaitlisted)},onSettled:()=>N(null)}),F=async I=>{if(!a){Q.error("You must be logged in to join the waiting list");return}R.mutate(I)},L=async I=>{if(!a){Q.error("You must be logged in to leave the waiting list");return}z.mutate(I)},U=v,J=p.useMemo(()=>{let I=j.map(O=>({...O,progressStatus:E[O.id]||"not_started"}));if(u!=="all"&&(I=I.filter(O=>u==="available"?O.status==="published":u==="coming_soon"?O.status==="coming_soon":!0)),f.length>0&&(I=I.filter(O=>f.includes(O.progressStatus))),c.trim()){const O=c.toLowerCase();I=I.filter(D=>D.title.toLowerCase().includes(O)||D.description&&D.description.toLowerCase().includes(O))}return I.sort((O,D)=>{const W=C=>C.status==="coming_soon"?3:C.progressStatus==="in_progress"?0:C.progressStatus==="not_started"?1:C.progressStatus==="completed"?2:4;switch(x){case"recent":const C=W(O)-W(D);return C!==0?C:O.order-D.order;case"alphabetical":const V=W(O)-W(D);return V!==0?V:O.title.localeCompare(D.title);case"path_order":default:const P=W(O)-W(D);return P!==0?P:O.order-D.order}}),I},[j,E,c,u,f,x]);if(U)return n.jsx(Xc,{count:t||6,columns:{sm:1,md:2,lg:3},aspectRatio:"portrait",showContent:!0});const Y=t?J.slice(0,t):J;return j.length===0?n.jsx(Tn,{variant:"no-data",icon:Lt,title:r("courses.emptyNoData"),description:r("courses.emptyNoDataDescription"),size:"md"}):n.jsxs("div",{className:e,children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yf,{statusValue:u,onStatusChange:h,progressSelected:f,onProgressChange:m,sortValue:x,onSortChange:g,sortOptions:["recent","alphabetical","path_order"]}),s&&n.jsx(bf,{value:c,onChange:d,placeholder:r("search.courses"),className:"w-full max-w-xs"})]})}),Y.length===0&&(c||u!=="all"||f.length>0)&&n.jsx(Tn,{variant:"no-results",icon:Lt,title:r("courses.emptyNoResults"),description:r("courses.emptyNoMatch",{term:c}),size:"md"}),Y.length>0&&n.jsx(vf,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 items-stretch",children:Y.map(I=>{var B;const O=I.status!=="coming_soon",D=I.progressStatus==="in_progress",W=I.progressStatus==="completed",C=I.status==="coming_soon",V=_.includes(I.id),P=n.jsxs(de,{className:["relative rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden hover:shadow-lg transition-shadow h-full min-h-[480px] flex flex-col group",O?"cursor-pointer":"opacity-70 cursor-not-allowed"].join(" "),children:[n.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{backgroundColor:O?"#303b2e":"#4a5a4a"},children:[I.thumbnail_url?n.jsx("img",{src:I.thumbnail_url,alt:I.title,className:"w-full h-full object-cover"}):n.jsx(Ti,{className:"h-16 w-16 text-forge-orange"}),D&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"enrolled",size:"sm",icon:Nn,iconPosition:"left",children:r("dashboard.enrolled")})}),W&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"success",size:"sm",icon:Vr,iconPosition:"left",children:r("filters.progressOptions.completed")})}),I.status==="coming_soon"&&!D&&!W&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"coming-soon",size:"sm",icon:is,iconPosition:"left",children:r("filters.statusOptions.coming_soon")})}),O&&!D&&!W&&I.status!=="coming_soon"&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(xe,{variant:"default",size:"sm",icon:ar,iconPosition:"left",children:r("filters.statusOptions.available")})})]}),n.jsxs(Be,{className:"flex-1 min-h-0 flex flex-col space-y-2",children:[n.jsxs(qe,{className:"flex items-start gap-2 text-forge-dark tracking-normal text-lg md:text-xl leading-tight line-clamp-2 break-words flex-1",children:[n.jsx(Ti,{className:"h-4 w-4 mt-0.5 text-forge-orange shrink-0"}),n.jsx("span",{children:I.title})]}),n.jsx(ls,{className:"text-[13px] text-forge-gray line-clamp-3 min-h-[3.75rem]",children:I.description||r("courses.descriptionFallback")})]}),n.jsxs(oe,{className:"space-y-4 mt-auto",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Xx,{className:"h-4 w-4"}),r("courses.modules",{count:((B=I.modules)==null?void 0:B.length)||0})]}),I.duration_minutes&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(is,{className:"h-4 w-4"}),I.duration_minutes," min"]})]}),I.modules&&I.modules.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-900",children:r("courses.modulesLabel")}),n.jsxs("div",{className:"space-y-1",children:[I.modules.slice(0,3).map((T,q)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[n.jsxs("span",{className:"text-blue-500 font-medium",children:[q+1,"."]}),n.jsx("span",{className:"truncate",children:T.title})]},T.id)),I.modules.length>3&&n.jsx("div",{className:"text-xs text-gray-500",children:r("courses.moreModules",{count:I.modules.length-3})})]})]}),D?n.jsx(it,{className:"w-full text-sm py-2",size:"sm",withGradient:!0,onClick:T=>{T.preventDefault(),T.stopPropagation(),l(Or(I.id))},children:r("common.buttons.continueLearning")}):C?V?n.jsx(it,{onClick:()=>L(I.id),onMouseEnter:()=>k(I.id),onMouseLeave:()=>k(null),disabled:w===I.id,className:"w-full text-sm py-2",variant:"outline",size:"sm",children:w===I.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),r("courses.leaving")]}):S===I.id?n.jsxs(n.Fragment,{children:[n.jsx(bs,{className:"h-4 w-4 mr-2"}),r("courses.leave")]}):n.jsxs(n.Fragment,{children:[n.jsx(bo,{className:"h-4 w-4 mr-2"}),r("courses.onWaitlist")]})}):n.jsx(it,{onClick:()=>F(I.id),disabled:b===I.id,className:"w-full text-sm py-2",variant:"outline",size:"sm",children:b===I.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),r("courses.joining")]}):n.jsxs(n.Fragment,{children:[n.jsx(Oc,{className:"h-4 w-4 mr-2"}),r("courses.notifyMe")]})}):n.jsx(it,{className:"w-full text-sm py-2",size:"sm",withGradient:!0,onClick:T=>{T.preventDefault(),T.stopPropagation(),l(Or(I.id))},children:r("courses.startCourse")})]})]});return O?n.jsx(we,{to:Or(I.id),className:"block h-full rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:P},I.id):n.jsx("div",{className:"h-full",children:P},I.id)})})]})}function kI(){const{t}=je();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-forge-dark",children:t("courses.title")}),n.jsx(Sn,{delayDuration:0,children:n.jsxs(xa,{children:[n.jsx(ba,{asChild:!0,children:n.jsx(Pi,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),n.jsx(_n,{children:n.jsx("p",{children:t("dashboard.home.coursesTooltip")})})]})})]}),n.jsx("p",{className:"text-muted-foreground",children:t("courses.subtitle")})]}),n.jsx(NI,{})]})}function SI(){const{t}=je();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-forge-dark",children:t("learningPaths.title")}),n.jsx(Sn,{delayDuration:0,children:n.jsxs(xa,{children:[n.jsx(ba,{asChild:!0,children:n.jsx(Pi,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),n.jsx(_n,{children:n.jsx("p",{children:t("dashboard.home.learningPathTooltip")})})]})})]}),n.jsx("p",{className:"text-muted-foreground",children:t("learningPaths.subtitle")})]}),n.jsx(U0,{})]})}const H0="pt-BR",_I=(t,e)=>({fullName:t.full_name,email:e,country:t.country,city:t.city,languages:t.languages,communicationLanguage:t.communication_language??H0,yearsExperience:t.years_experience,stacks:t.stacks,skillsToDevelop:t.skills_to_develop,positionCompany:t.position_company,linkedinUrl:t.linkedin_url??void 0,githubUrl:t.github_url??void 0,walletAddress:t.wallet_address??void 0}),W0=(t,e)=>({user_id:e,wallet_address:t.walletAddress??null,full_name:t.fullName,country:t.country,city:t.city,languages:t.languages,years_experience:t.yearsExperience,stacks:t.stacks,skills_to_develop:t.skillsToDevelop,position_company:t.positionCompany,linkedin_url:t.linkedinUrl??null,github_url:t.githubUrl??null,communication_language:t.communicationLanguage}),CI=(t,e)=>({fullName:"",email:t,country:"",city:"",languages:[],communicationLanguage:e,yearsExperience:0,stacks:[],skillsToDevelop:[],positionCompany:"",linkedinUrl:void 0,githubUrl:void 0,walletAddress:void 0});async function TI(){var o;const t=Ue(),{data:{user:e},error:s}=await t.auth.getUser();if(s)throw s;if(!e)throw new Error("User not authenticated");const r=((o=e.user_metadata)==null?void 0:o.communication_language)??H0,{data:a,error:i}=await t.from("profiles").select("*").eq("user_id",e.id).maybeSingle();if(i)throw i;if(!a){const l=CI(e.email??"",r),c=W0(l,e.id),{error:d}=await t.from("profiles").insert(c);if(d)throw d;return l}return _I(a,e.email??"")}async function PI(t){var l;const e=Ue(),{data:{user:s},error:r}=await e.auth.getUser();if(r)throw r;if(!s)throw new Error("User not authenticated");const a=W0(t,s.id),{error:i}=await e.from("profiles").upsert(a,{onConflict:"user_id"});if(i)throw i;if(((l=s.user_metadata)==null?void 0:l.communication_language)!==t.communicationLanguage){const{error:c}=await e.auth.updateUser({data:{communication_language:t.communicationLanguage}});c&&console.warn("Failed to sync communication language with auth metadata",c)}}function EI({activeTab:t,onTabChange:e,selectedLocale:s,onLocaleChange:r,fullName:a,email:i,avatarUrl:o}){const{t:l}=je(),c=p.useMemo(()=>[{id:"personal",label:l("profile.sections.personal"),icon:Lc,description:l("profile.sections.personalDesc")},{id:"professional",label:l("profile.sections.professional"),icon:Pc,description:l("profile.sections.professionalDesc")},{id:"learning",label:l("profile.sections.learning"),icon:Lt,description:l("profile.sections.learningDesc")},{id:"career",label:l("profile.sections.career"),icon:Es,description:l("profile.sections.careerDesc")}],[l]),d=p.useMemo(()=>[{value:"en-US",label:l("profile.languageOptions.enUS")},{value:"pt-BR",label:l("profile.languageOptions.ptBR")}],[l]),u=(a==null?void 0:a.trim())||l("profile.sidebar.anonymousUser"),h=i||"",f=p.useMemo(()=>{const x=(u||h).split(" ").filter(Boolean);return x.length===0?"U":x.slice(0,2).map(g=>{var b;return((b=g[0])==null?void 0:b.toUpperCase())??""}).join("").padEnd(2,"U")},[u,h]);return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[n.jsx(Rl,{className:"h-4 w-4 text-orange-500"}),l("profile.sidebar.localeTitle")]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:l("profile.sidebar.localeDescription")}),n.jsxs(Pt,{value:s,onValueChange:r,children:[n.jsx(kt,{className:"mt-3",children:n.jsx(Rt,{placeholder:l("profile.sidebar.localePlaceholder")})}),n.jsx(St,{children:d.map(m=>n.jsx(Ye,{value:m.value,children:m.label},m.value))})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-3 border-t border-gray-100 pt-4",children:[n.jsxs(Gc,{className:"h-12 w-12",children:[o?n.jsx(Jc,{src:o,alt:u}):null,n.jsx(Yc,{children:f})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:h})]})]})]}),c.map(m=>{const x=m.icon,g=t===m.id;return n.jsx("button",{onClick:()=>e(m.id),className:$("w-full rounded-lg p-4 text-left transition-all duration-200","hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",g?"bg-orange-500 text-white shadow-md":"bg-white text-gray-700 hover:text-gray-900"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(x,{className:$("h-5 w-5",g?"text-white":"text-gray-500")}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:m.label}),n.jsx("div",{className:$("mt-1 text-sm",g?"text-orange-100":"text-gray-500"),children:m.description})]})]})},m.id)})]})}function el({title:t,description:e,children:s,className:r}){return n.jsxs("div",{className:$("bg-white rounded-lg shadow-sm border border-gray-200 p-6",r),children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t}),e&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e})]}),s]})}function hs({label:t,required:e=!1,error:s,description:r,children:a,className:i}){return n.jsxs("div",{className:$("space-y-2",i),children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[t,e&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a,r&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r}),s&&n.jsx("p",{className:"text-sm text-red-500",children:s})]})}function Mr({value:t,onChange:e,placeholder:s="Type and press Enter",className:r,disabled:a}){const[i,o]=p.useState(""),l=u=>{const h=u.trim();h&&!t.includes(h)&&(e([...t,h]),o(""))},c=u=>{e(t.filter(h=>h!==u))},d=u=>{u.key==="Enter"?(u.preventDefault(),l(i)):u.key==="Backspace"&&i===""&&t.length>0&&c(t[t.length-1])};return n.jsx("div",{className:$("space-y-2",r),children:n.jsxs("div",{className:"flex flex-wrap gap-2 min-h-[40px] p-2 border border-gray-300 rounded-lg bg-white focus-within:ring-2 focus-within:ring-orange-500 focus-within:border-orange-500",children:[t.map((u,h)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-800 text-sm rounded-md",children:[u,n.jsx("button",{type:"button",onClick:()=>c(u),disabled:a,className:"text-orange-600 hover:text-orange-800 disabled:opacity-50",children:n.jsx(bs,{className:"h-3 w-3"})})]},h)),n.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),onKeyDown:d,placeholder:t.length===0?s:"",disabled:a,className:"flex-1 min-w-[120px] outline-none text-sm bg-transparent placeholder-gray-400"})]})})}const AI=[{value:"Brazil",key:"brazil"},{value:"United States",key:"unitedStates"},{value:"Canada",key:"canada"},{value:"United Kingdom",key:"unitedKingdom"},{value:"Germany",key:"germany"},{value:"France",key:"france"},{value:"Spain",key:"spain"},{value:"Italy",key:"italy"},{value:"Netherlands",key:"netherlands"},{value:"Sweden",key:"sweden"},{value:"Norway",key:"norway"},{value:"Denmark",key:"denmark"},{value:"Finland",key:"finland"},{value:"Switzerland",key:"switzerland"},{value:"Austria",key:"austria"},{value:"Belgium",key:"belgium"},{value:"Portugal",key:"portugal"},{value:"Ireland",key:"ireland"},{value:"Australia",key:"australia"},{value:"New Zealand",key:"newZealand"},{value:"Japan",key:"japan"},{value:"South Korea",key:"southKorea"},{value:"Singapore",key:"singapore"},{value:"India",key:"india"},{value:"China",key:"china"},{value:"Mexico",key:"mexico"},{value:"Argentina",key:"argentina"},{value:"Chile",key:"chile"},{value:"Colombia",key:"colombia"},{value:"Peru",key:"peru"},{value:"Uruguay",key:"uruguay"},{value:"Paraguay",key:"paraguay"},{value:"Venezuela",key:"venezuela"},{value:"Ecuador",key:"ecuador"},{value:"Bolivia",key:"bolivia"},{value:"Guyana",key:"guyana"},{value:"Suriname",key:"suriname"},{value:"French Guiana",key:"frenchGuiana"}];function LI(){var R,z;const{t,i18n:e}=je(),{user:s}=Ct(),{toast:r}=Yb(),[a,i]=p.useState("personal"),[o,l]=p.useState(null),[c,d]=p.useState(!0),[u,h]=p.useState(!1),[f,m]=p.useState(!1),[x,g]=p.useState({}),b=p.useMemo(()=>AI.map(({value:F,key:L})=>({value:F,label:t(`common.countries.${L}`)})),[t]),y=p.useMemo(()=>[{value:"en-US",label:t("profile.languageOptions.enUS")},{value:"pt-BR",label:t("profile.languageOptions.ptBR")}],[t]);p.useEffect(()=>{w()},[]);const w=async()=>{try{d(!0);const F=await TI();s!=null&&s.email&&(F.email=s.email);const L=F.communicationLanguage||e.language||"pt-BR";F.communicationLanguage=L,L!==e.language&&e.changeLanguage(L),l(F),m(!1)}catch{r({title:t("common.errors.unexpectedError"),description:t("profile.messages.updateError")})}finally{d(!1)}},N=async()=>{if(!o)return;const F={};if(o.fullName.trim()||(F.fullName=t("profile.errors.fullNameRequired")),o.country.trim()||(F.country=t("profile.errors.countryRequired")),o.linkedinUrl&&!j(o.linkedinUrl)&&(F.linkedinUrl=t("profile.errors.invalidLinkedin")),o.githubUrl&&!j(o.githubUrl)&&(F.githubUrl=t("profile.errors.invalidGithub")),Object.keys(F).length>0){g(F),r({title:t("common.errors.unexpectedError"),description:t("profile.messages.validationError")});return}try{h(!0),await PI(o),g({}),m(!1),r({title:t("common.buttons.save"),description:t("profile.messages.updateSuccess")})}catch{r({title:t("common.errors.unexpectedError"),description:t("profile.messages.updateError")})}finally{h(!1)}},S=(F,L)=>{o&&(l(U=>U&&{...U,[F]:L}),m(!0),x[F]&&g({...x,[F]:void 0}))},k=F=>{S("communicationLanguage",F),e.changeLanguage(F)},j=F=>{try{return new URL(F),!0}catch{return!1}};if(c)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tt,{className:"h-6 w-6 animate-spin text-orange-500"}),n.jsx("span",{className:"text-gray-600",children:t("profile.loadingProfile")})]})});if(!o)return n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-600",children:t("profile.failedToLoad")}),n.jsx(te,{onClick:w,className:"mt-4",children:t("common.buttons.tryAgain")})]});const v=(o.fullName&&o.fullName.trim().length>0?o.fullName:(R=s==null?void 0:s.user_metadata)==null?void 0:R.full_name)??t("profile.sidebar.anonymousUser"),_=o.communicationLanguage,E=((z=s==null?void 0:s.user_metadata)==null?void 0:z.avatar_url)??null;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("profile.title")}),n.jsx("p",{className:"text-gray-600 mt-2",children:t("profile.subtitle")})]}),f&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[n.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:t("profile.unsavedChanges")})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsx(EI,{activeTab:a,onTabChange:i,selectedLocale:_,onLocaleChange:F=>k(F),fullName:v,email:o.email,avatarUrl:E})}),n.jsxs("div",{className:"lg:col-span-3",children:[a==="personal"&&n.jsx(el,{title:t("profile.sections.personal"),description:t("profile.sections.personalDesc"),children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(hs,{label:t("common.labels.fullName"),required:!0,error:x.fullName,children:n.jsxs("div",{className:"relative",children:[n.jsx(Lc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{value:o.fullName,onChange:F=>S("fullName",F.target.value),placeholder:t("common.placeholders.enterFullName"),className:"pl-10"})]})}),n.jsxs(hs,{label:t("common.labels.email"),required:!0,children:[n.jsxs("div",{className:"relative",children:[n.jsx(tb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{value:o.email,disabled:!0,className:"pl-10 bg-gray-50"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("profile.messages.emailNote")})]}),n.jsx(hs,{label:t("common.labels.country"),required:!0,error:x.country,children:n.jsxs("div",{className:"relative",children:[n.jsx(Wj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs(Pt,{value:o.country,onValueChange:F=>S("country",F),children:[n.jsx(kt,{className:"pl-10",children:n.jsx(Rt,{placeholder:t("common.placeholders.selectCountry")})}),n.jsx(St,{children:b.map(({value:F,label:L})=>n.jsx(Ye,{value:F,children:L},F))})]})]})}),n.jsx(hs,{label:t("common.labels.city"),children:n.jsxs("div",{className:"relative",children:[n.jsx(qj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{value:o.city,onChange:F=>S("city",F.target.value),placeholder:t("common.placeholders.enterCity"),className:"pl-10"})]})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(hs,{label:t("common.labels.languages"),description:t("profile.sections.personalDesc"),children:n.jsx(Mr,{value:o.languages,onChange:F=>S("languages",F),placeholder:t("common.placeholders.typeLanguage")})})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(hs,{label:t("profile.fields.languagePreference"),description:t("profile.fields.selectLanguage"),children:n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs(Pt,{value:o.communicationLanguage,onValueChange:F=>k(F),children:[n.jsx(kt,{className:"pl-10",children:n.jsx(Rt,{placeholder:t("profile.fields.selectLanguage")})}),n.jsx(St,{children:y.map(({value:F,label:L})=>n.jsx(Ye,{value:F,children:L},F))})]})]})})})]})}),a==="professional"&&n.jsx(el,{title:t("profile.sections.professional"),description:t("profile.sections.professionalDesc"),children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(hs,{label:t("profile.fields.yearsExperience"),children:n.jsxs("div",{className:"relative",children:[n.jsx(Pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{type:"number",min:"0",value:o.yearsExperience,onChange:F=>S("yearsExperience",parseInt(F.target.value)||0),placeholder:t("profile.fields.yearsExperiencePlaceholder"),className:"pl-10"})]})}),n.jsx(hs,{label:t("profile.fields.positionCompany"),children:n.jsxs("div",{className:"relative",children:[n.jsx(Kj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{value:o.positionCompany,onChange:F=>S("positionCompany",F.target.value),placeholder:t("profile.fields.positionPlaceholder"),className:"pl-10"})]})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(hs,{label:t("profile.fields.stacksDominated"),description:t("profile.fields.stacksDesc"),children:n.jsx(Mr,{value:o.stacks,onChange:F=>S("stacks",F),placeholder:t("profile.fields.stacksPlaceholder")})})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(hs,{label:t("profile.fields.skillsToDevelop"),description:t("profile.fields.skillsDesc"),children:n.jsx(Mr,{value:o.skillsToDevelop,onChange:F=>S("skillsToDevelop",F),placeholder:t("profile.fields.skillsPlaceholder")})})}),n.jsx(hs,{label:t("profile.fields.linkedinUrl"),error:x.linkedinUrl,children:n.jsxs("div",{className:"relative",children:[n.jsx(sb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{value:o.linkedinUrl,onChange:F=>S("linkedinUrl",F.target.value),placeholder:t("profile.fields.linkedinPlaceholder"),className:"pl-10"})]})}),n.jsx(hs,{label:t("profile.fields.githubUrl"),error:x.githubUrl,children:n.jsxs("div",{className:"relative",children:[n.jsx(Ec,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(ye,{value:o.githubUrl,onChange:F=>S("githubUrl",F.target.value),placeholder:t("profile.fields.githubPlaceholder"),className:"pl-10"})]})})]})}),a==="learning"&&n.jsx(el,{title:t("profile.sections.learning"),description:t("profile.sections.learningDesc"),children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Lt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t("profile.comingSoon.title")}),n.jsx("p",{className:"text-gray-600",children:t("profile.comingSoon.learning")})]})}),a==="career"&&n.jsx(el,{title:t("profile.sections.career"),description:t("profile.sections.careerDesc"),children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Es,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t("profile.comingSoon.title")}),n.jsx("p",{className:"text-gray-600",children:t("profile.comingSoon.career")})]})}),a==="personal"||a==="professional"?n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx(te,{onClick:N,disabled:u||!f,className:"bg-orange-500 hover:bg-orange-600 text-white",children:u?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"h-4 w-4 animate-spin mr-2"}),t("common.buttons.saving")]}):n.jsxs(n.Fragment,{children:[n.jsx(rb,{className:"h-4 w-4 mr-2"}),t("common.buttons.save")]})})}):null]})]})]})}function RI({children:t}){const{user:e,loading:s}=Ct(),r=cr();return s?n.jsx("div",{className:"min-h-[40vh] flex items-center justify-center text-gray-500",children:"Loading..."}):e?n.jsx(n.Fragment,{children:t}):n.jsx(Nh,{to:Wv,replace:!0,state:{from:r}})}const OI=t=>t?t.replace(/<[^>]+>/g,"").trim():"";function MI(){const t=p.useMemo(()=>Ue(),[]),{t:e}=je(),{data:s=[],isLoading:r}=$e({queryKey:["community-projects"],queryFn:async()=>{const{data:i,error:o}=await t.from("module_projects").select(`id, title, description, xp_value, is_active, created_at,
           module:modules(id, title, order, course:courses(id, title)),
           submissions:module_project_submissions(repository_url, submitted_at, user_id)`);if(o)throw o;return i??[]},onError:i=>{console.error("Error loading community projects",i),Q.error(e("projects.community.loadError"))}}),a=p.useMemo(()=>{const i=new Map;return s.forEach(o=>{if(!o.module)return;const l=o.module.id;i.has(l)||i.set(l,{module:o.module,projects:[]}),i.get(l).projects.push(o)}),Array.from(i.values()).sort((o,l)=>{var h,f;const c=(((h=o.module.course)==null?void 0:h.title)??"").localeCompare(((f=l.module.course)==null?void 0:f.title)??"");if(c!==0)return c;const d=o.module.order??Number.MAX_SAFE_INTEGER,u=l.module.order??Number.MAX_SAFE_INTEGER;return d!==u?d-u:o.module.title.localeCompare(l.module.title)})},[s]);return r?n.jsx(de,{className:"border border-dashed border-forge-cream/70 bg-white/90",children:n.jsxs(oe,{className:"flex items-center gap-3 p-8 text-forge-gray",children:[n.jsx(yo,{className:"h-5 w-5 animate-pulse text-forge-orange"}),e("projects.community.loading")]})}):a.length===0?n.jsx(de,{className:"border border-dashed border-forge-cream/70 bg-white/90",children:n.jsxs(oe,{className:"space-y-2 p-8 text-center text-forge-gray",children:[n.jsx("h2",{className:"text-xl font-semibold text-forge-dark",children:e("projects.community.title")}),n.jsx("p",{className:"text-sm",children:e("projects.community.empty")})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h1",{className:"text-3xl font-bold text-forge-dark",children:e("projects.community.title")}),n.jsx("p",{className:"text-sm text-forge-gray",children:e("projects.community.subtitle")})]}),n.jsx("div",{className:"grid gap-5",children:a.map(({module:i,projects:o})=>{var l;return n.jsxs(de,{className:"border border-forge-cream/70 bg-white/90",children:[n.jsxs(Be,{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(qe,{className:"text-xl text-forge-dark",children:i.title}),n.jsx(xe,{variant:"secondary",className:"bg-forge-cream text-forge-dark",children:e("projects.community.courseLabel",{course:((l=i.course)==null?void 0:l.title)??e("projects.community.unknownCourse")})})]}),n.jsx("p",{className:"text-xs text-forge-gray/80",children:e("projects.community.projectCount",{count:o.length})})]}),n.jsx(oe,{className:"space-y-4",children:o.slice().filter(c=>c.is_active??!0).sort((c,d)=>{const u=c.created_at?new Date(c.created_at).getTime():0,h=d.created_at?new Date(d.created_at).getTime():0;return u!==h?u-h:c.title.localeCompare(d.title)}).map((c,d)=>{const u=c.submissions??[],h=d+1;return n.jsx("div",{className:"rounded-lg border border-forge-cream/60 bg-white/80 p-4 shadow-sm",children:n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(xe,{variant:"outline",className:"border-forge-orange text-forge-orange",children:e("projects.community.projectOrder",{order:h})}),n.jsx("h3",{className:"text-lg font-semibold text-forge-dark",children:c.title}),typeof c.xp_value=="number"&&n.jsx(xe,{variant:"secondary",className:"bg-forge-cream text-forge-dark",children:e("projects.community.xpValue",{xp:c.xp_value})})]}),c.description&&n.jsx("p",{className:"text-sm text-forge-gray/90",children:OI(c.description)}),u.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-forge-cream/70 bg-forge-cream/30 p-4 text-sm text-forge-gray",children:e("projects.community.noSubmissions")}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-forge-dark",children:e("projects.community.submissions",{count:u.length})}),n.jsx("ul",{className:"space-y-2",children:u.map((f,m)=>n.jsxs("li",{className:"flex flex-col gap-1 rounded-md border border-forge-cream/60 bg-white/70 p-3 text-sm text-forge-gray",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("a",{href:f.repository_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-forge-orange hover:underline",children:f.repository_url}),n.jsx(te,{variant:"ghost",size:"sm",asChild:!0,children:n.jsxs("a",{href:f.repository_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs",children:[e("projects.community.visitRepository"),n.jsx(Yx,{className:"h-3 w-3"})]})})]}),n.jsx("div",{className:"text-xs text-forge-gray/70",children:e("projects.community.submittedBy",{user:f.user_id?`${f.user_id.slice(0,6)}${f.user_id.slice(-4)}`:e("projects.community.anonymous"),date:f.submitted_at?new Date(f.submitted_at).toLocaleString():e("projects.community.dateUnknown")})})]},`${c.id}-${m}-${f.repository_url}`))})]})]})},c.id)})})]},i.id)})})]})}function II({children:t}){var o;const{user:e,loading:s}=Ct(),r=cr();let a=null;const i=!!((o=e==null?void 0:e.app_metadata)!=null&&o.is_admin||a!=null&&a.is_admin);return s?n.jsx("div",{className:"min-h-[40vh] flex items-center justify-center text-gray-500",children:"Checking admin permissions..."}):i?n.jsx(n.Fragment,{children:t}):n.jsx(Nh,{to:Qt,replace:!0,state:{from:r}})}function DI(){const[t,e]=p.useState(!1),[s,r]=p.useState(null),a=dr(),i=Ue();async function o(l){try{e(!0),r(null);const{error:c}=await i.auth.signInWithOAuth({provider:l,options:{redirectTo:Oi()}});if(c)throw c}catch(c){console.error("OAuth error:",c),r(`Failed to sign in with ${l}. Please try again.`)}finally{e(!1)}}return n.jsx("div",{className:"min-h-[100svh] bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Forge College"}),n.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Choose your preferred authentication method"})]}),n.jsxs("div",{className:"mt-8 space-y-4",children:[n.jsxs("button",{onClick:()=>o("google"),disabled:t,className:"group relative w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-forge-orange disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),n.jsxs("button",{onClick:()=>o("github"),disabled:t,className:"group relative w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})}),"Continue with GitHub"]})]}),s&&n.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-red-800",children:s})})]})}),t&&n.jsx("div",{className:"mt-4 text-center",children:n.jsxs("div",{className:"inline-flex items-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-forge-orange",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("span",{className:"text-sm text-gray-600",children:"Redirecting to authentication..."})]})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("button",{onClick:()=>a("/"),className:"text-forge-orange hover:text-forge-orange-dark text-sm font-medium",children:" Back to Home"})})]})})}function $I(){const[t,e]=p.useState("loading"),[s,r]=p.useState("Signing you in..."),a=dr(),i=Ue();return p.useEffect(()=>{async function o(){var l;try{if((l=(await i.auth.getSession()).data.session)!=null&&l.user){e("success"),r("Authentication successful! Redirecting..."),await new Promise(m=>setTimeout(m,800)),a("/dashboard",{replace:!0});return}const u=new URL(window.location.href).searchParams.get("code");if(u){const{error:m}=await i.auth.exchangeCodeForSession(u);if(m)throw m}else await new Promise(m=>setTimeout(m,800));const{data:{session:h},error:f}=await i.auth.getSession();if(f)throw f;if(h!=null&&h.user)e("success"),r("Authentication successful! Redirecting..."),await new Promise(m=>setTimeout(m,800)),a("/dashboard",{replace:!0});else throw new Error("No session found after OAuth completion")}catch(c){console.error("Auth callback error:",c),e("error"),r("Authentication failed. Please try again."),setTimeout(()=>a("/login"),3e3)}}o()},[a,i]),n.jsxs("div",{className:"min-h-[100svh] bg-forge-cream relative overflow-hidden flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-forge-orange/5 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-40 right-20 w-48 h-48 bg-forge-orange/10 rounded-full blur-2xl"})]}),n.jsx("div",{className:"max-w-md w-full space-y-8 bg-white/95 backdrop-blur-sm border border-forge-orange/20 shadow-xl rounded-2xl p-8 relative z-10",children:n.jsxs("div",{className:"text-center",children:[t==="loading"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-forge-orange border-t-transparent"}),n.jsx("h2",{className:"text-2xl font-bold text-forge-dark",children:"Processing Authentication"}),n.jsx("p",{className:"text-forge-gray",children:s})]}),t==="success"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-forge-orange/10 flex items-center justify-center",children:n.jsx("svg",{className:"h-8 w-8 text-forge-orange",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h2",{className:"text-2xl font-bold text-forge-dark",children:"Welcome to Forge College!"}),n.jsx("p",{className:"text-forge-gray",children:s})]}),t==="error"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:n.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h2",{className:"text-2xl font-bold text-forge-dark",children:"Authentication Failed"}),n.jsx("p",{className:"text-forge-gray",children:s}),n.jsx("button",{onClick:()=>a("/login"),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-forge-orange hover:bg-forge-orange-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-forge-orange transition-all duration-200 shadow-lg hover:shadow-xl rounded-xl",children:"Try Again"})]})]})})]})}const FI=()=>{const t=new Date().toISOString(),{t:e}=je(),s=p.useMemo(()=>`
      document.addEventListener('DOMContentLoaded', function() {
        const jsTest = document.getElementById('js-test');
        if (jsTest) {
          jsTest.innerHTML = \`
            <p><strong>${e("diagnostics.testPage.js.clientReady")}</strong></p>
            <p><strong>${e("diagnostics.testPage.js.userAgent")}</strong> \${navigator.userAgent}</p>
            <p><strong>${e("diagnostics.testPage.js.url")}</strong> \${window.location.href}</p>
            <p><strong>${e("diagnostics.testPage.js.clientTimestamp")}</strong> \${new Date().toISOString()}</p>
          \`;
        }
      });
    `,[e]);return n.jsxs("div",{style:{padding:"2rem",textAlign:"center",fontFamily:"system-ui, sans-serif",maxWidth:"800px",margin:"0 auto"},children:[n.jsx("h1",{children:e("diagnostics.testPage.title")}),n.jsx("p",{children:e("diagnostics.testPage.description")}),n.jsxs("div",{style:{backgroundColor:"#f0f8ff",padding:"1rem",borderRadius:"8px",margin:"1rem 0"},children:[n.jsx("h2",{children:e("diagnostics.testPage.systemStatus.title")}),n.jsx("p",{children:e("diagnostics.testPage.systemStatus.react")}),n.jsx("p",{children:e("diagnostics.testPage.systemStatus.typescript")}),n.jsx("p",{children:e("diagnostics.testPage.systemStatus.build")}),n.jsx("p",{children:e("diagnostics.testPage.systemStatus.deploy")}),n.jsx("p",{children:e("diagnostics.testPage.systemStatus.ssr",{timestamp:t})})]}),n.jsxs("div",{style:{backgroundColor:"#f0fff0",padding:"1rem",borderRadius:"8px",margin:"1rem 0"},children:[n.jsx("h3",{children:e("diagnostics.testPage.environment.title")}),n.jsxs("p",{children:[n.jsx("strong",{children:e("diagnostics.testPage.environment.serverTimestamp")})," ",t]}),n.jsx("p",{children:e("diagnostics.testPage.environment.noJsMessage")})]}),n.jsxs("div",{style:{backgroundColor:"#fff8f0",padding:"1rem",borderRadius:"8px",margin:"1rem 0"},children:[n.jsx("h3",{children:e("diagnostics.testPage.clientTest.title")}),n.jsx("p",{children:e("diagnostics.testPage.clientTest.instructions")}),n.jsx("div",{id:"js-test",style:{backgroundColor:"#e8f5e8",padding:"0.5rem",borderRadius:"4px",margin:"0.5rem 0"},children:n.jsx("p",{children:e("diagnostics.testPage.clientTest.loading")})}),n.jsx("button",{onClick:()=>alert(e("diagnostics.testPage.alerts.jsWorking")),style:{padding:"0.5rem 1rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:e("diagnostics.testPage.clientTest.button")})]}),n.jsx("p",{style:{marginTop:"2rem",color:"#666"},children:e("diagnostics.testPage.footer")}),n.jsx("script",{dangerouslySetInnerHTML:{__html:s}})]})},zI=()=>n.jsxs("div",{children:[n.jsxs("pre",{children:["SSR OK: ",new Date().toISOString()]}),n.jsx("p",{children:"Se voc est vendo este texto sem JavaScript, o SSR est funcionando."}),n.jsxs("p",{children:["Timestamp do servidor: ",new Date().toLocaleString()]})]}),BI=()=>n.jsxs("html",{lang:"en",children:[n.jsxs("head",{children:[n.jsx("title",{children:"Bare SSR Test"}),n.jsx("meta",{charSet:"UTF-8"}),n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),n.jsxs("body",{children:[n.jsxs("pre",{children:["BARE SSR OK: ",new Date().toISOString()]}),n.jsx("p",{children:"Se voc v este texto, o SSR bsico est funcionando."}),n.jsxs("p",{children:["Timestamp: ",new Date().toLocaleString()]})]})]}),UI=()=>{const t=new Date().toISOString(),{t:e,i18n:s}=je();return n.jsxs("html",{lang:s.language,children:[n.jsxs("head",{children:[n.jsx("title",{children:e("diagnostics.staticBare.title")}),n.jsx("meta",{charSet:"UTF-8"}),n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),n.jsxs("body",{children:[n.jsx("pre",{children:e("diagnostics.staticBare.status",{timestamp:t})}),n.jsx("p",{children:e("diagnostics.staticBare.instructions")}),n.jsx("p",{children:e("diagnostics.staticBare.timestamp",{timestamp:new Date().toLocaleString()})}),n.jsx("p",{children:e("diagnostics.staticBare.renderMode")})]})]})},VI=()=>{const t=new Date().toISOString(),{t:e,i18n:s}=je();return n.jsxs("html",{lang:s.language,children:[n.jsxs("head",{children:[n.jsx("title",{children:e("diagnostics.ssrCanary.title")}),n.jsx("meta",{charSet:"UTF-8"}),n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),n.jsxs("body",{children:[n.jsx("pre",{children:e("diagnostics.ssrCanary.status",{timestamp:t})}),n.jsx("p",{children:e("diagnostics.ssrCanary.instructions")}),n.jsx("p",{children:e("diagnostics.ssrCanary.timestamp",{timestamp:new Date().toLocaleString()})}),n.jsx("p",{children:e("diagnostics.ssrCanary.renderMode")}),n.jsx("p",{children:e("diagnostics.ssrCanary.runtime")}),n.jsx("p",{children:e("diagnostics.ssrCanary.dynamicMode")})]})]})};class HI extends p.Component{constructor(s){super(s);Do(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Do(this,"handleReset",()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(function(s){document.cookie=s.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,r){console.error("Authentication Error Boundary caught an error:",s,r),this.setState({error:s,errorInfo:r})}render(){var s,r,a,i,o,l,c,d;if(this.state.hasError){const u=((r=(s=this.state.error)==null?void 0:s.message)==null?void 0:r.includes("body stream"))||((i=(a=this.state.error)==null?void 0:a.message)==null?void 0:i.includes("json"))||((l=(o=this.state.error)==null?void 0:o.message)==null?void 0:l.includes("auth"))||((d=(c=this.state.error)==null?void 0:c.message)==null?void 0:d.includes("fetch"));return n.jsx("div",{className:"flex items-center justify-center min-h-[100svh] bg-forge-cream p-4",children:n.jsxs(de,{className:"w-full max-w-md bg-white/95 backdrop-blur-sm border border-red-200 shadow-xl",children:[n.jsx(Be,{children:n.jsxs(qe,{className:"text-red-600 text-xl font-bold flex items-center gap-2",children:[n.jsx(Gj,{className:"w-5 h-5"}),"Authentication Error"]})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:u?n.jsx("p",{children:"An authentication error occurred. This might be due to a network issue or temporary service problem."}):n.jsx("p",{children:"An unexpected error occurred in the authentication system."})}),!1,n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs(te,{onClick:this.handleRetry,className:"w-full bg-forge-orange hover:bg-forge-orange-light",children:[n.jsx(Jj,{className:"w-4 h-4 mr-2"}),"Try Again"]}),n.jsx(te,{onClick:this.handleReset,variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50",children:"Reset & Go Home"})]})]})]})})}return this.props.children}}function WI(){const t=cr(),{t:e}=je(),s=p.useMemo(()=>[{to:"/dashboard/admin",label:e("admin.layout.nav.overview"),icon:Yj,end:!0},{to:"/dashboard/admin/formations",label:"Formations",icon:li},{to:"/dashboard/admin/paths",label:e("admin.layout.nav.paths"),icon:wo},{to:"/dashboard/admin/courses",label:e("admin.layout.nav.courses"),icon:Lt},{to:"/dashboard/admin/modules",label:e("admin.layout.nav.modules"),icon:nb},{to:"/dashboard/admin/lessons",label:e("admin.layout.nav.lessons"),icon:jh},{to:"/dashboard/admin/projects",label:e("admin.layout.nav.projects"),icon:yo}],[e]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("header",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-forge-orange",children:e("admin.layout.kicker")}),n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-forge-dark",children:e("admin.layout.title")}),n.jsx("p",{className:"text-sm text-forge-gray",children:e("admin.layout.subtitle")})]})}),n.jsx("nav",{className:"flex flex-wrap gap-2 pt-2",children:s.map(({to:r,label:a,icon:i,end:o})=>{const l=o?t.pathname===r:t.pathname.startsWith(r);return n.jsxs(Xj,{to:r,end:o,className:$("inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm transition-all",l?"border-forge-orange bg-forge-orange/10 text-forge-orange shadow-sm":"border-transparent bg-white text-forge-gray hover:border-forge-cream hover:bg-forge-cream/40 hover:text-forge-dark"),children:[n.jsx(i,{className:"h-4 w-4"}),a]},r)})})]}),n.jsx("main",{className:"space-y-6",children:n.jsx(wh,{})})]})}const qI=[{label:"Learning Paths",description:"Create thematic journeys and bundle courses together.",icon:wo},{label:"Courses",description:"Organize syllabus, outcomes, and prerequisites.",icon:Lt},{label:"Modules",description:"Group lessons under clear learning milestones.",icon:nb},{label:"Lessons",description:"Publish text, video, or quiz content for builders.",icon:jh}];function KI(){const{user:t}=Ct();return n.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:n.jsxs(de,{className:"lg:col-span-2 border-forge-cream/80 bg-white/80",children:[n.jsxs(Be,{className:"space-y-2",children:[n.jsxs(qe,{className:"flex items-center gap-2 text-forge-dark",children:[n.jsx(Zj,{className:"h-5 w-5 text-forge-orange"}),"Admin Access Granted"]}),n.jsx("p",{className:"text-sm text-forge-gray",children:t!=null&&t.email?`Managing content as ${t.email}.`:"Manage platform content."})]}),n.jsx(oe,{className:"grid gap-4 md:grid-cols-2",children:qI.map(e=>n.jsxs("div",{className:"flex gap-3 rounded-xl border border-dashed border-forge-cream/60 bg-forge-cream/20 p-4",children:[n.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-forge-orange/10 text-forge-orange",children:n.jsx(e.icon,{className:"h-5 w-5"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-semibold text-forge-dark",children:e.label}),n.jsx("p",{className:"text-sm text-forge-gray",children:e.description})]})]},e.label))})]})})}var We;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function s(a){throw new Error}t.assertNever=s,t.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return t.objectValues(o)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},t.find=(a,i)=>{for(const o of a)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(We||(We={}));var bg;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(bg||(bg={}));const ce=We.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pr=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return Number.isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}},se=We.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class lr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let l=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),r}static assert(e){if(!(e instanceof lr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,We.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];s[i]=s[i]||[],s[i].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}lr.create=t=>new lr(t);const Gu=(t,e)=>{let s;switch(t.code){case se.invalid_type:t.received===ce.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case se.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,We.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:s=`Unrecognized key(s) in object: ${We.joinValues(t.keys,", ")}`;break;case se.invalid_union:s="Invalid input";break;case se.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${We.joinValues(t.options)}`;break;case se.invalid_enum_value:s=`Invalid enum value. Expected ${We.joinValues(t.options)}, received '${t.received}'`;break;case se.invalid_arguments:s="Invalid function arguments";break;case se.invalid_return_type:s="Invalid function return type";break;case se.invalid_date:s="Invalid date";break;case se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:We.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case se.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case se.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case se.custom:s="Invalid input";break;case se.invalid_intersection_types:s="Intersection results could not be merged";break;case se.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case se.not_finite:s="Number must be finite";break;default:s=e.defaultError,We.assertNever(t)}return{message:s}};let GI=Gu;function JI(){return GI}const YI=t=>{const{data:e,path:s,errorMaps:r,issueData:a}=t,i=[...s,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:e,defaultError:l}).message;return{...a,path:i,message:l}};function ie(t,e){const s=JI(),r=YI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Gu?void 0:Gu].filter(a=>!!a)});t.common.issues.push(r)}class os{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const r=[];for(const a of s){if(a.status==="aborted")return Ne;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,s){const r=[];for(const a of s){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return os.mergeObjectSync(e,r)}static mergeObjectSync(e,s){const r={};for(const a of s){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Ne;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ne=Object.freeze({status:"aborted"}),ai=t=>({status:"dirty",value:t}),ws=t=>({status:"valid",value:t}),yg=t=>t.status==="aborted",vg=t=>t.status==="dirty",Na=t=>t.status==="valid",Kl=t=>typeof Promise<"u"&&t instanceof Promise;var ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ue||(ue={}));class zr{constructor(e,s,r,a){this._cachedPath=[],this.parent=e,this.data=s,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wg=(t,e)=>{if(Na(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new lr(t.common.issues);return this._error=s,this._error}}};function Le(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:r,description:a}=t;if(e&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??s??l.defaultError}},description:a}}class Ve{get description(){return this._def.description}_getType(e){return Pr(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Pr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new os,ctx:{common:e.parent.common,data:e.data,parsedType:Pr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Kl(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const r=this.safeParse(e,s);if(r.success)return r.data;throw r.error}safeParse(e,s){const r={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pr(e)},a=this._parseSync({data:e,path:r.path,parent:r});return wg(r,a)}"~validate"(e){var r,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pr(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Na(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(a=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Na(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,s){const r=await this.safeParseAsync(e,s);if(r.success)return r.data;throw r.error}async safeParseAsync(e,s){const r={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pr(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Kl(a)?a:Promise.resolve(a));return wg(r,i)}refine(e,s){const r=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const o=e(a),l=()=>i.addIssue({code:se.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof s=="function"?s(r,a):s),!1))}_refinement(e){return new _a({schema:this,typeName:ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Ir.create(this,this._def)}nullable(){return Ca.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ws.create(this)}promise(){return Xl.create(this,this._def)}or(e){return Jl.create([this,e],this._def)}and(e){return Yl.create(this,e,this._def)}transform(e){return new _a({...Le(this._def),schema:this,typeName:ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Zu({...Le(this._def),innerType:this,defaultValue:s,typeName:ke.ZodDefault})}brand(){return new y4({typeName:ke.ZodBranded,type:this,...Le(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Qu({...Le(this._def),innerType:this,catchValue:s,typeName:ke.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return Nf.create(this,e)}readonly(){return eh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const XI=/^c[^\s-]{8,}$/i,ZI=/^[0-9a-z]+$/,QI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,e4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,t4=/^[a-z0-9_-]{21}$/i,s4=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,r4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,n4=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,a4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zd;const i4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,o4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,l4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,c4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,d4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,u4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,q0="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",h4=new RegExp(`^${q0}$`);function K0(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function f4(t){return new RegExp(`^${K0(t)}$`)}function m4(t){let e=`${q0}T${K0(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function p4(t,e){return!!((e==="v4"||!e)&&i4.test(t)||(e==="v6"||!e)&&l4.test(t))}function g4(t,e){if(!s4.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function x4(t,e){return!!((e==="v4"||!e)&&o4.test(t)||(e==="v6"||!e)&&c4.test(t))}class nr extends Ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){const i=this._getOrReturnCtx(e);return ie(i,{code:se.invalid_type,expected:ce.string,received:i.parsedType}),Ne}const r=new os;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),ie(a,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),ie(a,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?ie(a,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ie(a,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")n4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"email",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")zd||(zd=new RegExp(a4,"u")),zd.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"emoji",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")e4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"uuid",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")t4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"nanoid",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")XI.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"cuid",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")ZI.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"cuid2",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")QI.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"ulid",code:se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),ie(a,{validation:"url",code:se.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"regex",code:se.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),ie(a,{code:se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),ie(a,{code:se.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),ie(a,{code:se.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?m4(i).test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{code:se.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?h4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{code:se.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?f4(i).test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{code:se.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?r4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"duration",code:se.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?p4(e.data,i.version)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"ip",code:se.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?g4(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"jwt",code:se.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?x4(e.data,i.version)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"cidr",code:se.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?d4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"base64",code:se.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?u4.test(e.data)||(a=this._getOrReturnCtx(e,a),ie(a,{validation:"base64url",code:se.invalid_string,message:i.message}),r.dirty()):We.assertNever(i);return{status:r.value,value:e.data}}_regex(e,s,r){return this.refinement(a=>e.test(a),{validation:s,code:se.invalid_string,...ue.errToObj(r)})}_addCheck(e){return new nr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ue.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ue.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ue.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ue.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ue.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ue.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ue.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...ue.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...ue.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...ue.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...ue.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...ue.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...ue.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...ue.errToObj(s)})}nonempty(e){return this.min(1,ue.errToObj(e))}trim(){return new nr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}nr.create=t=>new nr({checks:[],typeName:ke.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Le(t)});function b4(t,e){const s=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=s>r?s:r,i=Number.parseInt(t.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return i%o/10**a}class Pn extends Ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){const i=this._getOrReturnCtx(e);return ie(i,{code:se.invalid_type,expected:ce.number,received:i.parsedType}),Ne}let r;const a=new os;for(const i of this._def.checks)i.kind==="int"?We.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:se.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?b4(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ie(r,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:se.not_finite,message:i.message}),a.dirty()):We.assertNever(i);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,ue.toString(s))}setLimit(e,s,r,a){return new Pn({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:ue.toString(a)}]})}_addCheck(e){return new Pn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ue.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&We.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Pn.create=t=>new Pn({checks:[],typeName:ke.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Le(t)});class En extends Ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ce.bigint)return this._getInvalidInput(e);let r;const a=new os;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):We.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return ie(s,{code:se.invalid_type,expected:ce.bigint,received:s.parsedType}),Ne}gte(e,s){return this.setLimit("min",e,!0,ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,ue.toString(s))}setLimit(e,s,r,a){return new En({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:ue.toString(a)}]})}_addCheck(e){return new En({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}En.create=t=>new En({checks:[],typeName:ke.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Le(t)});class Gl extends Ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){const r=this._getOrReturnCtx(e);return ie(r,{code:se.invalid_type,expected:ce.boolean,received:r.parsedType}),Ne}return ws(e.data)}}Gl.create=t=>new Gl({typeName:ke.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Le(t)});class ka extends Ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){const i=this._getOrReturnCtx(e);return ie(i,{code:se.invalid_type,expected:ce.date,received:i.parsedType}),Ne}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ie(i,{code:se.invalid_date}),Ne}const r=new os;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),ie(a,{code:se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),ie(a,{code:se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):We.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ka({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:ue.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:ue.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}ka.create=t=>new ka({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ke.ZodDate,...Le(t)});class jg extends Ve{_parse(e){if(this._getType(e)!==ce.symbol){const r=this._getOrReturnCtx(e);return ie(r,{code:se.invalid_type,expected:ce.symbol,received:r.parsedType}),Ne}return ws(e.data)}}jg.create=t=>new jg({typeName:ke.ZodSymbol,...Le(t)});class Ju extends Ve{_parse(e){if(this._getType(e)!==ce.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:se.invalid_type,expected:ce.undefined,received:r.parsedType}),Ne}return ws(e.data)}}Ju.create=t=>new Ju({typeName:ke.ZodUndefined,...Le(t)});class Ng extends Ve{_parse(e){if(this._getType(e)!==ce.null){const r=this._getOrReturnCtx(e);return ie(r,{code:se.invalid_type,expected:ce.null,received:r.parsedType}),Ne}return ws(e.data)}}Ng.create=t=>new Ng({typeName:ke.ZodNull,...Le(t)});class kg extends Ve{constructor(){super(...arguments),this._any=!0}_parse(e){return ws(e.data)}}kg.create=t=>new kg({typeName:ke.ZodAny,...Le(t)});class Sg extends Ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ws(e.data)}}Sg.create=t=>new Sg({typeName:ke.ZodUnknown,...Le(t)});class Br extends Ve{_parse(e){const s=this._getOrReturnCtx(e);return ie(s,{code:se.invalid_type,expected:ce.never,received:s.parsedType}),Ne}}Br.create=t=>new Br({typeName:ke.ZodNever,...Le(t)});class _g extends Ve{_parse(e){if(this._getType(e)!==ce.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:se.invalid_type,expected:ce.void,received:r.parsedType}),Ne}return ws(e.data)}}_g.create=t=>new _g({typeName:ke.ZodVoid,...Le(t)});class Ws extends Ve{_parse(e){const{ctx:s,status:r}=this._processInputParams(e),a=this._def;if(s.parsedType!==ce.array)return ie(s,{code:se.invalid_type,expected:ce.array,received:s.parsedType}),Ne;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(o||l)&&(ie(s,{code:o?se.too_big:se.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(ie(s,{code:se.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(ie(s,{code:se.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>a.type._parseAsync(new zr(s,o,s.path,l)))).then(o=>os.mergeArray(r,o));const i=[...s.data].map((o,l)=>a.type._parseSync(new zr(s,o,s.path,l)));return os.mergeArray(r,i)}get element(){return this._def.type}min(e,s){return new Ws({...this._def,minLength:{value:e,message:ue.toString(s)}})}max(e,s){return new Ws({...this._def,maxLength:{value:e,message:ue.toString(s)}})}length(e,s){return new Ws({...this._def,exactLength:{value:e,message:ue.toString(s)}})}nonempty(e){return this.min(1,e)}}Ws.create=(t,e)=>new Ws({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ke.ZodArray,...Le(e)});function ea(t){if(t instanceof xt){const e={};for(const s in t.shape){const r=t.shape[s];e[s]=Ir.create(ea(r))}return new xt({...t._def,shape:()=>e})}else return t instanceof Ws?new Ws({...t._def,type:ea(t.element)}):t instanceof Ir?Ir.create(ea(t.unwrap())):t instanceof Ca?Ca.create(ea(t.unwrap())):t instanceof An?An.create(t.items.map(e=>ea(e))):t}class xt extends Ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=We.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==ce.object){const d=this._getOrReturnCtx(e);return ie(d,{code:se.invalid_type,expected:ce.object,received:d.parsedType}),Ne}const{status:r,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Br&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new zr(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Br){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(ie(a,{code:se.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new zr(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>os.mergeObjectSync(r,d)):os.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ue.errToObj,new xt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,r)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,s,r).message)??r.defaultError;return s.code==="unrecognized_keys"?{message:ue.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new xt({...this._def,unknownKeys:"strip"})}passthrough(){return new xt({...this._def,unknownKeys:"passthrough"})}extend(e){return new xt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ke.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new xt({...this._def,catchall:e})}pick(e){const s={};for(const r of We.objectKeys(e))e[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new xt({...this._def,shape:()=>s})}omit(e){const s={};for(const r of We.objectKeys(this.shape))e[r]||(s[r]=this.shape[r]);return new xt({...this._def,shape:()=>s})}deepPartial(){return ea(this)}partial(e){const s={};for(const r of We.objectKeys(this.shape)){const a=this.shape[r];e&&!e[r]?s[r]=a:s[r]=a.optional()}return new xt({...this._def,shape:()=>s})}required(e){const s={};for(const r of We.objectKeys(this.shape))if(e&&!e[r])s[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ir;)i=i._def.innerType;s[r]=i}return new xt({...this._def,shape:()=>s})}keyof(){return G0(We.objectKeys(this.shape))}}xt.create=(t,e)=>new xt({shape:()=>t,unknownKeys:"strip",catchall:Br.create(),typeName:ke.ZodObject,...Le(e)});xt.strictCreate=(t,e)=>new xt({shape:()=>t,unknownKeys:"strict",catchall:Br.create(),typeName:ke.ZodObject,...Le(e)});xt.lazycreate=(t,e)=>new xt({shape:t,unknownKeys:"strip",catchall:Br.create(),typeName:ke.ZodObject,...Le(e)});class Jl extends Ve{_parse(e){const{ctx:s}=this._processInputParams(e),r=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new lr(l.ctx.common.issues));return ie(s,{code:se.invalid_union,unionErrors:o}),Ne}if(s.common.async)return Promise.all(r.map(async i=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of r){const d={...s,common:{...s.common,issues:[]},parent:null},u=c._parseSync({data:s.data,path:s.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new lr(c));return ie(s,{code:se.invalid_union,unionErrors:l}),Ne}}get options(){return this._def.options}}Jl.create=(t,e)=>new Jl({options:t,typeName:ke.ZodUnion,...Le(e)});function Yu(t,e){const s=Pr(t),r=Pr(e);if(t===e)return{valid:!0,data:t};if(s===ce.object&&r===ce.object){const a=We.objectKeys(e),i=We.objectKeys(t).filter(l=>a.indexOf(l)!==-1),o={...t,...e};for(const l of i){const c=Yu(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===ce.array&&r===ce.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const o=t[i],l=e[i],c=Yu(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return s===ce.date&&r===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Yl extends Ve{_parse(e){const{status:s,ctx:r}=this._processInputParams(e),a=(i,o)=>{if(yg(i)||yg(o))return Ne;const l=Yu(i.value,o.value);return l.valid?((vg(i)||vg(o))&&s.dirty(),{status:s.value,value:l.data}):(ie(r,{code:se.invalid_intersection_types}),Ne)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Yl.create=(t,e,s)=>new Yl({left:t,right:e,typeName:ke.ZodIntersection,...Le(s)});class An extends Ve{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.array)return ie(r,{code:se.invalid_type,expected:ce.array,received:r.parsedType}),Ne;if(r.data.length<this._def.items.length)return ie(r,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ne;!this._def.rest&&r.data.length>this._def.items.length&&(ie(r,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new zr(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>os.mergeArray(s,o)):os.mergeArray(s,i)}get items(){return this._def.items}rest(e){return new An({...this._def,rest:e})}}An.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new An({items:t,typeName:ke.ZodTuple,rest:null,...Le(e)})};class Cg extends Ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.map)return ie(r,{code:se.invalid_type,expected:ce.map,received:r.parsedType}),Ne;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,c],d)=>({key:a._parse(new zr(r,l,r.path,[d,"key"])),value:i._parse(new zr(r,c,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Ne;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Ne;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}}}}Cg.create=(t,e,s)=>new Cg({valueType:e,keyType:t,typeName:ke.ZodMap,...Le(s)});class Ui extends Ve{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.set)return ie(r,{code:se.invalid_type,expected:ce.set,received:r.parsedType}),Ne;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(ie(r,{code:se.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(ie(r,{code:se.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Ne;u.status==="dirty"&&s.dirty(),d.add(u.value)}return{status:s.value,value:d}}const l=[...r.data.values()].map((c,d)=>i._parse(new zr(r,c,r.path,d)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,s){return new Ui({...this._def,minSize:{value:e,message:ue.toString(s)}})}max(e,s){return new Ui({...this._def,maxSize:{value:e,message:ue.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}Ui.create=(t,e)=>new Ui({valueType:t,minSize:null,maxSize:null,typeName:ke.ZodSet,...Le(e)});class Tg extends Ve{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Tg.create=(t,e)=>new Tg({getter:t,typeName:ke.ZodLazy,...Le(e)});class Xu extends Ve{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return ie(s,{received:s.data,code:se.invalid_literal,expected:this._def.value}),Ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xu.create=(t,e)=>new Xu({value:t,typeName:ke.ZodLiteral,...Le(e)});function G0(t,e){return new Sa({values:t,typeName:ke.ZodEnum,...Le(e)})}class Sa extends Ve{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),r=this._def.values;return ie(s,{expected:We.joinValues(r),received:s.parsedType,code:se.invalid_type}),Ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),r=this._def.values;return ie(s,{received:s.data,code:se.invalid_enum_value,options:r}),Ne}return ws(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Sa.create(e,{...this._def,...s})}exclude(e,s=this._def){return Sa.create(this.options.filter(r=>!e.includes(r)),{...this._def,...s})}}Sa.create=G0;class Pg extends Ve{_parse(e){const s=We.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ce.string&&r.parsedType!==ce.number){const a=We.objectValues(s);return ie(r,{expected:We.joinValues(a),received:r.parsedType,code:se.invalid_type}),Ne}if(this._cache||(this._cache=new Set(We.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=We.objectValues(s);return ie(r,{received:r.data,code:se.invalid_enum_value,options:a}),Ne}return ws(e.data)}get enum(){return this._def.values}}Pg.create=(t,e)=>new Pg({values:t,typeName:ke.ZodNativeEnum,...Le(e)});class Xl extends Ve{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==ce.promise&&s.common.async===!1)return ie(s,{code:se.invalid_type,expected:ce.promise,received:s.parsedType}),Ne;const r=s.parsedType===ce.promise?s.data:Promise.resolve(s.data);return ws(r.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Xl.create=(t,e)=>new Xl({type:t,typeName:ke.ZodPromise,...Le(e)});class _a extends Ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{ie(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return Ne;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ne:c.status==="dirty"||s.value==="dirty"?ai(c.value):c});{if(s.value==="aborted")return Ne;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ne:l.status==="dirty"||s.value==="dirty"?ai(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ne:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ne:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Na(o))return Ne;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Na(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:s.value,value:l})):Ne);We.assertNever(a)}}_a.create=(t,e,s)=>new _a({schema:t,typeName:ke.ZodEffects,effect:e,...Le(s)});_a.createWithPreprocess=(t,e,s)=>new _a({schema:e,effect:{type:"preprocess",transform:t},typeName:ke.ZodEffects,...Le(s)});class Ir extends Ve{_parse(e){return this._getType(e)===ce.undefined?ws(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ir.create=(t,e)=>new Ir({innerType:t,typeName:ke.ZodOptional,...Le(e)});class Ca extends Ve{_parse(e){return this._getType(e)===ce.null?ws(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ca.create=(t,e)=>new Ca({innerType:t,typeName:ke.ZodNullable,...Le(e)});class Zu extends Ve{_parse(e){const{ctx:s}=this._processInputParams(e);let r=s.data;return s.parsedType===ce.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Zu.create=(t,e)=>new Zu({innerType:t,typeName:ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Le(e)});class Qu extends Ve{_parse(e){const{ctx:s}=this._processInputParams(e),r={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Kl(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lr(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new lr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Qu.create=(t,e)=>new Qu({innerType:t,typeName:ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Le(e)});class Eg extends Ve{_parse(e){if(this._getType(e)!==ce.nan){const r=this._getOrReturnCtx(e);return ie(r,{code:se.invalid_type,expected:ce.nan,received:r.parsedType}),Ne}return{status:"valid",value:e.data}}}Eg.create=t=>new Eg({typeName:ke.ZodNaN,...Le(t)});class y4 extends Ve{_parse(e){const{ctx:s}=this._processInputParams(e),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class Nf extends Ve{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ne:i.status==="dirty"?(s.dirty(),ai(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ne:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,s){return new Nf({in:e,out:s,typeName:ke.ZodPipeline})}}class eh extends Ve{_parse(e){const s=this._def.innerType._parse(e),r=a=>(Na(a)&&(a.value=Object.freeze(a.value)),a);return Kl(s)?s.then(a=>r(a)):r(s)}unwrap(){return this._def.innerType}}eh.create=(t,e)=>new eh({innerType:t,typeName:ke.ZodReadonly,...Le(e)});var ke;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ke||(ke={}));const gs=nr.create;Pn.create;En.create;const v4=Gl.create;ka.create;const w4=Ju.create;Br.create;Ws.create;const Ua=xt.create,Vi=Jl.create;Yl.create;An.create;const Hi=Xu.create,Zc=Sa.create;Xl.create;Ir.create;Ca.create;const Dr={string:t=>nr.create({...t,coerce:!0}),number:t=>Pn.create({...t,coerce:!0}),boolean:t=>Gl.create({...t,coerce:!0}),bigint:t=>En.create({...t,coerce:!0}),date:t=>ka.create({...t,coerce:!0})},Ag=(t,e,s)=>{if(t&&"reportValidity"in t){const r=su(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},J0=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?Ag(r.ref,s,t):r.refs&&r.refs.forEach(a=>Ag(a,s,t))}},j4=(t,e)=>{e.shouldUseNativeValidation&&J0(t,e);const s={};for(const r in t){const a=su(e.fields,r),i=Object.assign(t[r]||{},{ref:a&&a.ref});if(N4(e.names||Object.keys(t),r)){const o=Object.assign({},su(s,r));id(o,"root",i),id(s,r,o)}else id(s,r,i)}return s},N4=(t,e)=>t.some(s=>s.startsWith(e+"."));var k4=function(t,e){for(var s={};t.length;){var r=t[0],a=r.code,i=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];s[o]={message:l.message,type:l.code}}else s[o]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return t.push(h)})}),e){var c=s[o].types,d=c&&c[r.code];s[o]=Qj(o,e,s,a,d?[].concat(d,r.message):r.message)}t.shift()}return s},Va=function(t,e,s){return s===void 0&&(s={}),function(r,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return i.shouldUseNativeValidation&&J0({},i),{errors:{},values:s.raw?r:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:j4(k4(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const Ha=tN,Y0=p.createContext({}),nt=({...t})=>n.jsx(Y0.Provider,{value:{name:t.name},children:n.jsx(sN,{...t})}),Qc=()=>{const t=p.useContext(Y0),e=p.useContext(X0),{getFieldState:s,formState:r}=eN(),a=s(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},X0=p.createContext({}),Qe=p.forwardRef(({className:t,...e},s)=>{const r=p.useId();return n.jsx(X0.Provider,{value:{id:r},children:n.jsx("div",{ref:s,className:$("space-y-2",t),...e})})});Qe.displayName="FormItem";const ge=p.forwardRef(({className:t,...e},s)=>{const{error:r,formItemId:a}=Qc();return n.jsx(ts,{ref:s,className:$(r&&"text-destructive",t),htmlFor:a,...e})});ge.displayName="FormLabel";const et=p.forwardRef(({...t},e)=>{const{error:s,formItemId:r,formDescriptionId:a,formMessageId:i}=Qc();return n.jsx(On,{ref:e,id:r,"aria-describedby":s?`${a} ${i}`:`${a}`,"aria-invalid":!!s,...t})});et.displayName="FormControl";const Mt=p.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:r}=Qc();return n.jsx("p",{ref:s,id:r,className:$("text-sm text-muted-foreground",t),...e})});Mt.displayName="FormDescription";const at=p.forwardRef(({className:t,children:e,...s},r)=>{const{error:a,formMessageId:i}=Qc(),o=a?String(a==null?void 0:a.message):e;return o?n.jsx("p",{ref:r,id:i,className:$("text-sm font-medium text-destructive",t),...s,children:o}):null});at.displayName="FormMessage";const Ur=p.forwardRef(({className:t,...e},s)=>n.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...e}));Ur.displayName="Textarea";const $n=p.forwardRef(({className:t,...e},s)=>n.jsx(ab,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:s,children:n.jsx(rN,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));$n.displayName=ab.displayName;const Fn=aN,S4=nN,Z0=p.forwardRef(({className:t,...e},s)=>n.jsx(ib,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));Z0.displayName=ib.displayName;const Gr=p.forwardRef(({className:t,...e},s)=>n.jsxs(S4,{children:[n.jsx(Z0,{}),n.jsx(ob,{ref:s,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Gr.displayName=ob.displayName;const Jr=({className:t,...e})=>n.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});Jr.displayName="AlertDialogHeader";const Yr=({className:t,...e})=>n.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Yr.displayName="AlertDialogFooter";const Xr=p.forwardRef(({className:t,...e},s)=>n.jsx(lb,{ref:s,className:$("text-lg font-semibold",t),...e}));Xr.displayName=lb.displayName;const Zr=p.forwardRef(({className:t,...e},s)=>n.jsx(cb,{ref:s,className:$("text-sm text-muted-foreground",t),...e}));Zr.displayName=cb.displayName;const Qr=p.forwardRef(({className:t,...e},s)=>n.jsx(db,{ref:s,className:$(gf(),t),...e}));Qr.displayName=db.displayName;const en=p.forwardRef(({className:t,...e},s)=>n.jsx(ub,{ref:s,className:$(gf({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));en.displayName=ub.displayName;const Q0=p.forwardRef(({className:t,children:e,...s},r)=>n.jsx("div",{ref:r,className:$("overflow-y-auto",t),...s,children:e}));Q0.displayName="ScrollArea";function _4({formationId:t,selectedPaths:e,onPathsChange:s}){const[r,a]=p.useState(""),i=Ht(),o=Ue(),{data:l,isLoading:c}=$e({queryKey:["available-learning-paths",t],queryFn:async()=>{const{data:y,error:w}=await o.from("learning_paths").select("id, title, slug, status").eq("status","published").order("title");if(w)throw w;const{data:N,error:S}=await o.from("formation_paths").select("learning_path_id").eq("formation_id",t);if(S)throw S;const k=new Set((N==null?void 0:N.map(j=>j.learning_path_id))||[]);return(y==null?void 0:y.filter(j=>!k.has(j.id)))||[]}}),d=Xe({mutationFn:async({path:y,order:w})=>{const{error:N}=await o.from("formation_paths").insert({formation_id:t,learning_path_id:y.id,order:w});if(N)throw N;return y},onSuccess:()=>{i.invalidateQueries({queryKey:["available-learning-paths",t]}),i.invalidateQueries({queryKey:["admin-formations"]}),Q.success("Path added to formation")},onError:y=>{Q.error("Failed to add path: "+y.message)}}),u=Xe({mutationFn:async y=>{const{error:w}=await o.from("formation_paths").delete().eq("formation_id",t).eq("learning_path_id",y);if(w)throw w},onSuccess:()=>{i.invalidateQueries({queryKey:["available-learning-paths",t]}),i.invalidateQueries({queryKey:["admin-formations"]}),Q.success("Path removed from formation")},onError:y=>{Q.error("Failed to remove path: "+y.message)}}),h=Xe({mutationFn:async({pathId:y,newOrder:w})=>{const{error:N}=await o.from("formation_paths").update({order:w}).eq("formation_id",t).eq("learning_path_id",y);if(N)throw N},onSuccess:()=>{i.invalidateQueries({queryKey:["admin-formations"]}),Q.success("Path order updated")},onError:y=>{Q.error("Failed to reorder path: "+y.message)}}),f=async y=>{const w=e.length+1;try{await d.mutateAsync({path:y,order:w}),s(N=>[...N,{id:y.id,title:y.title,order:w}])}catch{}},m=async y=>{try{await u.mutateAsync(y),s(w=>w.filter(S=>S.id!==y).map((S,k)=>({...S,order:k+1})))}catch{}},x=(y,w)=>{const N=e.findIndex(_=>_.id===y);if(N===-1)return;const S=w==="up"?N-1:N+1;if(S<0||S>=e.length)return;const k=[...e],[j]=k.splice(N,1);k.splice(S,0,j);const v=k.map((_,E)=>({..._,order:E+1}));s(v),h.mutate({pathId:y,newOrder:S+1})},g=(l==null?void 0:l.filter(y=>{var w;return y.title.toLowerCase().includes(r.toLowerCase())||((w=y.slug)==null?void 0:w.toLowerCase().includes(r.toLowerCase()))}))||[],b=p.useMemo(()=>[...e].sort((y,w)=>y.order-w.order),[e]);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ts,{htmlFor:"search-paths",children:"Add Learning Paths"}),n.jsx(ye,{id:"search-paths",placeholder:"Search paths...",value:r,onChange:y=>a(y.target.value),className:"mt-1"})]}),c?n.jsx("div",{className:"flex items-center justify-center py-4",children:n.jsx(tt,{className:"h-6 w-6 animate-spin"})}):n.jsx(Q0,{className:"h-48 border rounded-md p-2",children:n.jsx("div",{className:"space-y-2",children:g.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:r?"No paths found":"All available paths are already added"}):g.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-accent rounded",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:y.title}),n.jsx("div",{className:"text-sm text-muted-foreground",children:y.slug})]}),n.jsx(te,{size:"sm",variant:"outline",onClick:()=>f(y),disabled:d.isPending,children:n.jsx(Mn,{className:"h-4 w-4"})})]},y.id))})}),e.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(Ft,{}),n.jsxs("div",{children:[n.jsxs(ts,{children:["Selected Paths (",e.length,")"]}),n.jsx("div",{className:"mt-2 space-y-2",children:b.map((y,w)=>n.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(te,{size:"sm",variant:"ghost",onClick:()=>x(y.id,"up"),disabled:w===0||h.isPending,children:n.jsx(iN,{className:"h-3 w-3"})}),n.jsx(te,{size:"sm",variant:"ghost",onClick:()=>x(y.id,"down"),disabled:w===e.length-1||h.isPending,children:n.jsx(oN,{className:"h-3 w-3"})})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:y.title}),n.jsxs(xe,{variant:"secondary",className:"text-xs",children:["Order: ",y.order]})]})]}),n.jsx(te,{size:"sm",variant:"outline",onClick:()=>m(y.id),disabled:u.isPending,children:n.jsx(bs,{className:"h-4 w-4"})})]},y.id))})]})]})]})}const kf=lN,ed=p.forwardRef(({className:t,...e},s)=>n.jsx(hb,{ref:s,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));ed.displayName=hb.displayName;const rr=p.forwardRef(({className:t,...e},s)=>n.jsx(fb,{ref:s,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));rr.displayName=fb.displayName;const Wi=p.forwardRef(({className:t,...e},s)=>n.jsx(mb,{ref:s,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Wi.displayName=mb.displayName;function Ro({locales:t,activeLocale:e,onLocaleChange:s,renderFields:r,tabsClassName:a}){return t.length===0?null:n.jsxs(kf,{value:e,onValueChange:s,className:"space-y-4",children:[n.jsx(ed,{className:a??"flex flex-wrap gap-2 bg-forge-cream/60 p-1",children:t.map(i=>n.jsx(rr,{value:i.code,className:"data-[state=active]:bg-white",children:i.label},i.code))}),t.map(i=>n.jsx(Wi,{value:i.code,className:"space-y-4 rounded-lg border border-forge-cream/70 bg-white/70 p-4",children:r(i.code)},i.code))]})}const C4=t=>t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80),T4=Ua({slug:gs().min(3,"Slug must include at least 3 characters").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and hyphens only"),status:Zc(["draft","published","coming_soon"])});function P4(){var B;const t=p.useMemo(()=>Ue(),[]),e=Ht(),{data:s=[],isLoading:r}=$e({queryKey:["content-locales"],queryFn:async()=>jo(t)}),a=p.useMemo(()=>qs(s),[s]),[i,o]=p.useState(bt),[l,c]=p.useState({});p.useEffect(()=>{s.length>0&&o(T=>s.some(q=>q.code===T)?T:a)},[s,a]);const d=p.useCallback(()=>({title:"",description:"",thumbnailUrl:"",tags:[],isPublished:!1,publishedAt:null}),[]),u=p.useCallback(T=>({title:(T==null?void 0:T.title)??"",description:(T==null?void 0:T.description)??"",thumbnailUrl:(T==null?void 0:T.thumbnail_url)??"",tags:(T==null?void 0:T.tags)??[],isPublished:(T==null?void 0:T.is_published)??!1,publishedAt:(T==null?void 0:T.published_at)??null}),[]),h=p.useCallback((T,q)=>{c(G=>{const A=G[T]??d();return{...G,[T]:q(A)}})},[d]),f=p.useCallback(T=>{if(s.length===0)return;const q=T?$t(T.formation_localizations??[]):{},G=Object.fromEntries(Object.entries(q).map(([K,ne])=>[K,u(ne)])),A=No(s,G,()=>d());c(A),o(qs(s))},[s,u,d]),m=p.useMemo(()=>s.reduce((T,q)=>(T[q.code]=q.label,T),{}),[s]),[x,g]=p.useState(!1),[b,y]=p.useState(!1),[w,N]=p.useState(null),[S,k]=p.useState(null),[j,v]=p.useState(!1),[_,E]=p.useState([]),R=Aa({resolver:Va(T4),defaultValues:{slug:"",status:"draft"}});p.useEffect(()=>{x||(R.reset({slug:"",status:"draft"}),N(null),v(!1),c({}),o(a),E([]))},[x,R,a]),p.useEffect(()=>{var T;if(x&&w){const q=((T=w.paths)==null?void 0:T.slice().sort((G,A)=>G.order-A.order))??[];E(q)}},[x,w]),p.useEffect(()=>{b||k(null)},[b]);const z=((B=l[a])==null?void 0:B.title)??"",F=R.watch("slug");p.useEffect(()=>{if(!j&&!w){const T=C4(z);T&&T!==F&&R.setValue("slug",T,{shouldValidate:!1})}},[z,j,w,F,R]);const{data:L,isLoading:U}=$e({queryKey:["admin-formations"],queryFn:async()=>{const{data:T,error:q}=await t.from("formations").select(`
          id,
          title,
          slug,
          description,
          is_published,
          status,
          published_at,
          created_at,
          updated_at,
          formation_localizations(*),
          formation_paths(
            order,
            learning_paths(id, title)
          )
        `).order("created_at",{ascending:!1});if(q)throw q;return(T??[]).map(A=>{const{formation_paths:K=[],...ne}=A,le=K.map(ee=>ee.learning_paths?{id:ee.learning_paths.id,title:ee.learning_paths.title,order:ee.order??0}:null).filter(ee=>!!ee).sort((ee,re)=>ee.order-re.order);return{...ne,paths_count:le.length,paths:le}})}}),J=Xe({mutationFn:async T=>{if(!s.length)throw new Error("Configure locales before saving formations");if(Object.keys(l).length===0)throw new Error("Add localized content before saving the formation");const q=s.reduce((ae,Fe)=>(ae[Fe.code]=Fe.label,ae),{}),G=l[a];if(!G||!G.title.trim())throw new Error(`Provide a title for ${q[a]??a}`);const A=Object.values(l).some(ae=>ae.isPublished),K={slug:T.slug.trim(),status:T.status,title:G.title.trim(),description:G.description.trim()?G.description.trim():null,thumbnail_url:G.thumbnailUrl.trim()?G.thumbnailUrl.trim():null,is_published:A,published_at:A?(w==null?void 0:w.published_at)??new Date().toISOString():null};let ne=(w==null?void 0:w.id)??null;if(w){const{error:ae}=await t.from("formations").update(K).eq("id",w.id);if(ae)throw ae}else{const{data:ae,error:Fe}=await t.from("formations").insert(K).select("id").single();if(Fe)throw Fe;ne=(ae==null?void 0:ae.id)??null}if(!ne)throw new Error("Unable to determine formation identifier after saving");const le=$t((w==null?void 0:w.formation_localizations)??[]),ee=Object.entries(l).map(([ae,Fe])=>{var M;return{formation_id:ne,locale:ae,title:Fe.title.trim(),description:Fe.description.trim()?Fe.description.trim():null,tags:Fe.tags,thumbnail_url:Fe.thumbnailUrl.trim()?Fe.thumbnailUrl.trim():null,is_published:Fe.isPublished,published_at:Fe.isPublished?Fe.publishedAt??((M=le[ae])==null?void 0:M.published_at)??new Date().toISOString():null}}),{error:re}=await t.from("formation_localizations").upsert(ee,{onConflict:"formation_id,locale"});if(re)throw re},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-formations"]}),Q.success(w?"Formation updated":"Formation created"),g(!1)},onError:T=>{console.error("Error saving formation",T),Q.error(T instanceof Error?T.message:"Failed to save formation")}}),Y=Xe({mutationFn:async T=>{const{error:q}=await t.from("formations").delete().eq("id",T);if(q)throw q},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-formations"]}),y(!1),k(null),Q.success("Formation deleted successfully")},onError:T=>{Q.error("Failed to delete formation: "+(T instanceof Error?T.message:"Unknown error"))}}),I=T=>{try{J.mutate(T)}catch(q){q instanceof Error&&Q.error(q.message)}},O=T=>{if(!s.length){Q.error("Configure locales before editing formations");return}N(T),v(!0),R.reset({slug:T.slug??"",status:T.status??"draft"}),f(T),g(!0)},D=()=>{if(!s.length){Q.error("Configure locales before creating formations");return}N(null),v(!1),R.reset({slug:"",status:"draft"}),f(void 0),g(!0)},W=T=>{k(T),y(!0)},C=()=>{S&&Y.mutate(S.id)},V=T=>{const q=l[T]??d(),G=m[T]??T;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ge,{className:"text-sm font-medium text-forge-dark",children:["Title  ",G]}),n.jsx(ye,{value:q.title,onChange:A=>h(T,K=>({...K,title:A.target.value})),placeholder:`Title in ${G}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Description"}),n.jsx(Ur,{rows:4,value:q.description,onChange:A=>h(T,K=>({...K,description:A.target.value})),placeholder:`Description in ${G}`})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Thumbnail URL"}),n.jsx(ye,{value:q.thumbnailUrl,onChange:A=>h(T,K=>({...K,thumbnailUrl:A.target.value})),placeholder:"https://..."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Tags"}),n.jsx(Mr,{value:q.tags,onChange:A=>h(T,K=>({...K,tags:A})),placeholder:`Add tags for ${G}`})]})]}),n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-forge-cream/60 bg-forge-cream/30 px-3 py-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-forge-dark",children:"Published"}),n.jsx("p",{className:"text-xs text-forge-gray",children:q.isPublished?"Visible to learners in this locale":"Hidden until you publish this locale"})]}),n.jsx($n,{checked:q.isPublished,onCheckedChange:A=>h(T,K=>({...K,isPublished:A}))})]})]})},P=p.useMemo(()=>{if(!S)return"";const T=$t(S.formation_localizations??[]),q=T[a]??T[bt]??Object.values(T)[0];return(q==null?void 0:q.title)??S.title??"this formation"},[S,a]);return U?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(tt,{className:"h-8 w-8 animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Formations"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage formations, their localized content, and linked learning paths."})]}),n.jsxs(te,{onClick:D,children:[n.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Add Formation"]})]}),n.jsxs("div",{className:"grid gap-4",children:[L==null?void 0:L.map(T=>{const q=$t(T.formation_localizations??[]),G=q[a]??q[bt]??Object.values(q)[0],A=(G==null?void 0:G.title)??T.title,K=(G==null?void 0:G.description)??T.description??"No description provided";return n.jsxs(de,{children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(qe,{className:"flex items-center gap-2",children:[A,n.jsx(xe,{variant:T.status==="published"?"default":T.status==="coming_soon"?"secondary":"outline",className:T.status==="published"?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:T.status==="published"?"Available":T.status==="coming_soon"?"Coming Soon":"Draft"})]}),n.jsx(ls,{children:K})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(te,{variant:"outline",size:"sm",onClick:()=>O(T),children:n.jsx(La,{className:"h-4 w-4"})}),n.jsx(te,{variant:"outline",size:"sm",onClick:()=>W(T),children:n.jsx(Ra,{className:"h-4 w-4"})})]})]})}),n.jsxs(oe,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Lt,{className:"h-4 w-4"}),T.paths_count," paths"]}),n.jsxs("div",{children:["Created ",T.created_at?or(new Date(T.created_at)):"N/A"," ago"]}),T.published_at&&n.jsxs("div",{children:["Published ",or(new Date(T.published_at))," ago"]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[Object.values(q).length===0&&n.jsx(xe,{variant:"outline",children:"No locales"}),Object.values(q).map(ne=>n.jsxs(xe,{variant:ne.is_published?"default":"outline",className:ne.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:[ne.locale,"  ",ne.is_published?"Published":"Draft"]},`${T.id}-${ne.locale}`))]}),T.paths&&T.paths.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Learning Paths:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:T.paths.map(ne=>n.jsxs(xe,{variant:"outline",children:["#",ne.order,"  ",ne.title]},ne.id))})]})]})]},T.id)}),L&&L.length===0&&n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:"No formations yet. Create one to group paths into longer journeys."})})]}),n.jsx(qr,{open:x,onOpenChange:g,children:n.jsxs(ur,{className:"sm:max-w-[720px] max-h-[90vh] overflow-y-auto",children:[n.jsxs(hr,{children:[n.jsx(mr,{children:w?"Edit Formation":"Create Formation"}),n.jsx(Kr,{children:w?"Update slug, status, localized content, and manage associated learning paths.":"Fill in the details to create a new formation. Add learning paths after saving."})]}),n.jsx(Ha,{...R,children:n.jsxs("form",{onSubmit:R.handleSubmit(I),className:"space-y-6",children:[n.jsx(nt,{control:R.control,name:"slug",render:({field:T})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Slug"}),n.jsx(et,{children:n.jsx(ye,{placeholder:"formation-slug",...T,onChange:q=>{v(!0),T.onChange(q)}})}),n.jsx(Mt,{children:"Auto-generated from the default locale title."}),n.jsx(at,{})]})}),n.jsx(nt,{control:R.control,name:"status",render:({field:T})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Status"}),n.jsx(et,{children:n.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:T.value,onChange:q=>T.onChange(q.target.value),children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"coming_soon",children:"Coming Soon"})]})}),n.jsx(Mt,{children:"Coming soon keeps the formation visible while collecting interest."}),n.jsx(at,{})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-forge-dark",children:"Localized content"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Manage per-locale titles, descriptions, thumbnails, tags, and publish states."})]}),r?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsxs(oe,{className:"flex items-center gap-2 p-6 text-sm text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading locales..."]})}):s.length===0?n.jsx(de,{className:"border border-red-200 bg-red-50/80",children:n.jsx(oe,{className:"p-4 text-sm text-red-700",children:"Add locales in Supabase before editing localized formation content."})}):n.jsx(Ro,{locales:s,activeLocale:i,onLocaleChange:o,renderFields:V})]}),w?n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ft,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-forge-dark",children:"Learning paths"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Add or reorder learning paths for this formation. Changes are saved immediately."}),n.jsx(_4,{formationId:w.id,selectedPaths:_,onPathsChange:E})]})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ft,{}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Save the formation to start attaching learning paths."})]}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:J.isPending,children:"Cancel"}),n.jsx(te,{type:"submit",disabled:J.isPending||R.formState.isSubmitting,children:J.isPending||R.formState.isSubmitting?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):w?"Update":"Create"})]})]})})]})}),n.jsx(Fn,{open:b,onOpenChange:y,children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:"Delete formation"}),n.jsxs(Zr,{children:["This action cannot be undone. This will permanently delete the formation ",P," and remove all associated path assignments."]})]}),n.jsxs(Yr,{children:[n.jsx(en,{disabled:Y.isPending,children:"Cancel"}),n.jsx(Qr,{onClick:C,disabled:Y.isPending,className:"bg-red-500 hover:bg-red-600",children:Y.isPending?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})}const E4=t=>t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80),A4=Ua({slug:gs().min(3,"Slug must include at least 3 characters").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and hyphens only"),status:Zc(["draft","published","coming_soon"]),formation_id:Vi([gs().uuid(),Hi("")]).optional(),order:Vi([Dr.number().int().min(1),w4()]).optional()});function L4(){var W;const t=p.useMemo(()=>Ue(),[]),e=Ht(),{data:s=[],isLoading:r}=$e({queryKey:["content-locales"],queryFn:async()=>jo(t)}),a=p.useMemo(()=>qs(s),[s]),[i,o]=p.useState(bt),[l,c]=p.useState({});p.useEffect(()=>{s.length>0&&o(C=>s.some(V=>V.code===C)?C:a)},[s,a]);const d=p.useCallback(()=>({title:"",description:"",thumbnailUrl:"",tags:[],isPublished:!1,publishedAt:null}),[]),u=p.useCallback(C=>({title:(C==null?void 0:C.title)??"",description:(C==null?void 0:C.description)??"",thumbnailUrl:(C==null?void 0:C.thumbnail_url)??"",tags:(C==null?void 0:C.tags)??[],isPublished:(C==null?void 0:C.is_published)??!1,publishedAt:(C==null?void 0:C.published_at)??null}),[]),h=p.useCallback((C,V)=>{c(P=>{const B=P[C]??d();return{...P,[C]:V(B)}})},[d]),f=p.useCallback(C=>{if(s.length===0)return;const V=C?$t(C.learning_path_localizations??[]):{},P=Object.fromEntries(Object.entries(V).map(([T,q])=>[T,u(q)])),B=No(s,P,()=>d());c(B),o(qs(s))},[s,u,d]),m=p.useMemo(()=>s.reduce((C,V)=>(C[V.code]=V.label,C),{}),[s]),[x,g]=p.useState(!1),[b,y]=p.useState(null),[w,N]=p.useState(null),[S,k]=p.useState(!1),j=Aa({resolver:Va(A4),defaultValues:{slug:"",status:"draft",formation_id:"",order:1}});p.useEffect(()=>{x||(j.reset({slug:"",status:"draft",formation_id:"",order:1}),N(null),k(!1),c({}),o(a))},[x,j,a]);const v=((W=l[a])==null?void 0:W.title)??"",_=j.watch("slug");p.useEffect(()=>{if(!S&&!w){const C=E4(v);C&&C!==_&&j.setValue("slug",C,{shouldValidate:!1})}},[v,S,w,_,j]);const{data:E=[]}=$e({queryKey:["admin-formations"],queryFn:async()=>{const{data:C,error:V}=await t.from("formations").select("id, title, slug").order("title");if(V)throw V;return C??[]}}),R=p.useMemo(()=>E.reduce((C,V)=>(C[V.id]=V,C),{}),[E]),{data:z,isLoading:F}=$e({queryKey:["admin-paths"],queryFn:async()=>{const{data:C,error:V}=await t.from("learning_paths").select(`
            id,
            title,
            slug,
            description,
            is_published,
            published_at,
            created_at,
            updated_at,
            status,
            learning_path_localizations(*),
            courses:courses(id)
          `).order("created_at",{ascending:!1});if(V)throw V;const P=(C??[]).map(G=>({...G,courses_count:Array.isArray(G.courses)?G.courses.length:0})),{data:B,error:T}=await t.from("formation_paths").select("learning_path_id, formation_id, order");if(T)throw T;const q=new Map;return B==null||B.forEach(G=>{q.set(G.learning_path_id,{formation_id:G.formation_id,order:G.order})}),P.map(G=>{const A=q.get(G.id);return{...G,formation_id:(A==null?void 0:A.formation_id)??void 0,order:(A==null?void 0:A.order)??void 0}})}}),L=Xe({mutationFn:async C=>{if(!s.length)throw new Error("Configure locales before saving learning paths");if(Object.keys(l).length===0)throw new Error("Add localized content before saving the path");const V=s.reduce((ee,re)=>(ee[re.code]=re.label,ee),{}),P=l[a];if(!P||!P.title.trim())throw new Error(`Provide a title for ${V[a]??a}`);const B=Object.values(l).some(ee=>ee.isPublished),T={slug:C.slug.trim(),status:C.status,title:P.title.trim(),description:P.description.trim()?P.description.trim():null,is_published:B,published_at:B?(w==null?void 0:w.published_at)??new Date().toISOString():null};let q=(w==null?void 0:w.id)??null;if(w){const{error:ee}=await t.from("learning_paths").update(T).eq("id",w.id);if(ee)throw ee}else{const{data:ee,error:re}=await t.from("learning_paths").insert(T).select("id").single();if(re)throw re;q=(ee==null?void 0:ee.id)??null}if(!q)throw new Error("Unable to determine learning path identifier after saving");const G=$t((w==null?void 0:w.learning_path_localizations)??[]),A=Object.entries(l).map(([ee,re])=>{var ae;return{learning_path_id:q,locale:ee,title:re.title.trim(),description:re.description.trim()?re.description.trim():null,tags:re.tags,thumbnail_url:re.thumbnailUrl.trim()?re.thumbnailUrl.trim():null,is_published:re.isPublished,published_at:re.isPublished?re.publishedAt??((ae=G[ee])==null?void 0:ae.published_at)??new Date().toISOString():null}}),{error:K}=await t.from("learning_path_localizations").upsert(A,{onConflict:"learning_path_id,locale"});if(K)throw K;const ne=C.formation_id&&C.formation_id.trim()?C.formation_id.trim():null,le=C.order??1;if(w!=null&&w.formation_id){const{error:ee}=await t.from("formation_paths").delete().eq("learning_path_id",q);if(ee)throw ee}if(ne){const{error:ee}=await t.from("formation_paths").insert({learning_path_id:q,formation_id:ne,order:le});if(ee)throw ee}},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-paths"]}),Q.success(w?"Learning path updated":"Learning path created"),g(!1)},onError:C=>{console.error("Error saving learning path",C),Q.error(C instanceof Error?C.message:"Failed to save learning path")}}),U=Xe({mutationFn:async C=>{const{error:V}=await t.from("learning_paths").delete().eq("id",C);if(V)throw V},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-paths"]}),Q.success("Learning path deleted"),y(null)},onError:C=>{console.error("Error deleting learning path",C),Q.error(C instanceof Error?C.message:"Failed to delete learning path")}}),J=()=>{if(!s.length){Q.error("Configure locales before creating learning paths");return}N(null),k(!1),j.reset({slug:"",status:"draft",formation_id:"",order:1}),f(void 0),g(!0)},Y=C=>{if(!s.length){Q.error("Configure locales before editing learning paths");return}N(C),k(!0),j.reset({slug:C.slug??"",status:C.status??"draft",formation_id:C.formation_id??"",order:C.order??1}),f(C),g(!0)},I=C=>{try{L.mutate(C)}catch(V){V instanceof Error&&Q.error(V.message)}},O=C=>{const V=l[C]??d(),P=m[C]??C;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ge,{className:"text-sm font-medium text-forge-dark",children:["Title  ",P]}),n.jsx(ye,{value:V.title,onChange:B=>h(C,T=>({...T,title:B.target.value})),placeholder:`Title in ${P}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Thumbnail URL"}),n.jsx(ye,{value:V.thumbnailUrl,onChange:B=>h(C,T=>({...T,thumbnailUrl:B.target.value})),placeholder:"https://..."})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Description"}),n.jsx(Ur,{rows:4,value:V.description,onChange:B=>h(C,T=>({...T,description:B.target.value})),placeholder:`Description in ${P}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Tags"}),n.jsx(Mr,{value:V.tags,onChange:B=>h(C,T=>({...T,tags:B})),placeholder:`Add tags for ${P}`})]}),n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-forge-cream/60 bg-forge-cream/30 px-3 py-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-forge-dark",children:"Published"}),n.jsx("p",{className:"text-xs text-forge-gray",children:V.isPublished?"Visible to learners in this locale":"Hidden until you publish this locale"})]}),n.jsx($n,{checked:V.isPublished,onCheckedChange:B=>h(C,T=>({...T,isPublished:B}))})]})]})},D=p.useMemo(()=>{if(!b)return"";const C=$t(b.learning_path_localizations??[]),V=C[a]??C[bt]??Object.values(C)[0];return(V==null?void 0:V.title)??b.title??"this learning path"},[b,a]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-forge-dark",children:"Learning Paths"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Group courses into curated journeys and control localized content per language."})]}),n.jsxs(te,{onClick:J,className:"self-start sm:self-auto",children:[n.jsx(Mn,{className:"mr-2 h-4 w-4"}),"New Path"]})]}),F?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/80",children:n.jsxs(oe,{className:"flex items-center gap-3 p-8 text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading learning paths..."]})}):z&&z.length>0?n.jsx("div",{className:"grid gap-4",children:z.map(C=>{var q;const V=$t(C.learning_path_localizations??[]),P=V[a]??V[bt]??Object.values(V)[0],B=(P==null?void 0:P.title)??C.title??"Untitled path",T=(P==null?void 0:P.description)??C.description??"No description";return n.jsxs(de,{className:"border border-forge-cream/70 bg-white/80",children:[n.jsxs(Be,{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(qe,{className:"flex flex-wrap items-center gap-2 text-forge-dark",children:[B,n.jsx(xe,{variant:C.status==="published"?"default":C.status==="coming_soon"?"secondary":"outline",className:C.status==="published"?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:C.status==="published"?"Published":C.status==="coming_soon"?"Coming Soon":"Draft"})]}),n.jsx(ls,{className:"text-sm text-forge-gray",children:T})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(te,{variant:"outline",size:"icon",onClick:()=>Y(C),children:n.jsx(La,{className:"h-4 w-4"})}),n.jsx(te,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>y(C),children:n.jsx(Ra,{className:"h-4 w-4"})})]})]}),n.jsxs(oe,{className:"space-y-3 text-sm text-forge-gray",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Slug:"})," ",C.slug]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Courses:"})," ",C.courses_count??0]}),C.formation_id&&n.jsxs(n.Fragment,{children:[n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Formation:"})," ",((q=R[C.formation_id])==null?void 0:q.title)??"Linked formation",C.order?`  Order ${C.order}`:""]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[Object.values(V).length===0&&n.jsx(xe,{variant:"outline",children:"No locales"}),Object.values(V).map(G=>n.jsxs(xe,{variant:G.is_published?"default":"outline",className:G.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:[G.locale,"  ",G.is_published?"Published":"Draft"]},`${C.id}-${G.locale}`))]}),n.jsxs("div",{className:"text-xs text-forge-gray/80",children:["Updated ",C.updated_at?or(new Date(C.updated_at),{addSuffix:!0}):"N/A"]})]})]},C.id)})}):n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:"No learning paths yet. Create your first path to start structuring content."})}),n.jsx(qr,{open:x,onOpenChange:g,children:n.jsxs(ur,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(hr,{children:[n.jsx(mr,{children:w?"Edit learning path":"New learning path"}),n.jsx(Kr,{children:w?"Update slug, status, formation links, and localized content for this path.":"Define the high-level journey for learners. You can add courses after saving."})]}),n.jsx(Ha,{...j,children:n.jsxs("form",{onSubmit:j.handleSubmit(I),className:"space-y-6",children:[n.jsx(nt,{control:j.control,name:"slug",render:({field:C})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Slug"}),n.jsx(et,{children:n.jsx(ye,{placeholder:"web-development-accelerator",...C,onChange:V=>{k(!0),C.onChange(V)}})}),n.jsx(Mt,{children:"We auto-generate this from the default locale title."}),n.jsx(at,{})]})}),n.jsx(nt,{control:j.control,name:"status",render:({field:C})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Status"}),n.jsx(et,{children:n.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:C.value,onChange:V=>C.onChange(V.target.value),children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"coming_soon",children:"Coming Soon"})]})}),n.jsx(Mt,{children:"Coming soon keeps the path visible while routes point to waitlists."}),n.jsx(at,{})]})}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsx(nt,{control:j.control,name:"formation_id",render:({field:C})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Formation"}),n.jsx(et,{children:n.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:C.value??"",onChange:C.onChange,children:[n.jsx("option",{value:"",children:"Not attached"}),E.map(V=>n.jsx("option",{value:V.id,children:V.title},V.id))]})}),n.jsx(Mt,{children:"Attach this path to a formation to control marketplace ordering."}),n.jsx(at,{})]})}),n.jsx(nt,{control:j.control,name:"order",render:({field:C})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Order within formation"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:1,value:C.value??"",onChange:V=>C.onChange(V.target.value?Number(V.target.value):void 0),disabled:!j.watch("formation_id"),placeholder:"Auto"})}),n.jsx(Mt,{children:"Only used when the path belongs to a formation."}),n.jsx(at,{})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-forge-dark",children:"Localized content"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Manage per-locale titles, descriptions, thumbnails, tags, and publish states."})]}),r?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsxs(oe,{className:"flex items-center gap-2 p-6 text-sm text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading locales..."]})}):s.length===0?n.jsx(de,{className:"border border-red-200 bg-red-50/80",children:n.jsx(oe,{className:"p-4 text-sm text-red-700",children:"Add locales in Supabase before editing localized path content."})}):n.jsx(Ro,{locales:s,activeLocale:i,onLocaleChange:o,renderFields:O})]}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:j.formState.isSubmitting,children:"Cancel"}),n.jsx(te,{type:"submit",disabled:j.formState.isSubmitting||L.isPending,children:j.formState.isSubmitting||L.isPending?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):w?"Save changes":"Create path"})]})]})})]})}),n.jsx(Fn,{open:!!b,onOpenChange:C=>!C&&y(null),children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:"Delete learning path"}),n.jsxs(Zr,{children:["This action cannot be undone. Deleting a path will remove localized content and detach it from formations. Continue deleting ",D,"?"]})]}),n.jsxs(Yr,{children:[n.jsx(en,{disabled:U.isPending,children:"Cancel"}),n.jsx(Qr,{onClick:()=>b&&U.mutate(b.id),className:"bg-red-500 hover:bg-red-600",disabled:U.isPending,children:U.isPending?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})}const R4=t=>t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80),O4=Ua({path_id:gs().uuid("Select a learning path"),slug:gs().min(3,"Slug must have at least 3 characters").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and hyphens only"),order:Dr.number().int("Order must be an integer").min(1,"Order must be at least 1"),duration_minutes:Vi([Dr.number().int().min(0),Hi("")]).optional().transform(t=>t===""||t===void 0?null:Number(t)),status:Zc(["draft","published","coming_soon"])});function M4(){var V;const t=p.useMemo(()=>Ue(),[]),e=Ht(),{data:s=[],isLoading:r}=$e({queryKey:["content-locales"],queryFn:async()=>jo(t)}),a=p.useMemo(()=>qs(s),[s]),[i,o]=p.useState(bt),[l,c]=p.useState({});p.useEffect(()=>{s.length>0&&o(P=>s.some(B=>B.code===P)?P:a)},[s,a]);const d=p.useCallback(()=>({title:"",summary:"",description:"",tags:[],thumbnailUrl:"",isPublished:!1,publishedAt:null}),[]),u=p.useCallback(P=>({title:(P==null?void 0:P.title)??"",summary:(P==null?void 0:P.summary)??"",description:(P==null?void 0:P.description)??"",tags:(P==null?void 0:P.tags)??[],thumbnailUrl:(P==null?void 0:P.thumbnail_url)??"",isPublished:(P==null?void 0:P.is_published)??!1,publishedAt:(P==null?void 0:P.published_at)??null}),[]),h=p.useCallback((P,B)=>{c(T=>{const q=T[P]??d();return{...T,[P]:B(q)}})},[d]),f=p.useCallback(P=>{if(s.length===0)return;const B=P?$t(P.course_localizations??[]):{},T=Object.fromEntries(Object.entries(B).map(([G,A])=>[G,u(A)])),q=No(s,T,()=>d());c(q),o(qs(s))},[s,u,d]),m=p.useMemo(()=>s.reduce((P,B)=>(P[B.code]=B.label,P),{}),[s]),[x,g]=p.useState("all"),[b,y]=p.useState(!1),[w,N]=p.useState(null),[S,k]=p.useState(null),[j,v]=p.useState(!1),_=Aa({resolver:Va(O4),defaultValues:{path_id:"",slug:"",order:1,duration_minutes:"",status:"draft"}});p.useEffect(()=>{b||(_.reset(),N(null),v(!1),c({}),o(a))},[b,_,a]);const E=_.watch("slug"),R=((V=l[a])==null?void 0:V.title)??"";p.useEffect(()=>{if(!j&&!w){const P=R4(R??"");P&&P!==E&&_.setValue("slug",P,{shouldValidate:!1})}},[R,E,j,w,_]);const{data:z=[]}=$e({queryKey:["admin-courses-paths"],queryFn:async()=>{const{data:P,error:B}=await t.from("learning_paths").select("id, title, slug").order("title",{ascending:!0});if(B)throw B;return P??[]}}),F=p.useMemo(()=>z.reduce((P,B)=>(P[B.id]=B,P),{}),[z]),{data:L,isLoading:U}=$e({queryKey:["admin-courses"],queryFn:async()=>{const{data:P,error:B}=await t.from("courses").select(`
            id,
            title,
            slug,
            summary,
            description,
            path_id,
            order,
            duration_minutes,
            status,
            is_published,
            published_at,
            thumbnail_url,
            updated_at,
            course_localizations(*),
            modules:modules(id)
          `).order("order",{ascending:!0});if(B)throw B;return(P??[]).map(T=>({...T,moduleCount:Array.isArray(T.modules)?T.modules.length:0}))}}),J=p.useMemo(()=>L?x==="all"?L:L.filter(P=>P.path_id===x):[],[L,x]),Y=Xe({mutationFn:async P=>{if(!s.length)throw new Error("No locales configured for courses");if(Object.keys(l).length===0)throw new Error("Add localized content before saving the course");const B=s.reduce((ee,re)=>(ee[re.code]=re.label,ee),{}),T=l[a];if(!T||!T.title.trim())throw new Error(`Provide a title for ${B[a]??a}`);const q=Object.values(l).some(ee=>ee.isPublished),G={path_id:P.path_id,slug:P.slug.trim(),order:P.order,duration_minutes:P.duration_minutes??null,status:P.status,title:T.title.trim(),summary:T.summary.trim()?T.summary.trim():null,description:T.description.trim()?T.description.trim():null,thumbnail_url:T.thumbnailUrl.trim()?T.thumbnailUrl.trim():null,is_published:q,published_at:q?(w==null?void 0:w.published_at)??new Date().toISOString():null};let A=(w==null?void 0:w.id)??null;if(w){const{error:ee}=await t.from("courses").update(G).eq("id",w.id);if(ee)throw ee}else{const{data:ee,error:re}=await t.from("courses").insert(G).select("id").single();if(re)throw re;A=(ee==null?void 0:ee.id)??null}if(!A)throw new Error("Unable to determine course identifier after saving");const K=$t((w==null?void 0:w.course_localizations)??[]),ne=Object.entries(l).map(([ee,re])=>{var ae;return{course_id:A,locale:ee,title:re.title.trim(),summary:re.summary.trim()?re.summary.trim():null,description:re.description.trim()?re.description.trim():null,tags:re.tags,thumbnail_url:re.thumbnailUrl.trim()?re.thumbnailUrl.trim():null,is_published:re.isPublished,published_at:re.isPublished?re.publishedAt??((ae=K[ee])==null?void 0:ae.published_at)??new Date().toISOString():null}}),{error:le}=await t.from("course_localizations").upsert(ne,{onConflict:"course_id,locale"});if(le)throw le},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-courses"]}),Q.success(w?"Course updated":"Course created"),y(!1)},onError:P=>{console.error("Error saving course",P),Q.error(P instanceof Error?P.message:"Failed to save course")}}),I=Xe({mutationFn:async P=>{const{error:B}=await t.from("courses").delete().eq("id",P);if(B)throw B},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-courses"]}),Q.success("Course deleted"),k(null)},onError:P=>{console.error("Error deleting course",P),Q.error(P instanceof Error?P.message:"Failed to delete course")}}),O=()=>{if(!s.length){Q.error("Configure locales before creating courses");return}N(null),v(!1),_.reset({path_id:x!=="all"?x:"",slug:"",order:1,duration_minutes:"",status:"draft"}),f(void 0),y(!0)},D=P=>{var B;if(!s.length){Q.error("Configure locales before editing courses");return}N(P),v(!0),_.reset({path_id:P.path_id??"",slug:P.slug??"",order:P.order??1,duration_minutes:((B=P.duration_minutes)==null?void 0:B.toString())??"",status:P.status??"draft"}),f(P),y(!0)},W=P=>{try{Y.mutate(P)}catch(B){B instanceof Error&&Q.error(B.message)}},C=P=>{const B=l[P]??d(),T=m[P]??P;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ge,{className:"text-sm font-medium text-forge-dark",children:["Title  ",T]}),n.jsx(ye,{value:B.title,onChange:q=>h(P,G=>({...G,title:q.target.value})),placeholder:`Title in ${T}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Summary"}),n.jsx(Ur,{rows:3,value:B.summary,onChange:q=>h(P,G=>({...G,summary:q.target.value})),placeholder:`Short summary in ${T}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Description"}),n.jsx(Ur,{rows:5,value:B.description,onChange:q=>h(P,G=>({...G,description:q.target.value})),placeholder:`Full description in ${T}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Thumbnail URL"}),n.jsx(ye,{value:B.thumbnailUrl,onChange:q=>h(P,G=>({...G,thumbnailUrl:q.target.value})),placeholder:"https://..."}),n.jsx(Mt,{children:"Use locale-specific thumbnails when needed."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Tags"}),n.jsx(Mr,{value:B.tags,onChange:q=>h(P,G=>({...G,tags:q})),placeholder:"Type a tag and press Enter"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-forge-cream/80 bg-forge-cream/40 p-3",children:[n.jsx($n,{id:`course-publish-${P}`,checked:B.isPublished,onCheckedChange:q=>h(P,G=>({...G,isPublished:q,publishedAt:q?G.publishedAt??new Date().toISOString():null}))}),n.jsx("label",{htmlFor:`course-publish-${P}`,className:"text-sm text-forge-gray",children:B.isPublished?`Published in ${T}`:`Draft in ${T}`})]})]})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-forge-dark",children:"Courses"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Manage courses inside each learning path. Adjust order, metadata, and publish state."})]}),n.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[n.jsxs(Pt,{value:x,onValueChange:P=>g(P),children:[n.jsx(kt,{className:"w-[240px]",children:n.jsx(Rt,{placeholder:"Filter by path"})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:"All paths"}),z.map(P=>n.jsx(Ye,{value:P.id,children:P.title},P.id))]})]}),n.jsxs(te,{onClick:O,className:"sm:w-auto",children:[n.jsx(Mn,{className:"mr-2 h-4 w-4"}),"New Course"]})]})]}),U?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/80",children:n.jsxs(oe,{className:"flex items-center gap-3 p-8 text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading courses..."]})}):J&&J.length>0?n.jsx("div",{className:"grid gap-4",children:J.map(P=>{var A;const B=$t(P.course_localizations??[]),T=B[a]??B[bt]??Object.values(B)[0],q=(T==null?void 0:T.title)??P.title,G=(T==null?void 0:T.summary)??P.summary??"No summary";return n.jsxs(de,{className:"border border-forge-cream/70 bg-white/80",children:[n.jsxs(Be,{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(qe,{className:"flex flex-wrap items-center gap-2 text-forge-dark",children:["#",P.order,"  ",q,n.jsx(xe,{variant:P.status==="published"?"default":P.status==="coming_soon"?"secondary":"outline",className:P.status==="published"?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:P.status==="published"?"Published":P.status==="coming_soon"?"Coming Soon":"Draft"})]}),n.jsx(ls,{className:"text-sm text-forge-gray",children:G})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(te,{variant:"outline",size:"icon",onClick:()=>D(P),children:n.jsx(La,{className:"h-4 w-4"})}),n.jsx(te,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>k(P),children:n.jsx(Ra,{className:"h-4 w-4"})})]})]}),n.jsxs(oe,{className:"space-y-3 text-sm text-forge-gray",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Path:"})," ",P.path_id?((A=F[P.path_id])==null?void 0:A.title)??"Unknown path":"Unassigned"]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Slug:"})," ",P.slug]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Modules:"})," ",P.moduleCount]}),P.duration_minutes!=null&&n.jsxs(n.Fragment,{children:[n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Duration:"})," ",P.duration_minutes," min"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[Object.values(B).length===0&&n.jsx(xe,{variant:"outline",children:"No locales"}),Object.values(B).map(K=>n.jsxs(xe,{variant:K.is_published?"default":"outline",className:K.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:[K.locale,"  ",K.is_published?"Published":"Draft"]},`${P.id}-${K.locale}`))]}),(T==null?void 0:T.description)&&n.jsx("p",{className:"text-xs text-forge-gray/90",children:T.description}),(T==null?void 0:T.thumbnail_url)&&n.jsx("a",{href:T.thumbnail_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium text-forge-orange hover:underline",children:"View thumbnail"}),n.jsxs("div",{className:"text-xs text-forge-gray/80",children:["Updated ",P.updated_at?or(new Date(P.updated_at),{addSuffix:!0}):"N/A"]})]})]},P.id)})}):n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:"No courses found for this filter. Create a new course to start building structure."})}),n.jsx(qr,{open:b,onOpenChange:y,children:n.jsxs(ur,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(hr,{children:[n.jsx(mr,{children:w?"Edit course":"New course"}),n.jsx(Kr,{children:w?"Update metadata, ordering, and visibility for this course.":"Create a course inside a learning path. You can attach modules after saving."})]}),n.jsx(Ha,{..._,children:n.jsxs("form",{onSubmit:_.handleSubmit(W),className:"space-y-6",children:[n.jsx(nt,{control:_.control,name:"path_id",render:({field:P})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Learning path"}),n.jsx(et,{children:n.jsxs(Pt,{value:P.value,onValueChange:P.onChange,children:[n.jsx(kt,{className:"w-full",children:n.jsx(Rt,{placeholder:"Select a learning path"})}),n.jsx(St,{children:z.map(B=>n.jsx(Ye,{value:B.id,children:B.title},B.id))})]})}),n.jsx(at,{})]})}),n.jsx(nt,{control:_.control,name:"slug",render:({field:P})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Slug"}),n.jsx(et,{children:n.jsx(ye,{placeholder:"react-typescript-foundations",...P,onChange:B=>{v(!0),P.onChange(B)}})}),n.jsx(Mt,{children:"We auto-generate this from the default locale title."}),n.jsx(at,{})]})}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsx(nt,{control:_.control,name:"order",render:({field:P})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Order"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:1,...P})}),n.jsx(at,{})]})}),n.jsx(nt,{control:_.control,name:"duration_minutes",render:({field:P})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Duration (minutes)"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:0,placeholder:"Optional",...P})}),n.jsx(at,{})]})})]}),n.jsx(nt,{control:_.control,name:"status",render:({field:P})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Status"}),n.jsx(et,{children:n.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:P.value,onChange:B=>P.onChange(B.target.value),children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"coming_soon",children:"Coming Soon"})]})}),n.jsx(Mt,{children:"Coming soon keeps the course visible while you collect early interest."}),n.jsx(at,{})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-forge-dark",children:"Localized content"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Manage per-locale titles, summaries, descriptions, thumbnails, tags, and publish states."})]}),r?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsxs(oe,{className:"flex items-center gap-2 p-6 text-sm text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading locales..."]})}):s.length===0?n.jsx(de,{className:"border border-red-200 bg-red-50/80",children:n.jsx(oe,{className:"p-4 text-sm text-red-700",children:"Add locales in Supabase before editing localized course content."})}):n.jsx(Ro,{locales:s,activeLocale:i,onLocaleChange:o,renderFields:C})]}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:_.formState.isSubmitting,children:"Cancel"}),n.jsx(te,{type:"submit",disabled:_.formState.isSubmitting,children:_.formState.isSubmitting?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):w?"Save changes":"Create course"})]})]})})]})}),n.jsx(Fn,{open:!!S,onOpenChange:P=>!P&&k(null),children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:"Delete course"}),n.jsxs(Zr,{children:["Deleting a course will also remove its modules and lessons. This cannot be undone. Continue deleting ",S==null?void 0:S.title,"?"]})]}),n.jsxs(Yr,{children:[n.jsx(en,{disabled:I.isPending,children:"Cancel"}),n.jsx(Qr,{onClick:()=>S&&I.mutate(S.id),className:"bg-red-500 hover:bg-red-600",disabled:I.isPending,children:I.isPending?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})}const I4=t=>t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80),D4=Ua({course_id:gs().uuid("Select a course"),slug:gs().min(3,"Slug must have at least 3 characters").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and hyphens only"),order:Dr.number().int("Order must be an integer").min(1,"Order must be at least 1")});function $4(){var G;const t=p.useMemo(()=>Ue(),[]),e=Ht(),{data:s=[],isLoading:r}=$e({queryKey:["content-locales"],queryFn:async()=>jo(t)}),a=p.useMemo(()=>qs(s),[s]),[i,o]=p.useState(bt),[l,c]=p.useState({});p.useEffect(()=>{s.length>0&&o(A=>s.some(K=>K.code===A)?A:a)},[s,a]);const d=p.useCallback(()=>({title:"",summary:"",tags:[],thumbnailUrl:"",isPublished:!1,publishedAt:null}),[]),u=p.useCallback(A=>({title:(A==null?void 0:A.title)??"",summary:(A==null?void 0:A.summary)??"",tags:(A==null?void 0:A.tags)??[],thumbnailUrl:(A==null?void 0:A.thumbnail_url)??"",isPublished:(A==null?void 0:A.is_published)??!1,publishedAt:(A==null?void 0:A.published_at)??null}),[]),h=p.useCallback((A,K)=>{c(ne=>{const le=ne[A]??d();return{...ne,[A]:K(le)}})},[d]),f=p.useCallback(A=>{if(s.length===0)return;const K=A?$t(A.module_localizations??[]):{},ne=Object.fromEntries(Object.entries(K).map(([ee,re])=>[ee,u(re)])),le=No(s,ne,()=>d());c(le),o(qs(s))},[s,u,d]),m=p.useMemo(()=>s.reduce((A,K)=>(A[K.code]=K.label,A),{}),[s]),[x,g]=p.useState("all"),[b,y]=p.useState("all"),[w,N]=p.useState(!1),[S,k]=p.useState(null),[j,v]=p.useState(null),[_,E]=p.useState(!1),R=Aa({resolver:Va(D4),defaultValues:{course_id:"",slug:"",order:1}});p.useEffect(()=>{w||(R.reset(),k(null),E(!1),c({}),o(a))},[w,R,a]);const z=R.watch("slug"),F=((G=l[a])==null?void 0:G.title)??"";p.useEffect(()=>{if(!_&&!S){const A=I4(F??"");A&&A!==z&&R.setValue("slug",A,{shouldValidate:!1})}},[F,z,_,S,R]);const{data:L=[]}=$e({queryKey:["admin-modules-paths"],queryFn:async()=>{const{data:A,error:K}=await t.from("learning_paths").select("id, title").order("title",{ascending:!0});if(K)throw K;return A??[]}}),{data:U=[]}=$e({queryKey:["admin-modules-courses"],queryFn:async()=>{const{data:A,error:K}=await t.from("courses").select("id, title, path_id, order").order("path_id",{ascending:!0}).order("order",{ascending:!0});if(K)throw K;return A??[]}}),J=p.useMemo(()=>L.reduce((A,K)=>(A[K.id]=K,A),{}),[L]),Y=p.useMemo(()=>U.reduce((A,K)=>(A[K.id]=K,A),{}),[U]),I=p.useMemo(()=>x==="all"?U:U.filter(A=>A.path_id===x),[U,x]),{data:O,isLoading:D}=$e({queryKey:["admin-modules"],queryFn:async()=>{const{data:A,error:K}=await t.from("modules").select(`
            id,
            title,
            slug,
            summary,
            order,
            course_id,
            is_published,
            published_at,
            updated_at,
            module_localizations(*),
            lessons:lessons(id)
          `).order("course_id",{ascending:!0}).order("order",{ascending:!0});if(K)throw K;return(A??[]).map(ne=>({...ne,lessonCount:Array.isArray(ne.lessons)?ne.lessons.length:0}))}}),W=p.useMemo(()=>O?O.filter(A=>{if(x!=="all"){const K=A.course_id?Y[A.course_id]:null;if(!K||K.path_id!==x)return!1}return!(b!=="all"&&A.course_id!==b)}):[],[O,x,b,Y]),C=Xe({mutationFn:async A=>{if(!s.length)throw new Error("No locales configured for modules");if(Object.keys(l).length===0)throw new Error("Add localized content before saving the module");const K=s.reduce((X,fe)=>(X[fe.code]=fe.label,X),{}),ne=l[a];if(!ne||!ne.title.trim())throw new Error(`Provide a title for ${K[a]??a}`);const le=Object.values(l).some(X=>X.isPublished),ee={course_id:A.course_id,slug:A.slug.trim(),order:A.order,title:ne.title.trim(),summary:ne.summary.trim()?ne.summary.trim():null,is_published:le,published_at:le?(S==null?void 0:S.published_at)??new Date().toISOString():null};let re=(S==null?void 0:S.id)??null;if(S){const{error:X}=await t.from("modules").update(ee).eq("id",S.id);if(X)throw X}else{const{data:X,error:fe}=await t.from("modules").insert(ee).select("id").single();if(fe)throw fe;re=(X==null?void 0:X.id)??null}if(!re)throw new Error("Unable to determine module identifier after saving");const ae=$t((S==null?void 0:S.module_localizations)??[]),Fe=Object.entries(l).map(([X,fe])=>{var Se;return{module_id:re,locale:X,title:fe.title.trim(),summary:fe.summary.trim()?fe.summary.trim():null,tags:fe.tags,thumbnail_url:fe.thumbnailUrl.trim()?fe.thumbnailUrl.trim():null,is_published:fe.isPublished,published_at:fe.isPublished?fe.publishedAt??((Se=ae[X])==null?void 0:Se.published_at)??new Date().toISOString():null}}),{error:M}=await t.from("module_localizations").upsert(Fe,{onConflict:"module_id,locale"});if(M)throw M},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-modules"]}),Q.success(S?"Module updated":"Module created"),N(!1)},onError:A=>{console.error("Error saving module",A),Q.error(A instanceof Error?A.message:"Failed to save module")}}),V=Xe({mutationFn:async A=>{const{error:K}=await t.from("modules").delete().eq("id",A);if(K)throw K},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-modules"]}),Q.success("Module deleted"),v(null)},onError:A=>{console.error("Error deleting module",A),Q.error(A instanceof Error?A.message:"Failed to delete module")}}),P=()=>{if(!s.length){Q.error("Configure locales before creating modules");return}k(null),E(!1),R.reset({course_id:b!=="all"?b:"",slug:"",order:1}),f(void 0),N(!0)},B=A=>{if(!s.length){Q.error("Configure locales before editing modules");return}k(A),E(!0),R.reset({course_id:A.course_id??"",slug:A.slug??"",order:A.order??1}),f(A),N(!0)},T=A=>{try{C.mutate(A)}catch(K){K instanceof Error&&Q.error(K.message)}},q=A=>{const K=l[A]??d(),ne=m[A]??A;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ge,{className:"text-sm font-medium text-forge-dark",children:["Title  ",ne]}),n.jsx(ye,{value:K.title,onChange:le=>h(A,ee=>({...ee,title:le.target.value})),placeholder:`Title in ${ne}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Thumbnail URL"}),n.jsx(ye,{value:K.thumbnailUrl,onChange:le=>h(A,ee=>({...ee,thumbnailUrl:le.target.value})),placeholder:"https://..."})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Summary"}),n.jsx(Ur,{rows:3,value:K.summary,onChange:le=>h(A,ee=>({...ee,summary:le.target.value})),placeholder:`Summary in ${ne}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Tags"}),n.jsx(Mr,{value:K.tags,onChange:le=>h(A,ee=>({...ee,tags:le})),placeholder:"Type a tag and press Enter"}),n.jsxs(Mt,{children:["Tags only apply to the ",ne," locale."]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-forge-cream/80 bg-forge-cream/40 p-3",children:[n.jsx($n,{id:`module-publish-${A}`,checked:K.isPublished,onCheckedChange:le=>h(A,ee=>({...ee,isPublished:le,publishedAt:le?ee.publishedAt??new Date().toISOString():null}))}),n.jsx("label",{htmlFor:`module-publish-${A}`,className:"text-sm text-forge-gray",children:K.isPublished?`Published in ${ne}`:`Draft in ${ne}`})]})]})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 xl:flex-row xl:items-center xl:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-forge-dark",children:"Modules"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Structure lessons within courses. Manage ordering and publish visibility for each module."})]}),n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[n.jsxs(Pt,{value:x,onValueChange:A=>{g(A),y("all")},children:[n.jsx(kt,{className:"w-[220px]",children:n.jsx(Rt,{placeholder:"Filter by path"})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:"All paths"}),L.map(A=>n.jsx(Ye,{value:A.id,children:A.title},A.id))]})]}),n.jsxs(Pt,{value:b,onValueChange:A=>y(A),children:[n.jsx(kt,{className:"w-[220px]",children:n.jsx(Rt,{placeholder:"Filter by course"})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:"All courses"}),I.map(A=>n.jsx(Ye,{value:A.id,children:A.title},A.id))]})]}),n.jsxs(te,{onClick:P,className:"md:w-auto",children:[n.jsx(Mn,{className:"mr-2 h-4 w-4"}),"New Module"]})]})]}),D?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/80",children:n.jsxs(oe,{className:"flex items-center gap-3 p-8 text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading modules..."]})}):W&&W.length>0?n.jsx("div",{className:"grid gap-4",children:W.map(A=>{const K=A.course_id?Y[A.course_id]:null,ne=K!=null&&K.path_id?J[K.path_id]:null,le=$t(A.module_localizations??[]),ee=le[a]??le[bt]??Object.values(le)[0],re=(ee==null?void 0:ee.title)??A.title,ae=(ee==null?void 0:ee.summary)??A.summary??"No summary";return n.jsxs(de,{className:"border border-forge-cream/70 bg-white/80",children:[n.jsxs(Be,{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(qe,{className:"flex flex-wrap items-center gap-2 text-forge-dark",children:["#",A.order,"  ",re,n.jsx(xe,{variant:A.is_published?"default":"outline",className:A.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:A.is_published?"Published":"Draft"})]}),n.jsx(ls,{className:"text-sm text-forge-gray",children:ae})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(te,{variant:"outline",size:"icon",onClick:()=>B(A),children:n.jsx(La,{className:"h-4 w-4"})}),n.jsx(te,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>v(A),children:n.jsx(Ra,{className:"h-4 w-4"})})]})]}),n.jsxs(oe,{className:"space-y-3 text-sm text-forge-gray",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Course:"})," ",K?K.title:"Unassigned"]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Path:"})," ",ne?ne.title:"Unassigned"]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Slug:"})," ",A.slug]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Lessons:"})," ",A.lessonCount]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[Object.values(le).length===0&&n.jsx(xe,{variant:"outline",children:"No locales"}),Object.values(le).map(Fe=>n.jsxs(xe,{variant:Fe.is_published?"default":"outline",className:Fe.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:[Fe.locale,"  ",Fe.is_published?"Published":"Draft"]},`${A.id}-${Fe.locale}`))]}),n.jsxs("div",{className:"text-xs text-forge-gray/80",children:["Updated ",A.updated_at?or(new Date(A.updated_at),{addSuffix:!0}):"N/A"]})]})]},A.id)})}):n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:"No modules found for this filter. Create a new module to organize lessons."})}),n.jsx(qr,{open:w,onOpenChange:N,children:n.jsxs(ur,{className:"max-w-xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(hr,{children:[n.jsx(mr,{children:S?"Edit module":"New module"}),n.jsx(Kr,{children:S?"Adjust module metadata, ordering, and publish visibility.":"Create a module within a course to group related lessons."})]}),n.jsx(Ha,{...R,children:n.jsxs("form",{onSubmit:R.handleSubmit(T),className:"space-y-6",children:[n.jsx(nt,{control:R.control,name:"course_id",render:({field:A})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Course"}),n.jsx(et,{children:n.jsxs(Pt,{value:A.value,onValueChange:A.onChange,children:[n.jsx(kt,{className:"w-full",children:n.jsx(Rt,{placeholder:"Select a course"})}),n.jsx(St,{children:U.map(K=>n.jsx(Ye,{value:K.id,children:K.title},K.id))})]})}),n.jsx(at,{})]})}),n.jsx(nt,{control:R.control,name:"slug",render:({field:A})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Slug"}),n.jsx(et,{children:n.jsx(ye,{placeholder:"react-fundamentals",...A,onChange:K=>{E(!0),A.onChange(K)}})}),n.jsx(Mt,{children:"We auto-generate this from the default locale title."}),n.jsx(at,{})]})}),n.jsx(nt,{control:R.control,name:"order",render:({field:A})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Order"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:1,...A})}),n.jsx(at,{})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-forge-dark",children:"Localized content"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Manage per-locale titles, summaries, tags, thumbnails, and publish states."})]}),r?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsxs(oe,{className:"flex items-center gap-2 p-6 text-sm text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading locales..."]})}):s.length===0?n.jsx(de,{className:"border border-red-200 bg-red-50/80",children:n.jsx(oe,{className:"p-4 text-sm text-red-700",children:"Add locales in Supabase before editing localized module content."})}):n.jsx(Ro,{locales:s,activeLocale:i,onLocaleChange:o,renderFields:q})]}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>N(!1),disabled:R.formState.isSubmitting,children:"Cancel"}),n.jsx(te,{type:"submit",disabled:R.formState.isSubmitting,children:R.formState.isSubmitting?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):S?"Save changes":"Create module"})]})]})})]})}),n.jsx(Fn,{open:!!j,onOpenChange:A=>!A&&v(null),children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:"Delete module"}),n.jsxs(Zr,{children:["Deleting a module will remove all its lessons. This action cannot be undone. Continue deleting ",j==null?void 0:j.title,"?"]})]}),n.jsxs(Yr,{children:[n.jsx(en,{disabled:V.isPending,children:"Cancel"}),n.jsx(Qr,{onClick:()=>j&&V.mutate(j.id),className:"bg-red-500 hover:bg-red-600",disabled:V.isPending,children:V.isPending?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})}var Zl=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:s,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,s]},F4=/^\s*>\s$/,z4=Wt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Zl("blockquote",{...ft(this.options.HTMLAttributes,t),children:Zl("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const s=">",r=[];return t.content.forEach(a=>{const l=e.renderChildren([a]).split(`
`).map(c=>c.trim()===""?s:`${s} ${c}`);r.push(l.join(`
`))}),r.join(`
${s}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ma({find:F4,type:this.type})]}}),B4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,U4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,V4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,H4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,W4=Oa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Zl("strong",{...ft(this.options.HTMLAttributes,t),children:Zl("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[pa({find:B4,type:this.type}),pa({find:V4,type:this.type})]},addPasteRules(){return[kn({find:U4,type:this.type}),kn({find:H4,type:this.type})]}}),q4=/(^|[^`])`([^`]+)`(?!`)$/,K4=/(^|[^`])`([^`]+)`(?!`)/g,G4=Oa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",ft(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[pa({find:q4,type:this.type})]},addPasteRules(){return[kn({find:K4,type:this.type})]}}),Bd=4,J4=/^```([a-z]+)?[\s\n]$/,Y4=/^~~~([a-z]+)?[\s\n]$/,X4=Wt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Bd,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:s}=this.options;if(!s)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(s)).map(o=>o.replace(s,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",ft(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var s;return((s=t.raw)==null?void 0:s.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var s;let r="";const a=((s=t.attrs)==null?void 0:s.language)||"";return t.content?r=[`\`\`\`${a}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${a}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,s=e.pos===1;return!t||e.parent.type.name!==this.name?!1:s||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const s=(e=this.options.tabSize)!=null?e:Bd,{state:r}=t,{selection:a}=r,{$from:i,empty:o}=a;if(i.parent.type!==this.type)return!1;const l=" ".repeat(s);return o?t.commands.insertContent(l):t.commands.command(({tr:c})=>{const{from:d,to:u}=a,m=r.doc.textBetween(d,u,`
`,`
`).split(`
`).map(x=>l+x).join(`
`);return c.replaceWith(d,u,r.schema.text(m)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const s=(e=this.options.tabSize)!=null?e:Bd,{state:r}=t,{selection:a}=r,{$from:i,empty:o}=a;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:l})=>{var c;const{pos:d}=i,u=i.start(),h=i.end(),m=r.doc.textBetween(u,h,`
`,`
`).split(`
`);let x=0,g=0;const b=d-u;for(let j=0;j<m.length;j+=1){if(g+m[j].length>=b){x=j;break}g+=m[j].length+1}const w=((c=m[x].match(/^ */))==null?void 0:c[0])||"",N=Math.min(w.length,s);if(N===0)return!0;let S=u;for(let j=0;j<x;j+=1)S+=m[j].length+1;return l.delete(S,S+N),d-S<=N&&l.setSelection(xn.create(l.doc,S)),!0}):t.commands.command(({tr:l})=>{const{from:c,to:d}=a,f=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>{var x;const g=((x=m.match(/^ */))==null?void 0:x[0])||"",b=Math.min(g.length,s);return m.slice(b)}).join(`
`);return l.replaceWith(c,d,r.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:s}=e,{$from:r,empty:a}=s;if(!a||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:s,doc:r}=e,{$from:a,empty:i}=s;if(!i||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const l=a.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:d})=>(d.setSelection(Ei.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[ru({find:J4,type:this.type,getAttributes:t=>({language:t[1]})}),ru({find:Y4,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ys({key:new Ls("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const s=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),a=r?JSON.parse(r):void 0,i=a==null?void 0:a.mode;if(!s||!i)return!1;const{tr:o,schema:l}=t.state,c=l.text(s.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(xn.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Z4=Wt.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Q4=Wt.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",ft(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:s,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:i}=s;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=i||a.$to.parentOffset&&a.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:u})=>{if(u&&c&&o){const h=c.filter(f=>l.includes(f.type.name));d.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),eD=Wt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,ft(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var s;const r=(s=t.attrs)!=null&&s.level?parseInt(t.attrs.level,10):1,a="#".repeat(r);return t.content?`${a} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>ru({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),tD=Wt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",ft(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!cN(e,e.schema.nodes[this.name]))return!1;const{selection:s}=e,{$to:r}=s,a=t();return gb(s)?a.insertContentAt(r.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({state:i,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(xn.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(kh.create(o.doc,c.pos)):o.setSelection(xn.create(o.doc,c.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,h=u==null?void 0:u.create();h&&(o.insert(d,h),o.setSelection(xn.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[pb({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),sD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,rD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,nD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,iD=Oa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",ft(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[pa({find:sD,type:this.type}),pa({find:nD,type:this.type})]},addPasteRules(){return[kn({find:rD,type:this.type}),kn({find:aD,type:this.type})]}});const oD="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",lD="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",th="numeric",sh="ascii",rh="alpha",wi="asciinumeric",ii="alphanumeric",nh="domain",ew="emoji",cD="scheme",dD="slashscheme",Ud="whitespace";function uD(t,e){return t in e||(e[t]=[]),e[t]}function fn(t,e,s){e[th]&&(e[wi]=!0,e[ii]=!0),e[sh]&&(e[wi]=!0,e[rh]=!0),e[wi]&&(e[ii]=!0),e[rh]&&(e[ii]=!0),e[ii]&&(e[nh]=!0),e[ew]&&(e[nh]=!0);for(const r in e){const a=uD(r,s);a.indexOf(t)<0&&a.push(t)}}function hD(t,e){const s={};for(const r in e)e[r].indexOf(t)>=0&&(s[r]=!0);return s}function Xt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Xt.groups={};Xt.prototype={accepts(){return!!this.t},go(t){const e=this,s=e.j[t];if(s)return s;for(let r=0;r<e.jr.length;r++){const a=e.jr[r][0],i=e.jr[r][1];if(i&&a.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,s,r){for(let a=0;a<t.length;a++)this.tt(t[a],e,s,r)},tr(t,e,s,r){r=r||Xt.groups;let a;return e&&e.j?a=e:(a=new Xt(e),s&&r&&fn(e,s,r)),this.jr.push([t,a]),a},ts(t,e,s,r){let a=this;const i=t.length;if(!i)return a;for(let o=0;o<i-1;o++)a=a.tt(t[o]);return a.tt(t[i-1],e,s,r)},tt(t,e,s,r){r=r||Xt.groups;const a=this;if(e&&e.j)return a.j[t]=e,e;const i=e;let o,l=a.go(t);if(l?(o=new Xt,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Xt,i){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(hD(o.t,r),s);fn(i,c,r)}else s&&fn(i,s,r);o.t=i}return a.j[t]=o,o}};const Ae=(t,e,s,r,a)=>t.ta(e,s,r,a),ct=(t,e,s,r,a)=>t.tr(e,s,r,a),Lg=(t,e,s,r,a)=>t.ts(e,s,r,a),Z=(t,e,s,r,a)=>t.tt(e,s,r,a),tr="WORD",ah="UWORD",tw="ASCIINUMERICAL",sw="ALPHANUMERICAL",qi="LOCALHOST",ih="TLD",oh="UTLD",Cl="SCHEME",ta="SLASH_SCHEME",Sf="NUM",lh="WS",_f="NL",ji="OPENBRACE",Ni="CLOSEBRACE",Ql="OPENBRACKET",ec="CLOSEBRACKET",tc="OPENPAREN",sc="CLOSEPAREN",rc="OPENANGLEBRACKET",nc="CLOSEANGLEBRACKET",ac="FULLWIDTHLEFTPAREN",ic="FULLWIDTHRIGHTPAREN",oc="LEFTCORNERBRACKET",lc="RIGHTCORNERBRACKET",cc="LEFTWHITECORNERBRACKET",dc="RIGHTWHITECORNERBRACKET",uc="FULLWIDTHLESSTHAN",hc="FULLWIDTHGREATERTHAN",fc="AMPERSAND",mc="APOSTROPHE",pc="ASTERISK",Er="AT",gc="BACKSLASH",xc="BACKTICK",bc="CARET",Rr="COLON",Cf="COMMA",yc="DOLLAR",Is="DOT",vc="EQUALS",Tf="EXCLAMATION",ps="HYPHEN",ki="PERCENT",wc="PIPE",jc="PLUS",Nc="POUND",Si="QUERY",Pf="QUOTE",rw="FULLWIDTHMIDDLEDOT",Ef="SEMI",Ds="SLASH",_i="TILDE",kc="UNDERSCORE",nw="EMOJI",Sc="SYM";var aw=Object.freeze({__proto__:null,ALPHANUMERICAL:sw,AMPERSAND:fc,APOSTROPHE:mc,ASCIINUMERICAL:tw,ASTERISK:pc,AT:Er,BACKSLASH:gc,BACKTICK:xc,CARET:bc,CLOSEANGLEBRACKET:nc,CLOSEBRACE:Ni,CLOSEBRACKET:ec,CLOSEPAREN:sc,COLON:Rr,COMMA:Cf,DOLLAR:yc,DOT:Is,EMOJI:nw,EQUALS:vc,EXCLAMATION:Tf,FULLWIDTHGREATERTHAN:hc,FULLWIDTHLEFTPAREN:ac,FULLWIDTHLESSTHAN:uc,FULLWIDTHMIDDLEDOT:rw,FULLWIDTHRIGHTPAREN:ic,HYPHEN:ps,LEFTCORNERBRACKET:oc,LEFTWHITECORNERBRACKET:cc,LOCALHOST:qi,NL:_f,NUM:Sf,OPENANGLEBRACKET:rc,OPENBRACE:ji,OPENBRACKET:Ql,OPENPAREN:tc,PERCENT:ki,PIPE:wc,PLUS:jc,POUND:Nc,QUERY:Si,QUOTE:Pf,RIGHTCORNERBRACKET:lc,RIGHTWHITECORNERBRACKET:dc,SCHEME:Cl,SEMI:Ef,SLASH:Ds,SLASH_SCHEME:ta,SYM:Sc,TILDE:_i,TLD:ih,UNDERSCORE:kc,UTLD:oh,UWORD:ah,WORD:tr,WS:lh});const Xs=/[a-z]/,Qa=new RegExp("\\p{L}","u"),Vd=new RegExp("\\p{Emoji}","u"),Zs=/\d/,Hd=/\s/,Rg="\r",Wd=`
`,fD="",mD="",qd="";let tl=null,sl=null;function pD(t=[]){const e={};Xt.groups=e;const s=new Xt;tl==null&&(tl=Og(oD)),sl==null&&(sl=Og(lD)),Z(s,"'",mc),Z(s,"{",ji),Z(s,"}",Ni),Z(s,"[",Ql),Z(s,"]",ec),Z(s,"(",tc),Z(s,")",sc),Z(s,"<",rc),Z(s,">",nc),Z(s,"",ac),Z(s,"",ic),Z(s,"",oc),Z(s,"",lc),Z(s,"",cc),Z(s,"",dc),Z(s,"",uc),Z(s,"",hc),Z(s,"&",fc),Z(s,"*",pc),Z(s,"@",Er),Z(s,"`",xc),Z(s,"^",bc),Z(s,":",Rr),Z(s,",",Cf),Z(s,"$",yc),Z(s,".",Is),Z(s,"=",vc),Z(s,"!",Tf),Z(s,"-",ps),Z(s,"%",ki),Z(s,"|",wc),Z(s,"+",jc),Z(s,"#",Nc),Z(s,"?",Si),Z(s,'"',Pf),Z(s,"/",Ds),Z(s,";",Ef),Z(s,"~",_i),Z(s,"_",kc),Z(s,"\\",gc),Z(s,"",rw);const r=ct(s,Zs,Sf,{[th]:!0});ct(r,Zs,r);const a=ct(r,Xs,tw,{[wi]:!0}),i=ct(r,Qa,sw,{[ii]:!0}),o=ct(s,Xs,tr,{[sh]:!0});ct(o,Zs,a),ct(o,Xs,o),ct(a,Zs,a),ct(a,Xs,a);const l=ct(s,Qa,ah,{[rh]:!0});ct(l,Xs),ct(l,Zs,i),ct(l,Qa,l),ct(i,Zs,i),ct(i,Xs),ct(i,Qa,i);const c=Z(s,Wd,_f,{[Ud]:!0}),d=Z(s,Rg,lh,{[Ud]:!0}),u=ct(s,Hd,lh,{[Ud]:!0});Z(s,qd,u),Z(d,Wd,c),Z(d,qd,u),ct(d,Hd,u),Z(u,Rg),Z(u,Wd),ct(u,Hd,u),Z(u,qd,u);const h=ct(s,Vd,nw,{[ew]:!0});Z(h,"#"),ct(h,Vd,h),Z(h,fD,h);const f=Z(h,mD);Z(f,"#"),ct(f,Vd,h);const m=[[Xs,o],[Zs,a]],x=[[Xs,null],[Qa,l],[Zs,i]];for(let g=0;g<tl.length;g++)Nr(s,tl[g],ih,tr,m);for(let g=0;g<sl.length;g++)Nr(s,sl[g],oh,ah,x);fn(ih,{tld:!0,ascii:!0},e),fn(oh,{utld:!0,alpha:!0},e),Nr(s,"file",Cl,tr,m),Nr(s,"mailto",Cl,tr,m),Nr(s,"http",ta,tr,m),Nr(s,"https",ta,tr,m),Nr(s,"ftp",ta,tr,m),Nr(s,"ftps",ta,tr,m),fn(Cl,{scheme:!0,ascii:!0},e),fn(ta,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],w=t[g][1]?{[cD]:!0}:{[dD]:!0};b.indexOf("-")>=0?w[nh]=!0:Xs.test(b)?Zs.test(b)?w[wi]=!0:w[sh]=!0:w[th]=!0,Lg(s,b,b,w)}return Lg(s,"localhost",qi,{ascii:!0}),s.jd=new Xt(Sc),{start:s,tokens:Object.assign({groups:e},aw)}}function iw(t,e){const s=gD(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=s.length,a=[];let i=0,o=0;for(;o<r;){let l=t,c=null,d=0,u=null,h=-1,f=-1;for(;o<r&&(c=l.go(s[o]));)l=c,l.accepts()?(h=0,f=0,u=l):h>=0&&(h+=s[o].length,f++),d+=s[o].length,i+=s[o].length,o++;i-=h,o-=f,d-=h,a.push({t:u.t,v:e.slice(i-d,i),s:i-d,e:i})}return a}function gD(t){const e=[],s=t.length;let r=0;for(;r<s;){let a=t.charCodeAt(r),i,o=a<55296||a>56319||r+1===s||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Nr(t,e,s,r,a){let i;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?i=t.j[c]:(i=new Xt(r),i.jr=a.slice(),t.j[c]=i),t=i}return i=new Xt(s),i.jr=a.slice(),t.j[e[o-1]]=i,i}function Og(t){const e=[],s=[];let r=0,a="0123456789";for(;r<t.length;){let i=0;for(;a.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(s.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)s.pop();r+=i}else s.push(t[r]),r++}return e}const Ki={defaultProtocol:"http",events:null,format:Mg,formatHref:Mg,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Af(t,e=null){let s=Object.assign({},Ki);t&&(s=Object.assign(s,t instanceof Af?t.o:t));const r=s.ignoreTags,a=[];for(let i=0;i<r.length;i++)a.push(r[i].toUpperCase());this.o=s,e&&(this.defaultRender=e),this.ignoreTags=a}Af.prototype={o:Ki,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,s){const r=e!=null;let a=this.o[t];return a&&(typeof a=="object"?(a=s.t in a?a[s.t]:Ki[t],typeof a=="function"&&r&&(a=a(e,s))):typeof a=="function"&&r&&(a=a(e,s.t,s)),a)},getObj(t,e,s){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,s.t,s)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Mg(t){return t}function ow(t,e){this.t="token",this.v=t,this.tk=e}ow.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),s=t.get("truncate",e,this),r=t.get("format",e,this);return s&&r.length>s?r.substring(0,s)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ki.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,s=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",s,this),a=t.get("tagName",s,e),i=this.toFormattedString(t),o={},l=t.get("className",s,e),c=t.get("target",s,e),d=t.get("rel",s,e),u=t.getObj("attributes",s,e),h=t.getObj("events",s,e);return o.href=r,l&&(o.class=l),c&&(o.target=c),d&&(o.rel=d),u&&Object.assign(o,u),{tagName:a,attributes:o,content:i,eventListeners:h}}};function td(t,e){class s extends ow{constructor(a,i){super(a,i),this.t=t}}for(const r in e)s.prototype[r]=e[r];return s.t=t,s}const Ig=td("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Dg=td("text"),xD=td("nl"),rl=td("url",{isLink:!0,toHref(t=Ki.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==qi&&t[1].t===Rr}}),fs=t=>new Xt(t);function bD({groups:t}){const e=t.domain.concat([fc,pc,Er,gc,xc,bc,yc,vc,ps,Sf,ki,wc,jc,Nc,Ds,Sc,_i,kc]),s=[mc,Rr,Cf,Is,Tf,ki,Si,Pf,Ef,rc,nc,ji,Ni,ec,Ql,tc,sc,ac,ic,oc,lc,cc,dc,uc,hc],r=[fc,mc,pc,gc,xc,bc,yc,vc,ps,ji,Ni,ki,wc,jc,Nc,Si,Ds,Sc,_i,kc],a=fs(),i=Z(a,_i);Ae(i,r,i),Ae(i,t.domain,i);const o=fs(),l=fs(),c=fs();Ae(a,t.domain,o),Ae(a,t.scheme,l),Ae(a,t.slashscheme,c),Ae(o,r,i),Ae(o,t.domain,o);const d=Z(o,Er);Z(i,Er,d),Z(l,Er,d),Z(c,Er,d);const u=Z(i,Is);Ae(u,r,i),Ae(u,t.domain,i);const h=fs();Ae(d,t.domain,h),Ae(h,t.domain,h);const f=Z(h,Is);Ae(f,t.domain,h);const m=fs(Ig);Ae(f,t.tld,m),Ae(f,t.utld,m),Z(d,qi,m);const x=Z(h,ps);Z(x,ps,x),Ae(x,t.domain,h),Ae(m,t.domain,h),Z(m,Is,f),Z(m,ps,x);const g=Z(m,Rr);Ae(g,t.numeric,Ig);const b=Z(o,ps),y=Z(o,Is);Z(b,ps,b),Ae(b,t.domain,o),Ae(y,r,i),Ae(y,t.domain,o);const w=fs(rl);Ae(y,t.tld,w),Ae(y,t.utld,w),Ae(w,t.domain,o),Ae(w,r,i),Z(w,Is,y),Z(w,ps,b),Z(w,Er,d);const N=Z(w,Rr),S=fs(rl);Ae(N,t.numeric,S);const k=fs(rl),j=fs();Ae(k,e,k),Ae(k,s,j),Ae(j,e,k),Ae(j,s,j),Z(w,Ds,k),Z(S,Ds,k);const v=Z(l,Rr),_=Z(c,Rr),E=Z(_,Ds),R=Z(E,Ds);Ae(l,t.domain,o),Z(l,Is,y),Z(l,ps,b),Ae(c,t.domain,o),Z(c,Is,y),Z(c,ps,b),Ae(v,t.domain,k),Z(v,Ds,k),Z(v,Si,k),Ae(R,t.domain,k),Ae(R,e,k),Z(R,Ds,k);const z=[[ji,Ni],[Ql,ec],[tc,sc],[rc,nc],[ac,ic],[oc,lc],[cc,dc],[uc,hc]];for(let F=0;F<z.length;F++){const[L,U]=z[F],J=Z(k,L);Z(j,L,J),Z(J,U,k);const Y=fs(rl);Ae(J,e,Y);const I=fs();Ae(J,s),Ae(Y,e,Y),Ae(Y,s,I),Ae(I,e,Y),Ae(I,s,I),Z(Y,U,k),Z(I,U,k)}return Z(a,qi,w),Z(a,_f,xD),{start:a,tokens:aw}}function yD(t,e,s){let r=s.length,a=0,i=[],o=[];for(;a<r;){let l=t,c=null,d=null,u=0,h=null,f=-1;for(;a<r&&!(c=l.go(s[a].t));)o.push(s[a++]);for(;a<r&&(d=c||l.go(s[a].t));)c=null,l=d,l.accepts()?(f=0,h=l):f>=0&&f++,a++,u++;if(f<0)a-=u,a<r&&(o.push(s[a]),a++);else{o.length>0&&(i.push(Kd(Dg,e,o)),o=[]),a-=f,u-=f;const m=h.t,x=s.slice(a-u,a);i.push(Kd(m,e,x))}}return o.length>0&&i.push(Kd(Dg,e,o)),i}function Kd(t,e,s){const r=s[0].s,a=s[s.length-1].e,i=e.slice(r,a);return new t(i,s)}const vD=typeof console<"u"&&console&&console.warn||(()=>{}),wD="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",rt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function jD(){return Xt.groups={},rt.scanner=null,rt.parser=null,rt.tokenQueue=[],rt.pluginQueue=[],rt.customSchemes=[],rt.initialized=!1,rt}function $g(t,e=!1){if(rt.initialized&&vD(`linkifyjs: already initialized - will not register custom scheme "${t}" ${wD}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);rt.customSchemes.push([t,e])}function ND(){rt.scanner=pD(rt.customSchemes);for(let t=0;t<rt.tokenQueue.length;t++)rt.tokenQueue[t][1]({scanner:rt.scanner});rt.parser=bD(rt.scanner.tokens);for(let t=0;t<rt.pluginQueue.length;t++)rt.pluginQueue[t][1]({scanner:rt.scanner,parser:rt.parser});return rt.initialized=!0,rt}function Lf(t){return rt.initialized||ND(),yD(rt.parser.start,t,iw(rt.scanner.start,t))}Lf.scan=iw;function lw(t,e=null,s=null){if(e&&typeof e=="object"){if(s)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);s=e,e=null}const r=new Af(s),a=Lf(t),i=[];for(let o=0;o<a.length;o++){const l=a[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&i.push(l.toFormattedObject(r))}return i}var Rf="[\0- -\u2029]",kD=new RegExp(Rf),SD=new RegExp(`${Rf}$`),_D=new RegExp(Rf,"g");function CD(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function TD(t){return new ys({key:new Ls("autolink"),appendTransaction:(e,s,r)=>{const a=e.some(d=>d.docChanged)&&!s.doc.eq(r.doc),i=e.some(d=>d.getMeta("preventAutolink"));if(!a||i)return;const{tr:o}=r,l=dN(s.doc,[...e]);if(uN(l).forEach(({newRange:d})=>{const u=hN(r.doc,d,m=>m.isTextblock);let h,f;if(u.length>1)h=u[0],f=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(u.length){const m=r.doc.textBetween(d.from,d.to," "," ");if(!SD.test(m))return;h=u[0],f=r.doc.textBetween(h.pos,d.to,void 0," ")}if(h&&f){const m=f.split(kD).filter(Boolean);if(m.length<=0)return!1;const x=m[m.length-1],g=h.pos+f.lastIndexOf(x);if(!x)return!1;const b=Lf(x).map(y=>y.toObject(t.defaultProtocol));if(!CD(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{fN(y.from,y.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function PD(t){return new ys({key:new Ls("handleClickLink"),props:{handleClick:(e,s,r)=>{var a,i;if(r.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{let h=r.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;l=f.find(m=>m.nodeName==="A")}if(!l)return o;const c=mN(e.state,t.type.name),d=(a=l==null?void 0:l.href)!=null?a:c.href,u=(i=l==null?void 0:l.target)!=null?i:c.target;l&&d&&(window.open(d,u),o=!0)}return o}}})}function ED(t){return new ys({key:new Ls("handlePasteLink"),props:{handlePaste:(e,s,r)=>{const{shouldAutoLink:a}=t,{state:i}=e,{selection:o}=i,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(u=>{c+=u.textContent});const d=lw(c,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===c);return!c||!d||a!==void 0&&!a(d.href)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function an(t,e){const s=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const a=typeof r=="string"?r:r.scheme;a&&s.push(a)}),!t||t.replace(_D,"").match(new RegExp(`^(?:(?:${s.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var cw=Oa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){$g(t);return}$g(t.scheme,t.optionalSlashes)})},onDestroy(){jD()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!an(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:s=>!!an(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!an(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ft(this.options.HTMLAttributes,t),0]:["a",ft(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var s;const r=((s=t.attrs)==null?void 0:s.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:s}=t;return this.options.isAllowedUri(s,{defaultValidate:r=>!!an(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:s}=t||{};return s&&!this.options.isAllowedUri(s,{defaultValidate:r=>!!an(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[kn({find:t=>{const e=[];if(t){const{protocols:s,defaultProtocol:r}=this.options,a=lw(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!an(o,s),protocols:s,defaultProtocol:r}));a.length&&a.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:s}=this.options;return this.options.autolink&&t.push(TD({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:a=>!!an(a,e),protocols:e,defaultProtocol:s}),shouldAutoLink:this.options.shouldAutoLink})),t.push(PD({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(ED({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),AD=cw,LD=Object.defineProperty,RD=(t,e)=>{for(var s in e)LD(t,s,{get:e[s],enumerable:!0})},OD="listItem",Fg="textStyle",zg=/^\s*([-+*])\s$/,dw=Wt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",ft(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(OD,this.editor.getAttributes(Fg)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ma({find:zg,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ma({find:zg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Fg),editor:this.editor})),[t]}}),uw=Wt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",ft(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let s=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(a=>a.type==="paragraph"))s=e.parseChildren(t.tokens);else{const a=t.tokens[0];if(a&&a.type==="text"&&a.tokens&&a.tokens.length>0){if(s=[{type:"paragraph",content:e.parseInline(a.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),l=e.parseChildren(o);s.push(...l)}}else s=e.parseChildren(t.tokens)}return s.length===0&&(s=[{type:"paragraph",content:[]}]),{type:"listItem",content:s}},renderMarkdown:(t,e,s)=>xb(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",s),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),MD={};RD(MD,{findListItemPos:()=>Oo,getNextListDepth:()=>Of,handleBackspace:()=>ch,handleDelete:()=>dh,hasListBefore:()=>hw,hasListItemAfter:()=>ID,hasListItemBefore:()=>fw,listItemHasSubList:()=>mw,nextListIsDeeper:()=>pw,nextListIsHigher:()=>gw});var Oo=(t,e)=>{const{$from:s}=e.selection,r=bb(t,e.schema);let a=null,i=s.depth,o=s.pos,l=null;for(;i>0&&l===null;)a=s.node(i),a.type===r?l=i:(i-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},Of=(t,e)=>{const s=Oo(t,e);if(!s)return!1;const[,r]=xN(e,t,s.$pos.pos+4);return r},hw=(t,e,s)=>{const{$anchor:r}=t.selection,a=Math.max(0,r.pos-2),i=t.doc.resolve(a).node();return!(!i||!s.includes(i.type.name))},fw=(t,e)=>{var s;const{$anchor:r}=e.selection,a=e.doc.resolve(r.pos-2);return!(a.index()===0||((s=a.nodeBefore)==null?void 0:s.type.name)!==t)},mw=(t,e,s)=>{if(!s)return!1;const r=bb(t,e.schema);let a=!1;return s.descendants(i=>{i.type===r&&(a=!0)}),a},ch=(t,e,s)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!nu(t.state,e)&&hw(t.state,e,s)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),d=[];c.node().descendants((f,m)=>{f.type.name===e&&d.push({node:f,pos:m})});const u=d.at(-1);if(!u)return!1;const h=t.state.doc.resolve(c.start()+u.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},h.end()).joinForward().run()}if(!nu(t.state,e)||!pN(t.state))return!1;const r=Oo(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=mw(e,t.state,i);return fw(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},pw=(t,e)=>{const s=Of(t,e),r=Oo(t,e);return!r||!s?!1:s>r.depth},gw=(t,e)=>{const s=Of(t,e),r=Oo(t,e);return!r||!s?!1:s<r.depth},dh=(t,e)=>{if(!nu(t.state,e)||!gN(t.state,e))return!1;const{selection:s}=t.state,{$from:r,$to:a}=s;return!s.empty&&r.sameParent(a)?!1:pw(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():gw(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},ID=(t,e)=>{var s;const{$anchor:r}=e.selection,a=e.doc.resolve(r.pos-r.parentOffset-2);return!(a.index()===a.parent.childCount-1||((s=a.nodeAfter)==null?void 0:s.type.name)!==t)},xw=vs.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s})=>{t.state.schema.nodes[s]!==void 0&&dh(t,s)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s})=>{t.state.schema.nodes[s]!==void 0&&dh(t,s)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s,wrapperNames:r})=>{t.state.schema.nodes[s]!==void 0&&ch(t,s,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s,wrapperNames:r})=>{t.state.schema.nodes[s]!==void 0&&ch(t,s,r)&&(e=!0)}),e}}}}),Bg=/^(\s*)(\d+)\.\s+(.*)$/,DD=/^\s/;function $D(t){const e=[];let s=0,r=0;for(;s<t.length;){const a=t[s],i=a.match(Bg);if(!i)break;const[,o,l,c]=i,d=o.length;let u=c,h=s+1;const f=[a];for(;h<t.length;){const m=t[h];if(m.match(Bg))break;if(m.trim()==="")f.push(m),u+=`
`,h+=1;else if(m.match(DD))f.push(m),u+=`
${m.slice(d+2)}`,h+=1;else break}e.push({indent:d,number:parseInt(l,10),content:u.trim(),raw:f.join(`
`)}),r=h,s=h}return[e,r]}function bw(t,e,s){var r;const a=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const l=o.content.split(`
`),c=((r=l[0])==null?void 0:r.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:s.inlineTokens(c)});const u=l.slice(1).join(`
`).trim();if(u){const m=s.blockTokens(u);d.push(...m)}let h=i+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const m=Math.min(...f.map(g=>g.indent)),x=bw(f,m,s);d.push({type:"list",ordered:!0,start:f[0].number,items:x,raw:f.map(g=>g.raw).join(`
`)})}a.push({type:"list_item",raw:o.raw,tokens:d}),i=h}else i+=1}return a}function FD(t,e){return t.map(s=>{if(s.type!=="list_item")return e.parseChildren([s])[0];const r=[];return s.tokens&&s.tokens.length>0&&s.tokens.forEach(a=>{if(a.type==="paragraph"||a.type==="list"||a.type==="blockquote"||a.type==="code")r.push(...e.parseChildren([a]));else if(a.type==="text"&&a.tokens){const i=e.parseChildren([a]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([a]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var zD="listItem",Ug="textStyle",Vg=/^(\d+)\.\s$/,yw=Wt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...s}=t;return e===1?["ol",ft(this.options.HTMLAttributes,s),0]:["ol",ft(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const s=t.start||1,r=t.items?FD(t.items,e):[];return s!==1?{type:"orderedList",attrs:{start:s},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),s=e==null?void 0:e.index;return s!==void 0?s:-1},tokenize:(t,e,s)=>{var r;const a=t.split(`
`),[i,o]=$D(a);if(i.length===0)return;const l=bw(i,0,s);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:l,raw:a.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zD,this.editor.getAttributes(Ug)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ma({find:Vg,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ma({find:Vg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ug)}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1],editor:this.editor})),[t]}}),BD=/^\s*(\[([( |x])?\])\s$/,UD=Wt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",ft(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const s=[];if(t.tokens&&t.tokens.length>0?s.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?s.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):s.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);s.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},s)},renderMarkdown:(t,e)=>{var s;const a=`- [${(s=t.attrs)!=null&&s.checked?"x":" "}] `;return xb(t,e,a)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:s,editor:r})=>{const a=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),d=u=>{var h,f;l.ariaLabel=((f=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:f.call(h,u,l.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return d(t),i.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",u=>u.preventDefault()),l.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:h}=u.target;r.isEditable&&typeof s=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const m=s();if(typeof m!="number")return!1;const x=f.doc.nodeAt(m);return f.setNodeMarkup(m,void 0,{...x==null?void 0:x.attrs,checked:h}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,h)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,h])=>{a.setAttribute(u,h)}),a.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,i.append(l,o),a.append(i,c),Object.entries(e).forEach(([u,h])=>{a.setAttribute(u,h)}),{dom:a,contentDOM:c,update:u=>u.type!==this.type?!1:(a.dataset.checked=u.attrs.checked,l.checked=u.attrs.checked,d(u),!0)}}},addInputRules(){return[ma({find:BD,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),VD=Wt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",ft(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const s=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return s!==void 0?s:-1},tokenize(t,e,s){const r=i=>{const o=Wf(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:s.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:r},s);return o?[{type:"taskList",raw:o.raw,items:o.items}]:s.blockTokens(i)},a=Wf(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:s.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},s);if(a)return{type:"taskList",raw:a.raw,items:a.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});vs.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(dw.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(uw.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(xw.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(yw.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(UD.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(VD.configure(this.options.taskList)),t}});var HD=Wt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",ft(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const s=t.tokens||[];return s.length===1&&s[0].type==="image"?e.parseChildren([s[0]]):e.createNode("paragraph",void 0,e.parseInline(s))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),WD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,qD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,KD=Oa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",ft(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[pa({find:WD,type:this.type})]},addPasteRules(){return[kn({find:qD,type:this.type})]}}),GD=Wt.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),vw=Oa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",ft(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,s){const a=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!a)return;const i=a[2].trim();return{type:"underline",raw:a[0],text:i,tokens:s.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),JD=vw;function YD(t={}){return new ys({view(e){return new XD(e,t)}})}class XD{constructor(e,s){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=s.width)!==null&&r!==void 0?r:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let i=o=>{this[a](o)};return e.dom.addEventListener(a,i),{name:a,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,r,a=this.editorView.dom,i=a.getBoundingClientRect(),o=i.width/a.offsetWidth,l=i.height/a.offsetHeight;if(s){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let m=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(m){let x=m.getBoundingClientRect(),g=h?x.bottom:x.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*l;r={left:x.left,right:x.right,top:g-b,bottom:g+b}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let d,u;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,u=-pageYOffset;else{let h=c.getBoundingClientRect(),f=h.width/c.offsetWidth,m=h.height/c.offsetHeight;d=h.left-c.scrollLeft*f,u=h.top-c.scrollTop*m}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),a=r&&r.type.spec.disableDropCursor,i=typeof a=="function"?a(this.editorView,s,e):a;if(s&&!i){let o=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=bN(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ut extends Ei{constructor(e){super(e,e)}map(e,s){let r=e.resolve(s.map(this.head));return ut.valid(r)?new ut(r):Ei.near(r)}content(){return yb.empty}eq(e){return e instanceof ut&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ut(e.resolve(s.pos))}getBookmark(){return new Mf(this.anchor)}static valid(e){let s=e.parent;if(s.isTextblock||!ZD(e)||!QD(e))return!1;let r=s.type.spec.allowGapCursor;if(r!=null)return r;let a=s.contentMatchAt(e.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(e,s,r=!1){e:for(;;){if(!r&&ut.valid(e))return e;let a=e.pos,i=null;for(let o=e.depth;;o--){let l=e.node(o);if(s>0?e.indexAfter(o)<l.childCount:e.index(o)>0){i=l.child(s>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;a+=s;let c=e.doc.resolve(a);if(ut.valid(c))return c}for(;;){let o=s>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!kh.isSelectable(i)){e=e.doc.resolve(a+i.nodeSize*s),r=!1;continue e}break}i=o,a+=s;let l=e.doc.resolve(a);if(ut.valid(l))return l}return null}}}ut.prototype.visible=!1;ut.findFrom=ut.findGapCursorFrom;Ei.jsonID("gapcursor",ut);class Mf{constructor(e){this.pos=e}map(e){return new Mf(e.map(this.pos))}resolve(e){let s=e.resolve(this.pos);return ut.valid(s)?new ut(s):Ei.near(s)}}function ww(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function ZD(t){for(let e=t.depth;e>=0;e--){let s=t.index(e),r=t.node(e);if(s==0){if(r.type.spec.isolating)return!0;continue}for(let a=r.child(s-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||ww(a.type))return!0;if(a.inlineContent)return!1}}return!0}function QD(t){for(let e=t.depth;e>=0;e--){let s=t.indexAfter(e),r=t.node(e);if(s==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let a=r.child(s);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||ww(a.type))return!0;if(a.inlineContent)return!1}}return!0}function e3(){return new ys({props:{decorations:n3,createSelectionBetween(t,e,s){return e.pos==s.pos&&ut.valid(s)?new ut(s):null},handleClick:s3,handleKeyDown:t3,handleDOMEvents:{beforeinput:r3}}})}const t3=yN({ArrowLeft:nl("horiz",-1),ArrowRight:nl("horiz",1),ArrowUp:nl("vert",-1),ArrowDown:nl("vert",1)});function nl(t,e){const s=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,a,i){let o=r.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof xn){if(!i.endOfTextblock(s)||l.depth==0)return!1;c=!1,l=r.doc.resolve(e>0?l.after():l.before())}let d=ut.findGapCursorFrom(l,e,c);return d?(a&&a(r.tr.setSelection(new ut(d))),!0):!1}}function s3(t,e,s){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ut.valid(r))return!1;let a=t.posAtCoords({left:s.clientX,top:s.clientY});return a&&a.inside>-1&&kh.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ut(r))),!0)}function r3(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ut))return!1;let{$from:s}=t.state.selection,r=s.parent.contentMatchAt(s.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let a=qf.empty;for(let o=r.length-1;o>=0;o--)a=qf.from(r[o].createAndFill(null,a));let i=t.state.tr.replace(s.pos,s.pos,new yb(a,0,0));return i.setSelection(xn.near(i.doc.resolve(s.pos+1))),t.dispatch(i),!1}function n3(t){if(!(t.selection instanceof ut))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ai.create(t.doc,[Mc.widget(t.selection.head,e,{key:"gapcursor"})])}var _c=200,At=function(){};At.prototype.append=function(e){return e.length?(e=At.from(e),!this.length&&e||e.length<_c&&this.leafAppend(e)||this.length<_c&&e.leafPrepend(this)||this.appendInner(e)):this};At.prototype.prepend=function(e){return e.length?At.from(e).append(this):this};At.prototype.appendInner=function(e){return new a3(this,e)};At.prototype.slice=function(e,s){return e===void 0&&(e=0),s===void 0&&(s=this.length),e>=s?At.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,s))};At.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};At.prototype.forEach=function(e,s,r){s===void 0&&(s=0),r===void 0&&(r=this.length),s<=r?this.forEachInner(e,s,r,0):this.forEachInvertedInner(e,s,r,0)};At.prototype.map=function(e,s,r){s===void 0&&(s=0),r===void 0&&(r=this.length);var a=[];return this.forEach(function(i,o){return a.push(e(i,o))},s,r),a};At.from=function(e){return e instanceof At?e:e&&e.length?new jw(e):At.empty};var jw=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var s={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(a,i){return a==0&&i==this.length?this:new e(this.values.slice(a,i))},e.prototype.getInner=function(a){return this.values[a]},e.prototype.forEachInner=function(a,i,o,l){for(var c=i;c<o;c++)if(a(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(a,i,o,l){for(var c=i-1;c>=o;c--)if(a(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(a){if(this.length+a.length<=_c)return new e(this.values.concat(a.flatten()))},e.prototype.leafPrepend=function(a){if(this.length+a.length<=_c)return new e(a.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(e.prototype,s),e}(At);At.empty=new jw([]);var a3=function(t){function e(s,r){t.call(this),this.left=s,this.right=r,this.length=s.length+r.length,this.depth=Math.max(s.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,a,i,o){var l=this.left.length;if(a<l&&this.left.forEachInner(r,a,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(r,Math.max(a-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,a,i,o){var l=this.left.length;if(a>l&&this.right.forEachInvertedInner(r,a-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(a,l),i,o)===!1)return!1},e.prototype.sliceInner=function(r,a){if(r==0&&a==this.length)return this;var i=this.left.length;return a<=i?this.left.slice(r,a):r>=i?this.right.slice(r-i,a-i):this.left.slice(r,i).append(this.right.slice(0,a-i))},e.prototype.leafAppend=function(r){var a=this.right.leafAppend(r);if(a)return new e(this.left,a)},e.prototype.leafPrepend=function(r){var a=this.left.leafPrepend(r);if(a)return new e(a,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(At);const i3=500;class _s{constructor(e,s){this.items=e,this.eventCount=s}popEvent(e,s){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let a,i;s&&(a=this.remapping(r,this.items.length),i=a.maps.length);let o=e.tr,l,c,d=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){a||(a=this.remapping(r,f+1),i=a.maps.length),i--,u.push(h);return}if(a){u.push(new $s(h.map));let m=h.step.map(a.slice(i)),x;m&&o.maybeStep(m).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new $s(x,void 0,void 0,d.length+u.length))),i--,x&&a.appendMap(x,i)}else o.maybeStep(h.step);if(h.selection)return l=a?h.selection.map(a.slice(i)):h.selection,c=new _s(this.items.slice(0,r).append(u.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,s,r,a){let i=[],o=this.eventCount,l=this.items,c=!a&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),f=new $s(e.mapping.maps[u],h,s),m;(m=c&&c.merge(f))&&(f=m,u?i.pop():l=l.slice(0,l.length-1)),i.push(f),s&&(o++,s=void 0),a||(c=f)}let d=o-r.depth;return d>l3&&(l=o3(l,d),o-=d),new _s(l.append(i),o)}remapping(e,s){let r=new vN;return this.items.forEach((a,i)=>{let o=a.mirrorOffset!=null&&i-a.mirrorOffset>=e?r.maps.length-a.mirrorOffset:void 0;r.appendMap(a.map,o)},e,s),r}addMaps(e){return this.eventCount==0?this:new _s(this.items.append(e.map(s=>new $s(s))),this.eventCount)}rebased(e,s){if(!this.eventCount)return this;let r=[],a=Math.max(0,this.items.length-s),i=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},a);let c=s;this.items.forEach(f=>{let m=i.getMirror(--c);if(m==null)return;o=Math.min(o,m);let x=i.maps[m];if(f.step){let g=e.steps[m].invert(e.docs[m]),b=f.selection&&f.selection.map(i.slice(c+1,m));b&&l++,r.push(new $s(x,g,b))}else r.push(new $s(x))},a);let d=[];for(let f=s;f<o;f++)d.push(new $s(i.maps[f]));let u=this.items.slice(0,a).append(d).append(r),h=new _s(u,l);return h.emptyItemCount()>i3&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(s=>{s.step||e++}),e}compress(e=this.items.length){let s=this.remapping(0,e),r=s.maps.length,a=[],i=0;return this.items.forEach((o,l)=>{if(l>=e)a.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(s.slice(r)),d=c&&c.getMap();if(r--,d&&s.appendMap(d,r),c){let u=o.selection&&o.selection.map(s.slice(r));u&&i++;let h=new $s(d.invert(),c,u),f,m=a.length-1;(f=a.length&&a[m].merge(h))?a[m]=f:a.push(h)}}else o.map&&r--},this.items.length,0),new _s(At.from(a.reverse()),i)}}_s.empty=new _s(At.empty,0);function o3(t,e){let s;return t.forEach((r,a)=>{if(r.selection&&e--==0)return s=a,!1}),t.slice(s)}class $s{constructor(e,s,r,a){this.map=e,this.step=s,this.selection=r,this.mirrorOffset=a}merge(e){if(this.step&&e.step&&!e.selection){let s=e.step.merge(this.step);if(s)return new $s(s.getMap().invert(),s,this.selection)}}}class Ar{constructor(e,s,r,a,i){this.done=e,this.undone=s,this.prevRanges=r,this.prevTime=a,this.prevComposition=i}}const l3=20;function c3(t,e,s,r){let a=s.getMeta(wn),i;if(a)return a.historyState;s.getMeta(h3)&&(t=new Ar(t.done,t.undone,null,0,-1));let o=s.getMeta("appendedTransaction");if(s.steps.length==0)return t;if(o&&o.getMeta(wn))return o.getMeta(wn).redo?new Ar(t.done.addTransform(s,void 0,r,Tl(e)),t.undone,Hg(s.mapping.maps),t.prevTime,t.prevComposition):new Ar(t.done,t.undone.addTransform(s,void 0,r,Tl(e)),null,t.prevTime,t.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=s.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(s.time||0)-r.newGroupDelay||!d3(s,t.prevRanges)),d=o?Gd(t.prevRanges,s.mapping):Hg(s.mapping.maps);return new Ar(t.done.addTransform(s,c?e.selection.getBookmark():void 0,r,Tl(e)),_s.empty,d,s.time,l??t.prevComposition)}else return(i=s.getMeta("rebased"))?new Ar(t.done.rebased(s,i),t.undone.rebased(s,i),Gd(t.prevRanges,s.mapping),t.prevTime,t.prevComposition):new Ar(t.done.addMaps(s.mapping.maps),t.undone.addMaps(s.mapping.maps),Gd(t.prevRanges,s.mapping),t.prevTime,t.prevComposition)}function d3(t,e){if(!e)return!1;if(!t.docChanged)return!0;let s=!1;return t.mapping.maps[0].forEach((r,a)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&a>=e[i]&&(s=!0)}),s}function Hg(t){let e=[];for(let s=t.length-1;s>=0&&e.length==0;s--)t[s].forEach((r,a,i,o)=>e.push(i,o));return e}function Gd(t,e){if(!t)return null;let s=[];for(let r=0;r<t.length;r+=2){let a=e.map(t[r],1),i=e.map(t[r+1],-1);a<=i&&s.push(a,i)}return s}function u3(t,e,s){let r=Tl(e),a=wn.get(e).spec.config,i=(s?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(s?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),a,r),c=new Ar(s?l:i.remaining,s?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(wn,{redo:s,historyState:c})}let Jd=!1,Wg=null;function Tl(t){let e=t.plugins;if(Wg!=e){Jd=!1,Wg=e;for(let s=0;s<e.length;s++)if(e[s].spec.historyPreserveItems){Jd=!0;break}}return Jd}const wn=new Ls("history"),h3=new Ls("closeHistory");function f3(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ys({key:wn,state:{init(){return new Ar(_s.empty,_s.empty,null,0,-1)},apply(e,s,r){return c3(s,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,s){let r=s.inputType,a=r=="historyUndo"?kw:r=="historyRedo"?Sw:null;return!a||!e.editable?!1:(s.preventDefault(),a(e.state,e.dispatch))}}}})}function Nw(t,e){return(s,r)=>{let a=wn.getState(s);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(r){let i=u3(a,s,t);i&&r(e?i.scrollIntoView():i)}return!0}}const kw=Nw(!1,!0),Sw=Nw(!0,!0);vs.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,s=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(s)}},addProseMirrorPlugins(){let t=!1;return[new ys({key:new Ls("characterCount"),appendTransaction:(e,s,r)=>{if(t)return;const a=this.options.limit;if(a==null||a===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>a){const o=i-a,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${a} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,c);return t=!0,d}t=!0},filterTransaction:(e,s)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const a=this.storage.characters({node:s.doc}),i=this.storage.characters({node:e.doc});if(i<=r||a>r&&i>r&&i<=a)return!0;if(a>r&&i>r&&i>a||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=i-r,d=l-c,u=l;return e.deleteRange(d,u),!(this.storage.characters({node:e.doc})>r)}})]}});var m3=vs.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[YD(this.options)]}});vs.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ys({key:new Ls("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:s,isFocused:r}=this.editor,{anchor:a}=e,i=[];if(!s||!r)return Ai.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,d)=>{if(c.isText)return;if(!(a>=d&&a<=d+c.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((c,d)=>{if(c.isText||!(a>=d&&a<=d+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";i.push(Mc.node(d,d+c.nodeSize,{class:this.options.className}))}),Ai.create(t,i)}}})]}});var p3=vs.create({name:"gapCursor",addProseMirrorPlugins(){return[e3()]},extendNodeSchema(t){var e;const s={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=wN(jN(t,"allowGapCursor",s)))!=null?e:null}}});vs.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new ys({key:new Ls("placeholder"),props:{decorations:({doc:t,selection:e})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,a=[];if(!s)return null;const i=this.editor.isEmpty;return t.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&NN(o);if((c||!this.options.showOnlyCurrent)&&d){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const h=Mc.node(l,l+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});a.push(h)}return this.options.includeChildren}),Ai.create(t,a)}}})]}});vs.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new ys({key:new Ls("selection"),props:{decorations(s){return s.selection.empty||t.isFocused||!t.isEditable||gb(s.selection)||t.view.dragging?null:Ai.create(s.doc,[Mc.inline(s.selection.from,s.selection.to,{class:e.className})])}}})]}});function qg({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var g3=vs.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ls(this.name),s=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,a])=>a).filter(a=>(this.options.notAfter||[]).concat(s).includes(a.name));return[new ys({key:e,appendTransaction:(a,i,o)=>{const{doc:l,tr:c,schema:d}=o,u=e.getState(o),h=l.content.size,f=d.nodes[s];if(u)return c.insert(h,f.create())},state:{init:(a,i)=>{const o=i.tr.doc.lastChild;return!qg({node:o,types:r})},apply:(a,i)=>{if(!a.docChanged||a.getMeta("__uniqueIDTransaction"))return i;const o=a.doc.lastChild;return!qg({node:o,types:r})}}})]}}),x3=vs.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>kw(t,e),redo:()=>({state:t,dispatch:e})=>Sw(t,e)}},addProseMirrorPlugins(){return[f3(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),b3=vs.create({name:"starterKit",addExtensions(){var t,e,s,r;const a=[];return this.options.bold!==!1&&a.push(W4.configure(this.options.bold)),this.options.blockquote!==!1&&a.push(z4.configure(this.options.blockquote)),this.options.bulletList!==!1&&a.push(dw.configure(this.options.bulletList)),this.options.code!==!1&&a.push(G4.configure(this.options.code)),this.options.codeBlock!==!1&&a.push(X4.configure(this.options.codeBlock)),this.options.document!==!1&&a.push(Z4.configure(this.options.document)),this.options.dropcursor!==!1&&a.push(m3.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&a.push(p3.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&a.push(Q4.configure(this.options.hardBreak)),this.options.heading!==!1&&a.push(eD.configure(this.options.heading)),this.options.undoRedo!==!1&&a.push(x3.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&a.push(tD.configure(this.options.horizontalRule)),this.options.italic!==!1&&a.push(iD.configure(this.options.italic)),this.options.listItem!==!1&&a.push(uw.configure(this.options.listItem)),this.options.listKeymap!==!1&&a.push(xw.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&a.push(cw.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&a.push(yw.configure(this.options.orderedList)),this.options.paragraph!==!1&&a.push(HD.configure(this.options.paragraph)),this.options.strike!==!1&&a.push(KD.configure(this.options.strike)),this.options.text!==!1&&a.push(GD.configure(this.options.text)),this.options.underline!==!1&&a.push(vw.configure((s=this.options)==null?void 0:s.underline)),this.options.trailingNode!==!1&&a.push(g3.configure((r=this.options)==null?void 0:r.trailingNode)),a}}),y3=b3,v3=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,w3=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,_w=t=>t.match(v3),Kg=(t,e)=>e?"https://www.youtube-nocookie.com/embed/videoseries?list=":t?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",j3=t=>{const{url:e,allowFullscreen:s,autoplay:r,ccLanguage:a,ccLoadPolicy:i,controls:o,disableKBcontrols:l,enableIFrameApi:c,endTime:d,interfaceLanguage:u,ivLoadPolicy:h,loop:f,modestBranding:m,nocookie:x,origin:g,playlist:b,progressBarColor:y,startAt:w,rel:N}=t;if(!_w(e))return null;if(e.includes("/embed/"))return e;if(e.includes("youtu.be")){const _=e.split("/").pop();return _?`${Kg(x)}${_}`:null}const k=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(e);if(!k||!k[2])return null;let j=`${Kg(x,k[1]==="list")}${k[2]}`;const v=[];return s===!1&&v.push("fs=0"),r&&v.push("autoplay=1"),a&&v.push(`cc_lang_pref=${a}`),i&&v.push("cc_load_policy=1"),o||v.push("controls=0"),l&&v.push("disablekb=1"),c&&v.push("enablejsapi=1"),d&&v.push(`end=${d}`),u&&v.push(`hl=${u}`),h&&v.push(`iv_load_policy=${h}`),f&&v.push("loop=1"),m&&v.push("modestbranding=1"),g&&v.push(`origin=${g}`),b&&v.push(`playlist=${b}`),w&&v.push(`start=${w}`),y&&v.push(`color=${y}`),N!==void 0&&v.push(`rel=${N}`),v.length&&(j+=`${k[1]==="v"?"?":"&"}${v.join("&")}`),j},N3=Wt.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:t=>({commands:e})=>_w(t.src)?e.insertContent({type:this.name,attrs:t}):!1}},addPasteRules(){return this.options.addPasteHandler?[SN({find:w3,type:this.type,getAttributes:t=>({src:t.input})})]:[]},renderHTML({HTMLAttributes:t}){const e=j3({url:t.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:t.start||0,rel:this.options.rel});return t.src=e,["div",{"data-youtube-video":""},["iframe",ft(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},t)]]},...kN({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),k3=N3,S3=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,_3=Wt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",ft(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,s,r,a,i,o;const l=(s=(e=t.attrs)==null?void 0:e.src)!=null?s:"",c=(a=(r=t.attrs)==null?void 0:r.alt)!=null?a:"",d=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return d?`![${c}](${l} "${d}")`:`![${c}](${l})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:s,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:a,getPos:i,HTMLAttributes:o,editor:l})=>{const c=document.createElement("img");Object.entries(o).forEach(([h,f])=>{if(f!=null)switch(h){case"width":case"height":break;default:c.setAttribute(h,f);break}}),c.src=o.src;const d=new _N({element:c,editor:l,node:a,getPos:i,onResize:(h,f)=>{c.style.width=`${h}px`,c.style.height=`${f}px`},onCommit:(h,f)=>{const m=i();m!==void 0&&this.editor.chain().setNodeSelection(m).updateAttributes(this.name,{width:h,height:f}).run()},onUpdate:(h,f,m)=>h.type===a.type,options:{directions:t,min:{width:e,height:s},preserveAspectRatio:r===!0}}),u=d.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",c.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},d}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[pb({find:S3,type:this.type,getAttributes:t=>{const[,,e,s,r]=t;return{src:s,alt:e,title:r}}})]}}),C3=_3,T3=vs.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(s=>e.updateAttributes(s,{textAlign:t})).some(s=>s):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:s})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?s.unsetTextAlign():s.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),P3=T3;function Cw({value:t,onChange:e,placeholder:s,hideFullScreen:r,onExpand:a}){const[i,o]=p.useState(!1),[l,c]=p.useState(!1),[d,u]=p.useState(!1),[h,f]=p.useState(""),[m,x]=p.useState(""),g=CN({extensions:[y3,JD,AD.configure({openOnClick:!1,HTMLAttributes:{class:"text-forge-orange hover:underline cursor-pointer"}}),C3.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto"}}),k3.configure({controls:!1,width:640,height:480}),P3.configure({types:["heading","paragraph"]})],content:t,editorProps:{attributes:{class:"prose prose-slate max-w-none focus:outline-none min-h-[300px] p-4"}},onUpdate:({editor:N})=>{e(N.getHTML()),l&&x(N.getHTML())}});p.useEffect(()=>{g&&t!==g.getHTML()&&!l&&g.getText()},[t,g,l]),p.useEffect(()=>{l&&g&&x(g.getHTML())},[l,g]);const b=N=>{const S=N.target.value;x(S),e(S),g&&g.commands.setContent(S,!1)};if(!g)return null;const y=()=>{h&&(g.commands.setYoutubeVideo({src:h}),f(""),u(!1))},w=()=>{o(!i)};return n.jsxs("div",{className:`flex flex-col border rounded-md bg-white ${i?"fixed inset-0 z-50 m-0 rounded-none h-screen w-screen":"w-full"}`,children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b bg-gray-50 p-2 sticky top-0 z-10",children:[n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleBold().run(),className:g.isActive("bold")?"bg-gray-200":"",title:"Bold",type:"button",children:n.jsx(TN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleItalic().run(),className:g.isActive("italic")?"bg-gray-200":"",title:"Italic",type:"button",children:n.jsx(PN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleUnderline().run(),className:g.isActive("underline")?"bg-gray-200":"",title:"Underline",type:"button",children:n.jsx("div",{className:"underline font-bold text-xs",children:"U"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleStrike().run(),className:g.isActive("strike")?"bg-gray-200":"",title:"Strikethrough",type:"button",children:n.jsx(EN,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleHeading({level:1}).run(),className:g.isActive("heading",{level:1})?"bg-gray-200":"",title:"Heading 1",type:"button",children:n.jsx(AN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleHeading({level:2}).run(),className:g.isActive("heading",{level:2})?"bg-gray-200":"",title:"Heading 2",type:"button",children:n.jsx(LN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleHeading({level:3}).run(),className:g.isActive("heading",{level:3})?"bg-gray-200":"",title:"Heading 3",type:"button",children:n.jsx(RN,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().setTextAlign("left").run(),className:g.isActive({textAlign:"left"})?"bg-gray-200":"",title:"Align Left",type:"button",children:n.jsx(ON,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().setTextAlign("center").run(),className:g.isActive({textAlign:"center"})?"bg-gray-200":"",title:"Align Center",type:"button",children:n.jsx(MN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().setTextAlign("right").run(),className:g.isActive({textAlign:"right"})?"bg-gray-200":"",title:"Align Right",type:"button",children:n.jsx(IN,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleBulletList().run(),className:g.isActive("bulletList")?"bg-gray-200":"",title:"Bullet List",type:"button",children:n.jsx(Zx,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleOrderedList().run(),className:g.isActive("orderedList")?"bg-gray-200":"",title:"Ordered List",type:"button",children:n.jsx(hl,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleBlockquote().run(),className:g.isActive("blockquote")?"bg-gray-200":"",title:"Quote",type:"button",children:n.jsx(DN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().toggleCodeBlock().run(),className:g.isActive("codeBlock")?"bg-gray-200":"",title:"Code Block",type:"button",children:n.jsx(Ll,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{const N=g.getAttributes("link").href,S=window.prompt("URL",N);if(S!==null){if(S===""){g.chain().focus().extendMarkRange("link").unsetLink().run();return}g.chain().focus().extendMarkRange("link").setLink({href:S}).run()}},className:g.isActive("link")?"bg-gray-200":"",title:"Link",type:"button",children:n.jsx($N,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>u(!0),className:g.isActive("youtube")?"bg-gray-200":"",title:"Add YouTube Video",type:"button",children:n.jsx(FN,{className:"h-4 w-4"})}),n.jsx("div",{className:"flex-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().undo().run(),disabled:!g.can().undo(),title:"Undo",type:"button",children:n.jsx(zN,{className:"h-4 w-4"})}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g.chain().focus().redo().run(),disabled:!g.can().redo(),title:"Redo",type:"button",children:n.jsx(BN,{className:"h-4 w-4"})}),!r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:a||w,title:i?"Exit Full Screen":"Full Screen (New Page)",type:"button",className:i?"bg-forge-orange/10 text-forge-orange":"",children:i?n.jsx(UN,{className:"h-4 w-4"}):n.jsx(VN,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),n.jsx(te,{variant:"ghost",size:"icon",onClick:()=>c(!l),title:"View HTML Source",type:"button",className:l?"bg-forge-orange/10 text-forge-orange":"",children:n.jsx(HN,{className:"h-4 w-4"})})]}),n.jsx("div",{className:`flex-1 overflow-auto bg-white ${i?"p-8 max-w-5xl mx-auto w-full shadow-lg my-4 rounded":""}`,children:l?n.jsx("textarea",{value:m,onChange:b,className:"w-full h-full min-h-[300px] p-4 font-mono text-sm bg-gray-50 text-gray-800 resize-none focus:outline-none",spellCheck:!1}):n.jsx(WN,{editor:g,className:"min-h-full"})}),i&&n.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:n.jsx(te,{onClick:w,variant:"secondary",className:"shadow-lg",children:"Done Editing"})}),n.jsx(qr,{open:d,onOpenChange:u,children:n.jsxs(ur,{className:"z-[110]",children:[n.jsx(hr,{children:n.jsx(mr,{children:"Add YouTube Video"})}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ts,{htmlFor:"youtube-url",children:"Video URL"}),n.jsx(ye,{id:"youtube-url",placeholder:"https://www.youtube.com/watch?v=...",value:h,onChange:N=>f(N.target.value)})]})}),n.jsxs(fr,{children:[n.jsx(te,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),n.jsx(te,{onClick:y,children:"Add Video"})]})]})})]})}const E3=t=>t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80),A3=Ua({module_id:gs().uuid("Select a module"),slug:gs().min(3,"Slug must have at least 3 characters").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and hyphens only"),lesson_type:Zc(["text","video","quiz"]),xp_value:Dr.number().int().min(0,"XP must be zero or greater"),order:Dr.number().int().min(1,"Order must be at least 1"),duration_minutes:Vi([Dr.number().int().min(0),Hi("")]).optional().transform(t=>t===""||t===void 0?null:Number(t))});function L3(){var Fe;const t=dr(),e=p.useMemo(()=>Ue(),[]),s=Ht(),{data:r=[],isLoading:a}=$e({queryKey:["content-locales"],queryFn:async()=>jo(e)}),i=p.useMemo(()=>qs(r),[r]),[o,l]=p.useState(bt),[c,d]=p.useState({});p.useEffect(()=>{r.length>0&&l(M=>r.some(X=>X.code===M)?M:i)},[r,i]);const u=p.useCallback(()=>({title:"",tags:[],thumbnailUrl:"",richText:"",videoUrl:"",quizJson:"[]",isPublished:!1,publishedAt:null}),[]),h=p.useCallback((M,X)=>{let fe="",Se="",Te="[]";if(X==="text"&&typeof(M==null?void 0:M.content)=="string")fe=M.content;else if(X==="video"&&typeof(M==null?void 0:M.content)=="string")Se=M.content;else if(X==="quiz"&&(M!=null&&M.content))try{Te=JSON.stringify(M.content,null,2)}catch{Te="[]"}return{title:(M==null?void 0:M.title)??"",tags:(M==null?void 0:M.tags)??[],thumbnailUrl:(M==null?void 0:M.thumbnail_url)??"",richText:fe,videoUrl:Se,quizJson:Te,isPublished:(M==null?void 0:M.is_published)??!1,publishedAt:(M==null?void 0:M.published_at)??null}},[]),f=p.useCallback((M,X)=>{d(fe=>{const Se=fe[M]??u();return{...fe,[M]:X(Se)}})},[u]),[m,x]=p.useState("all"),[g,b]=p.useState("all"),[y,w]=p.useState("all"),[N,S]=p.useState(!1),k=Aa({resolver:Va(A3),defaultValues:{module_id:"",slug:"",lesson_type:"text",xp_value:10,order:1,duration_minutes:""}}),j=p.useCallback((M,X)=>{if(r.length===0)return;const fe=(M==null?void 0:M.lesson_type)??X??k.getValues("lesson_type"),Se=M?Object.fromEntries(Object.entries($t(M.lesson_localizations??[])).map(([qt,Os])=>[qt,h(Os,fe)])):{},Te=No(r,Se,()=>u());d(Te),l(qs(r))},[r,h,u,k]),v=p.useMemo(()=>r.reduce((M,X)=>(M[X.code]=X.label,M),{}),[r]),[_,E]=p.useState(null),[R,z]=p.useState(null),[F,L]=p.useState(!1),U=k.watch("lesson_type"),J=M=>{const X=c[M]??u(),fe=v[M]??M;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ge,{className:"text-sm font-medium text-forge-dark",children:["Title  ",fe]}),n.jsx(ye,{value:X.title,onChange:Se=>f(M,Te=>({...Te,title:Se.target.value})),placeholder:`Title in ${fe}`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Thumbnail URL"}),n.jsx(ye,{value:X.thumbnailUrl,onChange:Se=>f(M,Te=>({...Te,thumbnailUrl:Se.target.value})),placeholder:"https://..."})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Tags"}),n.jsx(Mr,{value:X.tags,onChange:Se=>f(M,Te=>({...Te,tags:Se})),placeholder:"Type a tag and press Enter"}),n.jsxs(Mt,{children:["Tags help organize content for ",fe,"."]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-forge-cream/80 bg-forge-cream/40 p-3",children:[n.jsx($n,{id:`lesson-publish-${M}`,checked:X.isPublished,onCheckedChange:Se=>f(M,Te=>({...Te,isPublished:Se,publishedAt:Se?Te.publishedAt??new Date().toISOString():null}))}),n.jsx("label",{htmlFor:`lesson-publish-${M}`,className:"text-sm text-forge-gray",children:X.isPublished?`Published in ${fe}`:`Draft in ${fe}`})]}),U==="text"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Rich text content"}),n.jsx(Cw,{value:X.richText,onChange:Se=>f(M,Te=>({...Te,richText:Se})),placeholder:`Write ${fe} lesson content...`,onExpand:()=>{if(!_){Q.error("Please save the lesson before opening the full editor");return}t(DL(_.id))}})]}),U==="video"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Video URL"}),n.jsx(ye,{value:X.videoUrl,onChange:Se=>f(M,Te=>({...Te,videoUrl:Se.target.value})),placeholder:"https://www.youtube.com/watch?v=..."})]}),U==="quiz"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ge,{className:"text-sm font-medium text-forge-dark",children:"Quiz JSON"}),n.jsx(Ur,{rows:8,value:X.quizJson,onChange:Se=>f(M,Te=>({...Te,quizJson:Se.target.value})),placeholder:`[\r
  {\r
    "question": "What is React?",\r
    "options": ["Library", "Framework"],\r
    "correctAnswer": "Library"\r
  }\r
]`})]})]})};p.useEffect(()=>{N||(k.reset(),E(null),L(!1),d({}),l(i))},[N,k,i]);const Y=k.watch("slug"),I=((Fe=c[i])==null?void 0:Fe.title)??"";p.useEffect(()=>{if(!F&&!_){const M=E3(I??"");M&&M!==Y&&k.setValue("slug",M,{shouldValidate:!1})}},[I,Y,F,_,k]);const{data:O=[]}=$e({queryKey:["admin-lessons-paths"],queryFn:async()=>{const{data:M,error:X}=await e.from("learning_paths").select("id, title").order("title",{ascending:!0});if(X)throw X;return M??[]}}),{data:D=[]}=$e({queryKey:["admin-lessons-courses"],queryFn:async()=>{const{data:M,error:X}=await e.from("courses").select("id, title, path_id, order").order("path_id",{ascending:!0}).order("order",{ascending:!0});if(X)throw X;return M??[]}}),{data:W=[]}=$e({queryKey:["admin-lessons-modules"],queryFn:async()=>{const{data:M,error:X}=await e.from("modules").select("id, title, course_id, order").order("course_id",{ascending:!0}).order("order",{ascending:!0});if(X)throw X;return M??[]}}),C=p.useMemo(()=>W.reduce((M,X)=>(M[X.id]=X,M),{}),[W]),V=p.useMemo(()=>D.reduce((M,X)=>(M[X.id]=X,M),{}),[D]),P=p.useMemo(()=>O.reduce((M,X)=>(M[X.id]=X,M),{}),[O]),B=p.useMemo(()=>m==="all"?D:D.filter(M=>M.path_id===m),[D,m]),T=p.useMemo(()=>W.filter(M=>{if(m!=="all"){const X=M.course_id?V[M.course_id]:null;if(!X||X.path_id!==m)return!1}return!(g!=="all"&&M.course_id!==g)}),[W,m,g,V]),{data:q,isLoading:G}=$e({queryKey:["admin-lessons"],queryFn:async()=>{const{data:M,error:X}=await e.from("lessons").select(`
            id,
            title,
            slug,
            lesson_type,
            module_id,
            order,
            content,
            xp_value,
            duration_minutes,
            thumbnail_url,
            is_published,
            published_at,
            updated_at,
            lesson_localizations(*)
          `).order("module_id",{ascending:!0}).order("order",{ascending:!0});if(X)throw X;return M??[]}}),A=p.useMemo(()=>q?q.filter(M=>{const X=M.module_id?C[M.module_id]:null,fe=X!=null&&X.course_id?V[X.course_id]:null,Se=(fe==null?void 0:fe.path_id)??null;return!(m!=="all"&&Se!==m||g!=="all"&&(X==null?void 0:X.course_id)!==g||y!=="all"&&M.module_id!==y)}):[],[q,m,g,y,C,V]),K=Xe({mutationFn:async M=>{if(r.length===0)throw new Error("Configure at least one locale before saving lessons");if(Object.keys(c).length===0)throw new Error("Add localized content before saving the lesson");const X=r.reduce((ze,Pe)=>(ze[Pe.code]=Pe.label,ze),{}),fe={};for(const[ze,Pe]of Object.entries(c)){if(!Pe.title.trim())throw new Error(`Provide a title for ${X[ze]??ze}`);if(M.lesson_type==="text"){if(Pe.isPublished&&!Pe.richText.trim())throw new Error(`Provide content for ${X[ze]??ze}`);fe[ze]=Pe.richText}else if(M.lesson_type==="video"){if(Pe.isPublished&&!Pe.videoUrl.trim())throw new Error(`Provide a video URL for ${X[ze]??ze}`);fe[ze]=Pe.videoUrl.trim()}else{if(Pe.isPublished&&!Pe.quizJson.trim())throw new Error(`Provide quiz JSON for ${X[ze]??ze}`);try{const rs=Pe.quizJson.trim()?JSON.parse(Pe.quizJson):[];if(!Array.isArray(rs))throw new Error;fe[ze]=rs}catch{throw new Error(`Quiz JSON is invalid for ${X[ze]??ze}`)}}}const Se=c[i];if(!Se)throw new Error("Default locale content is missing");const Te=Object.values(c).some(ze=>ze.isPublished),qt={module_id:M.module_id,slug:M.slug.trim(),lesson_type:M.lesson_type,content:fe[i],title:Se.title.trim(),xp_value:M.xp_value,order:M.order,duration_minutes:M.duration_minutes??null,thumbnail_url:Se.thumbnailUrl.trim()?Se.thumbnailUrl.trim():null,is_published:Te,published_at:Te?(_==null?void 0:_.published_at)??new Date().toISOString():null};let Os=(_==null?void 0:_.id)??null;if(_){const{error:ze}=await e.from("lessons").update(qt).eq("id",_.id);if(ze)throw ze}else{const{data:ze,error:Pe}=await e.from("lessons").insert(qt).select("id").single();if(Pe)throw Pe;Os=(ze==null?void 0:ze.id)??null}if(!Os)throw new Error("Could not determine lesson identifier after saving");const zt=Object.entries(c).map(([ze,Pe])=>{var Gs,Bn;const rs=((Bn=(Gs=_==null?void 0:_.lesson_localizations)==null?void 0:Gs.find(Js=>Js.locale===ze))==null?void 0:Bn.published_at)??null;return{lesson_id:Os,locale:ze,title:Pe.title.trim(),tags:Pe.tags,thumbnail_url:Pe.thumbnailUrl.trim()?Pe.thumbnailUrl.trim():null,is_published:Pe.isPublished,published_at:Pe.isPublished?Pe.publishedAt??rs??new Date().toISOString():null,content:fe[ze]}}),{error:zn}=await e.from("lesson_localizations").upsert(zt,{onConflict:"lesson_id,locale"});if(zn)throw zn},onSuccess:()=>{s.invalidateQueries({queryKey:["admin-lessons"]}),Q.success(_?"Lesson updated":"Lesson created"),S(!1)},onError:M=>{console.error("Error saving lesson",M),Q.error(M instanceof Error?M.message:"Failed to save lesson")}}),ne=Xe({mutationFn:async M=>{const{error:X}=await e.from("lessons").delete().eq("id",M);if(X)throw X},onSuccess:()=>{s.invalidateQueries({queryKey:["admin-lessons"]}),Q.success("Lesson deleted"),z(null)},onError:M=>{console.error("Error deleting lesson",M),Q.error(M instanceof Error?M.message:"Failed to delete lesson")}}),le=()=>{if(!r.length){Q.error("Configure locales before creating lessons");return}E(null),L(!1),k.reset({module_id:y!=="all"?y:"",slug:"",lesson_type:"text",xp_value:10,order:1,duration_minutes:""}),j(void 0,"text"),S(!0)},ee=M=>{var X;if(!r.length){Q.error("Configure locales before editing lessons");return}E(M),L(!0),k.reset({module_id:M.module_id??"",slug:M.slug??"",lesson_type:M.lesson_type,xp_value:M.xp_value??0,order:M.order??1,duration_minutes:((X=M.duration_minutes)==null?void 0:X.toString())??""}),j(M),S(!0)},re=M=>{try{K.mutate(M)}catch(X){X instanceof Error&&Q.error(X.message)}},ae=M=>{const X=$t(M.lesson_localizations??[]),fe=X[i]??X[bt]??Object.values(X)[0],Se=(fe==null?void 0:fe.content)??M.content;return M.lesson_type==="text"?(typeof Se=="string"?Se:"").replace(/<[^>]*>?/gm,"").slice(0,160):M.lesson_type==="video"?typeof Se=="string"?Se:"":"Quiz lesson contents"};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 xl:flex-row xl:items-center xl:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-forge-dark",children:"Lessons"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Create and manage lesson content across modules. Support for text, video, and quiz formats."})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(Pt,{value:m,onValueChange:M=>{x(M),b("all"),w("all")},children:[n.jsx(kt,{children:n.jsx(Rt,{placeholder:"Filter by path"})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:"All paths"}),O.map(M=>n.jsx(Ye,{value:M.id,children:M.title},M.id))]})]}),n.jsxs(Pt,{value:g,onValueChange:M=>{b(M),w("all")},children:[n.jsx(kt,{children:n.jsx(Rt,{placeholder:"Filter by course"})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:"All courses"}),B.map(M=>n.jsx(Ye,{value:M.id,children:M.title},M.id))]})]}),n.jsxs(Pt,{value:y,onValueChange:M=>w(M),children:[n.jsx(kt,{children:n.jsx(Rt,{placeholder:"Filter by module"})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:"All modules"}),T.map(M=>n.jsxs(Ye,{value:M.id,children:["#",M.order,"  ",M.title]},M.id))]})]}),n.jsxs(te,{onClick:le,className:"w-full",children:[n.jsx(Mn,{className:"mr-2 h-4 w-4"}),"New Lesson"]})]})]}),G?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/80",children:n.jsxs(oe,{className:"flex items-center gap-3 p-8 text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading lessons..."]})}):A&&A.length>0?n.jsx("div",{className:"grid gap-4",children:A.map(M=>{const X=M.module_id?C[M.module_id]:null,fe=X!=null&&X.course_id?V[X.course_id]:null,Se=fe!=null&&fe.path_id?P[fe.path_id]:null;return n.jsxs(de,{className:"border border-forge-cream/70 bg-white/80",children:[n.jsxs(Be,{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(qe,{className:"flex flex-wrap items-center gap-2 text-forge-dark",children:["#",M.order,"  ",M.title,n.jsx(xe,{variant:M.is_published?"default":"outline",className:M.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:M.is_published?"Published":"Draft"}),n.jsxs(xe,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[n.jsx(qN,{className:"h-3.5 w-3.5"})," ",M.lesson_type.toUpperCase()]})]}),n.jsxs(ls,{className:"text-sm text-forge-gray",children:[X?`${X.title}  `:"",fe?`${fe.title}  `:"",Se?Se.title:""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(te,{variant:"outline",size:"icon",onClick:()=>ee(M),children:n.jsx(La,{className:"h-4 w-4"})}),n.jsx(te,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>z(M),children:n.jsx(Ra,{className:"h-4 w-4"})})]})]}),n.jsxs(oe,{className:"space-y-3 text-sm text-forge-gray",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Slug:"})," ",M.slug]}),n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"XP:"})," ",M.xp_value]}),M.duration_minutes!=null&&n.jsxs(n.Fragment,{children:[n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-forge-dark",children:"Duration:"})," ",M.duration_minutes," min"]})]}),M.thumbnail_url&&n.jsxs(n.Fragment,{children:[n.jsx(Ft,{orientation:"vertical",className:"hidden h-4 sm:block"}),n.jsx("a",{href:M.thumbnail_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium text-forge-orange hover:underline",children:"Thumbnail"})]})]}),n.jsx("p",{className:"text-xs text-forge-gray/90 line-clamp-3",children:ae(M)}),n.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs text-forge-gray",children:(M.lesson_localizations??[]).map(Te=>n.jsxs(xe,{variant:Te.is_published?"default":"outline",className:Te.is_published?"bg-forge-orange text-white hover:bg-forge-orange/90":"",children:[Te.locale,"  ",Te.is_published?"Published":"Draft"]},`${M.id}-${Te.locale}`))}),n.jsxs("div",{className:"text-xs text-forge-gray/80",children:["Updated ",M.updated_at?or(new Date(M.updated_at),{addSuffix:!0}):"N/A"]})]})]},M.id)})}):n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsx(oe,{className:"p-8 text-center text-forge-gray",children:"No lessons found for this filter. Create a lesson to deliver content to learners."})}),n.jsx(qr,{open:N,onOpenChange:S,children:n.jsxs(ur,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(hr,{children:[n.jsx(mr,{children:_?"Edit lesson":"New lesson"}),n.jsx(Kr,{children:_?"Update lesson metadata, content, and publication state.":"Compose new content and attach it to a module. Choose the appropriate lesson format."})]}),n.jsx(Ha,{...k,children:n.jsxs("form",{onSubmit:k.handleSubmit(re),className:"space-y-6",children:[n.jsx(nt,{control:k.control,name:"module_id",render:({field:M})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Module"}),n.jsx(et,{children:n.jsxs(Pt,{value:M.value,onValueChange:M.onChange,children:[n.jsx(kt,{className:"w-full",children:n.jsx(Rt,{placeholder:"Select a module"})}),n.jsx(St,{children:(T.length>0?T:W).map(X=>n.jsxs(Ye,{value:X.id,children:["#",X.order,"  ",X.title]},X.id))})]})}),n.jsx(at,{})]})}),n.jsx(nt,{control:k.control,name:"slug",render:({field:M})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Slug"}),n.jsx(et,{children:n.jsx(ye,{placeholder:"understanding-components",...M,onChange:X=>{L(!0),M.onChange(X)}})}),n.jsx(Mt,{children:"Used in URLs. We auto-generate it from the default locale title."}),n.jsx(at,{})]})}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx(nt,{control:k.control,name:"lesson_type",render:({field:M})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Lesson type"}),n.jsx(et,{children:n.jsxs(Pt,{value:M.value,onValueChange:M.onChange,children:[n.jsx(kt,{children:n.jsx(Rt,{})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"text",children:"Text"}),n.jsx(Ye,{value:"video",children:"Video"}),n.jsx(Ye,{value:"quiz",children:"Quiz"})]})]})}),n.jsx(at,{})]})}),n.jsx(nt,{control:k.control,name:"order",render:({field:M})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Order"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:1,...M})}),n.jsx(at,{})]})}),n.jsx(nt,{control:k.control,name:"xp_value",render:({field:M})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"XP value"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:0,...M})}),n.jsx(at,{})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-forge-dark",children:"Localized content"}),n.jsx("p",{className:"text-sm text-forge-gray",children:"Manage per-locale titles, tags, thumbnails, publish state, and lesson content."})]}),a?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/70",children:n.jsxs(oe,{className:"flex items-center gap-2 p-6 text-sm text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"})," Loading locales..."]})}):r.length===0?n.jsx(de,{className:"border border-red-200 bg-red-50/80",children:n.jsx(oe,{className:"p-4 text-sm text-red-700",children:"Add locales in Supabase before managing localized content."})}):n.jsx(Ro,{locales:r,activeLocale:o,onLocaleChange:l,renderFields:J})]}),n.jsx(nt,{control:k.control,name:"duration_minutes",render:({field:M})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:"Duration (minutes)"}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:0,placeholder:"Optional",...M})}),n.jsx(at,{})]})}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>S(!1),disabled:k.formState.isSubmitting,children:"Cancel"}),n.jsx(te,{type:"submit",disabled:k.formState.isSubmitting,children:k.formState.isSubmitting?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):_?"Save changes":"Create lesson"})]})]})})]})}),n.jsx(Fn,{open:!!R,onOpenChange:M=>!M&&z(null),children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:"Delete lesson"}),n.jsxs(Zr,{children:["Deleting a lesson cannot be undone. Learner progress for this lesson will be lost. Continue deleting ",R==null?void 0:R.title,"?"]})]}),n.jsxs(Yr,{children:[n.jsx(en,{disabled:ne.isPending,children:"Cancel"}),n.jsx(Qr,{onClick:()=>R&&ne.mutate(R.id),className:"bg-red-500 hover:bg-red-600",disabled:ne.isPending,children:ne.isPending?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})}function R3(){const{lessonId:t}=Rc(),e=dr(),s=p.useMemo(()=>Ue(),[]),r=Ht(),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,h]=p.useState(!0),[f,m]=p.useState(!1),[x,g]=p.useState(!1);p.useEffect(()=>{async function S(){if(t)try{const{data:k,error:j}=await s.from("lessons").select("title, content, lesson_type").eq("id",t).single();if(j)throw j;if(k.lesson_type!=="text"){Q.error("Only text lessons can be edited in this editor"),e(Yo);return}const v=typeof k.content=="string"?k.content:"";i(v),l(v),d(k.title)}catch(k){console.error("Error loading lesson:",k),Q.error("Failed to load lesson content"),e(Yo)}finally{h(!1)}}S()},[t,s,e]);const b=Xe({mutationFn:async S=>{if(!t)throw new Error("No lesson ID");const{error:k}=await s.from("lessons").update({content:S}).eq("id",t);if(k)throw k},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-lessons"]}),l(a),Q.success("Lesson content saved")},onError:S=>{console.error("Error saving lesson:",S),Q.error("Failed to save changes")}}),y=async()=>{m(!0);try{await b.mutateAsync(a)}finally{m(!1)}},w=()=>{a!==o?g(!0):e(Yo)},N=()=>{e(Yo)};return u?n.jsx("div",{className:"flex h-screen items-center justify-center",children:n.jsx(tt,{className:"h-8 w-8 animate-spin text-forge-orange"})}):n.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between border-b bg-white px-6 py-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(te,{variant:"ghost",size:"icon",onClick:w,children:n.jsx(kx,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Edit Lesson Content"}),n.jsx("p",{className:"text-sm text-gray-500",children:c})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(te,{onClick:y,disabled:f||a===o,className:a!==o?"bg-forge-orange hover:bg-forge-orange/90":"",children:f?n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(rb,{className:"mr-2 h-4 w-4"})," Save Changes"]})})})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx("div",{className:"h-full max-w-5xl mx-auto bg-white shadow-sm my-4 rounded-lg overflow-hidden border",children:n.jsx(Cw,{value:a,onChange:i,placeholder:"Start writing your lesson content...",hideFullScreen:!0})})}),n.jsx(Fn,{open:x,onOpenChange:g,children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:"Unsaved Changes"}),n.jsx(Zr,{children:"You have unsaved changes. Are you sure you want to leave? Your changes will be lost."})]}),n.jsxs(Yr,{children:[n.jsx(en,{children:"Cancel"}),n.jsx(Qr,{onClick:N,className:"bg-red-500 hover:bg-red-600",children:"Leave without saving"})]})]})})]})}const O3=t=>t?t.replace(/<[^>]+>/g,"").trim():"";function M3(){const{t}=je(),e=p.useMemo(()=>Ue(),[]),s=Ht(),[r,a]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,f]=p.useState("all"),m=p.useMemo(()=>Ua({module_id:gs().uuid(t("admin.projects.validation.moduleRequired")),title:gs().min(3,t("admin.projects.validation.titleMin")),description:gs().optional().or(Hi("")),xp_value:Vi([Hi(""),Dr.number().int().min(0,t("admin.projects.validation.xpMin"))]).transform(L=>L===""?null:L),is_active:v4()}),[t]),x=Aa({resolver:Va(m),defaultValues:{module_id:"",title:"",description:"",xp_value:null,is_active:!0}});p.useEffect(()=>{r||(c(null),x.reset({module_id:"",title:"",description:"",xp_value:null,is_active:!0}))},[r,x]);const{data:g=[],isLoading:b}=$e({queryKey:["admin-module-projects-modules"],queryFn:async()=>{const{data:L,error:U}=await e.from("modules").select("id, title, order, course:courses(id, title)").order("order",{ascending:!0});if(U)throw U;return(L??[]).map(J=>({...J,course:J.course??null}))}}),{data:y=[],isLoading:w}=$e({queryKey:["admin-module-projects"],queryFn:async()=>{const{data:L,error:U}=await e.from("module_projects").select("id, module_id, title, description, xp_value, is_active, module:modules(id, title, order, course:courses(id, title))").order("module_id",{ascending:!0}).order("created_at",{ascending:!0}).order("title",{ascending:!0});if(U)throw U;return(L??[]).map(J=>({...J,module:J.module??null}))},onError:L=>{console.error("Error loading projects",L),Q.error(t("admin.projects.notifications.loadError"))}}),N=p.useMemo(()=>h==="all"?y:y.filter(L=>L.module_id===h),[y,h]),S=p.useMemo(()=>{const L=new Map;return N.forEach(U=>{const J=U.module_id||"unassigned";L.has(J)||L.set(J,{module:U.module??null,items:[]}),L.get(J).items.push(U)}),Array.from(L.entries()).sort((U,J)=>{var W,C,V,P;const Y=((W=U[1].module)==null?void 0:W.order)??Number.MAX_SAFE_INTEGER,I=((C=J[1].module)==null?void 0:C.order)??Number.MAX_SAFE_INTEGER;if(Y!==I)return Y-I;const O=((V=U[1].module)==null?void 0:V.title)??"",D=((P=J[1].module)==null?void 0:P.title)??"";return O.localeCompare(D)}).map(([U,J])=>({key:U,...J}))},[N]),k=Xe({mutationFn:async L=>{var J;const U={module_id:L.module_id,title:L.title.trim(),description:(J=L.description)!=null&&J.trim()?L.description.trim():null,xp_value:L.xp_value,is_active:L.is_active};if(l){const{error:Y}=await e.from("module_projects").update(U).eq("id",l.id);if(Y)throw Y}else{const{error:Y}=await e.from("module_projects").insert(U);if(Y)throw Y}},onSuccess:()=>{s.invalidateQueries({queryKey:["admin-module-projects"]}),Q.success(t(l?"admin.projects.notifications.updated":"admin.projects.notifications.created")),a(!1)},onError:L=>{console.error("Error saving project",L),Q.error(t("admin.projects.notifications.saveError"))}}),j=Xe({mutationFn:async L=>{const{error:U}=await e.from("module_projects").delete().eq("id",L);if(U)throw U},onSuccess:()=>{s.invalidateQueries({queryKey:["admin-module-projects"]}),Q.success(t("admin.projects.notifications.deleted")),o(!1),u(null)},onError:L=>{console.error("Error deleting project",L),Q.error(t("admin.projects.notifications.deleteError"))}}),v=p.useCallback(()=>{c(null),x.reset({module_id:"",title:"",description:"",xp_value:null,is_active:!0}),a(!0)},[x,a]),_=p.useCallback(L=>{c(L),x.reset({module_id:L.module_id,title:L.title,description:L.description??"",xp_value:L.xp_value??null,is_active:L.is_active??!0}),a(!0)},[x,a]),E=p.useCallback(L=>{u(L),o(!0)},[]),R=L=>{k.mutate(L)},z=p.useMemo(()=>g.slice().sort((L,U)=>L.order!==U.order?L.order-U.order:L.title.localeCompare(U.title)),[g]),F=p.useMemo(()=>S.map(({key:L,module:U,items:J})=>n.jsxs(de,{className:"border border-forge-cream/70 bg-white/80",children:[n.jsx(Be,{className:"flex flex-col gap-2 lg:flex-row lg:items-start lg:justify-between",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(qe,{className:"text-forge-dark",children:U?`${U.title}`:t("admin.projects.unassignedModule")}),(U==null?void 0:U.course)&&n.jsx(ls,{className:"text-sm text-forge-gray",children:t("admin.projects.labels.course",{course:U.course.title})})]})}),n.jsx(oe,{className:"space-y-4",children:J.map((Y,I)=>{const O=I+1;return n.jsx("div",{className:"rounded-lg border border-forge-cream/60 bg-white/90 p-4 shadow-sm transition-shadow hover:shadow-md",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"rounded-full bg-forge-orange/10 px-2 py-0.5 text-xs font-medium text-forge-orange",children:t("admin.projects.labels.projectNumber",{number:O})}),n.jsx("h3",{className:"text-lg font-semibold text-forge-dark",children:Y.title}),!Y.is_active&&n.jsx(xe,{variant:"outline",className:"border-red-200 text-red-600",children:t("admin.projects.labels.inactive")}),typeof Y.xp_value=="number"&&n.jsx(xe,{variant:"secondary",className:"bg-forge-cream text-forge-dark",children:t("admin.projects.labels.xpValue",{xp:Y.xp_value})})]}),Y.description&&n.jsx("p",{className:"text-sm text-forge-gray/90 line-clamp-2",children:O3(Y.description)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(te,{variant:"outline",size:"icon",onClick:()=>_(Y),children:n.jsx(La,{className:"h-4 w-4"})}),n.jsx(te,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>E(Y),children:n.jsx(Ra,{className:"h-4 w-4"})})]})]})},Y.id)})})]},L)),[S,E,_,t]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 xl:flex-row xl:items-center xl:justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-forge-dark",children:t("admin.projects.title")}),n.jsx("p",{className:"text-sm text-forge-gray",children:t("admin.projects.subtitle")})]}),n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[n.jsxs(Pt,{value:h,onValueChange:L=>f(L),disabled:b,children:[n.jsx(kt,{className:"w-[240px]",children:n.jsx(Rt,{placeholder:t("admin.projects.filters.modulePlaceholder")})}),n.jsxs(St,{children:[n.jsx(Ye,{value:"all",children:t("admin.projects.filters.allModules")}),z.map(L=>n.jsx(Ye,{value:L.id,children:L.course?`${L.course.title}  ${L.title}`:L.title},L.id))]})]}),n.jsxs(te,{onClick:v,disabled:b||z.length===0,className:"md:w-auto",children:[n.jsx(Mn,{className:"mr-2 h-4 w-4"}),t("admin.projects.actions.newProject")]})]})]}),w?n.jsx(de,{className:"border-dashed border-forge-cream/70 bg-white/80",children:n.jsxs(oe,{className:"flex items-center gap-3 p-8 text-forge-gray",children:[n.jsx(tt,{className:"h-4 w-4 animate-spin"}),t("admin.projects.loading")]})}):S.length===0?n.jsx(de,{className:"border border-dashed border-forge-cream/70 bg-white/80",children:n.jsx(oe,{className:"p-8 text-center text-sm text-forge-gray",children:t("admin.projects.emptyState")})}):n.jsx("div",{className:"grid gap-4",children:F}),n.jsx(qr,{open:r,onOpenChange:a,children:n.jsxs(ur,{children:[n.jsxs(hr,{children:[n.jsx(mr,{children:t(l?"admin.projects.dialog.editTitle":"admin.projects.dialog.createTitle")}),n.jsx(Kr,{children:t("admin.projects.dialog.description")})]}),n.jsx(Ha,{...x,children:n.jsxs("form",{className:"space-y-4",onSubmit:x.handleSubmit(R),children:[n.jsx(nt,{control:x.control,name:"module_id",render:({field:L})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:t("admin.projects.form.module")}),n.jsxs(Pt,{onValueChange:L.onChange,value:L.value,children:[n.jsx(et,{children:n.jsx(kt,{children:n.jsx(Rt,{placeholder:t("admin.projects.form.modulePlaceholder")})})}),n.jsx(St,{children:z.map(U=>n.jsx(Ye,{value:U.id,children:U.course?`${U.course.title}  ${U.title}`:U.title},U.id))})]}),n.jsx(at,{})]})}),n.jsx(nt,{control:x.control,name:"title",render:({field:L})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:t("admin.projects.form.title")}),n.jsx(et,{children:n.jsx(ye,{...L,placeholder:t("admin.projects.form.titlePlaceholder")})}),n.jsx(at,{})]})}),n.jsx(nt,{control:x.control,name:"description",render:({field:L})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:t("admin.projects.form.description")}),n.jsx(et,{children:n.jsx(Ur,{rows:6,...L,placeholder:t("admin.projects.form.descriptionPlaceholder")})}),n.jsx(Mt,{children:t("admin.projects.form.descriptionHelp")}),n.jsx(at,{})]})}),n.jsx(nt,{control:x.control,name:"xp_value",render:({field:L})=>n.jsxs(Qe,{children:[n.jsx(ge,{children:t("admin.projects.form.xpValue")}),n.jsx(et,{children:n.jsx(ye,{type:"number",min:0,value:L.value??"",onChange:U=>{const J=U.target.value;L.onChange(J===""?null:Number(J))},placeholder:t("admin.projects.form.xpValuePlaceholder")})}),n.jsx(Mt,{children:t("admin.projects.form.xpValueHelp")}),n.jsx(at,{})]})}),n.jsx(nt,{control:x.control,name:"is_active",render:({field:L})=>n.jsxs(Qe,{className:"flex flex-row items-center justify-between rounded-lg border border-forge-cream/70 bg-forge-cream/10 p-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ge,{className:"text-base",children:t("admin.projects.form.activeLabel")}),n.jsx(Mt,{children:t("admin.projects.form.activeDescription")})]}),n.jsx(et,{children:n.jsx($n,{checked:L.value,onCheckedChange:L.onChange})})]})}),n.jsxs(fr,{children:[n.jsx(te,{type:"button",variant:"outline",onClick:()=>a(!1),children:t("common.buttons.cancel")}),n.jsx(te,{type:"submit",disabled:k.isPending,children:k.isPending?t("common.buttons.saving"):t(l?"common.buttons.update":"common.buttons.create")})]})]})})]})}),n.jsx(Fn,{open:i,onOpenChange:o,children:n.jsxs(Gr,{children:[n.jsxs(Jr,{children:[n.jsx(Xr,{children:t("admin.projects.delete.title")}),n.jsx(Zr,{children:t("admin.projects.delete.description",{title:(d==null?void 0:d.title)??""})})]}),n.jsxs(Yr,{children:[n.jsx(en,{onClick:()=>u(null),children:t("common.buttons.cancel")}),n.jsx(Qr,{className:"bg-red-500 hover:bg-red-600",disabled:j.isPending,onClick:()=>{d&&j.mutate(d.id)},children:j.isPending?t("common.buttons.loading"):t("admin.projects.delete.confirm")})]})]})})]})}function I3(t){switch(t){case 1:return n.jsx(pn,{className:"h-6 w-6 text-yellow-500"});case 2:return n.jsx(KN,{className:"h-6 w-6 text-gray-400"});case 3:return n.jsx(gn,{className:"h-6 w-6 text-amber-600"});default:return n.jsxs("div",{className:"h-6 w-6 flex items-center justify-center text-sm font-bold text-gray-500",children:["#",t]})}}function D3(t){switch(t){case 1:return"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white";case 2:return"bg-gradient-to-r from-gray-300 to-gray-500 text-white";case 3:return"bg-gradient-to-r from-amber-400 to-amber-600 text-white";default:return"bg-gray-100 text-gray-700"}}function Gg({entries:t,title:e,isLoading:s}){const{t:r}=je();return s?n.jsxs(de,{children:[n.jsx(Be,{children:n.jsxs(qe,{className:"flex items-center gap-2",children:[n.jsx(pn,{className:"h-5 w-5 text-forge-orange"}),e]})}),n.jsx(oe,{children:n.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>n.jsx("div",{className:"h-16 bg-gray-100 animate-pulse rounded-lg"},a))})})]}):t.length===0?n.jsxs(de,{children:[n.jsx(Be,{children:n.jsxs(qe,{className:"flex items-center gap-2",children:[n.jsx(pn,{className:"h-5 w-5 text-forge-orange"}),e]})}),n.jsx(oe,{children:n.jsx("div",{className:"text-center py-8 text-gray-500",children:"No rankings available yet."})})]}):n.jsxs(de,{children:[n.jsx(Be,{children:n.jsxs(qe,{className:"flex items-center gap-2",children:[n.jsx(pn,{className:"h-5 w-5 text-forge-orange"}),e]})}),n.jsx(oe,{className:"p-0",children:n.jsx("div",{className:"space-y-0",children:t.map((a,i)=>{const o=i+1;return n.jsxs("div",{className:`flex items-center justify-between p-4 border-b last:border-b-0 transition-colors hover:bg-gray-50 ${o<=3?"bg-gradient-to-r from-orange-50 to-transparent":""}`,children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(xe,{className:`${D3(o)} font-bold px-2 py-1`,children:["#",o]}),I3(o)]}),n.jsxs(Gc,{className:"h-10 w-10",children:[n.jsx(Jc,{src:a.avatar,alt:a.name}),n.jsx(Yc,{className:"bg-forge-orange text-white",children:a.name.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),a.email&&n.jsx("p",{className:"text-sm text-gray-500",children:a.email})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-bold text-lg text-forge-orange",children:[a.xp.toLocaleString()," ",r("scoreboard.xp")]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[a.completedLessons," ",r("scoreboard.lessons")]})]})]},a.id)})})})]})}function $3(){var m;const{t}=je(),e=p.useMemo(()=>Ue(),[]),[s,r]=p.useState(""),[a,i]=p.useState([]),[o,l]=p.useState({}),[c,d]=p.useState([]),[u,h]=p.useState(!0);p.useEffect(()=>{async function x(){try{h(!0);const{data:g}=await e.from("learning_paths").select("id, title").eq("status","published"),b=g||[];d(b),b.length>0&&!s&&r(b[0].id);const{data:y}=await e.from("profiles").select("user_id, full_name"),w=new Map;y==null||y.forEach(E=>{E.user_id&&E.full_name&&w.set(E.user_id,E.full_name)});const{data:N,error:S}=await e.from("user_progress").select(`
            user_id,
            status,
            lessons (
              id,
              xp_value,
              modules (
                courses (
                  path_id
                )
              )
            )
          `).eq("status","completed");if(S)throw console.error("Error fetching progress:",S),S;const k={},j={};b.forEach(E=>{j[E.id]={}}),N==null||N.forEach(E=>{var J;const R=E.user_id;if(!R)return;const z=E.lessons;if(!z)return;const F=z.xp_value||0;k[R]||(k[R]={xp:0,completed:0}),k[R].xp+=F,k[R].completed+=1;const L=(J=z.modules)==null?void 0:J.courses,U=L==null?void 0:L.path_id;U&&j[U]&&(j[U][R]||(j[U][R]={xp:0,completed:0}),j[U][R].xp+=F,j[U][R].completed+=1)});const v=E=>Object.entries(E).map(([R,z])=>({id:R,name:w.get(R)||"Unknown User",email:"",xp:z.xp,completedLessons:z.completed,avatar:void 0})).sort((R,z)=>z.xp-R.xp).slice(0,50);i(v(k));const _={};Object.keys(j).forEach(E=>{_[E]=v(j[E])}),l(_)}catch(g){console.error("Failed to load scoreboard data",g)}finally{h(!1)}}x()},[e,s]);const f=((m=c.find(x=>x.id===s))==null?void 0:m.title)||"Path";return n.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:t("scoreboard.title")}),n.jsx("p",{className:"text-gray-600",children:t("scoreboard.subtitle")})]}),n.jsxs(kf,{defaultValue:"global",className:"space-y-6",children:[n.jsxs(ed,{className:"grid w-full grid-cols-2",children:[n.jsx(rr,{value:"global",children:t("scoreboard.global")}),n.jsx(rr,{value:"by-path",children:t("scoreboard.byPath")})]}),n.jsx(Wi,{value:"global",className:"space-y-6",children:n.jsx(Gg,{isLoading:u,entries:a,title:t("scoreboard.rankingGlobal")})}),n.jsxs(Wi,{value:"by-path",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[c.map(x=>n.jsx("button",{onClick:()=>r(x.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s===x.id?"bg-forge-orange text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x.title},x.id)),c.length===0&&!u&&n.jsx("div",{className:"text-gray-500",children:t("scoreboard.emptyNoPaths")})]}),n.jsx(Gg,{isLoading:u,entries:o[s]||[],title:t("scoreboard.ranking",{pathName:f})})]})]})]})}const Pl={community:{label:"achievements.categories.community",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",icon:Rn},profile:{label:"achievements.categories.profile",color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",icon:Es},learning:{label:"achievements.categories.learning",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",icon:Lt},social:{label:"achievements.categories.social",color:"text-pink-600",bgColor:"bg-pink-50",borderColor:"border-pink-200",icon:GN}};function uh({current:t,max:e}){const{t:s}=je(),r=Math.round(t/e*100),a=r>=75?"bg-green-500":r>=50?"bg-blue-500":"bg-forge-orange",i=r>=75?"text-green-600":r>=50?"text-blue-600":"text-forge-orange";return n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:s("achievements.progress")}),n.jsxs("span",{className:$("font-semibold",i),children:[t,"/",e," ",n.jsxs("span",{className:"text-xs text-gray-500",children:["(",r,"%)"]})]})]}),n.jsx("div",{className:"relative h-2.5 w-full overflow-hidden rounded-full bg-gray-200",children:n.jsx("div",{className:$("h-full transition-all duration-500 ease-out rounded-full",a,r>=90&&"animate-pulse"),style:{width:`${r}%`}})})]})}const Tw=p.memo(({achievement:t,onActionClick:e,onHover:s,isSelected:r=!1})=>{const{t:a}=je(),i=t.icon,o=Pl[t.category],l=o.icon,c=t.status==="completed",d=t.status==="locked",u=$("relative overflow-hidden transition-all duration-300 cursor-pointer","h-full flex flex-col","hover:shadow-lg hover:scale-[1.02]",r&&"ring-2 ring-forge-orange shadow-lg scale-[1.02]",c&&"border-green-300 bg-green-50/30",d&&"opacity-60 border-gray-200",!c&&!d&&"border-forge-cream");return n.jsxs(de,{className:u,onMouseEnter:()=>s==null?void 0:s(t),onMouseLeave:()=>s==null?void 0:s(null),onClick:()=>s==null?void 0:s(t),children:[c&&n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx("div",{className:"relative",children:n.jsx(vb,{className:"h-6 w-6 text-green-600 animate-in zoom-in duration-300"})})}),d&&n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx(wb,{className:"h-6 w-6 text-gray-400"})}),n.jsx(Be,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:$(o.bgColor,"p-3.5 rounded-xl shadow-sm flex-shrink-0 transition-all duration-300",c&&"ring-2 ring-green-300",!d&&!c&&"ring-1 ring-gray-200 hover:ring-2 hover:ring-forge-orange/50"),children:n.jsx(i,{className:$("h-7 w-7",o.color)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(qe,{className:"text-xl font-semibold leading-tight mb-2 min-h-[28px]",children:t.title}),n.jsx(ls,{className:"text-sm leading-relaxed line-clamp-2 min-h-[40px]",children:t.description})]})]})}),n.jsxs(oe,{className:"flex-1 flex flex-col space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(xe,{variant:"outline",className:$(o.borderColor,o.color),children:[l&&n.jsx(l,{className:"h-3 w-3 mr-1"}),a(o.label)]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-4 w-4 text-forge-orange"}),n.jsxs("span",{className:"font-bold text-forge-orange",children:[t.xpReward," XP"]})]})]}),t.progress!==void 0&&t.maxProgress&&n.jsx(uh,{current:t.progress,max:t.maxProgress}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"mt-auto space-y-2",children:[t.action&&!c&&!d&&n.jsx(te,{className:"w-full bg-forge-orange hover:bg-forge-orange/90",onClick:()=>e(t),children:t.action.label}),c&&n.jsx("div",{className:"text-center text-sm font-medium text-green-700 bg-green-100 py-2 rounded-md",children:a("achievements.completedBadge")}),d&&n.jsx("div",{className:"text-center text-sm text-gray-500 bg-gray-100 py-2 rounded-md",children:a("achievements.locked")})]})]})]})});Tw.displayName="AchievementCard";function F3({selectedCategory:t,onCategoryChange:e,achievements:s,onAchievementAction:r,onAchievementHover:a,selectedAchievementId:i}){const{t:o}=je();return n.jsxs(kf,{value:t,onValueChange:l=>e(l),className:"space-y-6",children:[n.jsxs(ed,{className:"flex w-full gap-2 overflow-x-auto sm:grid sm:grid-cols-5 sm:gap-0 sm:overflow-visible",children:[n.jsx(rr,{className:"flex-1 min-w-[140px] sm:min-w-0",value:"all",children:o("achievements.all")}),n.jsx(rr,{className:"flex-1 min-w-[140px] sm:min-w-0",value:"community",children:o("achievements.categories.community")}),n.jsx(rr,{className:"flex-1 min-w-[140px] sm:min-w-0",value:"profile",children:o("achievements.categories.profile")}),n.jsx(rr,{className:"flex-1 min-w-[140px] sm:min-w-0",value:"learning",children:o("achievements.categories.learning")}),n.jsx(rr,{className:"flex-1 min-w-[140px] sm:min-w-0",value:"social",children:o("achievements.categories.social")})]}),n.jsx(Wi,{value:t,className:"space-y-4",children:s.length===0?n.jsx(de,{className:"border-dashed border-2 border-gray-300",children:n.jsxs(oe,{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx(ci,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o("achievements.emptyState.title")}),n.jsx("p",{className:"text-gray-600 max-w-md",children:t==="all"?o("achievements.emptyState.descriptionAll"):o("achievements.emptyState.descriptionCategory",{category:o(`achievements.categories.${t}`)})})]})}):n.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 auto-rows-fr",children:s.map(l=>n.jsx(Tw,{achievement:l,onActionClick:r,onHover:a,isSelected:l.id===i},l.id))})})]})}function Jg({stats:t,selectedAchievement:e,suggestedAchievement:s,onActionClick:r,variant:a="desktop"}){const{t:i}=je(),o=$("space-y-4",a==="desktop"?"w-96 shrink-0 hidden lg:block sticky top-6 self-start":"w-full lg:hidden");if(e){const l=e.icon,c=Pl[e.category],d=c.icon,u=e.status==="completed",h=e.status==="locked";return n.jsxs("div",{className:o,children:[n.jsxs(de,{className:$("border-2",u&&"border-green-300 bg-green-50/20",h&&"border-gray-200",!u&&!h&&"border-forge-orange/30"),children:[n.jsxs(Be,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:$(c.bgColor,"p-4 rounded-xl shadow-sm",u&&"ring-2 ring-green-300",!h&&!u&&"ring-1 ring-gray-200"),children:n.jsx(l,{className:$("h-8 w-8",c.color)})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(xe,{variant:"outline",className:$(c.borderColor,c.color,"mb-2"),children:[d&&n.jsx(d,{className:"h-3 w-3 mr-1"}),i(c.label)]}),u&&n.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[n.jsx(vb,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-medium",children:i("achievements.completedBadge")})]}),h&&n.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[n.jsx(wb,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-medium",children:i("achievements.locked")})]})]})]}),n.jsx(qe,{className:"text-2xl leading-tight",children:e.title}),n.jsx(ls,{className:"text-sm leading-relaxed mt-2",children:e.description})]}),n.jsxs(oe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-200",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:i("achievements.xpReward")}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-5 w-5 text-forge-orange"}),n.jsxs("span",{className:"text-xl font-bold text-forge-orange",children:[e.xpReward," XP"]})]})]}),e.progress!==void 0&&e.maxProgress&&n.jsx("div",{children:n.jsx(uh,{current:e.progress,max:e.maxProgress})}),e.action&&!u&&!h&&n.jsx(te,{className:"w-full bg-forge-orange hover:bg-forge-orange/90",onClick:()=>r(e),children:e.action.label}),u&&n.jsxs("div",{className:"text-center text-sm font-medium text-green-700 bg-green-100 py-3 rounded-md",children:[" ",i("achievements.completedBadge")]}),h&&n.jsxs("div",{className:"text-center text-sm text-gray-500 bg-gray-100 py-3 rounded-md",children:[" ",i("achievements.locked")]})]})]}),n.jsxs(de,{children:[n.jsx(Be,{children:n.jsxs(qe,{className:"text-sm flex items-center gap-2",children:[n.jsx(ci,{className:"h-4 w-4 text-forge-orange"}),i("achievements.sidebar.tips")]})}),n.jsxs(oe,{className:"text-xs text-gray-600 space-y-2",children:[n.jsxs("p",{children:[" ",i("achievements.sidebar.tip1")]}),n.jsxs("p",{children:[" ",i("achievements.sidebar.tip2")]}),n.jsxs("p",{children:[" ",i("achievements.sidebar.tip3")]})]})]})]})}return n.jsxs("div",{className:o,children:[n.jsxs(de,{children:[n.jsx(Be,{children:n.jsxs(qe,{className:"text-lg flex items-center gap-2",children:[n.jsx(Es,{className:"h-5 w-5 text-forge-orange"}),i("achievements.sidebar.overview")]})}),n.jsxs(oe,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1.5",children:[n.jsx("span",{className:"font-medium",children:i("achievements.overallProgress")}),n.jsxs("span",{className:"font-bold text-forge-orange",children:[t.completionPercentage,"%"]})]}),n.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-gray-200",children:n.jsx("div",{className:"h-full transition-all duration-500 ease-out rounded-full bg-forge-orange",style:{width:`${t.completionPercentage}%`}})})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:i("achievements.completed")}),n.jsxs("span",{className:"text-lg font-bold",children:[t.completed,n.jsxs("span",{className:"text-gray-400",children:["/",t.total]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:i("achievements.inProgress")}),n.jsx("span",{className:"text-lg font-bold text-blue-600",children:t.inProgress})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"XP"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-4 w-4 text-forge-orange"}),n.jsx("span",{className:"text-sm font-bold text-forge-orange",children:t.totalXP})]}),n.jsxs("span",{className:"text-xs text-gray-400",children:["of ",t.totalXP+t.availableXP]})]})]})]})]}),s&&n.jsxs(de,{className:"border-2 border-forge-orange/40 bg-orange-50/30",children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ci,{className:"h-5 w-5 text-forge-orange"}),n.jsx(qe,{className:"text-base",children:i("achievements.sidebar.nextSuggested")})]})}),n.jsxs(oe,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:$(Pl[s.category].bgColor,"p-2.5 rounded-lg"),children:n.jsx(s.icon,{className:$("h-5 w-5",Pl[s.category].color)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-semibold text-sm leading-tight mb-1",children:s.title}),n.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:s.description})]})]}),s.progress!==void 0&&s.maxProgress&&n.jsx(uh,{current:s.progress,max:s.maxProgress}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-4 w-4 text-forge-orange"}),n.jsxs("span",{className:"text-sm font-bold text-forge-orange",children:[s.xpReward," XP"]})]}),s.action&&n.jsx(te,{size:"sm",className:"bg-forge-orange hover:bg-forge-orange/90",onClick:()=>r(s),children:s.action.label})]})]})]}),n.jsxs(de,{className:"border-blue-200 bg-blue-50/30",children:[n.jsx(Be,{children:n.jsxs(qe,{className:"text-sm flex items-center gap-2",children:[n.jsx(ci,{className:"h-4 w-4 text-blue-600"}),t.completed===0?i("achievements.sidebar.gettingStarted"):i("achievements.sidebar.keepGoing")]})}),n.jsxs(oe,{className:"text-xs text-gray-700 space-y-2",children:[n.jsx("p",{className:"leading-relaxed",children:n.jsx("strong",{children:i("achievements.sidebar.hoverTip")})}),t.inProgress>0&&n.jsx("p",{className:"text-blue-700 font-medium",children:i("achievements.sidebar.inProgressMessage",{count:t.inProgress})}),t.completed===0&&n.jsx("p",{className:"text-forge-orange font-medium",children:i("achievements.sidebar.quickWinsTip")}),t.completionPercentage>=50&&t.completionPercentage<100&&n.jsx("p",{className:"text-green-700 font-medium",children:i("achievements.sidebar.halfwayThere",{remaining:t.total-t.completed})}),t.completionPercentage===100&&n.jsxs("p",{className:"text-green-700 font-medium",children:[" ",i("achievements.sidebar.allComplete")]})]})]})]})}const z3=t=>[{id:"telegram-join",title:t("achievements.tasks.telegramJoin.title"),description:t("achievements.tasks.telegramJoin.description"),xpReward:100,status:"in_progress",category:"community",icon:Kf,action:{label:t("achievements.tasks.telegramJoin.action"),url:"https://t.me/forgecollege",type:"external"}},{id:"discord-join",title:t("achievements.tasks.discordJoin.title"),description:t("achievements.tasks.discordJoin.description"),xpReward:100,status:"in_progress",category:"community",icon:Rn,action:{label:t("achievements.tasks.discordJoin.action"),url:"https://discord.gg/forgecollege",type:"external"}},{id:"first-message",title:t("achievements.tasks.firstMessage.title"),description:t("achievements.tasks.firstMessage.description"),xpReward:50,status:"locked",category:"community",icon:Kf},{id:"email-verify",title:t("achievements.tasks.emailVerify.title"),description:t("achievements.tasks.emailVerify.description"),xpReward:150,status:"completed",category:"profile",icon:tb,action:{label:t("achievements.tasks.emailVerify.action")}},{id:"complete-profile",title:t("achievements.tasks.completeProfile.title"),description:t("achievements.tasks.completeProfile.description"),xpReward:200,status:"in_progress",category:"profile",progress:7,maxProgress:10,icon:Es,action:{label:t("achievements.tasks.completeProfile.action"),url:"/dashboard/profile",type:"internal"}},{id:"github-connect",title:t("achievements.tasks.githubConnect.title"),description:t("achievements.tasks.githubConnect.description"),xpReward:100,status:"in_progress",category:"profile",icon:Ec,action:{label:t("achievements.tasks.githubConnect.action")}},{id:"linkedin-connect",title:t("achievements.tasks.linkedinConnect.title"),description:t("achievements.tasks.linkedinConnect.description"),xpReward:100,status:"in_progress",category:"profile",icon:sb,action:{label:t("achievements.tasks.linkedinConnect.action")}},{id:"twitter-follow",title:t("achievements.tasks.twitterFollow.title"),description:t("achievements.tasks.twitterFollow.description"),xpReward:75,status:"in_progress",category:"social",icon:JN,action:{label:t("achievements.tasks.twitterFollow.action"),url:"https://x.com/Forge_College",type:"external"}},{id:"share-progress",title:t("achievements.tasks.shareProgress.title"),description:t("achievements.tasks.shareProgress.description"),xpReward:150,status:"locked",category:"social",icon:ci},{id:"first-lesson",title:t("achievements.tasks.firstLesson.title"),description:t("achievements.tasks.firstLesson.description"),xpReward:50,status:"completed",category:"learning",icon:Lt},{id:"week-streak",title:t("achievements.tasks.weekStreak.title"),description:t("achievements.tasks.weekStreak.description"),xpReward:300,status:"in_progress",category:"learning",progress:4,maxProgress:7,icon:is},{id:"complete-path",title:t("achievements.tasks.completePath.title"),description:t("achievements.tasks.completePath.description"),xpReward:500,status:"in_progress",category:"learning",progress:12,maxProgress:28,icon:YN},{id:"perfect-quiz",title:t("achievements.tasks.perfectQuiz.title"),description:t("achievements.tasks.perfectQuiz.description"),xpReward:200,status:"locked",category:"learning",icon:Es}];function B3(t,e){let s=t;if(e.category!=="all"&&(s=s.filter(r=>r.category===e.category)),e.status&&e.status.length>0&&(s=s.filter(r=>e.status.includes(r.status))),e.searchQuery&&e.searchQuery.trim()){const r=e.searchQuery.toLowerCase();s=s.filter(a=>a.title.toLowerCase().includes(r)||a.description.toLowerCase().includes(r))}if(e.sortBy==="xp")s=s.sort((r,a)=>a.xpReward-r.xpReward);else if(e.sortBy==="progress")s=s.sort((r,a)=>{const i=r.progress&&r.maxProgress?r.progress/r.maxProgress:0;return(a.progress&&a.maxProgress?a.progress/a.maxProgress:0)-i});else if(e.sortBy==="status"){const r={in_progress:1,locked:2,completed:3};s=s.sort((a,i)=>r[a.status]-r[i.status])}return s}function Yg(t){const{t:e}=je(),s=p.useMemo(()=>z3(e),[e]);return{achievements:p.useMemo(()=>t?B3(s,t):s,[s,t]),isLoading:!1,error:null}}function U3(t){return p.useMemo(()=>{const e=t.filter(l=>l.status==="completed"),s=t.filter(l=>l.status==="in_progress"),r=t.filter(l=>l.status==="locked"),a=e.reduce((l,c)=>l+c.xpReward,0),i=t.filter(l=>l.status!=="completed").reduce((l,c)=>l+c.xpReward,0),o=t.length>0?Math.round(e.length/t.length*100):0;return{total:t.length,completed:e.length,inProgress:s.length,locked:r.length,totalXP:a,availableXP:i,completionPercentage:o}},[t])}function V3(){const t=dr();return{handleAchievementAction:p.useCallback(s=>{if(!s.action)return;const{url:r,type:a,handler:i}=s.action;if(i){i();return}r&&(a==="external"||r.startsWith("http")?window.open(r,"_blank","noopener,noreferrer"):t(r))},[t])}}function H3(){const[t,e]=p.useState({category:"all",sortBy:"status"}),s=p.useCallback(i=>{e(o=>({...o,category:i}))},[]),r=p.useCallback(i=>{e(o=>({...o,searchQuery:i}))},[]),a=p.useCallback(()=>{e({category:"all",sortBy:"status"})},[]);return{filters:t,setCategory:s,setSearchQuery:r,resetFilters:a}}function W3(){const{t}=je(),{filters:e,setCategory:s}=H3(),{achievements:r}=Yg(e),a=U3(r),{handleAchievementAction:i}=V3(),[o,l]=p.useState(null),{achievements:c}=Yg(),d=p.useMemo(()=>{const u=c.filter(f=>f.status==="in_progress").sort((f,m)=>{const x=f.progress&&f.maxProgress?f.progress/f.maxProgress:0;return(m.progress&&m.maxProgress?m.progress/m.maxProgress:0)-x});return e.category==="all"?null:u.find(f=>f.category!==e.category)||null},[c,e.category]);return n.jsxs("div",{className:"flex flex-col gap-6 max-w-[1800px] mx-auto px-4 sm:px-6 lg:flex-row",children:[n.jsxs("div",{className:"flex-1 space-y-4 min-w-0",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-gray-900",children:t("achievements.title")}),n.jsx("p",{className:"text-gray-600",children:t("achievements.subtitle")})]}),n.jsx(Jg,{stats:a,selectedAchievement:o,suggestedAchievement:d,onActionClick:i,variant:"mobile"}),n.jsx(F3,{selectedCategory:e.category,onCategoryChange:s,achievements:r,onAchievementAction:i,onAchievementHover:l,selectedAchievementId:o==null?void 0:o.id})]}),n.jsx(Jg,{stats:a,selectedAchievement:o,suggestedAchievement:d,onActionClick:i,variant:"desktop"})]})}function q3(){const{t}=je();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-forge-dark",children:t("ambassadors.title")}),n.jsx("p",{className:"text-muted-foreground",children:t("ambassadors.subtitle")})]}),n.jsxs("div",{className:"rounded-lg border border-forge-cream/80 bg-forge-cream/30 p-8 text-center",children:[n.jsx(Rn,{className:"h-12 w-12 text-forge-orange/40 mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:t("ambassadors.comingSoon")})]})]})}const K3=()=>{const e=cr().pathname.startsWith("/dashboard");try{return n.jsxs(n.Fragment,{children:[!e&&n.jsx(Wu,{}),n.jsx(Sn,{delayDuration:0,children:n.jsxs("div",{className:e?void 0:"pt-[30px]",children:[n.jsx(IC,{}),n.jsx(m2,{}),n.jsx(HI,{children:n.jsx(J_,{children:n.jsxs(XN,{children:[n.jsx(Ee,{path:PL,element:n.jsx(Nh,{to:Qt,replace:!0})}),n.jsxs(Ee,{element:n.jsx(TO,{}),children:[n.jsx(Ee,{path:LL,element:n.jsx(jL,{})}),n.jsx(Ee,{path:EL,element:n.jsx(NL,{})}),n.jsx(Ee,{path:AL,element:n.jsx(kL,{})})]}),n.jsx(Ee,{path:Wv,element:n.jsx($L,{})}),n.jsx(Ee,{path:RL,element:n.jsx(FL,{})}),n.jsx(Ee,{path:OL,element:n.jsx(zL,{})}),n.jsx(Ee,{path:ML,element:n.jsx(kR,{})}),n.jsx(Ee,{path:"/login-oauth",element:n.jsx(DI,{})}),n.jsx(Ee,{path:"/auth/callback",element:n.jsx($I,{})}),n.jsx(Ee,{path:"/test",element:n.jsx(FI,{})}),n.jsx(Ee,{path:"/ssr-check",element:n.jsx(zI,{})}),n.jsx(Ee,{path:"/bare",element:n.jsx(BI,{})}),n.jsx(Ee,{path:"/static-bare",element:n.jsx(UI,{})}),n.jsx(Ee,{path:"/ssr-canary",element:n.jsx(VI,{})}),n.jsxs(Ee,{path:Qt,element:n.jsx(RI,{children:n.jsx(NR,{})}),children:[n.jsx(Ee,{index:!0,element:n.jsx(WM,{})}),n.jsx(Ee,{path:"explore",element:n.jsx(SI,{})}),n.jsx(Ee,{path:"formations",element:n.jsx(LM,{})}),n.jsx(Ee,{path:"formations/:formationId",element:n.jsx(jI,{})}),n.jsx(Ee,{path:"courses",element:n.jsx(kI,{})}),n.jsx(Ee,{path:"coming-soon",element:n.jsx(OM,{})}),n.jsx(Ee,{path:"profile",element:n.jsx(LI,{})}),n.jsx(Ee,{path:"community-projects",element:n.jsx(MI,{})}),n.jsx(Ee,{path:"scoreboard",element:n.jsx($3,{})}),n.jsx(Ee,{path:"achievements",element:n.jsx(W3,{})}),n.jsx(Ee,{path:"ambassadors",element:n.jsx(q3,{})}),n.jsx(Ee,{path:"learn/course/:courseId",element:n.jsx(kO,{})}),n.jsx(Ee,{path:"learn/path/:pathId",element:n.jsx(SO,{})}),n.jsxs(Ee,{path:"admin",element:n.jsx(II,{children:n.jsx(WI,{})}),children:[n.jsx(Ee,{index:!0,element:n.jsx(KI,{})}),n.jsx(Ee,{path:"formations",element:n.jsx(P4,{})}),n.jsx(Ee,{path:"paths",element:n.jsx(L4,{})}),n.jsx(Ee,{path:"courses",element:n.jsx(M4,{})}),n.jsx(Ee,{path:"modules",element:n.jsx($4,{})}),n.jsx(Ee,{path:"lessons",element:n.jsx(L3,{})}),n.jsx(Ee,{path:"lessons/:lessonId/edit",element:n.jsx(R3,{})}),n.jsx(Ee,{path:"projects",element:n.jsx(M3,{})})]})]}),n.jsx(Ee,{path:"*",element:n.jsx(SL,{})})]})})})]})})]})}catch(s){return console.error("App SSR error:",s),n.jsxs(n.Fragment,{children:[!e&&n.jsx(Wu,{}),n.jsxs("div",{style:{marginTop:e?"2rem":"1.875rem",padding:"2rem",textAlign:"center",fontFamily:"system-ui, sans-serif"},children:[n.jsx("h1",{children:"SSR Error"}),n.jsxs("p",{children:["Erro no App principal: ",s instanceof Error?s.message:"Erro desconhecido"]}),n.jsx("pre",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"4px",textAlign:"left"},children:s instanceof Error?s.stack:String(s)})]})]})}},Pw="2.34.0";let ei={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:s})=>e?`${t??"https://viem.sh"}${e}${s?`#${s}`:""}`:void 0,version:`viem@${Pw}`},Rs=class hh extends Error{constructor(e,s={}){var l;const r=(()=>{var c;return s.cause instanceof hh?s.cause.details:(c=s.cause)!=null&&c.message?s.cause.message:s.details})(),a=s.cause instanceof hh&&s.cause.docsPath||s.docsPath,i=(l=ei.getDocsUrl)==null?void 0:l.call(ei,{...s,docsPath:a}),o=[e||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ei.version?[`Version: ${ei.version}`]:[]].join(`
`);super(o,s.cause?{cause:s.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=a,this.metaMessages=s.metaMessages,this.name=s.name??this.name,this.shortMessage=e,this.version=Pw}walk(e){return Ew(this,e)}};function Ew(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Ew(t.cause,e):e?null:t}class G3 extends Rs{constructor({max:e,min:s,signed:r,size:a,value:i}){super(`Number "${i}" is not in safe ${a?`${a*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${s} to ${e})`:`(above ${s})`}`,{name:"IntegerOutOfRangeError"})}}class J3 extends Rs{constructor({givenSize:e,maxSize:s}){super(`Size cannot exceed ${s} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}class Aw extends Rs{constructor({size:e,targetSize:s,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${s}).`,{name:"SizeExceedsPaddingSizeError"})}}function Mo(t,{dir:e,size:s=32}={}){return typeof t=="string"?Y3(t,{dir:e,size:s}):X3(t,{dir:e,size:s})}function Y3(t,{dir:e,size:s=32}={}){if(s===null)return t;const r=t.replace("0x","");if(r.length>s*2)throw new Aw({size:Math.ceil(r.length/2),targetSize:s,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](s*2,"0")}`}function X3(t,{dir:e,size:s=32}={}){if(s===null)return t;if(t.length>s)throw new Aw({size:t.length,targetSize:s,type:"bytes"});const r=new Uint8Array(s);for(let a=0;a<s;a++){const i=e==="right";r[i?a:s-a-1]=t[i?a:t.length-a-1]}return r}function If(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Xg(t){return If(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Z3=new TextEncoder;function Q3(t,e={}){return typeof t=="number"||typeof t=="bigint"?t5(t,e):typeof t=="boolean"?e5(t,e):If(t)?Lw(t,e):Rw(t,e)}function e5(t,e={}){const s=new Uint8Array(1);return s[0]=Number(t),typeof e.size=="number"?(sd(s,{size:e.size}),Mo(s,{size:e.size})):s}const Qs={zero:48,nine:57,A:65,F:70,a:97,f:102};function Zg(t){if(t>=Qs.zero&&t<=Qs.nine)return t-Qs.zero;if(t>=Qs.A&&t<=Qs.F)return t-(Qs.A-10);if(t>=Qs.a&&t<=Qs.f)return t-(Qs.a-10)}function Lw(t,e={}){let s=t;e.size&&(sd(s,{size:e.size}),s=Mo(s,{dir:"right",size:e.size}));let r=s.slice(2);r.length%2&&(r=`0${r}`);const a=r.length/2,i=new Uint8Array(a);for(let o=0,l=0;o<a;o++){const c=Zg(r.charCodeAt(l++)),d=Zg(r.charCodeAt(l++));if(c===void 0||d===void 0)throw new Rs(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);i[o]=c*16+d}return i}function t5(t,e){const s=fh(t,e);return Lw(s)}function Rw(t,e={}){const s=Z3.encode(t);return typeof e.size=="number"?(sd(s,{size:e.size}),Mo(s,{dir:"right",size:e.size})):s}function sd(t,{size:e}){if(Xg(t)>e)throw new J3({givenSize:Xg(t),maxSize:e})}const s5=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function r5(t,e={}){let s="";for(let a=0;a<t.length;a++)s+=s5[t[a]];const r=`0x${s}`;return typeof e.size=="number"?(sd(r,{size:e.size}),Mo(r,{dir:"right",size:e.size})):r}function fh(t,e={}){const{signed:s,size:r}=e,a=BigInt(t);let i;r?s?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&s?-i-1n:0;if(i&&a>i||a<o){const c=typeof t=="bigint"?"n":"";throw new G3({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:s,size:r,value:`${t}${c}`})}const l=`0x${(s&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Mo(l,{size:r}):l}const n5=new TextEncoder;function a5(t,e={}){const s=n5.encode(t);return r5(s,e)}class i5 extends Rs{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class Df extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const s=super.get(e);return super.has(e)&&s!==void 0&&(this.delete(e),super.set(e,s)),s}set(e,s){if(super.set(e,s),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const al=BigInt(2**32-1),Qg=BigInt(32);function o5(t,e=!1){return e?{h:Number(t&al),l:Number(t>>Qg&al)}:{h:Number(t>>Qg&al)|0,l:Number(t&al)|0}}function l5(t,e=!1){const s=t.length;let r=new Uint32Array(s),a=new Uint32Array(s);for(let i=0;i<s;i++){const{h:o,l}=o5(t[i],e);[r[i],a[i]]=[o,l]}return[r,a]}const c5=(t,e,s)=>t<<s|e>>>32-s,d5=(t,e,s)=>e<<s|t>>>32-s,u5=(t,e,s)=>e<<s-32|t>>>64-s,h5=(t,e,s)=>t<<s-32|e>>>64-s;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function f5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ex(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Cc(t,...e){if(!f5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function m5(t,e){Cc(t);const s=e.outputLen;if(t.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}function p5(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ow(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const g5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x5(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function b5(t){for(let e=0;e<t.length;e++)t[e]=x5(t[e]);return t}const sx=g5?t=>t:b5;function y5(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Mw(t){return typeof t=="string"&&(t=y5(t)),Cc(t),t}class v5{}function w5(t){const e=r=>t().update(Mw(r)).digest(),s=t();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>t(),e}const j5=BigInt(0),ti=BigInt(1),N5=BigInt(2),k5=BigInt(7),S5=BigInt(256),_5=BigInt(113),Iw=[],Dw=[],$w=[];for(let t=0,e=ti,s=1,r=0;t<24;t++){[s,r]=[r,(2*s+3*r)%5],Iw.push(2*(5*r+s)),Dw.push((t+1)*(t+2)/2%64);let a=j5;for(let i=0;i<7;i++)e=(e<<ti^(e>>k5)*_5)%S5,e&N5&&(a^=ti<<(ti<<BigInt(i))-ti);$w.push(a)}const Fw=l5($w,!0),C5=Fw[0],T5=Fw[1],rx=(t,e,s)=>s>32?u5(t,e,s):c5(t,e,s),nx=(t,e,s)=>s>32?h5(t,e,s):d5(t,e,s);function P5(t,e=24){const s=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)s[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,c=(o+2)%10,d=s[c],u=s[c+1],h=rx(d,u,1)^s[l],f=nx(d,u,1)^s[l+1];for(let m=0;m<50;m+=10)t[o+m]^=h,t[o+m+1]^=f}let a=t[2],i=t[3];for(let o=0;o<24;o++){const l=Dw[o],c=rx(a,i,l),d=nx(a,i,l),u=Iw[o];a=t[u],i=t[u+1],t[u]=c,t[u+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)s[l]=t[o+l];for(let l=0;l<10;l++)t[o+l]^=~s[(l+2)%10]&s[(l+4)%10]}t[0]^=C5[r],t[1]^=T5[r]}Ow(s)}class $f extends v5{constructor(e,s,r,a=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=s,this.outputLen=r,this.enableXOF=a,this.rounds=i,ex(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=p5(this.state)}clone(){return this._cloneInto()}keccak(){sx(this.state32),P5(this.state32,this.rounds),sx(this.state32),this.posOut=0,this.pos=0}update(e){tx(this),e=Mw(e),Cc(e);const{blockLen:s,state:r}=this,a=e.length;for(let i=0;i<a;){const o=Math.min(s-this.pos,a-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===s&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:s,pos:r,blockLen:a}=this;e[r]^=s,s&128&&r===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){tx(this,!1),Cc(e),this.finish();const s=this.state,{blockLen:r}=this;for(let a=0,i=e.length;a<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-a);e.set(s.subarray(this.posOut,this.posOut+o),a),this.posOut+=o,a+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ex(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(m5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ow(this.state)}_cloneInto(e){const{blockLen:s,suffix:r,outputLen:a,rounds:i,enableXOF:o}=this;return e||(e=new $f(s,r,a,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=a,e.enableXOF=o,e.destroyed=this.destroyed,e}}const E5=(t,e,s)=>w5(()=>new $f(e,t,s)),A5=E5(1,136,256/8);function L5(t,e){return A5(If(t,{strict:!1})?Q3(t):t)}const Yd=new Df(8192);function zw(t,e){if(Yd.has(`${t}.${e}`))return Yd.get(`${t}.${e}`);const s=t.substring(2).toLowerCase(),r=L5(Rw(s)),a=s.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&a[o]&&(a[o]=a[o].toUpperCase()),(r[o>>1]&15)>=8&&a[o+1]&&(a[o+1]=a[o+1].toUpperCase());const i=`0x${a.join("")}`;return Yd.set(`${t}.${e}`,i),i}function il(t,e){if(!O5(t,{strict:!1}))throw new i5({address:t});return zw(t,e)}const R5=/^0x[a-fA-F0-9]{40}$/,Xd=new Df(8192);function O5(t,e){const{strict:s=!0}=e??{},r=`${t}.${s}`;if(Xd.has(r))return Xd.get(r);const a=R5.test(t)?t.toLowerCase()===t?!0:s?zw(t)===t:!0:!1;return Xd.set(r,a),a}function M5(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const jn=(t,e,s)=>JSON.stringify(t,(r,a)=>typeof a=="bigint"?a.toString():a,s),Ff=t=>t;class Ci extends Rs{constructor({body:e,cause:s,details:r,headers:a,status:i,url:o}){super("HTTP request failed.",{cause:s,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${Ff(o)}`,e&&`Request body: ${jn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=a,this.status=i,this.url=o}}class Bw extends Rs{constructor({body:e,error:s,url:r}){super("RPC Request failed.",{cause:s,details:s.message,metaMessages:[`URL: ${Ff(r)}`,`Request body: ${jn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=s.code,this.data=s.data}}class ax extends Rs{constructor({body:e,url:s}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ff(s)}`,`Request body: ${jn(e)}`],name:"TimeoutError"})}}const I5=-1;class ss extends Rs{constructor(e,{code:s,docsPath:r,metaMessages:a,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:a||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Bw?e.code:s??I5}}class cs extends ss{constructor(e,s){super(e,s),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=s.data}}class Gi extends ss{constructor(e){super(e,{code:Gi.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Gi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ji extends ss{constructor(e){super(e,{code:Ji.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Ji,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Yi extends ss{constructor(e,{method:s}={}){super(e,{code:Yi.code,name:"MethodNotFoundRpcError",shortMessage:`The method${s?` "${s}"`:""} does not exist / is not available.`})}}Object.defineProperty(Yi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Xi extends ss{constructor(e){super(e,{code:Xi.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Xi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ta extends ss{constructor(e){super(e,{code:Ta.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ta,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Zi extends ss{constructor(e){super(e,{code:Zi.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Zi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Qi extends ss{constructor(e){super(e,{code:Qi.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Qi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class $r extends ss{constructor(e){super(e,{code:$r.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty($r,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class eo extends ss{constructor(e){super(e,{code:eo.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(eo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class mn extends ss{constructor(e,{method:s}={}){super(e,{code:mn.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${s?` "${s}"`:""} is not supported.`})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Pa extends ss{constructor(e){super(e,{code:Pa.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class to extends ss{constructor(e){super(e,{code:to.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(to,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Ut extends cs{constructor(e){super(e,{code:Ut.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class so extends cs{constructor(e){super(e,{code:so.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(so,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class ro extends cs{constructor(e,{method:s}={}){super(e,{code:ro.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${s?` " ${s}"`:""}.`})}}Object.defineProperty(ro,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class no extends cs{constructor(e){super(e,{code:no.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(no,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ao extends cs{constructor(e){super(e,{code:ao.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ao,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ln extends cs{constructor(e){super(e,{code:Ln.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class io extends cs{constructor(e){super(e,{code:io.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(io,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class oo extends cs{constructor(e){super(e,{code:oo.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(oo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class lo extends cs{constructor(e){super(e,{code:lo.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class co extends cs{constructor(e){super(e,{code:co.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(co,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class uo extends cs{constructor(e){super(e,{code:uo.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(uo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ho extends cs{constructor(e){super(e,{code:ho.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ho,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class fo extends cs{constructor(e){super(e,{code:fo.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(fo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class D5 extends ss{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function $5(){let t=()=>{},e=()=>{};return{promise:new Promise((r,a)=>{t=r,e=a}),resolve:t,reject:e}}const Zd=new Map;function F5({fn:t,id:e,shouldSplitBatch:s,wait:r=0,sort:a}){const i=async()=>{const u=c();o();const h=u.map(({args:f})=>f);h.length!==0&&t(h).then(f=>{a&&Array.isArray(f)&&f.sort(a);for(let m=0;m<u.length;m++){const{resolve:x}=u[m];x==null||x([f[m],f])}}).catch(f=>{for(let m=0;m<u.length;m++){const{reject:x}=u[m];x==null||x(f)}})},o=()=>Zd.delete(e),l=()=>c().map(({args:u})=>u),c=()=>Zd.get(e)||[],d=u=>Zd.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:f,reject:m}=$5();return(s==null?void 0:s([...l(),u]))&&i(),c().length>0?(d({args:u,resolve:f,reject:m}),h):(d({args:u,resolve:f,reject:m}),setTimeout(i,r),h)}}}const ol=new Df(8192);function z5(t,{enabled:e=!0,id:s}){if(!e||!s)return t();if(ol.get(s))return ol.get(s);const r=t().finally(()=>ol.delete(s));return ol.set(s,r),r}async function B5(t){return new Promise(e=>setTimeout(e,t))}function Uw(t,{delay:e=100,retryCount:s=2,shouldRetry:r=()=>!0}={}){return new Promise((a,i)=>{const o=async({count:l=0}={})=>{const c=async({error:d})=>{const u=typeof e=="function"?e({count:l,error:d}):e;u&&await B5(u),o({count:l+1})};try{const d=await t();a(d)}catch(d){if(l<s&&await r({count:l,error:d}))return c({error:d});i(d)}};o()})}function U5(t,e={}){return async(s,r={})=>{var h;const{dedupe:a=!1,methods:i,retryDelay:o=150,retryCount:l=3,uid:c}={...e,...r},{method:d}=s;if((h=i==null?void 0:i.exclude)!=null&&h.includes(d))throw new mn(new Error("method not supported"),{method:d});if(i!=null&&i.include&&!i.include.includes(d))throw new mn(new Error("method not supported"),{method:d});const u=a?a5(`${c}.${jn(s)}`):void 0;return z5(()=>Uw(async()=>{try{return await t(s)}catch(f){const m=f;switch(m.code){case Gi.code:throw new Gi(m);case Ji.code:throw new Ji(m);case Yi.code:throw new Yi(m,{method:s.method});case Xi.code:throw new Xi(m);case Ta.code:throw new Ta(m);case Zi.code:throw new Zi(m);case Qi.code:throw new Qi(m);case $r.code:throw new $r(m);case eo.code:throw new eo(m);case mn.code:throw new mn(m,{method:s.method});case Pa.code:throw new Pa(m);case to.code:throw new to(m);case Ut.code:throw new Ut(m);case so.code:throw new so(m);case ro.code:throw new ro(m);case no.code:throw new no(m);case ao.code:throw new ao(m);case Ln.code:throw new Ln(m);case io.code:throw new io(m);case oo.code:throw new oo(m);case lo.code:throw new lo(m);case co.code:throw new co(m);case uo.code:throw new uo(m);case ho.code:throw new ho(m);case fo.code:throw new fo(m);case 5e3:throw new Ut(m);default:throw f instanceof Rs?f:new D5(m)}}},{delay:({count:f,error:m})=>{var x;if(m&&m instanceof Ci){const g=(x=m==null?void 0:m.headers)==null?void 0:x.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<f)*o},retryCount:l,shouldRetry:({error:f})=>V5(f)}),{enabled:a,id:u})}}function V5(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Pa.code||t.code===Ta.code:t instanceof Ci&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Vw(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Hw(t,{errorInstance:e=new Error("timed out"),timeout:s,signal:r}){return new Promise((a,i)=>{(async()=>{let o;try{const l=new AbortController;s>0&&(o=setTimeout(()=>{r?l.abort():i(e)},s)),a(await t({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&i(e),i(l)}finally{clearTimeout(o)}})()})}function H5(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const ix=H5();function W5(t,e={}){return{async request(s){var h;const{body:r,onRequest:a=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=s,l={...e.fetchOptions??{},...s.fetchOptions??{}},{headers:c,method:d,signal:u}=l;try{const f=await Hw(async({signal:x})=>{const g={...l,body:Array.isArray(r)?jn(r.map(N=>({jsonrpc:"2.0",id:N.id??ix.take(),...N}))):jn({jsonrpc:"2.0",id:r.id??ix.take(),...r}),headers:{"Content-Type":"application/json",...c},method:d||"POST",signal:u||(o>0?x:null)},b=new Request(t,g),y=await(a==null?void 0:a(b,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new ax({body:r,url:t}),timeout:o,signal:!0});i&&await i(f);let m;if((h=f.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))m=await f.json();else{m=await f.text();try{m=JSON.parse(m||"{}")}catch(x){if(f.ok)throw x;m={error:m}}}if(!f.ok)throw new Ci({body:r,details:jn(m.error)||f.statusText,headers:f.headers,status:f.status,url:t});return m}catch(f){throw f instanceof Ci||f instanceof ax?f:new Ci({body:r,cause:f,url:t})}}}}const El="2.19.0",q5=()=>`@wagmi/core@${El}`;var Ww=function(t,e,s,r){if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(t):r?r.value:e.get(t)},Tc,qw;class mo extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return q5()}constructor(e,s={}){var i;super(),Tc.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=s.cause instanceof mo?s.cause.details:(i=s.cause)!=null&&i.message?s.cause.message:s.details,a=s.cause instanceof mo&&s.cause.docsPath||s.docsPath;this.message=[e||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...a?[`Docs: ${this.docsBaseUrl}${a}.html${s.docsSlug?`#${s.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),s.cause&&(this.cause=s.cause),this.details=r,this.docsPath=a,this.metaMessages=s.metaMessages,this.shortMessage=e}walk(e){return Ww(this,Tc,"m",qw).call(this,this,e)}}Tc=new WeakSet,qw=function t(e,s){return s!=null&&s(e)?e:e.cause?Ww(this,Tc,"m",t).call(this,e.cause,s):e};class mh extends mo{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}const ph=256;let ll=ph,cl;function Kw(t=11){if(!cl||ll+t>ph*2){cl="",ll=0;for(let e=0;e<ph;e++)cl+=(256+Math.random()*256|0).toString(16).substring(1)}return cl.substring(ll,ll+++t)}function K5(t){const{batch:e,chain:s,ccipRead:r,key:a="base",name:i="Base Client",type:o="base"}=t,l=t.experimental_blockTag??(typeof(s==null?void 0:s.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(s==null?void 0:s.blockTime)??12e3,d=Math.min(Math.max(Math.floor(c/2),500),4e3),u=t.pollingInterval??d,h=t.cacheTime??u,f=t.account?M5(t.account):void 0,{config:m,request:x,value:g}=t.transport({chain:s,pollingInterval:u}),b={...m,...g},y={account:f,batch:e,cacheTime:h,ccipRead:r,chain:s,key:a,name:i,pollingInterval:u,request:x,transport:b,type:o,uid:Kw(),...l?{experimental_blockTag:l}:{}};function w(N){return S=>{const k=S(N);for(const v in y)delete k[v];const j={...N,...k};return Object.assign(j,{extend:w(j)})}}return Object.assign(y,{extend:w(y)})}function G5({key:t,methods:e,name:s,request:r,retryCount:a=3,retryDelay:i=150,timeout:o,type:l},c){const d=Kw();return{config:{key:t,methods:e,name:s,request:r,retryCount:a,retryDelay:i,timeout:o,type:l},request:U5(r,{methods:e,retryCount:a,retryDelay:i,uid:d}),value:c}}class J5 extends Rs{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function ox(t,e={}){const{batch:s,fetchOptions:r,key:a="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:c,retryDelay:d,raw:u}=e;return({chain:h,retryCount:f,timeout:m})=>{const{batchSize:x=1e3,wait:g=0}=typeof s=="object"?s:{},b=e.retryCount??f,y=m??e.timeout??1e4,w=h==null?void 0:h.rpcUrls.default.http[0];if(!w)throw new J5;const N=W5(w,{fetchOptions:r,onRequest:l,onResponse:c,timeout:y});return G5({key:a,methods:i,name:o,async request({method:S,params:k}){const j={method:S,params:k},{schedule:v}=F5({id:w,wait:g,shouldSplitBatch(z){return z.length>x},fn:z=>N.request({body:z}),sort:(z,F)=>z.id-F.id}),_=async z=>s?v(z):[await N.request({body:z})],[{error:E,result:R}]=await _(j);if(u)return{error:E,result:R};if(E)throw new Bw({body:j,error:E,url:w});return R},retryCount:b,retryDelay:d,timeout:y,type:"http"},{fetchOptions:r,url:w})}}let Qd=!1;async function Y5(t,e={}){var d,u;if(Qd)return[];Qd=!0,t.setState(h=>({...h,status:h.current?"reconnecting":"connecting"}));const s=[];if((d=e.connectors)!=null&&d.length)for(const h of e.connectors){let f;typeof h=="function"?f=t._internal.connectors.setup(h):f=h,s.push(f)}else s.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const a={};for(const[,h]of t.state.connections)a[h.connector.id]=1;r&&(a[r]=0);const i=Object.keys(a).length>0?[...s].sort((h,f)=>(a[h.id]??10)-(a[f.id]??10)):s;let o=!1;const l=[],c=[];for(const h of i){const f=await h.getProvider().catch(()=>{});if(!f||c.some(g=>g===f)||!await h.isAuthorized())continue;const x=await h.connect({isReconnecting:!0}).catch(()=>null);x&&(h.emitter.off("connect",t._internal.events.connect),h.emitter.on("change",t._internal.events.change),h.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const b=new Map(o?g.connections:new Map).set(h.uid,{accounts:x.accounts,chainId:x.chainId,connector:h});return{...g,current:o?g.current:h.uid,connections:b}}),l.push({accounts:x.accounts,chainId:x.chainId,connector:h}),c.push(f),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(h=>({...h,status:"connected"})):t.setState(h=>({...h,connections:new Map,current:null,status:"disconnected"}))),Qd=!1,l}class Xn extends mo{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}zf.type="injected";function zf(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:s}=t;function r(){const c=t.target;if(typeof c=="function"){const d=c();if(d)return d}return typeof c=="object"?c:typeof c=="string"?{...X5[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(d){return d==null?void 0:d.ethereum}}}let a,i,o,l;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:zf.type,async setup(){const d=await this.getProvider();d!=null&&d.on&&t.target&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),a||(a=this.onAccountsChanged.bind(this),d.on("accountsChanged",a)))},async connect({chainId:d,isReconnecting:u}={}){var m,x,g,b,y,w;const h=await this.getProvider();if(!h)throw new Xn;let f=[];if(u)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(b=(g=(x=(m=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:m.caveats)==null?void 0:x[0])==null?void 0:g.value)==null?void 0:b.map(S=>il(S)),f.length>0&&(f=await this.getAccounts())}catch(N){const S=N;if(S.code===Ut.code)throw new Ut(S);if(S.code===$r.code)throw S}try{!(f!=null&&f.length)&&!u&&(f=(await h.request({method:"eth_requestAccounts"})).map(k=>il(k))),o&&(h.removeListener("connect",o),o=void 0),a||(a=this.onAccountsChanged.bind(this),h.on("accountsChanged",a)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),h.on("disconnect",l));let N=await this.getChainId();if(d&&N!==d){const S=await this.switchChain({chainId:d}).catch(k=>{if(k.code===Ut.code)throw k;return{id:N}});N=(S==null?void 0:S.id)??N}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:f,chainId:N}}catch(N){const S=N;throw S.code===Ut.code?new Ut(S):S.code===$r.code?new $r(S):S}},async disconnect(){var u,h;const d=await this.getProvider();if(!d)throw new Xn;i&&(d.removeListener("chainChanged",i),i=void 0),l&&(d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d.on("connect",o));try{await Hw(()=>d.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((h=c.storage)==null?void 0:h.removeItem("injected.connected"))},async getAccounts(){const d=await this.getProvider();if(!d)throw new Xn;return(await d.request({method:"eth_accounts"})).map(h=>il(h))},async getChainId(){const d=await this.getProvider();if(!d)throw new Xn;const u=await d.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let d;const u=r();return typeof u.provider=="function"?d=u.provider(window):typeof u.provider=="string"?d=Al(window,u.provider):d=u.provider,d&&!d.removeListener&&("off"in d&&typeof d.off=="function"?d.removeListener=d.off:d.removeListener=()=>{}),d},async isAuthorized(){var d,u;try{if(e&&await((d=c.storage)==null?void 0:d.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(s!==void 0&&s!==!1){const x=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",x),!!await this.getProvider()),g=typeof s=="number"?s:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(x()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(x()),g))]))return!0}throw new Xn}return!!(await Uw(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:u}){var x,g,b,y;const h=await this.getProvider();if(!h)throw new Xn;const f=c.chains.find(w=>w.id===u);if(!f)throw new Ln(new mh);const m=new Promise(w=>{const N=S=>{"chainId"in S&&S.chainId===u&&(c.emitter.off("change",N),w())};c.emitter.on("change",N)});try{return await Promise.all([h.request({method:"wallet_switchEthereumChain",params:[{chainId:fh(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),m]),f}catch(w){const N=w;if(N.code===4902||((g=(x=N==null?void 0:N.data)==null?void 0:x.originalError)==null?void 0:g.code)===4902)try{const{default:S,...k}=f.blockExplorers??{};let j;d!=null&&d.blockExplorerUrls?j=d.blockExplorerUrls:S&&(j=[S.url,...Object.values(k).map(E=>E.url)]);let v;(b=d==null?void 0:d.rpcUrls)!=null&&b.length?v=d.rpcUrls:v=[((y=f.rpcUrls.default)==null?void 0:y.http[0])??""];const _={blockExplorerUrls:j,chainId:fh(u),chainName:(d==null?void 0:d.chainName)??f.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:(d==null?void 0:d.nativeCurrency)??f.nativeCurrency,rpcUrls:v};return await Promise.all([h.request({method:"wallet_addEthereumChain",params:[_]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Ut(new Error("User rejected switch after adding network."))}),m]),f}catch(S){throw new Ut(S)}throw N.code===Ut.code?new Ut(N):new Ln(N)}},async onAccountsChanged(d){var u;if(d.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const h=(await this.getChainId()).toString();this.onConnect({chainId:h}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:d.map(h=>il(h))})},onChainChanged(d){const u=Number(d);c.emitter.emit("change",{chainId:u})},async onConnect(d){const u=await this.getAccounts();if(u.length===0)return;const h=Number(d.chainId);c.emitter.emit("connect",{accounts:u,chainId:h});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),a||(a=this.onAccountsChanged.bind(this),f.on("accountsChanged",a)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l)))},async onDisconnect(d){const u=await this.getProvider();d&&d.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),l&&(u.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const X5={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Al(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Al(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const s=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of s)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,s;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(s=t.phantom)==null?void 0:s.ethereum:Al(t,"isPhantom")}}};function Al(t,e){function s(a){return typeof e=="function"?e(a):typeof e=="string"?a[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(a=>s(a));if(r&&s(r))return r}function Z5(t){if(typeof window>"u")return;const e=s=>t(s.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Q5(){const t=new Set;let e=[];const s=()=>Z5(a=>{e.some(({info:i})=>i.uuid===a.info.uuid)||(e=[...e,a],t.forEach(i=>i(e,{added:[a]})))});let r=s();return{_listeners(){return t},clear(){t.forEach(a=>a([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:a}){return e.find(i=>i.info.rdns===a)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=s()},subscribe(a,{emitImmediately:i}={}){return t.add(a),i&&a(e,{added:e}),()=>t.delete(a)}}}const e$=t=>(e,s,r)=>{const a=r.subscribe;return r.subscribe=(o,l,c)=>{let d=o;if(l){const u=(c==null?void 0:c.equalityFn)||Object.is;let h=o(r.getState());d=f=>{const m=o(f);if(!u(h,m)){const x=h;l(h=m,x)}},c!=null&&c.fireImmediately&&l(h,h)}return a(d)},t(e,s,r)},t$=e$;function s$(t,e){let s;try{s=t()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=s.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>s.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>s.removeItem(a)}}const gh=t=>e=>{try{const s=t(e);return s instanceof Promise?s:{then(r){return gh(r)(s)},catch(r){return this}}}catch(s){return{then(r){return this},catch(r){return gh(r)(s)}}}},r$=(t,e)=>(s,r,a)=>{let i={storage:s$(()=>localStorage),partialize:g=>g,version:0,merge:(g,b)=>({...b,...g}),...e},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...g)},r,a);const u=()=>{const g=i.partialize({...r()});return d.setItem(i.name,{state:g,version:i.version})},h=a.setState;a.setState=(g,b)=>{h(g,b),u()};const f=t((...g)=>{s(...g),u()},r,a);a.getInitialState=()=>f;let m;const x=()=>{var g,b;if(!d)return;o=!1,l.forEach(w=>{var N;return w((N=r())!=null?N:f)});const y=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(g=r())!=null?g:f))||void 0;return gh(d.getItem.bind(d))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var N;const[S,k]=w;if(m=i.merge(k,(N=r())!=null?N:f),s(m,!0),S)return u()}).then(()=>{y==null||y(m,void 0),m=r(),o=!0,c.forEach(w=>w(m))}).catch(w=>{y==null||y(void 0,w)})};return a.persist={setOptions:g=>{i={...i,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||x(),m||f},n$=r$,lx=t=>{let e;const s=new Set,r=(d,u)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const f=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),s.forEach(m=>m(e,f))}},a=()=>e,l={setState:r,getState:a,getInitialState:()=>c,subscribe:d=>(s.add(d),()=>s.delete(d))},c=e=t(r,a,l);return l},eu=t=>t?lx(t):lx;var Gw={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,s="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(s=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,h||c,f),x=s?s+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=s?s+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,x=new Array(m);f<m;f++)x[f]=h[f].fn;return x},l.prototype.listenerCount=function(d){var u=s?s+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,m,x){var g=s?s+d:d;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,w,N;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,f),!0;case 5:return b.fn.call(b.context,u,h,f,m),!0;case 6:return b.fn.call(b.context,u,h,f,m,x),!0}for(N=1,w=new Array(y-1);N<y;N++)w[N-1]=arguments[N];b.fn.apply(b.context,w)}else{var S=b.length,k;for(N=0;N<S;N++)switch(b[N].once&&this.removeListener(d,b[N].fn,void 0,!0),y){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,u);break;case 3:b[N].fn.call(b[N].context,u,h);break;case 4:b[N].fn.call(b[N].context,u,h,f);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];b[N].fn.apply(b[N].context,w)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var m=s?s+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===u&&(!f||x.once)&&(!h||x.context===h)&&o(this,m);else{for(var g=0,b=[],y=x.length;g<y;g++)(x[g].fn!==u||f&&!x[g].once||h&&x[g].context!==h)&&b.push(x[g]);b.length?this._events[m]=b.length===1?b[0]:b:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=s?s+d:d,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,t.exports=l})(Gw);var a$=Gw.exports;const i$=ZN(a$);class o${constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new i$})}on(e,s){this._emitter.on(e,s)}once(e,s){this._emitter.once(e,s)}off(e,s){this._emitter.off(e,s)}emit(e,...s){const r=s[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function l$(t){return new o$(t)}function c$(t,e){return JSON.parse(t,(s,r)=>{let a=r;return(a==null?void 0:a.__type)==="bigint"&&(a=BigInt(a.value)),(a==null?void 0:a.__type)==="Map"&&(a=new Map(a.value)),(e==null?void 0:e(s,a))??a})}function cx(t,e){return t.slice(0,e).join(".")||"."}function dx(t,e){const{length:s}=t;for(let r=0;r<s;++r)if(t[r]===e)return r+1;return 0}function d$(t,e){const s=typeof t=="function",r=typeof e=="function",a=[],i=[];return function(l,c){if(typeof c=="object")if(a.length){const d=dx(a,this);d===0?a[a.length]=this:(a.splice(d),i.splice(d)),i[i.length]=l;const u=dx(a,c);if(u!==0)return r?e.call(this,l,c,cx(i,u)):`[ref=${cx(i,u)}]`}else a[0]=c,i[0]=l;return s?t.call(this,l,c):c}}function u$(t,e,s,r){return JSON.stringify(t,d$((a,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(a,o))??o},r),s??void 0)}function h$(t){const{deserialize:e=c$,key:s="wagmi",serialize:r=u$,storage:a=Jw}=t;function i(o){return o instanceof Promise?o.then(l=>l).catch(()=>null):o}return{...a,key:s,async getItem(o,l){const c=a.getItem(`${s}.${o}`),d=await i(c);return d?e(d)??null:l??null},async setItem(o,l){const c=`${s}.${o}`;l===null?await i(a.removeItem(c)):await i(a.setItem(c,r(l)))},async removeItem(o){await i(a.removeItem(`${s}.${o}`))}}}const Jw={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function f$(){const t=typeof window<"u"&&window.localStorage?window.localStorage:Jw;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,s){try{t.setItem(e,s)}catch{}}}}const xh=256;let dl=xh,ul;function m$(t=11){if(!ul||dl+t>xh*2){ul="",dl=0;for(let e=0;e<xh;e++)ul+=(256+Math.random()*256|0).toString(16).substring(1)}return ul.substring(dl,dl+++t)}function p$(t){const{multiInjectedProviderDiscovery:e=!0,storage:s=h$({storage:f$()}),syncConnectedChain:r=!0,ssr:a=!1,...i}=t,o=typeof window<"u"&&e?Q5():void 0,l=eu(()=>i.chains),c=eu(()=>{const k=[],j=new Set;for(const v of i.connectors??[]){const _=d(v);if(k.push(_),!a&&_.rdns){const E=typeof _.rdns=="string"?[_.rdns]:_.rdns;for(const R of E)j.add(R)}}if(!a&&o){const v=o.getProviders();for(const _ of v)j.has(_.info.rdns)||k.push(d(u(_)))}return k});function d(k){var _;const j=l$(m$()),v={...k({emitter:j,chains:l.getState(),storage:s,transports:i.transports}),emitter:j,uid:j.uid};return j.on("connect",N),(_=v.setup)==null||_.call(v),v}function u(k){const{info:j}=k,v=k.provider;return zf({target:{...j,id:j.rdns,provider:v}})}const h=new Map;function f(k={}){const j=k.chainId??b.getState().chainId,v=l.getState().find(E=>E.id===j);if(k.chainId&&!v)throw new mh;{const E=h.get(b.getState().chainId);if(E&&!v)return E;if(!v)throw new mh}{const E=h.get(j);if(E)return E}let _;if(i.client)_=i.client({chain:v});else{const E=v.id,R=l.getState().map(L=>L.id),z={},F=Object.entries(i);for(const[L,U]of F)if(!(L==="chains"||L==="client"||L==="connectors"||L==="transports"))if(typeof U=="object")if(E in U)z[L]=U[E];else{if(R.some(Y=>Y in U))continue;z[L]=U}else z[L]=U;_=K5({...z,chain:v,batch:z.batch??{multicall:!0},transport:L=>i.transports[E]({...L,connectors:c})})}return h.set(j,_),_}function m(){return{chainId:l.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let x;const g="0.0.0-canary-";El.startsWith(g)?x=Number.parseInt(El.replace(g,"")):x=Number.parseInt(El.split(".")[0]??"0");const b=eu(t$(s?n$(m,{migrate(k,j){if(j===x)return k;const v=m(),_=y(k,v.chainId);return{...v,chainId:_}},name:"store",partialize(k){return{connections:{__type:"Map",value:Array.from(k.connections.entries()).map(([j,v])=>{const{id:_,name:E,type:R,uid:z}=v.connector;return[j,{...v,connector:{id:_,name:E,type:R,uid:z}}]})},chainId:k.chainId,current:k.current}},merge(k,j){typeof k=="object"&&k&&"status"in k&&delete k.status;const v=y(k,j.chainId);return{...j,...k,chainId:v}},skipHydration:a,storage:s,version:x}):m));b.setState(m());function y(k,j){return k&&typeof k=="object"&&"chainId"in k&&typeof k.chainId=="number"&&l.getState().some(v=>v.id===k.chainId)?k.chainId:j}r&&b.subscribe(({connections:k,current:j})=>{var v;return j?(v=k.get(j))==null?void 0:v.chainId:void 0},k=>{if(l.getState().some(v=>v.id===k))return b.setState(v=>({...v,chainId:k??v.chainId}))}),o==null||o.subscribe(k=>{const j=new Set,v=new Set;for(const E of c.getState())if(j.add(E.id),E.rdns){const R=typeof E.rdns=="string"?[E.rdns]:E.rdns;for(const z of R)v.add(z)}const _=[];for(const E of k){if(v.has(E.info.rdns))continue;const R=d(u(E));j.has(R.id)||_.push(R)}s&&!b.persist.hasHydrated()||c.setState(E=>[...E,..._],!0)});function w(k){b.setState(j=>{const v=j.connections.get(k.uid);return v?{...j,connections:new Map(j.connections).set(k.uid,{accounts:k.accounts??v.accounts,chainId:k.chainId??v.chainId,connector:v.connector})}:j})}function N(k){b.getState().status==="connecting"||b.getState().status==="reconnecting"||b.setState(j=>{const v=c.getState().find(_=>_.uid===k.uid);return v?(v.emitter.listenerCount("connect")&&v.emitter.off("connect",w),v.emitter.listenerCount("change")||v.emitter.on("change",w),v.emitter.listenerCount("disconnect")||v.emitter.on("disconnect",S),{...j,connections:new Map(j.connections).set(k.uid,{accounts:k.accounts,chainId:k.chainId,connector:v}),current:k.uid,status:"connected"}):j})}function S(k){b.setState(j=>{const v=j.connections.get(k.uid);if(v){const E=v.connector;E.emitter.listenerCount("change")&&v.connector.emitter.off("change",w),E.emitter.listenerCount("disconnect")&&v.connector.emitter.off("disconnect",S),E.emitter.listenerCount("connect")||v.connector.emitter.on("connect",N)}if(j.connections.delete(k.uid),j.connections.size===0)return{...j,connections:new Map,current:null,status:"disconnected"};const _=j.connections.values().next().value;return{...j,connections:new Map(j.connections),current:_.connector.uid}})}return{get chains(){return l.getState()},get connectors(){return c.getState()},storage:s,getClient:f,get state(){return b.getState()},setState(k){let j;typeof k=="function"?j=k(b.getState()):j=k;const v=m();typeof j!="object"&&(j=v),Object.keys(v).some(E=>!(E in j))&&(j=v),b.setState(j,!0)},subscribe(k,j,v){return b.subscribe(k,j,v?{...v,fireImmediately:v.emitImmediately}:void 0)},_internal:{mipd:o,store:b,ssr:!!a,syncConnectedChain:r,transports:i.transports,chains:{setState(k){const j=typeof k=="function"?k(l.getState()):k;if(j.length!==0)return l.setState(j,!0)},subscribe(k){return l.subscribe(k)}},connectors:{providerDetailToConnector:u,setup:d,setState(k){return c.setState(typeof k=="function"?k(c.getState()):k,!0)},subscribe(k){return c.subscribe(k)}},events:{change:w,connect:N,disconnect:S}}}}function g$(t,e){const{initialState:s,reconnectOnMount:r}=e;return s&&!t._internal.store.persist.hasHydrated()&&t.setState({...s,chainId:t.chains.some(a=>a.id===s.chainId)?s.chainId:t.chains[0].id,connections:r?s.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(a=>{var c;const i=new Set;for(const d of a??[])if(d.rdns){const u=Array.isArray(d.rdns)?d.rdns:[d.rdns];for(const h of u)i.add(h)}const o=[],l=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const d of l){if(i.has(d.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(d),h=t._internal.connectors.setup(u);o.push(h)}return[...a,...o]})),r?Y5(t):t.storage&&t.setState(a=>({...a,connections:new Map}))}}}function x$(t){const{children:e,config:s,initialState:r,reconnectOnMount:a=!0}=t,{onMount:i}=g$(s,{initialState:r,reconnectOnMount:a});s._internal.ssr||i();const o=p.useRef(!0);return p.useEffect(()=>{if(o.current&&s._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const b$=p.createContext(void 0);function y$(t){const{children:e,config:s}=t,r={value:s};return p.createElement(x$,t,p.createElement(b$.Provider,r,e))}const ux=Vw({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),hx=Vw({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0}),v$=p$({chains:[ux,hx],transports:{[ux.id]:ox(),[hx.id]:ox()}}),w$=new QN,j$=()=>{try{const t=document.getElementById("root");if(!t){console.error("Root element not found");return}e1(t).render(n.jsx(cn,{children:n.jsx(y$,{config:v$,children:n.jsx(t1,{client:w$,children:n.jsx(s1,{children:n.jsx(K3,{})})})})}))}catch(t){console.error("Error rendering app:",t);const e=document.getElementById("root");e&&(e.innerHTML=`
        <div style="padding: 2rem; text-align: center; font-family: system-ui, sans-serif;">
          <h1>Render Error</h1>
          <p>Erro ao renderizar a aplicao: ${t instanceof Error?t.message:"Erro desconhecido"}</p>
          <pre style="background: #f5f5f5; padding: 1rem; border-radius: 4px; text-align: left;">
            ${t instanceof Error?t.stack:String(t)}
          </pre>
        </div>
      `)}};typeof window<"u"&&j$();
